!(function(){var tS=Object.defineProperty,eS=Object.defineProperties;var nS=Object.getOwnPropertyDescriptors;var QC=Object.getOwnPropertySymbols;var rS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable;var wC=(wt,yt,k)=>yt in wt?tS(wt,yt,{enumerable:!0,configurable:!0,writable:!0,value:k}):wt[yt]=k,ri=(wt,yt)=>{for(var k in yt||(yt={}))rS.call(yt,k)&&wC(wt,k,yt[k]);if(QC)for(var k of QC(yt))iS.call(yt,k)&&wC(wt,k,yt[k]);return wt},Fs=(wt,yt)=>eS(wt,nS(yt));var mt=(wt,yt,k)=>(wC(wt,typeof yt!="symbol"?yt+"":yt,k),k);var Je=(wt,yt,k)=>new Promise((rt,dt)=>{var H=Ct=>{try{xt(k.next(Ct))}catch(St){dt(St)}},Pt=Ct=>{try{xt(k.throw(Ct))}catch(St){dt(St)}},xt=Ct=>Ct.done?rt(Ct.value):Promise.resolve(Ct.value).then(H,Pt);xt((k=k.apply(wt,yt)).next())});(self.webpackChunksecretpad=self.webpackChunksecretpad||[]).push([[9785],{18234:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M348 676.1C250 619.4 184 513.4 184 392c0-181.1 146.9-328 328-328s328 146.9 328 328c0 121.4-66 227.4-164 284.1V792c0 17.7-14.3 32-32 32H380c-17.7 0-32-14.3-32-32V676.1zM392 888h240c4.4 0 8 3.6 8 8v32c0 17.7-14.3 32-32 32H416c-17.7 0-32-14.3-32-32v-32c0-4.4 3.6-8 8-8z"}}]},name:"bulb",theme:"filled"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},82071:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M699 353h-46.9c-10.2 0-19.9 4.9-25.9 13.3L469 584.3l-71.2-98.8c-6-8.3-15.6-13.3-25.9-13.3H325c-6.5 0-10.3 7.4-6.5 12.7l124.6 172.8a31.8 31.8 0 0051.7 0l210.6-292c3.9-5.3.1-12.7-6.4-12.7z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"check-circle",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},45377:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zM513.1 518.1l-192 161c-5.2 4.4-13.1.7-13.1-6.1v-62.7c0-2.3 1.1-4.6 2.9-6.1L420.7 512l-109.8-92.2a7.63 7.63 0 01-2.9-6.1V351c0-6.8 7.9-10.5 13.1-6.1l192 160.9c3.9 3.2 3.9 9.1 0 12.3zM716 673c0 4.4-3.4 8-7.5 8h-185c-4.1 0-7.5-3.6-7.5-8v-48c0-4.4 3.4-8 7.5-8h185c4.1 0 7.5 3.6 7.5 8v48z"}}]},name:"code",theme:"filled"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},35352:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm-40 824H232V687h97.9c11.6 32.8 32 62.3 59.1 84.7 34.5 28.5 78.2 44.3 123 44.3s88.5-15.7 123-44.3c27.1-22.4 47.5-51.9 59.1-84.7H792v-63H643.6l-5.2 24.7C626.4 708.5 573.2 752 512 752s-114.4-43.5-126.5-103.3l-5.2-24.7H232V136h560v752zM320 341h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8zm0 160h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z"}}]},name:"container",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},86767:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 64H192c-17.7 0-32 14.3-32 32v224h704V96c0-17.7-14.3-32-32-32zM288 232c-22.1 0-40-17.9-40-40s17.9-40 40-40 40 17.9 40 40-17.9 40-40 40zM160 928c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V704H160v224zm128-136c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zM160 640h704V384H160v256zm128-168c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40z"}}]},name:"database",theme:"filled"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},20243:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},12515:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 472a40 40 0 1080 0 40 40 0 10-80 0zm367 352.9L696.3 352V178H768v-68H256v68h71.7v174L145 824.9c-2.8 7.4-4.3 15.2-4.3 23.1 0 35.3 28.7 64 64 64h614.6c7.9 0 15.7-1.5 23.1-4.3 33-12.7 49.4-49.8 36.6-82.8zM395.7 364.7V180h232.6v184.7L719.2 600c-20.7-5.3-42.1-8-63.9-8-61.2 0-119.2 21.5-165.3 60a188.78 188.78 0 01-121.3 43.9c-32.7 0-64.1-8.3-91.8-23.7l118.8-307.5zM210.5 844l41.7-107.8c35.7 18.1 75.4 27.8 116.6 27.8 61.2 0 119.2-21.5 165.3-60 33.9-28.2 76.3-43.9 121.3-43.9 35 0 68.4 9.5 97.6 27.1L813.5 844h-603z"}}]},name:"experiment",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},21434:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M688 312v-48c0-4.4-3.6-8-8-8H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8zm-392 88c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm144 452H208V148h560v344c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h272c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm445.7 51.5l-93.3-93.3C814.7 780.7 828 743.9 828 704c0-97.2-78.8-176-176-176s-176 78.8-176 176 78.8 176 176 176c35.8 0 69-10.7 96.8-29l94.7 94.7c1.6 1.6 3.6 2.3 5.6 2.3s4.1-.8 5.6-2.3l31-31a7.9 7.9 0 000-11.2zM652 816c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"file-search",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},25082:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM504 618H320c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zM312 490v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H320c-4.4 0-8 3.6-8 8z"}}]},name:"file-text",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},91614:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M926 164H94c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V196c0-17.7-14.3-32-32-32zm-92.3 194.4l-297 297.2a8.03 8.03 0 01-11.3 0L410.9 541.1 238.4 713.7a8.03 8.03 0 01-11.3 0l-36.8-36.8a8.03 8.03 0 010-11.3l214.9-215c3.1-3.1 8.2-3.1 11.3 0L531 565l254.5-254.6c3.1-3.1 8.2-3.1 11.3 0l36.8 36.8c3.2 3 3.2 8.1.1 11.2z"}}]},name:"fund",theme:"filled"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},41626:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M384 912h496c17.7 0 32-14.3 32-32V340H384v572zm496-800H384v164h528V144c0-17.7-14.3-32-32-32zm-768 32v736c0 17.7 14.3 32 32 32h176V112H144c-17.7 0-32 14.3-32 32z"}}]},name:"layout",theme:"filled"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},68208:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},16910:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M868 732h-70.3c-4.8 0-9.3 2.1-12.3 5.8-7 8.5-14.5 16.7-22.4 24.5a353.84 353.84 0 01-112.7 75.9A352.8 352.8 0 01512.4 866c-47.9 0-94.3-9.4-137.9-27.8a353.84 353.84 0 01-112.7-75.9 353.28 353.28 0 01-76-112.5C167.3 606.2 158 559.9 158 512s9.4-94.2 27.8-137.8c17.8-42.1 43.4-80 76-112.5s70.5-58.1 112.7-75.9c43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 7.9 7.9 15.3 16.1 22.4 24.5 3 3.7 7.6 5.8 12.3 5.8H868c6.3 0 10.2-7 6.7-12.3C798 160.5 663.8 81.6 511.3 82 271.7 82.6 79.6 277.1 82 516.4 84.4 751.9 276.2 942 512.4 942c152.1 0 285.7-78.8 362.3-197.7 3.4-5.3-.4-12.3-6.7-12.3zm88.9-226.3L815 393.7c-5.3-4.2-13-.4-13 6.3v76H488c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h314v76c0 6.7 7.8 10.5 13 6.3l141.9-112a8 8 0 000-12.6z"}}]},name:"logout",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},97400:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M863.1 518.5H505.5V160.9c0-4.4-3.6-8-8-8h-26a398.57 398.57 0 00-282.5 117 397.47 397.47 0 00-85.6 127C82.6 446.2 72 498.5 72 552.5S82.6 658.7 103.4 708c20.1 47.5 48.9 90.3 85.6 127 36.7 36.7 79.4 65.5 127 85.6a396.64 396.64 0 00155.6 31.5 398.57 398.57 0 00282.5-117c36.7-36.7 65.5-79.4 85.6-127a396.64 396.64 0 0031.5-155.6v-26c-.1-4.4-3.7-8-8.1-8zM951 463l-2.6-28.2c-8.5-92-49.3-178.8-115.1-244.3A398.5 398.5 0 00588.4 75.6L560.1 73c-4.7-.4-8.7 3.2-8.7 7.9v383.7c0 4.4 3.6 8 8 8l383.6-1c4.7-.1 8.4-4 8-8.6z"}}]},name:"pie-chart",theme:"filled"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},36567:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M705.6 124.9a8 8 0 00-11.6 7.2v64.2c0 5.5 2.9 10.6 7.5 13.6a352.2 352.2 0 0162.2 49.8c32.7 32.8 58.4 70.9 76.3 113.3a355 355 0 0127.9 138.7c0 48.1-9.4 94.8-27.9 138.7a355.92 355.92 0 01-76.3 113.3 353.06 353.06 0 01-113.2 76.4c-43.8 18.6-90.5 28-138.5 28s-94.7-9.4-138.5-28a353.06 353.06 0 01-113.2-76.4A355.92 355.92 0 01184 650.4a355 355 0 01-27.9-138.7c0-48.1 9.4-94.8 27.9-138.7 17.9-42.4 43.6-80.5 76.3-113.3 19-19 39.8-35.6 62.2-49.8 4.7-2.9 7.5-8.1 7.5-13.6V132c0-6-6.3-9.8-11.6-7.2C178.5 195.2 82 339.3 80 506.3 77.2 745.1 272.5 943.5 511.2 944c239 .5 432.8-193.3 432.8-432.4 0-169.2-97-315.7-238.4-386.7zM480 560h64c4.4 0 8-3.6 8-8V88c0-4.4-3.6-8-8-8h-64c-4.4 0-8 3.6-8 8v464c0 4.4 3.6 8 8 8z"}}]},name:"poweroff",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},82362:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return St}});var rt=k(73268),dt=k(58757),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 01755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 003 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8zm756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 01512.1 856a342.24 342.24 0 01-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 00-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 00-8-8.2z"}}]},name:"sync",theme:"outlined"},Pt=H,xt=k(92957),Ct=function(Zt,Ut){return dt.createElement(xt.Z,(0,rt.Z)({},Zt,{ref:Ut,icon:Pt}))},St=dt.forwardRef(Ct)},62181:function(){typeof window=="object"&&window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),typeof window!="undefined"&&function(wt){wt.forEach(yt=>{Object.prototype.hasOwnProperty.call(yt,"append")||Object.defineProperty(yt,"append",{configurable:!0,enumerable:!0,writable:!0,value(...k){const rt=document.createDocumentFragment();k.forEach(dt=>{const H=dt instanceof Node;rt.appendChild(H?dt:document.createTextNode(String(dt)))}),this.appendChild(rt)}})})}([Element.prototype,Document.prototype,DocumentFragment.prototype])},78643:function(wt,yt,k){"use strict";k.d(yt,{h_:function(){return Ct},z2:function(){return Zt}});var rt=k(74458);class dt extends rt.NB{}(function(J){function Ot(Rt){const Mt=[],Nt=rt.Lu.getForeignObjectMarkup();return Rt?Mt.push({tagName:Rt,selector:"body"},Nt):Mt.push(Nt),Mt}J.config({view:"react-shape-view",markup:Ot(),attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}},propHooks(Rt){if(Rt.markup==null){const Mt=Rt.primer;if(Mt){Rt.markup=Ot(Mt);let Nt={};switch(Mt){case"circle":Nt={refCx:"50%",refCy:"50%",refR:"50%"};break;case"ellipse":Nt={refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"};break;default:break}Rt.attrs=rt.QK.merge({},{body:Object.assign({refWidth:null,refHeight:null},Nt)},Rt.attrs||{})}}return Rt}}),rt.NB.registry.register("react-shape",J,!0)})(dt||(dt={}));var H=k(58757),Pt=k(26736),xt=k(70195),Ct;(function(J){let Ot=!1,Rt;const Mt=(de,Ne)=>{const xe=Ne.payload;switch(Ne.type){case"add":{const Lt=de.findIndex(Q=>Q.id===xe.id);return Lt>=0?(de[Lt]=xe,[...de]):[...de,xe]}case"remove":{const Lt=de.findIndex(Q=>Q.id===xe.id);if(Lt>=0){const Q=[...de];return Q.splice(Lt,1),Q}break}default:break}return de};function Nt(de,Ne){Ot&&Rt({type:"add",payload:{id:de,portal:Ne}})}J.connect=Nt;function zt(de){Ot&&Rt({type:"remove",payload:{id:de}})}J.disconnect=zt;function De(){return Ot}J.isActive=De;function Fe(){return()=>{Ot=!0;const[de,Ne]=(0,H.useReducer)(Mt,[]);return Rt=Ne,H.createElement(H.Fragment,{children:de.map(xe=>xe.portal)})}}J.getProvider=Fe})(Ct||(Ct={}));var St=function(J,Ot){var Rt={};for(var Mt in J)Object.prototype.hasOwnProperty.call(J,Mt)&&Ot.indexOf(Mt)<0&&(Rt[Mt]=J[Mt]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Nt=0,Mt=Object.getOwnPropertySymbols(J);Nt<Mt.length;Nt++)Ot.indexOf(Mt[Nt])<0&&Object.prototype.propertyIsEnumerable.call(J,Mt[Nt])&&(Rt[Mt[Nt]]=J[Mt[Nt]]);return Rt};const Bt={};function Zt(J){const{shape:Ot,component:Rt,effect:Mt,inherit:Nt}=J,zt=St(J,["shape","component","effect","inherit"]);if(!Ot)throw new Error("should specify shape in config");Bt[Ot]={component:Rt,effect:Mt},rt.kJ.registerNode(Ot,Object.assign({inherit:Nt||"react-shape"},zt),!0)}class Ut extends H.PureComponent{constructor(Ot){super(Ot),this.state={tick:0}}componentDidMount(){const{node:Ot}=this.props;Ot.on("change:*",({key:Rt})=>{const Mt=Bt[Ot.shape];if(Mt){const{effect:Nt}=Mt;(!Nt||Nt.includes(Rt))&&this.setState({tick:this.state.tick+1})}})}clone(Ot){const{node:Rt,graph:Mt}=this.props;return typeof Ot.type=="string"?H.cloneElement(Ot):H.cloneElement(Ot,{node:Rt,graph:Mt})}render(){const{node:Ot}=this.props,Rt=Bt[Ot.shape];if(!Rt)return null;const{component:Mt}=Rt;if(H.isValidElement(Mt))return this.clone(Mt);const Nt=Mt;return this.clone(H.createElement(Nt,null))}}class Ft extends rt.DK{targetId(){return`${this.graph.view.cid}:${this.cell.id}`}getComponentContainer(){return this.selectors&&this.selectors.foContent}confirmUpdate(Ot){const Rt=super.confirmUpdate(Ot);return this.handleAction(Rt,Ft.action,()=>{this.renderReactComponent()})}renderReactComponent(){this.unmountReactComponent();const Ot=this.getComponentContainer(),Rt=this.cell;if(Ot){const Mt=H.createElement(Ut,{node:Rt,graph:this.graph});if(Ct.isActive()){const Nt=(0,Pt.createPortal)(Mt,Ot);Ct.connect(this.targetId(),Nt)}else this.root=(0,xt.createRoot)(Ot),this.root.render(Mt)}}unmountReactComponent(){this.getComponentContainer()&&this.root&&(this.root.unmount(),this.root=void 0)}onMouseDown(Ot,Rt,Mt){const Nt=Ot.target;if(Nt.tagName.toLowerCase()==="input"){const De=Nt.getAttribute("type");if(De==null||["text","password","number","email","search","tel","url"].includes(De))return}super.onMouseDown(Ot,Rt,Mt)}unmount(){return Ct.isActive()&&Ct.disconnect(this.targetId()),this.unmountReactComponent(),super.unmount(),this}}(function(J){J.action="react",J.config({bootstrap:[J.action],actions:{component:J.action}}),rt.DK.registry.register("react-shape-view",J,!0)})(Ft||(Ft={}))},74458:function(wt,yt,k){"use strict";k.d(yt,{ew:function(){return lr},bL:function(){return O},FE:function(){return F},mf:function(){return Pt},JT:function(){return de},is:function(){return H},Iw:function(){return dt},Z4:function(){return rn},kJ:function(){return Qn},Lu:function(){return on},tx:function(){return Po},NB:function(){return I},DK:function(){return ve},QK:function(){return rt},y$:function(){return he},Ae:function(){return Gt},G7:function(){return dn}});var rt={};k.r(rt),k.d(rt,{applyMixins:function(){return np},clone:function(){return Jc},cloneDeep:function(){return gn},createClass:function(){return ba},defaults:function(){return sh},defaultsDeep:function(){return ah},ensure:function(){return lh},flatten:function(){return sp},getBoolean:function(){return op},getByPath:function(){return xa},getNumber:function(){return aw},getValue:function(){return sw},has:function(){return uo},inherit:function(){return ip},isEmpty:function(){return li},isEqual:function(){return Xr},isMaliciousProp:function(){return ls},isObject:function(){return Q},isPlainObject:function(){return Br},merge:function(){return An},pick:function(){return Pf},setByPath:function(){return Eo},unsetByPath:function(){return uh}});var dt={};k.r(dt),k.d(dt,{apply:function(){return Lr},call:function(){return ue},debounce:function(){return io},isAsync:function(){return Hr},isAsyncLike:function(){return Vs},throttle:function(){return Si},toAsyncBoolean:function(){return Oi},toDeferredBoolean:function(){return Us}});var H={};k.r(H),k.d(H,{CASE_SENSITIVE_ATTR:function(){return Lv},Event:function(){return kn},EventHook:function(){return dr},EventObject:function(){return Pr},KAPPA:function(){return Cl},MouseWheelHandle:function(){return Qh},addClass:function(){return He},after:function(){return Rv},append:function(){return Tn},appendTo:function(){return SE},attr:function(){return nn},before:function(){return vl},breakText:function(){return _l},children:function(){return AE},circleToPathData:function(){return Hv},clearSelection:function(){return $h},computeStyle:function(){return ys},computeStyleInt:function(){return bs},contains:function(){return Uh},createElement:function(){return jh},createElementNS:function(){return gl},createSVGMatrix:function(){return _n},createSVGPoint:function(){return Zv},createSVGTransform:function(){return _s},createSlicePathData:function(){return Wv},createSvgDocument:function(){return at},createSvgElement:function(){return Rn},css:function(){return xs},data:function(){return br},decomposeMatrix:function(){return Tl},ellipseToPathData:function(){return La},empty:function(){return ps},ensureId:function(){return Aa},find:function(){return Ta},findOne:function(){return Dv},findParentByClass:function(){return Vh},getAttribute:function(){return vs},getClass:function(){return Tr},getComputedStyle:function(){return wl},getData:function(){return ws},getPointsFromSvgElement:function(){return Ra},getTransformToElement:function(){return hr},getTransformToParentElement:function(){return qv},getVendorPrefixedName:function(){return Ir},hasClass:function(){return Fi},hasScrollbars:function(){return kv},height:function(){return DE},index:function(){return pl},isCSSVariable:function(){return Bv},isElement:function(){return OE},isHTMLElement:function(){return pt},isSVGGraphicsElement:function(){return hi},kebablizeAttrs:function(){return Ao},lineToPathData:function(){return Ol},matrixToRotation:function(){return Kv},matrixToScale:function(){return Yv},matrixToTransformString:function(){return Io},matrixToTranslation:function(){return Jv},measureText:function(){return Es},mergeAttrs:function(){return yl},ns:function(){return Dn},offset:function(){return Fa},parseTransformString:function(){return Al},parseXML:function(){return mr},polygonToPathData:function(){return Zh},polylineToPathData:function(){return To},position:function(){return RE},prepend:function(){return CE},prop:function(){return Fv},qualifyAttr:function(){return Hh},rectToPathData:function(){return Yh},rectangleToPathData:function(){return Mo},remove:function(){return So},removeAttribute:function(){return ml},removeClass:function(){return vr},rotate:function(){return pi},sample:function(){return Sl},scale:function(){return Ml},setAttribute:function(){return di},setAttributes:function(){return Oo},setData:function(){return zv},setPrefixedStyle:function(){return xl},splitTextByLength:function(){return Xh},styleToObject:function(){return ms},svgVersion:function(){return fl},tagName:function(){return yr},text:function(){return Wh},toLocalPoint:function(){return qh},toPath:function(){return $v},toPathData:function(){return Kh},toggleClass:function(){return Gh},transform:function(){return gi},transformStringToMatrix:function(){return ka},translate:function(){return Vi},uniqueId:function(){return Nv},width:function(){return Qv}});var Pt={};k.r(Pt),k.d(Pt,{clean:function(){return nm},ensure:function(){return em}});var xt={};k.r(xt),k.d(xt,{dot:function(){return UE},doubleMesh:function(){return Dl},fixedDot:function(){return HE},mesh:function(){return Vr}});var Ct={};k.r(Ct),k.d(Ct,{flipX:function(){return om},flipXY:function(){return am},flipY:function(){return sm},watermark:function(){return $E}});var St={};k.r(St),k.d(St,{blur:function(){return WE},brightness:function(){return Ha},contrast:function(){return YE},dropShadow:function(){return XE},grayScale:function(){return lm},highlight:function(){return Be},hueRotate:function(){return ZE},invert:function(){return Ua},outline:function(){return cm},saturate:function(){return Rl},sepia:function(){return Do}});var Bt={};k.r(Bt),k.d(Bt,{async:function(){return Te},block:function(){return g_},circle:function(){return Fl},circlePlus:function(){return Om},classic:function(){return fd},cross:function(){return Cm},diamond:function(){return Za},ellipse:function(){return gd},path:function(){return _m}});var Zt={};k.r(Zt),k.d(Zt,{annotations:function(){return ld},atConnectionLength:function(){return bd},atConnectionLengthIgnoreGradient:function(){return Mm},atConnectionLengthKeepGradient:function(){return md},atConnectionRatio:function(){return x_},atConnectionRatioIgnoreGradient:function(){return b_},atConnectionRatioKeepGradient:function(){return yd},connection:function(){return Vl},displayEmpty:function(){return ko},eol:function(){return ud},fill:function(){return ym},filter:function(){return dd},html:function(){return f_},lineHeight:function(){return a_},port:function(){return wm},ref:function(){return JE},refCx:function(){return $a},refCy:function(){return t_},refD:function(){return e_},refDKeepOffset:function(){return pm},refDResetOffset:function(){return Wa},refDx:function(){return qE},refDy:function(){return id},refHeight:function(){return dm},refHeight2:function(){return s_},refPoints:function(){return n_},refPointsKeepOffset:function(){return vm},refPointsResetOffset:function(){return Xa},refR:function(){return sd},refRCircumscribed:function(){return QE},refRInscribed:function(){return Ll},refRx:function(){return fm},refRy:function(){return gm},refWidth:function(){return od},refWidth2:function(){return o_},refX:function(){return um},refX2:function(){return r_},refY:function(){return hm},refY2:function(){return i_},resetOffset:function(){return xm},sourceMarker:function(){return jl},stroke:function(){return bm},style:function(){return d_},targetMarker:function(){return Am},text:function(){return Ms},textPath:function(){return l_},textVerticalAnchor:function(){return c_},textWrap:function(){return cd},title:function(){return u_},vertexMarker:function(){return Tm},xAlign:function(){return h_},yAlign:function(){return kl}});var Ut={};k.r(Ut),k.d(Ut,{className:function(){return w_},opacity:function(){return E_},stroke:function(){return Nm}});var Ft={};k.r(Ft),k.d(Ft,{absolute:function(){return __},bottom:function(){return T_},ellipse:function(){return Dm},ellipseSpread:function(){return C_},left:function(){return Rm},line:function(){return O_},right:function(){return A_},top:function(){return Lm}});var J={};k.r(J),k.d(J,{bottom:function(){return N_},inside:function(){return Is},insideOriented:function(){return Ps},left:function(){return _d},manual:function(){return km},outside:function(){return D_},outsideOriented:function(){return R_},radial:function(){return L_},radialOriented:function(){return k_},right:function(){return I_},top:function(){return P_}});var Ot={};k.r(Ot),k.d(Ot,{noop:function(){return G_},pinAbsolute:function(){return U_},pinRelative:function(){return Vm}});var Rt={};k.r(Rt),k.d(Rt,{bottom:function(){return Yl},bottomLeft:function(){return K_},bottomRight:function(){return J_},center:function(){return W_},left:function(){return Kl},midSide:function(){return Wm},nodeCenter:function(){return $m},orth:function(){return q_},right:function(){return Z_},top:function(){return X_},topLeft:function(){return ir},topRight:function(){return Y_}});var Mt={};k.r(Mt),k.d(Mt,{closest:function(){return qi},length:function(){return Pd},orth:function(){return KC},ratio:function(){return YC}});var Nt={};k.r(Nt),k.d(Nt,{anchor:function(){return rC},bbox:function(){return Xm},boundary:function(){return eC},rect:function(){return Zm}});var zt={};k.r(zt),k.d(zt,{er:function(){return vC},loop:function(){return h0},manhattan:function(){return u0},metro:function(){return pC},normal:function(){return iC},oneSide:function(){return oC},orth:function(){return Jm}});var De={};k.r(De),k.d(De,{jumpover:function(){return d},loop:function(){return yC},normal:function(){return mC},rounded:function(){return nu},smooth:function(){return Go}});var Fe=k(62181);class de{get disposed(){return this._disposed===!0}dispose(){this._disposed=!0}}(function(c){function t(){return(e,i,l)=>{const h=l.value,f=e.__proto__;l.value=function(...v){this.disposed||(h.call(this,...v),f.dispose.call(this))}}}c.dispose=t})(de||(de={}));class Ne{constructor(t){this.callback=t}get disposed(){return!this.callback}dispose(){if(!this.callback)return;const t=this.callback;this.callback=null,t()}}class xe{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(t=>{t.dispose()}),this.items.clear())}contains(t){return this.items.has(t)}add(t){this.items.add(t)}remove(t){this.items.delete(t)}clear(){this.items.clear()}}(function(c){function t(e){const i=new c;return e.forEach(l=>{i.add(l)}),i}c.from=t})(xe||(xe={}));function Lt(c){var t=typeof c;return c!=null&&(t=="object"||t=="function")}var Q=Lt,bt=typeof global=="object"&&global&&global.Object===Object&&global,Ht=bt,le=typeof self=="object"&&self&&self.Object===Object&&self,qt=Ht||le||Function("return this")(),oe=qt,Re=function(){return oe.Date.now()},ye=Re,Ve=/\s/;function Ue(c){for(var t=c.length;t--&&Ve.test(c.charAt(t)););return t}var ke=Ue,Et=/^\s+/;function ht(c){return c&&c.slice(0,ke(c)+1).replace(Et,"")}var Y=ht,tt=oe.Symbol,ft=tt,ut=Object.prototype,gt=ut.hasOwnProperty,Jt=ut.toString,se=ft?ft.toStringTag:void 0;function fe(c){var t=gt.call(c,se),e=c[se];try{c[se]=void 0;var i=!0}catch(h){}var l=Jt.call(c);return i&&(t?c[se]=e:delete c[se]),l}var ge=fe,me=Object.prototype,Ye=me.toString;function we(c){return Ye.call(c)}var en=we,Ln="[object Null]",Wn="[object Undefined]",vn=ft?ft.toStringTag:void 0;function Xn(c){return c==null?c===void 0?Wn:Ln:vn&&vn in Object(c)?ge(c):en(c)}var sn=Xn;function Zn(c){return c!=null&&typeof c=="object"}var mn=Zn,au="[object Symbol]";function cu(c){return typeof c=="symbol"||mn(c)&&sn(c)==au}var Nn=cu,zn=0/0,no=/^[-+]0x[0-9a-f]+$/i,Gs=/^0b[01]+$/i,Fn=/^0o[0-7]+$/i,js=parseInt;function ze(c){if(typeof c=="number")return c;if(Nn(c))return zn;if(Q(c)){var t=typeof c.valueOf=="function"?c.valueOf():c;c=Q(t)?t+"":t}if(typeof c!="string")return c===0?c:+c;c=Y(c);var e=Gs.test(c);return e||Fn.test(c)?js(c.slice(2),e?2:8):no.test(c)?zn:+c}var yn=ze,sc="Expected a function",lu=Math.max,uu=Math.min;function ro(c,t,e){var i,l,h,f,v,y,x=0,E=!1,S=!1,_=!0;if(typeof c!="function")throw new TypeError(sc);t=yn(t)||0,Q(e)&&(E=!!e.leading,S="maxWait"in e,h=S?lu(yn(e.maxWait)||0,t):h,_="trailing"in e?!!e.trailing:_);function T(it){var At=i,jt=l;return i=l=void 0,x=it,f=c.apply(jt,At),f}function D(it){return x=it,v=setTimeout(j,t),E?T(it):f}function L(it){var At=it-y,jt=it-x,Vt=t-At;return S?uu(Vt,h-jt):Vt}function B(it){var At=it-y,jt=it-x;return y===void 0||At>=t||At<0||S&&jt>=h}function j(){var it=ye();if(B(it))return V(it);v=setTimeout(j,L(it))}function V(it){return v=void 0,_&&i?T(it):(i=l=void 0,f)}function G(){v!==void 0&&clearTimeout(v),x=0,i=y=l=v=void 0}function X(){return v===void 0?f:V(ye())}function K(){var it=ye(),At=B(it);if(i=arguments,l=this,y=it,At){if(v===void 0)return D(y);if(S)return clearTimeout(v),v=setTimeout(j,t),T(y)}return v===void 0&&(v=setTimeout(j,t)),f}return K.cancel=G,K.flush=X,K}var io=ro,Yn="Expected a function";function Er(c,t,e){var i=!0,l=!0;if(typeof c!="function")throw new TypeError(Yn);return Q(e)&&(i="leading"in e?!!e.leading:i,l="trailing"in e?!!e.trailing:l),io(c,t,{leading:i,maxWait:t,trailing:l})}var Si=Er;function Lr(c,t,e){if(e)switch(e.length){case 0:return c.call(t);case 1:return c.call(t,e[0]);case 2:return c.call(t,e[0],e[1]);case 3:return c.call(t,e[0],e[1],e[2]);case 4:return c.call(t,e[0],e[1],e[2],e[3]);case 5:return c.call(t,e[0],e[1],e[2],e[3],e[4]);case 6:return c.call(t,e[0],e[1],e[2],e[3],e[4],e[5]);default:return c.apply(t,e)}return c.call(t)}function ue(c,t,...e){return Lr(c,t,e)}function Vs(c){return typeof c=="object"&&c.then&&typeof c.then=="function"}function Hr(c){return c!=null&&(c instanceof Promise||Vs(c))}function Oi(...c){const t=[];if(c.forEach(i=>{Array.isArray(i)?t.push(...i):t.push(i)}),t.some(i=>Hr(i))){const i=t.map(l=>Hr(l)?l:Promise.resolve(l!==!1));return Promise.all(i).then(l=>l.reduce((h,f)=>f!==!1&&h,!0))}return t.every(i=>i!==!1)}function Us(...c){const t=Oi(c);return typeof t=="boolean"?Promise.resolve(t):t}function kr(c,t){const e=[];for(let i=0;i<c.length;i+=2){const l=c[i],h=c[i+1],f=Array.isArray(t)?t:[t],v=Lr(l,h,f);e.push(v)}return Oi(e)}class $r{constructor(){this.listeners={}}on(t,e,i){return e==null?this:(this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e,i),this)}once(t,e,i){const l=(...h)=>(this.off(t,l),kr([e,i],h));return this.on(t,l,this)}off(t,e,i){if(!(t||e||i))return this.listeners={},this;const l=this.listeners;return(t?[t]:Object.keys(l)).forEach(f=>{const v=l[f];if(v){if(!(e||i)){delete l[f];return}for(let y=v.length-2;y>=0;y-=2)e&&v[y]!==e||i&&v[y+1]!==i||v.splice(y,2)}}),this}trigger(t,...e){let i=!0;if(t!=="*"){const h=this.listeners[t];h!=null&&(i=kr([...h],e))}const l=this.listeners["*"];return l!=null?Oi([i,kr([...l],[t,...e])]):i}emit(t,...e){return this.trigger(t,...e)}}var oo=Object.prototype,ac=oo.hasOwnProperty;function $o(c,t){return c!=null&&ac.call(c,t)}var Wr=$o,Wo=Array.isArray,cn=Wo,so=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,er=/^\w*$/;function cc(c,t){if(cn(c))return!1;var e=typeof c;return e=="number"||e=="symbol"||e=="boolean"||c==null||Nn(c)?!0:er.test(c)||!so.test(c)||t!=null&&c in Object(t)}var Xo=cc,Hs="[object AsyncFunction]",ao="[object Function]",lc="[object GeneratorFunction]",$s="[object Proxy]";function uc(c){if(!Q(c))return!1;var t=sn(c);return t==ao||t==lc||t==Hs||t==$s}var Ai=uc,v0=oe["__core-js_shared__"],Ws=v0,Wd=function(){var c=/[^.]+$/.exec(Ws&&Ws.keys&&Ws.keys.IE_PROTO||"");return c?"Symbol(src)_1."+c:""}();function m0(c){return!!Wd&&Wd in c}var Xd=m0,y0=Function.prototype,b0=y0.toString;function x0(c){if(c!=null){try{return b0.call(c)}catch(t){}try{return c+""}catch(t){}}return""}var co=x0,w0=/[\\^$.*+?()[\]{}|]/g,hu=/^\[object .+?Constructor\]$/,du=Function.prototype,Zd=Object.prototype,E0=du.toString,nr=Zd.hasOwnProperty,_0=RegExp("^"+E0.call(nr).replace(w0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yd(c){if(!Q(c)||Xd(c))return!1;var t=Ai(c)?_0:hu;return t.test(co(c))}var hc=Yd;function C0(c,t){return c==null?void 0:c[t]}var S0=C0;function Kd(c,t){var e=S0(c,t);return hc(e)?e:void 0}var Ti=Kd,Jd=Ti(Object,"create"),Xs=Jd;function fu(){this.__data__=Xs?Xs(null):{},this.size=0}var O0=fu;function A0(c){var t=this.has(c)&&delete this.__data__[c];return this.size-=t?1:0,t}var T0=A0,M0="__lodash_hash_undefined__",I0=Object.prototype,P0=I0.hasOwnProperty;function N0(c){var t=this.__data__;if(Xs){var e=t[c];return e===M0?void 0:e}return P0.call(t,c)?t[c]:void 0}var D0=N0,R0=Object.prototype,qd=R0.hasOwnProperty;function L0(c){var t=this.__data__;return Xs?t[c]!==void 0:qd.call(t,c)}var Zo=L0,Qd="__lodash_hash_undefined__";function tf(c,t){var e=this.__data__;return this.size+=this.has(c)?0:1,e[c]=Xs&&t===void 0?Qd:t,this}var ef=tf;function lo(c){var t=-1,e=c==null?0:c.length;for(this.clear();++t<e;){var i=c[t];this.set(i[0],i[1])}}lo.prototype.clear=O0,lo.prototype.delete=T0,lo.prototype.get=D0,lo.prototype.has=Zo,lo.prototype.set=ef;var dc=lo;function nf(){this.__data__=[],this.size=0}var k0=nf;function B0(c,t){return c===t||c!==c&&t!==t}var Yo=B0;function z0(c,t){for(var e=c.length;e--;)if(Yo(c[e][0],t))return e;return-1}var Zs=z0,rf=Array.prototype,F0=rf.splice;function G0(c){var t=this.__data__,e=Zs(t,c);if(e<0)return!1;var i=t.length-1;return e==i?t.pop():F0.call(t,e,1),--this.size,!0}var of=G0;function j0(c){var t=this.__data__,e=Zs(t,c);return e<0?void 0:t[e][1]}var V0=j0;function Ys(c){return Zs(this.__data__,c)>-1}var gu=Ys;function EC(c,t){var e=this.__data__,i=Zs(e,c);return i<0?(++this.size,e.push([c,t])):e[i][1]=t,this}var sf=EC;function Ks(c){var t=-1,e=c==null?0:c.length;for(this.clear();++t<e;){var i=c[t];this.set(i[0],i[1])}}Ks.prototype.clear=k0,Ks.prototype.delete=of,Ks.prototype.get=V0,Ks.prototype.has=gu,Ks.prototype.set=sf;var Ko=Ks,U0=Ti(oe,"Map"),fc=U0;function pu(){this.size=0,this.__data__={hash:new dc,map:new(fc||Ko),string:new dc}}var _C=pu;function H0(c){var t=typeof c;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?c!=="__proto__":c===null}var $0=H0;function W0(c,t){var e=c.__data__;return $0(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Mi=W0;function CC(c){var t=Mi(this,c).delete(c);return this.size-=t?1:0,t}var SC=CC;function OC(c){return Mi(this,c).get(c)}var X0=OC;function Z0(c){return Mi(this,c).has(c)}var af=Z0;function Y0(c,t){var e=Mi(this,c),i=e.size;return e.set(c,t),this.size+=e.size==i?0:1,this}var K0=Y0;function Jo(c){var t=-1,e=c==null?0:c.length;for(this.clear();++t<e;){var i=c[t];this.set(i[0],i[1])}}Jo.prototype.clear=_C,Jo.prototype.delete=SC,Jo.prototype.get=X0,Jo.prototype.has=af,Jo.prototype.set=K0;var gc=Jo,J0="Expected a function";function vu(c,t){if(typeof c!="function"||t!=null&&typeof t!="function")throw new TypeError(J0);var e=function(){var i=arguments,l=t?t.apply(this,i):i[0],h=e.cache;if(h.has(l))return h.get(l);var f=c.apply(this,i);return e.cache=h.set(l,f)||h,f};return e.cache=new(vu.Cache||gc),e}vu.Cache=gc;var q0=vu,cf=500;function Q0(c){var t=q0(c,function(i){return e.size===cf&&e.clear(),i}),e=t.cache;return t}var ty=Q0,AC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,TC=/\\(\\)?/g,MC=ty(function(c){var t=[];return c.charCodeAt(0)===46&&t.push(""),c.replace(AC,function(e,i,l,h){t.push(l?h.replace(TC,"$1"):i||e)}),t}),IC=MC;function PC(c,t){for(var e=-1,i=c==null?0:c.length,l=Array(i);++e<i;)l[e]=t(c[e],e,c);return l}var pc=PC,ey=1/0,lf=ft?ft.prototype:void 0,uf=lf?lf.toString:void 0;function hf(c){if(typeof c=="string")return c;if(cn(c))return pc(c,hf)+"";if(Nn(c))return uf?uf.call(c):"";var t=c+"";return t=="0"&&1/c==-ey?"-0":t}var ny=hf;function mu(c){return c==null?"":ny(c)}var qo=mu;function yu(c,t){return cn(c)?c:Xo(c,t)?[c]:IC(qo(c))}var vc=yu,ry="[object Arguments]";function iy(c){return mn(c)&&sn(c)==ry}var oy=iy,bu=Object.prototype,ii=bu.hasOwnProperty,sy=bu.propertyIsEnumerable,Qo=oy(function(){return arguments}())?oy:function(c){return mn(c)&&ii.call(c,"callee")&&!sy.call(c,"callee")},ts=Qo,df=9007199254740991,ff=/^(?:0|[1-9]\d*)$/;function NC(c,t){var e=typeof c;return t=t==null?df:t,!!t&&(e=="number"||e!="symbol"&&ff.test(c))&&c>-1&&c%1==0&&c<t}var xu=NC,gf=9007199254740991;function Js(c){return typeof c=="number"&&c>-1&&c%1==0&&c<=gf}var wu=Js,ay=1/0;function pf(c){if(typeof c=="string"||Nn(c))return c;var t=c+"";return t=="0"&&1/c==-ay?"-0":t}var es=pf;function cy(c,t,e){t=vc(t,c);for(var i=-1,l=t.length,h=!1;++i<l;){var f=es(t[i]);if(!(h=c!=null&&e(c,f)))break;c=c[f]}return h||++i!=l?h:(l=c==null?0:c.length,!!l&&wu(l)&&xu(f,l)&&(cn(c)||ts(c)))}var Eu=cy;function vf(c,t){return c!=null&&Eu(c,t,Wr)}var uo=vf;function ly(c,t){t=vc(t,c);for(var e=0,i=t.length;c!=null&&e<i;)c=c[es(t[e++])];return e&&e==i?c:void 0}var mc=ly,DC=function(){try{var c=Ti(Object,"defineProperty");return c({},"",{}),c}catch(t){}}(),qs=DC;function _u(c,t,e){t=="__proto__"&&qs?qs(c,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):c[t]=e}var Qs=_u,oi=Object.prototype,RC=oi.hasOwnProperty;function mf(c,t,e){var i=c[t];(!(RC.call(c,t)&&Yo(i,e))||e===void 0&&!(t in c))&&Qs(c,t,e)}var Cu=mf;function yf(c,t,e,i){if(!Q(c))return c;t=vc(t,c);for(var l=-1,h=t.length,f=h-1,v=c;v!=null&&++l<h;){var y=es(t[l]),x=e;if(y==="__proto__"||y==="constructor"||y==="prototype")return c;if(l!=f){var E=v[y];x=i?i(E,y,v):void 0,x===void 0&&(x=Q(E)?E:xu(t[l+1])?[]:{})}Cu(v,y,x),v=v[y]}return c}var uy=yf;function bf(c,t,e){for(var i=-1,l=t.length,h={};++i<l;){var f=t[i],v=mc(c,f);e(v,f)&&uy(h,vc(f,c),v)}return h}var xf=bf;function LC(c,t){return c!=null&&t in Object(c)}var hy=LC;function dy(c,t){return c!=null&&Eu(c,t,hy)}var wf=dy;function Ef(c,t){return xf(c,t,function(e,i){return wf(c,i)})}var fy=Ef;function gy(c,t){for(var e=-1,i=t.length,l=c.length;++e<i;)c[l+e]=t[e];return c}var yc=gy,Su=ft?ft.isConcatSpreadable:void 0;function py(c){return cn(c)||ts(c)||!!(Su&&c&&c[Su])}var vy=py;function _f(c,t,e,i,l){var h=-1,f=c.length;for(e||(e=vy),l||(l=[]);++h<f;){var v=c[h];t>0&&e(v)?t>1?_f(v,t-1,e,i,l):yc(l,v):i||(l[l.length]=v)}return l}var bc=_f;function my(c){var t=c==null?0:c.length;return t?bc(c,1):[]}var Cf=my;function yy(c,t,e){switch(e.length){case 0:return c.call(t);case 1:return c.call(t,e[0]);case 2:return c.call(t,e[0],e[1]);case 3:return c.call(t,e[0],e[1],e[2])}return c.apply(t,e)}var Sf=yy,Of=Math.max;function Af(c,t,e){return t=Of(t===void 0?c.length-1:t,0),function(){for(var i=arguments,l=-1,h=Of(i.length-t,0),f=Array(h);++l<h;)f[l]=i[t+l];l=-1;for(var v=Array(t+1);++l<t;)v[l]=i[l];return v[t]=e(f),Sf(c,this,v)}}var Tf=Af;function by(c){return function(){return c}}var xy=by;function wy(c){return c}var ta=wy,Ey=qs?function(c,t){return qs(c,"toString",{configurable:!0,enumerable:!1,value:xy(t),writable:!0})}:ta,_y=Ey,Mf=800,Cy=16,Sy=Date.now;function kC(c){var t=0,e=0;return function(){var i=Sy(),l=Cy-(i-e);if(e=i,l>0){if(++t>=Mf)return arguments[0]}else t=0;return c.apply(void 0,arguments)}}var If=kC,Oy=If(_y),Ou=Oy;function Ay(c){return Ou(Tf(c,void 0,Cf),c+"")}var Ty=Ay,My=Ty(function(c,t){return c==null?{}:fy(c,t)}),Pf=My;function Nf(){this.__data__=new Ko,this.size=0}var Iy=Nf;function Au(c){var t=this.__data__,e=t.delete(c);return this.size=t.size,e}var Py=Au;function Tu(c){return this.__data__.get(c)}var Df=Tu;function Ny(c){return this.__data__.has(c)}var Dy=Ny,Ry=200;function Rf(c,t){var e=this.__data__;if(e instanceof Ko){var i=e.__data__;if(!fc||i.length<Ry-1)return i.push([c,t]),this.size=++e.size,this;e=this.__data__=new gc(i)}return e.set(c,t),this.size=e.size,this}var Mu=Rf;function ea(c){var t=this.__data__=new Ko(c);this.size=t.size}ea.prototype.clear=Iy,ea.prototype.delete=Py,ea.prototype.get=Df,ea.prototype.has=Dy,ea.prototype.set=Mu;var ho=ea;function Ly(c,t,e){(e!==void 0&&!Yo(c[t],e)||e===void 0&&!(t in c))&&Qs(c,t,e)}var Lf=Ly;function kf(c){return function(t,e,i){for(var l=-1,h=Object(t),f=i(t),v=f.length;v--;){var y=f[c?v:++l];if(e(h[y],y,h)===!1)break}return t}}var ky=kf,By=ky(),Bf=By,zy=typeof exports=="object"&&exports&&!exports.nodeType&&exports,zf=zy&&typeof module=="object"&&module&&!module.nodeType&&module,BC=zf&&zf.exports===zy,Ff=BC?oe.Buffer:void 0,Gf=Ff?Ff.allocUnsafe:void 0;function Fy(c,t){if(t)return c.slice();var e=c.length,i=Gf?Gf(e):new c.constructor(e);return c.copy(i),i}var jf=Fy,Gy=oe.Uint8Array,xc=Gy;function Vf(c){var t=new c.constructor(c.byteLength);return new xc(t).set(new xc(c)),t}var Iu=Vf;function jy(c,t){var e=t?Iu(c.buffer):c.buffer;return new c.constructor(e,c.byteOffset,c.length)}var Pu=jy;function Vy(c,t){var e=-1,i=c.length;for(t||(t=Array(i));++e<i;)t[e]=c[e];return t}var Uf=Vy,Hf=Object.create,Uy=function(){function c(){}return function(t){if(!Q(t))return{};if(Hf)return Hf(t);c.prototype=t;var e=new c;return c.prototype=void 0,e}}(),$f=Uy;function Wf(c,t){return function(e){return c(t(e))}}var wc=Wf,Hy=wc(Object.getPrototypeOf,Object),Ec=Hy,$y=Object.prototype;function Xf(c){var t=c&&c.constructor,e=typeof t=="function"&&t.prototype||$y;return c===e}var na=Xf;function Wy(c){return typeof c.constructor=="function"&&!na(c)?$f(Ec(c)):{}}var Nu=Wy;function Xy(c){return c!=null&&wu(c.length)&&!Ai(c)}var Ii=Xy;function Zf(c){return mn(c)&&Ii(c)}var _c=Zf;function Yf(){return!1}var Kf=Yf,Du=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zy=Du&&typeof module=="object"&&module&&!module.nodeType&&module,Yy=Zy&&Zy.exports===Du,Jf=Yy?oe.Buffer:void 0,Ky=Jf?Jf.isBuffer:void 0,Jy=Ky||Kf,ra=Jy,qy="[object Object]",zC=Function.prototype,Qy=Object.prototype,qf=zC.toString,tb=Qy.hasOwnProperty,eb=qf.call(Object);function nb(c){if(!mn(c)||sn(c)!=qy)return!1;var t=Ec(c);if(t===null)return!0;var e=tb.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&qf.call(e)==eb}var Br=nb,rb="[object Arguments]",Ru="[object Array]",ib="[object Boolean]",ob="[object Date]",sb="[object Error]",ab="[object Function]",Lu="[object Map]",cb="[object Number]",lb="[object Object]",ub="[object RegExp]",hb="[object Set]",db="[object String]",fb="[object WeakMap]",gb="[object ArrayBuffer]",pb="[object DataView]",vb="[object Float32Array]",mb="[object Float64Array]",yb="[object Int8Array]",bb="[object Int16Array]",xb="[object Int32Array]",ku="[object Uint8Array]",Bu="[object Uint8ClampedArray]",wb="[object Uint16Array]",Eb="[object Uint32Array]",an={};an[vb]=an[mb]=an[yb]=an[bb]=an[xb]=an[ku]=an[Bu]=an[wb]=an[Eb]=!0,an[rb]=an[Ru]=an[gb]=an[ib]=an[pb]=an[ob]=an[sb]=an[ab]=an[Lu]=an[cb]=an[lb]=an[ub]=an[hb]=an[db]=an[fb]=!1;function _b(c){return mn(c)&&wu(c.length)&&!!an[sn(c)]}var Cc=_b;function Sc(c){return function(t){return c(t)}}var ns=Sc,fo=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ia=fo&&typeof module=="object"&&module&&!module.nodeType&&module,or=ia&&ia.exports===fo,Pi=or&&Ht.process,oa=function(){try{var c=ia&&ia.require&&ia.require("util").types;return c||Pi&&Pi.binding&&Pi.binding("util")}catch(t){}}(),si=oa,sa=si&&si.isTypedArray,zu=sa?ns(sa):Cc,Oc=zu;function rs(c,t){if(!(t==="constructor"&&typeof c[t]=="function")&&t!="__proto__")return c[t]}var is=rs;function Cb(c,t,e,i){var l=!e;e||(e={});for(var h=-1,f=t.length;++h<f;){var v=t[h],y=i?i(e[v],c[v],v,e,c):void 0;y===void 0&&(y=c[v]),l?Qs(e,v,y):Cu(e,v,y)}return e}var aa=Cb;function Sb(c,t){for(var e=-1,i=Array(c);++e<c;)i[e]=t(e);return i}var Ob=Sb,Ab=Object.prototype,os=Ab.hasOwnProperty;function Ac(c,t){var e=cn(c),i=!e&&ts(c),l=!e&&!i&&ra(c),h=!e&&!i&&!l&&Oc(c),f=e||i||l||h,v=f?Ob(c.length,String):[],y=v.length;for(var x in c)(t||os.call(c,x))&&!(f&&(x=="length"||l&&(x=="offset"||x=="parent")||h&&(x=="buffer"||x=="byteLength"||x=="byteOffset")||xu(x,y)))&&v.push(x);return v}var Qf=Ac;function Tb(c){var t=[];if(c!=null)for(var e in Object(c))t.push(e);return t}var Mb=Tb,Ib=Object.prototype,tg=Ib.hasOwnProperty;function Pb(c){if(!Q(c))return Mb(c);var t=na(c),e=[];for(var i in c)i=="constructor"&&(t||!tg.call(c,i))||e.push(i);return e}var zr=Pb;function _r(c){return Ii(c)?Qf(c,!0):zr(c)}var go=_r;function Nb(c){return aa(c,go(c))}var Db=Nb;function ca(c,t,e,i,l,h,f){var v=is(c,e),y=is(t,e),x=f.get(y);if(x){Lf(c,e,x);return}var E=h?h(v,y,e+"",c,t,f):void 0,S=E===void 0;if(S){var _=cn(y),T=!_&&ra(y),D=!_&&!T&&Oc(y);E=y,_||T||D?cn(v)?E=v:_c(v)?E=Uf(v):T?(S=!1,E=jf(y,!0)):D?(S=!1,E=Pu(y,!0)):E=[]:Br(y)||ts(y)?(E=v,ts(v)?E=Db(v):(!Q(v)||Ai(v))&&(E=Nu(y))):S=!1}S&&(f.set(y,E),l(E,y,i,h,f),f.delete(y)),Lf(c,e,E)}var Rb=ca;function eg(c,t,e,i,l){c!==t&&Bf(t,function(h,f){if(l||(l=new ho),Q(h))Rb(c,t,f,e,eg,i,l);else{var v=i?i(is(c,f),h,f+"",c,t,l):void 0;v===void 0&&(v=h),Lf(c,f,v)}},go)}var Fu=eg;function ng(c,t){return Ou(Tf(c,t,ta),c+"")}var gr=ng;function ar(c,t,e){if(!Q(e))return!1;var i=typeof t;return(i=="number"?Ii(e)&&xu(t,e.length):i=="string"&&t in e)?Yo(e[t],c):!1}var la=ar;function ua(c){return gr(function(t,e){var i=-1,l=e.length,h=l>1?e[l-1]:void 0,f=l>2?e[2]:void 0;for(h=c.length>3&&typeof h=="function"?(l--,h):void 0,f&&la(e[0],e[1],f)&&(h=l<3?void 0:h,l=1),t=Object(t);++i<l;){var v=e[i];v&&c(t,v,i,h)}return t})}var Tc=ua,rg=Tc(function(c,t,e){Fu(c,t,e)}),An=rg,Lb="__lodash_hash_undefined__";function po(c){return this.__data__.set(c,Lb),this}var kb=po;function Bb(c){return this.__data__.has(c)}var zb=Bb;function Mc(c){var t=-1,e=c==null?0:c.length;for(this.__data__=new gc;++t<e;)this.add(c[t])}Mc.prototype.add=Mc.prototype.push=kb,Mc.prototype.has=zb;var Gu=Mc;function Fb(c,t){for(var e=-1,i=c==null?0:c.length;++e<i;)if(t(c[e],e,c))return!0;return!1}var Gb=Fb;function jb(c,t){return c.has(t)}var ai=jb,ha=1,da=2;function Vb(c,t,e,i,l,h){var f=e&ha,v=c.length,y=t.length;if(v!=y&&!(f&&y>v))return!1;var x=h.get(c),E=h.get(t);if(x&&E)return x==t&&E==c;var S=-1,_=!0,T=e&da?new Gu:void 0;for(h.set(c,t),h.set(t,c);++S<v;){var D=c[S],L=t[S];if(i)var B=f?i(L,D,S,t,c,h):i(D,L,S,c,t,h);if(B!==void 0){if(B)continue;_=!1;break}if(T){if(!Gb(t,function(j,V){if(!ai(T,V)&&(D===j||l(D,j,e,i,h)))return T.push(V)})){_=!1;break}}else if(!(D===L||l(D,L,e,i,h))){_=!1;break}}return h.delete(c),h.delete(t),_}var ig=Vb;function Ub(c){var t=-1,e=Array(c.size);return c.forEach(function(i,l){e[++t]=[l,i]}),e}var Hb=Ub;function $b(c){var t=-1,e=Array(c.size);return c.forEach(function(i){e[++t]=i}),e}var ju=$b,Wb=1,ss=2,og="[object Boolean]",Xb="[object Date]",Zb="[object Error]",Ic="[object Map]",Yb="[object Number]",Kb="[object RegExp]",Jb="[object Set]",qb="[object String]",as="[object Symbol]",Pc="[object ArrayBuffer]",Qb="[object DataView]",vo=ft?ft.prototype:void 0,Ni=vo?vo.valueOf:void 0;function Vu(c,t,e,i,l,h,f){switch(e){case Qb:if(c.byteLength!=t.byteLength||c.byteOffset!=t.byteOffset)return!1;c=c.buffer,t=t.buffer;case Pc:return!(c.byteLength!=t.byteLength||!h(new xc(c),new xc(t)));case og:case Xb:case Yb:return Yo(+c,+t);case Zb:return c.name==t.name&&c.message==t.message;case Kb:case qb:return c==t+"";case Ic:var v=Hb;case Jb:var y=i&Wb;if(v||(v=ju),c.size!=t.size&&!y)return!1;var x=f.get(c);if(x)return x==t;i|=ss,f.set(c,t);var E=ig(v(c),v(t),i,l,h,f);return f.delete(c),E;case as:if(Ni)return Ni.call(c)==Ni.call(t)}return!1}var Nc=Vu;function Dc(c,t,e){var i=t(c);return cn(c)?i:yc(i,e(c))}var sg=Dc;function Rc(c,t){for(var e=-1,i=c==null?0:c.length,l=0,h=[];++e<i;){var f=c[e];t(f,e,c)&&(h[l++]=f)}return h}var fa=Rc;function tx(){return[]}var Cr=tx,ag=Object.prototype,cg=ag.propertyIsEnumerable,lg=Object.getOwnPropertySymbols,ex=lg?function(c){return c==null?[]:(c=Object(c),fa(lg(c),function(t){return cg.call(c,t)}))}:Cr,Di=ex,En=wc(Object.keys,Object),nx=En,mo=Object.prototype,rx=mo.hasOwnProperty;function Lc(c){if(!na(c))return nx(c);var t=[];for(var e in Object(c))rx.call(c,e)&&e!="constructor"&&t.push(e);return t}var kc=Lc;function fn(c){return Ii(c)?Qf(c):kc(c)}var ga=fn;function Bc(c){return sg(c,ga,Di)}var Ri=Bc,ug=1,pa=Object.prototype,ix=pa.hasOwnProperty;function hg(c,t,e,i,l,h){var f=e&ug,v=Ri(c),y=v.length,x=Ri(t),E=x.length;if(y!=E&&!f)return!1;for(var S=y;S--;){var _=v[S];if(!(f?_ in t:ix.call(t,_)))return!1}var T=h.get(c),D=h.get(t);if(T&&D)return T==t&&D==c;var L=!0;h.set(c,t),h.set(t,c);for(var B=f;++S<y;){_=v[S];var j=c[_],V=t[_];if(i)var G=f?i(V,j,_,t,c,h):i(j,V,_,c,t,h);if(!(G===void 0?j===V||l(j,V,e,i,h):G)){L=!1;break}B||(B=_=="constructor")}if(L&&!B){var X=c.constructor,K=t.constructor;X!=K&&"constructor"in c&&"constructor"in t&&!(typeof X=="function"&&X instanceof X&&typeof K=="function"&&K instanceof K)&&(L=!1)}return h.delete(c),h.delete(t),L}var ox=hg,zc=Ti(oe,"DataView"),Fc=zc,sx=Ti(oe,"Promise"),Uu=sx,Hu=Ti(oe,"Set"),cr=Hu,Li=Ti(oe,"WeakMap"),$u=Li,dg="[object Map]",ax="[object Object]",fg="[object Promise]",ki="[object Set]",gg="[object WeakMap]",Wu="[object DataView]",pg=co(Fc),vg=co(fc),mg=co(Uu),cx=co(cr),yg=co($u),ci=sn;(Fc&&ci(new Fc(new ArrayBuffer(1)))!=Wu||fc&&ci(new fc)!=dg||Uu&&ci(Uu.resolve())!=fg||cr&&ci(new cr)!=ki||$u&&ci(new $u)!=gg)&&(ci=function(c){var t=sn(c),e=t==ax?c.constructor:void 0,i=e?co(e):"";if(i)switch(i){case pg:return Wu;case vg:return dg;case mg:return fg;case cx:return ki;case yg:return gg}return t});var cs=ci,Xu=1,va="[object Arguments]",Zu="[object Array]",Gc="[object Object]",bg=Object.prototype,jc=bg.hasOwnProperty;function lx(c,t,e,i,l,h){var f=cn(c),v=cn(t),y=f?Zu:cs(c),x=v?Zu:cs(t);y=y==va?Gc:y,x=x==va?Gc:x;var E=y==Gc,S=x==Gc,_=y==x;if(_&&ra(c)){if(!ra(t))return!1;f=!0,E=!1}if(_&&!E)return h||(h=new ho),f||Oc(c)?ig(c,t,e,i,l,h):Nc(c,t,y,e,i,l,h);if(!(e&Xu)){var T=E&&jc.call(c,"__wrapped__"),D=S&&jc.call(t,"__wrapped__");if(T||D){var L=T?c.value():c,B=D?t.value():t;return h||(h=new ho),l(L,B,e,i,h)}}return _?(h||(h=new ho),ox(c,t,e,i,l,h)):!1}var Yu=lx;function Vc(c,t,e,i,l){return c===t?!0:c==null||t==null||!mn(c)&&!mn(t)?c!==c&&t!==t:Yu(c,t,e,i,Vc,l)}var Bi=Vc;function Ku(c,t){return Bi(c,t)}var Xr=Ku,ux="[object Map]",hx="[object Set]",dx=Object.prototype,fx=dx.hasOwnProperty;function yo(c){if(c==null)return!0;if(Ii(c)&&(cn(c)||typeof c=="string"||typeof c.splice=="function"||ra(c)||Oc(c)||ts(c)))return!c.length;var t=cs(c);if(t==ux||t==hx)return!c.size;if(na(c))return!kc(c).length;for(var e in c)if(fx.call(c,e))return!1;return!0}var li=yo;function gx(c,t){for(var e=-1,i=c==null?0:c.length;++e<i&&t(c[e],e,c)!==!1;);return c}var px=gx;function Uc(c,t){return c&&aa(t,ga(t),c)}var Ju=Uc;function vx(c,t){return c&&aa(t,go(t),c)}var mx=vx;function yx(c,t){return aa(c,Di(c),t)}var xg=yx,wg=Object.getOwnPropertySymbols,bx=wg?function(c){for(var t=[];c;)yc(t,Di(c)),c=Ec(c);return t}:Cr,qu=bx;function xx(c,t){return aa(c,qu(c),t)}var Eg=xx;function _g(c){return sg(c,go,qu)}var Cg=_g,wx=Object.prototype,Sg=wx.hasOwnProperty;function Ex(c){var t=c.length,e=new c.constructor(t);return t&&typeof c[0]=="string"&&Sg.call(c,"index")&&(e.index=c.index,e.input=c.input),e}var _x=Ex;function Og(c,t){var e=t?Iu(c.buffer):c.buffer;return new c.constructor(e,c.byteOffset,c.byteLength)}var Cx=Og,ln=/\w*$/;function Ag(c){var t=new c.constructor(c.source,ln.exec(c));return t.lastIndex=c.lastIndex,t}var Sx=Ag,Hc=ft?ft.prototype:void 0,$c=Hc?Hc.valueOf:void 0;function Qu(c){return $c?Object($c.call(c)):{}}var Wc=Qu,bo="[object Boolean]",Tg="[object Date]",Mg="[object Map]",Ig="[object Number]",Ox="[object RegExp]",Ax="[object Set]",Tx="[object String]",Xc="[object Symbol]",Pg="[object ArrayBuffer]",Mx="[object DataView]",Ng="[object Float32Array]",Dg="[object Float64Array]",Ix="[object Int8Array]",th="[object Int16Array]",Rg="[object Int32Array]",eh="[object Uint8Array]",Px="[object Uint8ClampedArray]",Nx="[object Uint16Array]",Dx="[object Uint32Array]";function Lg(c,t,e){var i=c.constructor;switch(t){case Pg:return Iu(c);case bo:case Tg:return new i(+c);case Mx:return Cx(c,e);case Ng:case Dg:case Ix:case th:case Rg:case eh:case Px:case Nx:case Dx:return Pu(c,e);case Mg:return new i;case Ig:case Tx:return new i(c);case Ox:return Sx(c);case Ax:return new i;case Xc:return Wc(c)}}var Rx=Lg,kg="[object Map]";function Lx(c){return mn(c)&&cs(c)==kg}var Bg=Lx,zg=si&&si.isMap,Fg=zg?ns(zg):Bg,kx=Fg,xo="[object Set]";function Bx(c){return mn(c)&&cs(c)==xo}var zx=Bx,Zc=si&&si.isSet,nh=Zc?ns(Zc):zx,Fx=nh,Gx=1,jx=2,Vx=4,wo="[object Arguments]",Gg="[object Array]",jg="[object Boolean]",Ux="[object Date]",Vg="[object Error]",ma="[object Function]",ya="[object GeneratorFunction]",Yc="[object Map]",Hx="[object Number]",Ug="[object Object]",Hg="[object RegExp]",$g="[object Set]",$x="[object String]",Wg="[object Symbol]",Wx="[object WeakMap]",Xx="[object ArrayBuffer]",ui="[object DataView]",Xg="[object Float32Array]",Zx="[object Float64Array]",Yx="[object Int8Array]",Zg="[object Int16Array]",Kx="[object Int32Array]",Jx="[object Uint8Array]",Yg="[object Uint8ClampedArray]",Kg="[object Uint16Array]",Jg="[object Uint32Array]",un={};un[wo]=un[Gg]=un[Xx]=un[ui]=un[jg]=un[Ux]=un[Xg]=un[Zx]=un[Yx]=un[Zg]=un[Kx]=un[Yc]=un[Hx]=un[Ug]=un[Hg]=un[$g]=un[$x]=un[Wg]=un[Jx]=un[Yg]=un[Kg]=un[Jg]=!0,un[Vg]=un[ma]=un[Wx]=!1;function Kc(c,t,e,i,l,h){var f,v=t&Gx,y=t&jx,x=t&Vx;if(e&&(f=l?e(c,i,l,h):e(c)),f!==void 0)return f;if(!Q(c))return c;var E=cn(c);if(E){if(f=_x(c),!v)return Uf(c,f)}else{var S=cs(c),_=S==ma||S==ya;if(ra(c))return jf(c,v);if(S==Ug||S==wo||_&&!l){if(f=y||_?{}:Nu(c),!v)return y?Eg(c,mx(f,c)):xg(c,Ju(f,c))}else{if(!un[S])return l?c:{};f=Rx(c,S,v)}}h||(h=new ho);var T=h.get(c);if(T)return T;h.set(c,f),Fx(c)?c.forEach(function(B){f.add(Kc(B,t,e,B,c,h))}):kx(c)&&c.forEach(function(B,j){f.set(j,Kc(B,t,e,j,c,h))});var D=x?y?Cg:Ri:y?go:ga,L=E?void 0:D(c);return px(L||c,function(B,j){L&&(j=B,B=c[j]),Cu(f,j,Kc(B,t,e,j,c,h))}),f}var rh=Kc,qx=4;function Qx(c){return rh(c,qx)}var Jc=Qx,tw=1,ew=4;function ih(c){return rh(c,tw|ew)}var gn=ih,oh=Object.prototype,qg=oh.hasOwnProperty,Qg=gr(function(c,t){c=Object(c);var e=-1,i=t.length,l=i>2?t[2]:void 0;for(l&&la(t[0],t[1],l)&&(i=1);++e<i;)for(var h=t[e],f=go(h),v=-1,y=f.length;++v<y;){var x=f[v],E=c[x];(E===void 0||Yo(E,oh[x])&&!qg.call(c,x))&&(c[x]=h[x])}return c}),sh=Qg;function tp(c,t,e,i,l,h){return Q(c)&&Q(t)&&(h.set(t,c),Fu(c,t,void 0,tp,h),h.delete(t)),c}var nw=tp,ep=Tc(function(c,t,e,i){Fu(c,t,e,i)}),rw=ep,iw=gr(function(c){return c.push(void 0,nw),Sf(rw,void 0,c)}),ah=iw;function np(c,...t){t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(c.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i))})})}const rp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,t){c.__proto__=t}||function(c,t){for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&(c[e]=t[e])};function ip(c,t){rp(c,t);function e(){this.constructor=c}c.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}class ch{}const ow=/^\s*class\s+/.test(`${ch}`)||/^\s*class\s*\{/.test(`${class{}}`);function ba(c,t){let e;return ow?e=class extends t{}:(e=function(){return t.apply(this,arguments)},ip(e,t)),Object.defineProperty(e,"name",{value:c}),e}function lh(c,t){return c!=null?c:t}function sw(c,t,e){const i=c!=null?c[t]:null;return e!==void 0?lh(i,e):i}function aw(c,t,e){let i=c!=null?c[t]:null;return i==null||(i=+i,Number.isNaN(i)||!Number.isFinite(i))?e:i}function op(c,t,e){const i=c!=null?c[t]:null;return i==null?e:!!i}function ls(c){return c==="__proto__"}function xa(c,t,e="/"){let i;const l=Array.isArray(t)?t:t.split(e);if(l.length)for(i=c;l.length;){const h=l.shift();if(Object(i)===i&&h&&h in i)i=i[h];else return}return i}function Eo(c,t,e,i="/"){const l=Array.isArray(t)?t:t.split(i),h=l.pop();if(h&&!ls(h)){let f=c;l.forEach(v=>{ls(v)||(f[v]==null&&(f[v]={}),f=f[v])}),f[h]=e}return c}function uh(c,t,e="/"){const i=Array.isArray(t)?t.slice():t.split(e),l=i.pop();if(l)if(i.length>0){const h=xa(c,i);h&&delete h[l]}else delete c[l];return c}function sp(c,t="/",e){const i={};Object.keys(c).forEach(l=>{const h=c[l];let f=typeof h=="object"||Array.isArray(h);if(f&&e&&e(h)&&(f=!1),f){const v=sp(h,t,e);Object.keys(v).forEach(y=>{i[l+t+y]=v[y]})}else i[l]=h});for(const l in c)Object.prototype.hasOwnProperty.call(c,l);return i}var cw=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class lr extends $r{dispose(){this.off()}}cw([de.dispose()],lr.prototype,"dispose",null),function(c){c.dispose=de.dispose}(lr||(lr={})),np(lr,de);class FC extends null{get disabled(){return this._disabled===!0}enable(){delete this._disabled}disable(){this._disabled=!0}}function lw(c,t,e,i){for(var l=c.length,h=e+(i?1:-1);i?h--:++h<l;)if(t(c[h],h,c))return h;return-1}var uw=lw;function ap(c){return c!==c}var hw=ap;function dw(c,t,e){for(var i=e-1,l=c.length;++i<l;)if(c[i]===t)return i;return-1}var qc=dw;function cp(c,t,e){return t===t?qc(c,t,e):uw(c,hw,e)}var Yt=cp;function hh(c,t){var e=c==null?0:c.length;return!!e&&Yt(c,t,0)>-1}var Le=hh;function lp(c,t,e){for(var i=-1,l=c==null?0:c.length;++i<l;)if(e(t,c[i]))return!0;return!1}var dh=lp;function wa(){}var fw=wa,fh=1/0,up=cr&&1/ju(new cr([,-0]))[1]==fh?function(c){return new cr(c)}:fw,gw=up,pw=200;function vw(c,t,e){var i=-1,l=Le,h=c.length,f=!0,v=[],y=v;if(e)f=!1,l=dh;else if(h>=pw){var x=t?null:gw(c);if(x)return ju(x);f=!1,l=ai,y=new Gu}else y=t?[]:v;t:for(;++i<h;){var E=c[i],S=t?t(E):E;if(E=e||E!==0?E:0,f&&S===S){for(var _=y.length;_--;)if(y[_]===S)continue t;t&&y.push(S),v.push(E)}else l(y,S,e)||(y!==v&&y.push(S),v.push(E))}return v}var hp=vw;function dp(c){return c&&c.length?hp(c):[]}var pr=dp,fp=gr(function(c){return hp(bc(c,1,_c,!0))}),gp=fp,mw=4294967295,pp=mw-1,yw=Math.floor,bw=Math.min;function xw(c,t,e,i){var l=0,h=c==null?0:c.length;if(h===0)return 0;t=e(t);for(var f=t!==t,v=t===null,y=Nn(t),x=t===void 0;l<h;){var E=yw((l+h)/2),S=e(c[E]),_=S!==void 0,T=S===null,D=S===S,L=Nn(S);if(f)var B=i||D;else x?B=D&&(i||_):v?B=D&&_&&(i||!T):y?B=D&&_&&!T&&(i||!L):T||L?B=!1:B=i?S<=t:S<t;B?l=E+1:h=E}return bw(h,pp)}var Qc=xw,vp=4294967295,tl=vp>>>1;function mp(c,t,e){var i=0,l=c==null?i:c.length;if(typeof t=="number"&&t===t&&l<=tl){for(;i<l;){var h=i+l>>>1,f=c[h];f!==null&&!Nn(f)&&(e?f<=t:f<t)?i=h+1:l=h}return l}return Qc(c,t,ta,e)}var yp=mp;function el(c,t){return yp(c,t)}var ww=el,Fr=1,Ew=2;function Ea(c,t,e,i){var l=e.length,h=l,f=!i;if(c==null)return!h;for(c=Object(c);l--;){var v=e[l];if(f&&v[2]?v[1]!==c[v[0]]:!(v[0]in c))return!1}for(;++l<h;){v=e[l];var y=v[0],x=c[y],E=v[1];if(f&&v[2]){if(x===void 0&&!(y in c))return!1}else{var S=new ho;if(i)var _=i(x,E,y,c,t,S);if(!(_===void 0?Bi(E,x,Fr|Ew,i,S):_))return!1}}return!0}var bp=Ea;function _w(c){return c===c&&!Q(c)}var xp=_w;function Cw(c){for(var t=ga(c),e=t.length;e--;){var i=t[e],l=c[i];t[e]=[i,l,xp(l)]}return t}var Sw=Cw;function Ow(c,t){return function(e){return e==null?!1:e[c]===t&&(t!==void 0||c in Object(e))}}var wp=Ow;function Aw(c){var t=Sw(c);return t.length==1&&t[0][2]?wp(t[0][0],t[0][1]):function(e){return e===c||bp(e,c,t)}}var Tw=Aw;function Mw(c,t,e){var i=c==null?void 0:mc(c,t);return i===void 0?e:i}var nl=Mw,Iw=1,Pw=2;function Nw(c,t){return Xo(c)&&xp(t)?wp(es(c),t):function(e){var i=nl(e,c);return i===void 0&&i===t?wf(e,c):Bi(t,i,Iw|Pw)}}var Ep=Nw;function Dw(c){return function(t){return t==null?void 0:t[c]}}var Rw=Dw;function Lw(c){return function(t){return mc(t,c)}}var gh=Lw;function kw(c){return Xo(c)?Rw(es(c)):gh(c)}var Bw=kw;function ph(c){return typeof c=="function"?c:c==null?ta:typeof c=="object"?cn(c)?Ep(c[0],c[1]):Tw(c):Bw(c)}var vh=ph;function zw(c,t,e){return Qc(c,t,vh(e,2))}var _p=zw;function Fw(c,t){return c&&Bf(c,t,ga)}var Gw=Fw;function jw(c,t){return function(e,i){if(e==null)return e;if(!Ii(e))return c(e,i);for(var l=e.length,h=t?l:-1,f=Object(e);(t?h--:++h<l)&&i(f[h],h,f)!==!1;);return e}}var mh=jw,Vw=mh(Gw),Cp=Vw;function Uw(c,t){var e=-1,i=Ii(c)?Array(c.length):[];return Cp(c,function(l,h,f){i[++e]=t(l,h,f)}),i}var Hw=Uw;function Sp(c,t){var e=c.length;for(c.sort(t);e--;)c[e]=c[e].value;return c}var $w=Sp;function Ww(c,t){if(c!==t){var e=c!==void 0,i=c===null,l=c===c,h=Nn(c),f=t!==void 0,v=t===null,y=t===t,x=Nn(t);if(!v&&!x&&!h&&c>t||h&&f&&y&&!v&&!x||i&&f&&y||!e&&y||!l)return 1;if(!i&&!h&&!x&&c<t||x&&e&&l&&!i&&!h||v&&e&&l||!f&&l||!y)return-1}return 0}var Xw=Ww;function Zw(c,t,e){for(var i=-1,l=c.criteria,h=t.criteria,f=l.length,v=e.length;++i<f;){var y=Xw(l[i],h[i]);if(y){if(i>=v)return y;var x=e[i];return y*(x=="desc"?-1:1)}}return c.index-t.index}var Yw=Zw;function Kw(c,t,e){t.length?t=pc(t,function(h){return cn(h)?function(f){return mc(f,h.length===1?h[0]:h)}:h}):t=[ta];var i=-1;t=pc(t,ns(vh));var l=Hw(c,function(h,f,v){var y=pc(t,function(x){return x(h)});return{criteria:y,index:++i,value:h}});return $w(l,function(h,f){return Yw(h,f,e)})}var Jw=Kw,qw=gr(function(c,t){if(c==null)return[];var e=t.length;return e>1&&la(c,t[0],t[1])?t=[]:e>2&&la(t[0],t[1],t[2])&&(t=[t[0]]),Jw(c,bc(t,1),[])}),Qw=qw;function t1(c,t,e,i){for(var l=-1,h=c==null?0:c.length;++l<h;){var f=c[l];t(i,f,e(f),c)}return i}var e1=t1;function n1(c,t,e,i){return Cp(c,function(l,h,f){t(i,l,e(l),f)}),i}var r1=n1;function i1(c,t){return function(e,i){var l=cn(e)?e1:r1,h=t?t():{};return l(e,c,vh(i,2),h)}}var o1=i1,s1=Object.prototype,a1=s1.hasOwnProperty,c1=o1(function(c,t,e){a1.call(c,e)?c[e].push(t):Qs(c,e,[t])}),Op=c1,rl=200;function l1(c,t,e,i){var l=-1,h=Le,f=!0,v=c.length,y=[],x=t.length;if(!v)return y;e&&(t=pc(t,ns(e))),i?(h=dh,f=!1):t.length>=rl&&(h=ai,f=!1,t=new Gu(t));t:for(;++l<v;){var E=c[l],S=e==null?E:e(E);if(E=i||E!==0?E:0,f&&S===S){for(var _=x;_--;)if(t[_]===S)continue t;y.push(E)}else h(t,S,i)||y.push(E)}return y}var $=l1,u1=gr(function(c,t){return _c(c)?$(c,bc(t,1,_c,!0)):[]}),il=u1;function Ap(c,t,e){for(var i=-1,l=c.length;++i<l;){var h=c[i],f=t(h);if(f!=null&&(v===void 0?f===f&&!Nn(f):e(f,v)))var v=f,y=h}return y}var h1=Ap;function d1(c,t){return c>t}var f1=d1;function g1(c){return c&&c.length?h1(c,ta,f1):void 0}var yh=g1,bh=0;function Tp(c){var t=++bh;return qo(c)+t}var p1=Tp;function Gn(c,t,e,i){var l=-1,h=c==null?0:c.length;for(i&&h&&(e=c[++l]);++l<h;)e=t(e,c[l],l,c);return e}var Mp=Gn;function Ip(c){return function(t){return c==null?void 0:c[t]}}var Pp=Ip,Np={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Dp=Pp(Np),v1=Dp,ol=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rp="\\u0300-\\u036f",m1="\\ufe20-\\ufe2f",y1="\\u20d0-\\u20ff",b1=Rp+m1+y1,x1="["+b1+"]",w1=RegExp(x1,"g");function E1(c){return c=qo(c),c&&c.replace(ol,v1).replace(w1,"")}var _1=E1,C1=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function S1(c){return c.match(C1)||[]}var _o=S1,xh=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Lp(c){return xh.test(c)}var wh=Lp,Eh="\\ud800-\\udfff",kp="\\u0300-\\u036f",Bp="\\ufe20-\\ufe2f",zp="\\u20d0-\\u20ff",Fp=kp+Bp+zp,_h="\\u2700-\\u27bf",Gp="a-z\\xdf-\\xf6\\xf8-\\xff",O1="\\xac\\xb1\\xd7\\xf7",jp="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",A1="\\u2000-\\u206f",Vp=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ch="A-Z\\xc0-\\xd6\\xd8-\\xde",T1="\\ufe0e\\ufe0f",Sh=O1+jp+A1+Vp,Oh="['\u2019]",Ah="["+Sh+"]",Up="["+Fp+"]",sl="\\d+",Th="["+_h+"]",Hp="["+Gp+"]",$p="[^"+Eh+Sh+sl+_h+Gp+Ch+"]",M1="\\ud83c[\\udffb-\\udfff]",I1="(?:"+Up+"|"+M1+")",P1="[^"+Eh+"]",Wp="(?:\\ud83c[\\udde6-\\uddff]){2}",Mh="[\\ud800-\\udbff][\\udc00-\\udfff]",us="["+Ch+"]",N1="\\u200d",Xp="(?:"+Hp+"|"+$p+")",D1="(?:"+us+"|"+$p+")",Zp="(?:"+Oh+"(?:d|ll|m|re|s|t|ve))?",Yp="(?:"+Oh+"(?:D|LL|M|RE|S|T|VE))?",Ih=I1+"?",Kp="["+T1+"]?",Jp="(?:"+N1+"(?:"+[P1,Wp,Mh].join("|")+")"+Kp+Ih+")*",R1="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",L1="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",k1=Kp+Ih+Jp,B1="(?:"+[Th,Wp,Mh].join("|")+")"+k1,qp=RegExp([us+"?"+Hp+"+"+Zp+"(?="+[Ah,us,"$"].join("|")+")",D1+"+"+Yp+"(?="+[Ah,us+Xp,"$"].join("|")+")",us+"?"+Xp+"+"+Zp,us+"+"+Yp,L1,R1,sl,B1].join("|"),"g");function z1(c){return c.match(qp)||[]}var F1=z1;function G1(c,t,e){return c=qo(c),t=e?void 0:t,t===void 0?wh(c)?F1(c):_o(c):c.match(t)||[]}var j1=G1,V1="['\u2019]",U1=RegExp(V1,"g");function H1(c){return function(t){return Mp(j1(_1(t).replace(U1,"")),c,"")}}var al=H1;function $1(c,t,e){var i=-1,l=c.length;t<0&&(t=-t>l?0:l+t),e=e>l?l:e,e<0&&(e+=l),l=t>e?0:e-t>>>0,t>>>=0;for(var h=Array(l);++i<l;)h[i]=c[i+t];return h}var W1=$1;function zi(c,t,e){var i=c.length;return e=e===void 0?i:e,!t&&e>=i?c:W1(c,t,e)}var X1=zi,Z1="\\ud800-\\udfff",Y1="\\u0300-\\u036f",K1="\\ufe20-\\ufe2f",J1="\\u20d0-\\u20ff",q1=Y1+K1+J1,Q1="\\ufe0e\\ufe0f",tE="\\u200d",eE=RegExp("["+tE+Z1+q1+Q1+"]");function nE(c){return eE.test(c)}var cl=nE;function Ph(c){return c.split("")}var rE=Ph,Nh="\\ud800-\\udfff",iE="\\u0300-\\u036f",oE="\\ufe20-\\ufe2f",sE="\\u20d0-\\u20ff",aE=iE+oE+sE,cE="\\ufe0e\\ufe0f",lE="["+Nh+"]",Dh="["+aE+"]",ll="\\ud83c[\\udffb-\\udfff]",Qp="(?:"+Dh+"|"+ll+")",ul="[^"+Nh+"]",tv="(?:\\ud83c[\\udde6-\\uddff]){2}",ev="[\\ud800-\\udbff][\\udc00-\\udfff]",nv="\\u200d",rv=Qp+"?",_a="["+cE+"]?",iv="(?:"+nv+"(?:"+[ul,tv,ev].join("|")+")"+_a+rv+")*",ov=_a+rv+iv,sv="(?:"+[ul+Dh+"?",Dh,tv,ev,lE].join("|")+")",av=RegExp(ll+"(?="+ll+")|"+sv+ov,"g");function Rh(c){return c.match(av)||[]}var cv=Rh;function uE(c){return cl(c)?cv(c):rE(c)}var hE=uE;function lv(c){return function(t){t=qo(t);var e=cl(t)?hE(t):void 0,i=e?e[0]:t.charAt(0),l=e?X1(e,1).join(""):t.slice(1);return i[c]()+l}}var Lh=lv,uv=Lh("toUpperCase"),Ca=uv,dE=al(function(c,t,e){return c+(e?" ":"")+Ca(t)}),hv=dE;function dv(c){return Ca(qo(c).toLowerCase())}var fE=dv,gE=al(function(c,t,e){return t=t.toLowerCase(),c+(e?fE(t):t)}),Sa=gE,fv=al(function(c,t,e){return c+(e?" ":"")+t.toUpperCase()}),pE=fv,gv=al(function(c,t,e){return c+(e?" ":"")+t.toLowerCase()}),kh=gv,hl=Lh("toLowerCase"),vE=hl;const Zr=c=>{const t=Object.create(null);return e=>t[e]||(t[e]=c(e))},pv=Zr(c=>c.replace(/\B([A-Z])/g,"-$1").toLowerCase()),hs=Zr(c=>hv(Sa(c)).replace(/ /g,"")),GC=Zr(c=>pE(c).replace(/ /g,"_")),jC=Zr(c=>kh(c).replace(/ /g,".")),mE=Zr(c=>kh(c).replace(/ /g,"/")),Bh=Zr(c=>Ca(kh(c))),yE=Zr(c=>hv(Sa(c)));function zh(c){let t=2166136261,e=!1,i=c;for(let l=0,h=i.length;l<h;l+=1){let f=i.charCodeAt(l);f>127&&!e&&(i=unescape(encodeURIComponent(i)),f=i.charCodeAt(l),e=!0),t^=f,t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24)}return t>>>0}function Oa(){let c="";const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let e=0,i=t.length;e<i;e+=1){const l=t[e],h=Math.random()*16|0,f=l==="x"?h:l==="y"?h&3|8:l;c+=f.toString(16)}return c}function bE(c,t,e){const i=Math.min(2,Math.floor(c.length*.34));let l=Math.floor(c.length*.4)+1,h,f=!1;const v=c.toLowerCase();for(const y of t){const x=e(y);if(x!==void 0&&Math.abs(x.length-v.length)<=i){const E=x.toLowerCase();if(E===v){if(x===c)continue;return y}if(f||x.length<3)continue;const S=xE(v,E,l-1);if(S===void 0)continue;S<3?(f=!0,h=y):(l=S,h=y)}}return h}function xE(c,t,e){let i=new Array(t.length+1),l=new Array(t.length+1);const h=e+1;for(let v=0;v<=t.length;v+=1)i[v]=v;for(let v=1;v<=c.length;v+=1){const y=c.charCodeAt(v-1),x=v>e?v-e:1,E=t.length>e+v?e+v:t.length;l[0]=v;let S=v;for(let T=1;T<x;T+=1)l[T]=h;for(let T=x;T<=E;T+=1){const D=y===t.charCodeAt(T-1)?i[T-1]:Math.min(i[T]+1,l[T-1]+1,i[T-1]+2);l[T]=D,S=Math.min(S,D)}for(let T=E+1;T<=t.length;T+=1)l[T]=h;if(S>e)return;const _=i;i=l,l=_}const f=i[t.length];return f>e?void 0:f}var wE="[object Number]";function Gr(c){return typeof c=="number"||mn(c)&&sn(c)==wE}var Sr=Gr;function ds(c,t,e){return c===c&&(e!==void 0&&(c=c<=e?c:e),t!==void 0&&(c=c>=t?c:t)),c}var fs=ds;function EE(c,t,e){return e===void 0&&(e=t,t=void 0),e!==void 0&&(e=yn(e),e=e===e?e:0),t!==void 0&&(t=yn(t),t=t===t?t:0),fs(yn(c),t,e)}var Or=EE;function VC(c,t){return(c%t+t)%t}function _E(c,t){if(t==null)t=c==null?1:c,c=0;else if(t<c){const e=c;c=t,t=e}return Math.floor(Math.random()*(t-c+1)+c)}function Ar(c){return typeof c=="string"&&c.slice(-1)==="%"}function ur(c,t){if(c==null)return 0;let e;if(typeof c=="string"){if(e=parseFloat(c),Ar(c)&&(e/=100,Number.isFinite(e)))return e*t}else e=c;return Number.isFinite(e)?e>0&&e<1?e*t:e:0}function UC(c,t){function e(f){const v=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${f})$`).exec(c);return v?v[1]:null}const i=parseFloat(c);if(Number.isNaN(i))return null;let l;if(t==null)l="[A-Za-z]*";else if(Array.isArray(t)){if(t.length===0)return null;l=t.join("|")}else typeof t=="string"&&(l=t);const h=e(l);return h===null?null:{unit:h,value:i}}function Co(c){if(typeof c=="object"){let e=0,i=0,l=0,h=0;return c.vertical!=null&&Number.isFinite(c.vertical)&&(i=h=c.vertical),c.horizontal!=null&&Number.isFinite(c.horizontal)&&(l=e=c.horizontal),c.left!=null&&Number.isFinite(c.left)&&(e=c.left),c.top!=null&&Number.isFinite(c.top)&&(i=c.top),c.right!=null&&Number.isFinite(c.right)&&(l=c.right),c.bottom!=null&&Number.isFinite(c.bottom)&&(h=c.bottom),{top:i,right:l,bottom:h,left:e}}let t=0;return c!=null&&Number.isFinite(c)&&(t=c),{top:t,right:t,bottom:t,left:t}}let Fh=!1,vv=!1,mv=!1,yv=!1,bv=!1,xv=!1,wv=!1,Ev=!1,_v=!1,Cv=!1,Sv=!1,Ov=!1,Av=!1,Tv=!1,Mv=!1,Iv=!1;if(typeof navigator=="object"){const c=navigator.userAgent;Fh=c.indexOf("Macintosh")>=0,vv=!!c.match(/(iPad|iPhone|iPod)/g),mv=c.indexOf("Windows")>=0,yv=c.indexOf("MSIE")>=0,bv=!!c.match(/Trident\/7\./),xv=!!c.match(/Edge\//),wv=c.indexOf("Mozilla/")>=0&&c.indexOf("MSIE")<0&&c.indexOf("Edge/")<0,_v=c.indexOf("Chrome/")>=0&&c.indexOf("Edge/")<0,Cv=c.indexOf("Opera/")>=0||c.indexOf("OPR/")>=0,Sv=c.indexOf("Firefox/")>=0,Ov=c.indexOf("AppleWebKit/")>=0&&c.indexOf("Chrome/")<0&&c.indexOf("Edge/")<0,typeof document=="object"&&(Iv=!document.createElementNS||`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`!="[object SVGForeignObjectElement]"||c.indexOf("Opera/")>=0)}if(typeof window=="object"&&(Ev=window.chrome!=null&&window.chrome.app!=null&&window.chrome.app.runtime!=null,Tv=window.PointerEvent!=null&&!Fh),typeof document=="object"){Av="ontouchstart"in document.documentElement;try{const c=Object.defineProperty({},"passive",{get(){Mv=!0}}),t=document.createElement("div");t.addEventListener&&t.addEventListener("click",()=>{},c)}catch(c){}}var hn;(function(c){c.IS_MAC=Fh,c.IS_IOS=vv,c.IS_WINDOWS=mv,c.IS_IE=yv,c.IS_IE11=bv,c.IS_EDGE=xv,c.IS_NETSCAPE=wv,c.IS_CHROME_APP=Ev,c.IS_CHROME=_v,c.IS_OPERA=Cv,c.IS_FIREFOX=Sv,c.IS_SAFARI=Ov,c.SUPPORT_TOUCH=Av,c.SUPPORT_POINTER=Tv,c.SUPPORT_PASSIVE=Mv,c.NO_FOREIGNOBJECT=Iv,c.SUPPORT_FOREIGNOBJECT=!c.NO_FOREIGNOBJECT})(hn||(hn={})),function(c){function t(){const h=window.module;return h!=null&&h.hot!=null&&h.hot.status!=null?h.hot.status():"unkonwn"}c.getHMRStatus=t;function e(){return t()==="apply"}c.isApplyingHMR=e;const i={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function l(h){const f=document.createElement(i[h]||"div"),v=`on${h}`;let y=v in f;return y||(f.setAttribute(v,"return;"),y=typeof f[v]=="function"),y}c.isEventSupported=l}(hn||(hn={}));const dl=/[\t\r\n\f]/g,be=/\S+/g,gs=c=>` ${c} `;function Tr(c){return c&&c.getAttribute&&c.getAttribute("class")||""}function Fi(c,t){if(c==null||t==null)return!1;const e=gs(Tr(c)),i=gs(t);return c.nodeType===1?e.replace(dl," ").includes(i):!1}function He(c,t){if(!(c==null||t==null)){if(typeof t=="function")return He(c,t(Tr(c)));if(typeof t=="string"&&c.nodeType===1){const e=t.match(be)||[],i=gs(Tr(c)).replace(dl," ");let l=e.reduce((h,f)=>h.indexOf(gs(f))<0?`${h}${f} `:h,i);l=l.trim(),i!==l&&c.setAttribute("class",l)}}}function vr(c,t){if(c!=null){if(typeof t=="function")return vr(c,t(Tr(c)));if((!t||typeof t=="string")&&c.nodeType===1){const e=(t||"").match(be)||[],i=gs(Tr(c)).replace(dl," ");let l=e.reduce((h,f)=>{const v=gs(f);return h.indexOf(v)>-1?h.replace(v," "):h},i);l=t?l.trim():"",i!==l&&c.setAttribute("class",l)}}}function Gh(c,t,e){if(!(c==null||t==null)){if(e!=null&&typeof t=="string"){e?He(c,t):vr(c,t);return}if(typeof t=="function")return Gh(c,t(Tr(c),e),e);typeof t=="string"&&(t.match(be)||[]).forEach(l=>{Fi(c,l)?vr(c,l):He(c,l)})}}let Pv=0;function Nv(){return Pv+=1,`v${Pv}`}function Aa(c){return(c.id==null||c.id==="")&&(c.id=Nv()),c.id}function hi(c){return c==null?!1:typeof c.getScreenCTM=="function"&&c instanceof SVGElement}const Dn={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"},fl="1.1";function jh(c,t=document){return t.createElement(c)}function gl(c,t=Dn.xhtml,e=document){return e.createElementNS(t,c)}function Rn(c,t=document){return gl(c,Dn.svg,t)}function at(c){if(c){const e=`<svg xmlns="${Dn.svg}" xmlns:xlink="${Dn.xlink}" version="${fl}">${c}</svg>`,{documentElement:i}=mr(e,{async:!1});return i}const t=document.createElementNS(Dn.svg,"svg");return t.setAttributeNS(Dn.xmlns,"xmlns:xlink",Dn.xlink),t.setAttribute("version",fl),t}function mr(c,t={}){let e;try{const i=new DOMParser;if(t.async!=null){const l=i;l.async=t.async}e=i.parseFromString(c,t.mimeType||"text/xml")}catch(i){e=void 0}if(!e||e.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${c}`);return e}function yr(c,t=!0){const e=c.nodeName;return t?e.toLowerCase():e.toUpperCase()}function pl(c){let t=0,e=c.previousSibling;for(;e;)e.nodeType===1&&(t+=1),e=e.previousSibling;return t}function Ta(c,t){return c.querySelectorAll(t)}function Dv(c,t){return c.querySelector(t)}function Vh(c,t,e){const i=c.ownerSVGElement;let l=c.parentNode;for(;l&&l!==e&&l!==i;){if(Fi(l,t))return l;l=l.parentNode}return null}function Uh(c,t){const e=t&&t.parentNode;return c===e||!!(e&&e.nodeType===1&&c.compareDocumentPosition(e)&16)}function So(c){c&&(Array.isArray(c)?c:[c]).forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}function ps(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Tn(c,t){(Array.isArray(t)?t:[t]).forEach(i=>{i!=null&&c.appendChild(i)})}function CE(c,t){const e=c.firstChild;return e?vl(e,t):Tn(c,t)}function vl(c,t){const e=c.parentNode;e&&(Array.isArray(t)?t:[t]).forEach(l=>{l!=null&&e.insertBefore(l,c)})}function Rv(c,t){const e=c.parentNode;e&&(Array.isArray(t)?t:[t]).forEach(l=>{l!=null&&e.insertBefore(l,c.nextSibling)})}function SE(c,t){t!=null&&t.appendChild(c)}function OE(c){return!!c&&c.nodeType===1}function pt(c){try{return c instanceof HTMLElement}catch(t){return typeof c=="object"&&c.nodeType===1&&typeof c.style=="object"&&typeof c.ownerDocument=="object"}}function AE(c,t){const e=[];let i=c.firstChild;for(;i;i=i.nextSibling)i.nodeType===1&&(!t||Fi(i,t))&&e.push(i);return e}const Lv=["viewBox","attributeName","attributeType","repeatCount","textLength","lengthAdjust","gradientUnits"];function vs(c,t){return c.getAttribute(t)}function ml(c,t){const e=Hh(t);e.ns?c.hasAttributeNS(e.ns,e.local)&&c.removeAttributeNS(e.ns,e.local):c.hasAttribute(t)&&c.removeAttribute(t)}function di(c,t,e){if(e==null)return ml(c,t);const i=Hh(t);i.ns&&typeof e=="string"?c.setAttributeNS(i.ns,t,e):t==="id"?c.id=`${e}`:c.setAttribute(t,`${e}`)}function Oo(c,t){Object.keys(t).forEach(e=>{di(c,e,t[e])})}function nn(c,t,e){if(t==null){const i=c.attributes,l={};for(let h=0;h<i.length;h+=1)l[i[h].name]=i[h].value;return l}if(typeof t=="string"&&e===void 0)return c.getAttribute(t);typeof t=="object"?Oo(c,t):di(c,t,e)}function Hh(c){if(c.indexOf(":")!==-1){const t=c.split(":");return{ns:Dn[t[0]],local:t[1]}}return{ns:null,local:c}}function Ao(c){const t={};return Object.keys(c).forEach(e=>{const i=Lv.includes(e)?e:pv(e);t[i]=c[e]}),t}function ms(c){const t={};return c.split(";").forEach(i=>{const l=i.trim();if(l){const h=l.split("=");h.length&&(t[h[0].trim()]=h[1]?h[1].trim():"")}}),t}function yl(c,t){return Object.keys(t).forEach(e=>{if(e==="class")c[e]=c[e]?`${c[e]} ${t[e]}`:t[e];else if(e==="style"){const i=typeof c[e]=="object",l=typeof t[e]=="object";let h,f;i&&l?(h=c[e],f=t[e]):i?(h=c[e],f=ms(t[e])):l?(h=ms(c[e]),f=t[e]):(h=ms(c[e]),f=ms(t[e])),c[e]=yl(h,f)}else c[e]=t[e]}),c}function TE(c,t,e={}){const i=e.offset||0,l=[],h=[];let f,v,y=null;for(let x=0;x<c.length;x+=1){f=h[x]=c[x];for(let E=0,S=t.length;E<S;E+=1){const _=t[E],T=_.start+i,D=_.end+i;x>=T&&x<D&&(typeof f=="string"?f=h[x]={t:c[x],attrs:_.attrs}:f.attrs=yl(yl({},f.attrs),_.attrs),e.includeAnnotationIndices&&(f.annotations==null&&(f.annotations=[]),f.annotations.push(E)))}v=h[x-1],v?Q(f)&&Q(v)?(y=y,JSON.stringify(f.attrs)===JSON.stringify(v.attrs)?y.t+=f.t:(l.push(y),y=f)):Q(f)||Q(v)?(y=y,l.push(y),y=f):y=(y||"")+f:y=f}return y!=null&&l.push(y),l}function HC(c,t){return c?c.filter(e=>e.start<t&&t<=e.end):[]}function $C(c,t,e){return c?c.filter(i=>t>=i.start&&t<i.end||e>i.start&&e<=i.end||i.start>=t&&i.end<e):[]}function Gi(c,t,e){return c&&c.forEach(i=>{i.start<t&&i.end>=t?i.end+=e:i.start>=t&&(i.start+=e,i.end+=e)}),c}function Ma(c){return c.replace(/ /g,"\xA0")}var Yr;(function(c){function t(x){const E="data:";return x.substr(0,E.length)===E}c.isDataUrl=t;function e(x,E){if(!x||t(x)){setTimeout(()=>E(null,x));return}const S=()=>{E(new Error(`Failed to load image: ${x}`))},_=window.FileReader?D=>{if(D.status===200){const L=new FileReader;L.onload=B=>{const j=B.target.result;E(null,j)},L.onerror=S,L.readAsDataURL(D.response)}else S()}:D=>{const L=B=>{const V=[];for(let G=0;G<B.length;G+=32768)V.push(String.fromCharCode.apply(null,B.subarray(G,G+32768)));return V.join("")};if(D.status===200){let B=x.split(".").pop()||"png";B==="svg"&&(B="svg+xml");const j=`data:image/${B};base64,`,V=new Uint8Array(D.response),G=j+btoa(L(V));E(null,G)}else S()},T=new XMLHttpRequest;T.responseType=window.FileReader?"blob":"arraybuffer",T.open("GET",x,!0),T.addEventListener("error",S),T.addEventListener("load",()=>_(T)),T.send()}c.imageToDataUri=e;function i(x){let E=x.replace(/\s/g,"");E=decodeURIComponent(E);const S=E.indexOf(","),_=E.slice(0,S),T=_.split(":")[1].split(";")[0],D=E.slice(S+1);let L;_.indexOf("base64")>=0?L=atob(D):L=unescape(encodeURIComponent(D));const B=new Uint8Array(L.length);for(let j=0;j<L.length;j+=1)B[j]=L.charCodeAt(j);return new Blob([B],{type:T})}c.dataUriToBlob=i;function l(x,E){const S=window.navigator.msSaveBlob;if(S)S(x,E);else{const _=window.URL.createObjectURL(x),T=document.createElement("a");T.href=_,T.download=E,document.body.appendChild(T),T.click(),document.body.removeChild(T),window.URL.revokeObjectURL(_)}}c.downloadBlob=l;function h(x,E){const S=i(x);l(S,E)}c.downloadDataUri=h;function f(x){const E=x.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return E&&E[2]?E[2].replace(/\s+/," ").split(" "):null}function v(x){const E=parseFloat(x);return Number.isNaN(E)?null:E}function y(x,E={}){let S=null;const _=G=>(S==null&&(S=f(x)),S!=null?v(S[G]):null),T=G=>{const X=x.match(G);return X&&X[2]?v(X[2]):null};let D=E.width;if(D==null&&(D=T(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),D==null&&(D=_(2)),D==null)throw new Error("Can not parse width from svg string");let L=E.height;if(L==null&&(L=T(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),L==null&&(L=_(3)),L==null)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(x).replace(/'/g,"%27").replace(/"/g,"%22")}`}c.svgToDataUrl=y})(Yr||(Yr={}));let jn;const Ia={px(c){return c},mm(c){return jn*c},cm(c){return jn*c*10},in(c){return jn*c*25.4},pt(c){return jn*(25.4*c/72)},pc(c){return jn*(25.4*c/6)}};var fi;(function(c){function t(i,l,h){const f=document.createElement("div"),v=f.style;v.display="inline-block",v.position="absolute",v.left="-15000px",v.top="-15000px",v.width=i+(h||"px"),v.height=l+(h||"px"),document.body.appendChild(f);const y=f.getBoundingClientRect(),x={width:y.width||0,height:y.height||0};return document.body.removeChild(f),x}c.measure=t;function e(i,l){jn==null&&(jn=t("1","1","mm").width);const h=l?Ia[l]:null;return h?h(i):i}c.toPx=e})(fi||(fi={}));const Pa=/-(.)/g;function bl(c){return c.replace(Pa,(t,e)=>e.toUpperCase())}const Mr={},ji=["webkit","ms","moz","o"],Vn=typeof document!="undefined"?document.createElement("div").style:{};function Kr(c){for(let t=0;t<ji.length;t+=1){const e=ji[t]+c;if(e in Vn)return e}return null}function Ir(c){const t=bl(c);if(Mr[t]==null){const e=t.charAt(0).toUpperCase()+t.slice(1);Mr[t]=t in Vn?t:Kr(e)}return Mr[t]}function xl(c,t,e){const i=Ir(t);i!=null&&(c[i]=e),c[t]=e}function wl(c,t){const e=c.ownerDocument&&c.ownerDocument.defaultView&&c.ownerDocument.defaultView.opener?c.ownerDocument.defaultView.getComputedStyle(c,null):window.getComputedStyle(c,null);return e&&t?e.getPropertyValue(t)||e[t]:e}function kv(c){const t=wl(c);return t!=null&&(t.overflow==="scroll"||t.overflow==="auto")}const $h=function(){if(typeof document=="undefined")return function(){};const c=document;return c.selection?function(){c.selection.empty()}:window.getSelection?function(){const t=window.getSelection();t&&(t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges())}:function(){}}(),ME={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Bv(c){return/^--/.test(c)}function ys(c,t,e){const i=window.getComputedStyle(c,null);return e?i.getPropertyValue(t)||void 0:i[t]||c.style[t]}function bs(c,t){return parseInt(ys(c,t),10)||0}function IE(c,t){return!ME[c]&&typeof t=="number"?`${t}px`:t}function xs(c,t,e){if(typeof t=="string"){const i=Bv(t);if(i||(t=Ir(t)),e===void 0)return ys(c,t,i);i||(e=IE(t,e));const l=c.style;i?l.setProperty(t,e):l[t]=e;return}for(const i in t)xs(c,i,t[i])}const Na=new WeakMap;function ws(c,t){const e=Sa(t),i=Na.get(c);if(i)return i[e]}function zv(c,t,e){const i=Sa(t),l=Na.get(c);l?l[i]=e:Na.set(c,{[i]:e})}function br(c,t,e){if(!t){const i={};return Object.keys(Na).forEach(l=>{i[l]=ws(c,l)}),i}if(typeof t=="string"){if(e===void 0)return ws(c,t);zv(c,t,e);return}for(const i in t)br(c,i,t[i])}const PE={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};function Fv(c,t,e){if(t){if(typeof t=="string"){if(t=PE[t]||t,arguments.length<3)return c[t];c[t]=e;return}for(const i in t)Fv(c,i,t[i])}}class Ee{get[Symbol.toStringTag](){return Ee.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(t){this.node.id=t}constructor(t,e,i){if(!t)throw new TypeError("Invalid element to create vector");let l;if(Ee.isVector(t))l=t.node;else if(typeof t=="string")if(t.toLowerCase()==="svg")l=at();else if(t[0]==="<"){const h=at(t);l=document.importNode(h.firstChild,!0)}else l=document.createElementNS(Dn.svg,t);else l=t;this.node=l,e&&this.setAttributes(e),i&&this.append(i)}transform(t,e){return t==null?gi(this.node):(gi(this.node,t,e),this)}translate(t,e=0,i={}){return t==null?Vi(this.node):(Vi(this.node,t,e,i),this)}rotate(t,e,i,l={}){return t==null?pi(this.node):(pi(this.node,t,e,i,l),this)}scale(t,e){return t==null?Ml(this.node):(Ml(this.node,t,e),this)}getTransformToElement(t){const e=Ee.toNode(t);return hr(this.node,e)}removeAttribute(t){return ml(this.node,t),this}getAttribute(t){return vs(this.node,t)}setAttribute(t,e){return di(this.node,t,e),this}setAttributes(t){return Oo(this.node,t),this}attr(t,e){return t==null?nn(this.node):typeof t=="string"&&e===void 0?nn(this.node,t):(typeof t=="object"?nn(this.node,t):nn(this.node,t,e),this)}svg(){return this.node instanceof SVGSVGElement?this:Ee.create(this.node.ownerSVGElement)}defs(){const t=this.svg()||this,e=t.node.getElementsByTagName("defs")[0];return e?Ee.create(e):Ee.create("defs").appendTo(t)}text(t,e={}){return Wh(this.node,t,e),this}tagName(){return yr(this.node)}clone(){return Ee.create(this.node.cloneNode(!0))}remove(){return So(this.node),this}empty(){return ps(this.node),this}append(t){return Tn(this.node,Ee.toNodes(t)),this}appendTo(t){return SE(this.node,Ee.isVector(t)?t.node:t),this}prepend(t){return CE(this.node,Ee.toNodes(t)),this}before(t){return vl(this.node,Ee.toNodes(t)),this}replace(t){return this.node.parentNode&&this.node.parentNode.replaceChild(Ee.toNode(t),this.node),Ee.create(t)}first(){return this.node.firstChild?Ee.create(this.node.firstChild):null}last(){return this.node.lastChild?Ee.create(this.node.lastChild):null}get(t){const e=this.node.childNodes[t];return e?Ee.create(e):null}indexOf(t){return Array.prototype.slice.call(this.node.childNodes).indexOf(Ee.toNode(t))}find(t){const e=[],i=Ta(this.node,t);if(i)for(let l=0,h=i.length;l<h;l+=1)e.push(Ee.create(i[l]));return e}findOne(t){const e=Dv(this.node,t);return e?Ee.create(e):null}findParentByClass(t,e){const i=Vh(this.node,t,e);return i?Ee.create(i):null}matches(t){const e=this.node,i=this.node.matches,l=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector||null;return l&&l.call(e,t)}contains(t){return Uh(this.node,Ee.isVector(t)?t.node:t)}wrap(t){const e=Ee.create(t),i=this.node.parentNode;return i!=null&&i.insertBefore(e.node,this.node),e.append(this)}parent(t){let e=this;if(e.node.parentNode==null)return null;if(e=Ee.create(e.node.parentNode),t==null)return e;do if(typeof t=="string"?e.matches(t):e instanceof t)return e;while(e=Ee.create(e.node.parentNode));return e}children(){const t=this.node.childNodes,e=[];for(let i=0;i<t.length;i+=1)t[i].nodeType===1&&e.push(Ee.create(t[i]));return e}eachChild(t,e){const i=this.children();for(let l=0,h=i.length;l<h;l+=1)t.call(i[l],i[l],l,i),e&&i[l].eachChild(t,e);return this}index(){return pl(this.node)}hasClass(t){return Fi(this.node,t)}addClass(t){return He(this.node,t),this}removeClass(t){return vr(this.node,t),this}toggleClass(t,e){return Gh(this.node,t,e),this}toLocalPoint(t,e){return qh(this.node,t,e)}sample(t=1){return this.node instanceof SVGPathElement?Sl(this.node,t):[]}toPath(){return Ee.create($v(this.node))}toPathData(){return Kh(this.node)}}(function(c){c.toStringTag=`X6.${c.name}`;function t(f){if(f==null)return!1;if(f instanceof c)return!0;const v=f[Symbol.toStringTag],y=f;return(v==null||v===c.toStringTag)&&y.node instanceof SVGElement&&typeof y.sample=="function"&&typeof y.toPath=="function"}c.isVector=t;function e(f,v,y){return new c(f,v,y)}c.create=e;function i(f){if(f[0]==="<"){const v=at(f),y=[];for(let x=0,E=v.childNodes.length;x<E;x+=1){const S=v.childNodes[x];y.push(e(document.importNode(S,!0)))}return y}return[e(f)]}c.createVectors=i;function l(f){return t(f)?f.node:f}c.toNode=l;function h(f){return Array.isArray(f)?f.map(v=>l(v)):[l(f)]}c.toNodes=h})(Ee||(Ee={}));function Gv(c,t){const e=Ee.create(t),i=Ee.create("textPath"),l=c.d;if(l&&c["xlink:href"]===void 0){const h=Ee.create("path").attr("d",l).appendTo(e.defs());i.attr("xlink:href",`#${h.id}`)}return typeof c=="object"&&i.attr(c),i.node}function jv(c,t,e){const i=e.eol,l=e.baseSize,h=e.lineHeight;let f=0,v;const y={},x=t.length-1;for(let E=0;E<=x;E+=1){let S=t[E],_=null;if(typeof S=="object"){const T=S.attrs,D=Ee.create("tspan",T);v=D.node;let L=S.t;i&&E===x&&(L+=i),v.textContent=L;const B=T.class;B&&D.addClass(B),e.includeAnnotationIndices&&D.attr("annotations",S.annotations.join(",")),_=parseFloat(T["font-size"]),_===void 0&&(_=l),_&&_>f&&(f=_)}else i&&E===x&&(S+=i),v=document.createTextNode(S||" "),l&&l>f&&(f=l);c.appendChild(v)}return f&&(y.maxFontSize=f),h?y.lineHeight=h:f&&(y.lineHeight=f*1.2),y}const Vv=/em$/;function Da(c,t){const e=parseFloat(c);return Vv.test(c)?e*t:e}function El(c,t,e,i){if(!Array.isArray(t))return 0;const l=t.length;if(!l)return 0;let h=t[0];const f=Da(h.maxFontSize,e)||e;let v=0;const y=Da(i,e);for(let S=1;S<l;S+=1){h=t[S];const _=Da(h.lineHeight,e)||y;v+=_}const x=Da(h.maxFontSize,e)||e;let E;switch(c){case"middle":E=f/2-.15*x-v/2;break;case"bottom":E=-(.25*x)-v;break;case"top":default:E=.8*f;break}return E}function Wh(c,t,e={}){t=Ma(t);const i=e.eol;let l=e.textPath;const h=e.textVerticalAnchor,f=h==="middle"||h==="bottom"||h==="top";let v=e.x;v===void 0&&(v=c.getAttribute("x")||0);const y=e.includeAnnotationIndices;let x=e.annotations;x&&!Array.isArray(x)&&(x=[x]);const E=e.lineHeight,S=E==="auto",_=S?"1.5em":E||"1em";let T=!0;const D=c.childNodes;if(D.length===1){const Vt=D[0];Vt&&Vt.tagName.toUpperCase()==="TITLE"&&(T=!1)}T&&ps(c),nn(c,{"xml:space":"preserve",display:t||e.displayEmpty?null:"none"});const L=nn(c,"font-size");let B=parseFloat(L);B||(B=16,(f||x)&&!L&&nn(c,"font-size",`${B}`));let j;l?(typeof l=="string"&&(l={d:l}),j=Gv(l,c)):j=document.createDocumentFragment();let V,G=0,X;const K=t.split(`
`),it=[],At=K.length-1;for(let Vt=0;Vt<=At;Vt+=1){V=_;let ie="v-line";const Kt=Rn("tspan");let ce,pn=K[Vt];if(pn)if(x){const je=TE(pn,x,{offset:-G,includeAnnotationIndices:y});ce=jv(Kt,je,{eol:Vt!==At&&i,baseSize:B,lineHeight:S?null:_,includeAnnotationIndices:y});const lt=ce.lineHeight;lt&&S&&Vt!==0&&(V=lt),Vt===0&&(X=ce.maxFontSize*.8)}else i&&Vt!==At&&(pn+=i),Kt.textContent=pn;else{Kt.textContent="-",ie+=" v-empty-line";const je=Kt.style;je.fillOpacity=0,je.strokeOpacity=0,x&&(ce={})}ce&&it.push(ce),Vt>0&&Kt.setAttribute("dy",V),(Vt>0||l)&&Kt.setAttribute("x",v),Kt.className.baseVal=ie,j.appendChild(Kt),G+=pn.length+1}if(f)if(x)V=El(h,it,B,_);else if(h==="top")V="0.8em";else{let Vt;switch(At>0?(Vt=parseFloat(_)||1,Vt*=At,Vv.test(_)||(Vt/=B)):Vt=0,h){case"middle":V=`${.3-Vt/2}em`;break;case"bottom":V=`${-Vt-.3}em`;break;default:break}}else h===0?V="0em":h?V=h:(V=0,c.getAttribute("y")==null&&c.setAttribute("y",`${X||"0.8em"}`));j.firstChild.setAttribute("dy",V),c.appendChild(j)}function Es(c,t={}){const e=document.createElement("canvas").getContext("2d");if(!c)return{width:0};const i=[],l=t["font-size"]?`${parseFloat(t["font-size"])}px`:"14px";return i.push(t["font-style"]||"normal"),i.push(t["font-variant"]||"normal"),i.push(t["font-weight"]||400),i.push(l),i.push(t["font-family"]||"sans-serif"),e.font=i.join(" "),e.measureText(c)}function Xh(c,t,e,i={}){if(t>=e)return[c,""];const l=c.length,h={};let f=Math.round(t/e*l-1);for(f<0&&(f=0);f>=0&&f<l;){const v=c.slice(0,f),y=h[v]||Es(v,i).width,x=c.slice(0,f+1),E=h[x]||Es(x,i).width;if(h[v]=y,h[x]=E,y>t)f-=1;else if(E<=t)f+=1;else break}return[c.slice(0,f),c.slice(f)]}function _l(c,t,e={},i={}){const l=t.width,h=t.height,f=i.eol||`
`,v=e.fontSize||14,y=e.lineHeight?parseFloat(e.lineHeight):Math.ceil(v*1.4),x=Math.floor(h/y);if(c.indexOf(f)>-1){const B=Oa(),j=[];return c.split(f).map(V=>{const G=_l(V,Object.assign(Object.assign({},t),{height:Number.MAX_SAFE_INTEGER}),e,Object.assign(Object.assign({},i),{eol:B}));G&&j.push(...G.split(B))}),j.slice(0,x).join(f)}const{width:E}=Es(c,e);if(E<l)return c;const S=[];let _=c,T=E,D=i.ellipsis,L=0;D&&(typeof D!="string"&&(D="\u2026"),L=Es(D,e).width);for(let B=0;B<x;B+=1)if(T>l)if(B===x-1){const[V]=Xh(_,l-L,T,e);S.push(D?`${V}${D}`:V)}else{const[V,G]=Xh(_,l,T,e);S.push(V),_=G,T=Es(_,e).width}else{S.push(_);break}return S.join(f)}const Cl=.551784;function Kn(c,t,e=NaN){const i=c.getAttribute(t);if(i==null)return e;const l=parseFloat(i);return Number.isNaN(l)?e:l}function Sl(c,t=1){const e=c.getTotalLength(),i=[];let l=0,h;for(;l<e;)h=c.getPointAtLength(l),i.push({distance:l,x:h.x,y:h.y}),l+=t;return i}function Ol(c){return["M",Kn(c,"x1"),Kn(c,"y1"),"L",Kn(c,"x2"),Kn(c,"y2")].join(" ")}function Zh(c){const t=Ra(c);return t.length===0?null:`${Uv(t)} Z`}function To(c){const t=Ra(c);return t.length===0?null:Uv(t)}function Uv(c){return`M ${c.map(e=>`${e.x} ${e.y}`).join(" L")}`}function Ra(c){const t=[],e=c.points;if(e)for(let i=0,l=e.numberOfItems;i<l;i+=1)t.push(e.getItem(i));return t}function Hv(c){const t=Kn(c,"cx",0),e=Kn(c,"cy",0),i=Kn(c,"r"),l=i*Cl;return["M",t,e-i,"C",t+l,e-i,t+i,e-l,t+i,e,"C",t+i,e+l,t+l,e+i,t,e+i,"C",t-l,e+i,t-i,e+l,t-i,e,"C",t-i,e-l,t-l,e-i,t,e-i,"Z"].join(" ")}function La(c){const t=Kn(c,"cx",0),e=Kn(c,"cy",0),i=Kn(c,"rx"),l=Kn(c,"ry")||i,h=i*Cl,f=l*Cl;return["M",t,e-l,"C",t+h,e-l,t+i,e-f,t+i,e,"C",t+i,e+f,t+h,e+l,t,e+l,"C",t-h,e+l,t-i,e+f,t-i,e,"C",t-i,e-f,t-h,e-l,t,e-l,"Z"].join(" ")}function Mo(c){return Yh({x:Kn(c,"x",0),y:Kn(c,"y",0),width:Kn(c,"width",0),height:Kn(c,"height",0),rx:Kn(c,"rx",0),ry:Kn(c,"ry",0)})}function Yh(c){let t;const e=c.x,i=c.y,l=c.width,h=c.height,f=Math.min(c.rx||c["top-rx"]||0,l/2),v=Math.min(c.rx||c["bottom-rx"]||0,l/2),y=Math.min(c.ry||c["top-ry"]||0,h/2),x=Math.min(c.ry||c["bottom-ry"]||0,h/2);return f||v||y||x?t=["M",e,i+y,"v",h-y-x,"a",v,x,0,0,0,v,x,"h",l-2*v,"a",v,x,0,0,0,v,-x,"v",-(h-x-y),"a",f,y,0,0,0,-f,-y,"h",-(l-2*f),"a",f,y,0,0,0,-f,y,"Z"]:t=["M",e,i,"H",e+l,"V",i+h,"H",e,"V",i,"Z"],t.join(" ")}function $v(c){const t=Rn("path");nn(t,nn(c));const e=Kh(c);return e&&t.setAttribute("d",e),t}function Kh(c){const t=c.tagName.toLowerCase();switch(t){case"path":return c.getAttribute("d");case"line":return Ol(c);case"polygon":return Zh(c);case"polyline":return To(c);case"ellipse":return La(c);case"circle":return Hv(c);case"rect":return Mo(c);default:break}throw new Error(`"${t}" cannot be converted to svg path element.`)}function Wv(c,t,e,i){const l=2*Math.PI-1e-6,h=c,f=t;let v=e,y=i;if(y<v){const L=v;v=y,y=L}const x=y-v,E=x<Math.PI?"0":"1",S=Math.cos(v),_=Math.sin(v),T=Math.cos(y),D=Math.sin(y);return x>=l?h?`M0,${f}A${f},${f} 0 1,1 0,${-f}A${f},${f} 0 1,1 0,${f}M0,${h}A${h},${h} 0 1,0 0,${-h}A${h},${h} 0 1,0 0,${h}Z`:`M0,${f}A${f},${f} 0 1,1 0,${-f}A${f},${f} 0 1,1 0,${f}Z`:h?`M${f*S},${f*_}A${f},${f} 0 ${E},1 ${f*T},${f*D}L${h*T},${h*D}A${h},${h} 0 ${E},0 ${h*S},${h*_}Z`:`M${f*S},${f*_}A${f},${f} 0 ${E},1 ${f*T},${f*D}L0,0Z`}const WC=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,Xv=/[ ,]+/,XC=/^(\w+)\((.*)\)/;function Zv(c,t){const i=Rn("svg").createSVGPoint();return i.x=c,i.y=t,i}function _n(c){const e=Rn("svg").createSVGMatrix();if(c!=null){const i=c,l=e;for(const h in i)l[h]=i[h]}return e}function _s(c){const t=Rn("svg");return c!=null?(c instanceof DOMMatrix||(c=_n(c)),t.createSVGTransformFromMatrix(c)):t.createSVGTransform()}function ka(c){let t=_n();const e=c!=null&&c.match(WC);if(!e)return t;for(let i=0,l=e.length;i<l;i+=1){const f=e[i].match(XC);if(f){let v,y,x,E,S,_=_n();const T=f[2].split(Xv);switch(f[1].toLowerCase()){case"scale":v=parseFloat(T[0]),y=T[1]===void 0?v:parseFloat(T[1]),_=_.scaleNonUniform(v,y);break;case"translate":x=parseFloat(T[0]),E=parseFloat(T[1]),_=_.translate(x,E);break;case"rotate":S=parseFloat(T[0]),x=parseFloat(T[1])||0,E=parseFloat(T[2])||0,x!==0||E!==0?_=_.translate(x,E).rotate(S).translate(-x,-E):_=_.rotate(S);break;case"skewx":S=parseFloat(T[0]),_=_.skewX(S);break;case"skewy":S=parseFloat(T[0]),_=_.skewY(S);break;case"matrix":_.a=parseFloat(T[0]),_.b=parseFloat(T[1]),_.c=parseFloat(T[2]),_.d=parseFloat(T[3]),_.e=parseFloat(T[4]),_.f=parseFloat(T[5]);break;default:continue}t=t.multiply(_)}}return t}function Io(c){const t=c||{},e=t.a!=null?t.a:1,i=t.b!=null?t.b:0,l=t.c!=null?t.c:0,h=t.d!=null?t.d:1,f=t.e!=null?t.e:0,v=t.f!=null?t.f:0;return`matrix(${e},${i},${l},${h},${f},${v})`}function Al(c){let t,e,i;if(c){const h=Xv;if(c.trim().indexOf("matrix")>=0){const f=ka(c),v=Tl(f);t=[v.translateX,v.translateY],e=[v.rotation],i=[v.scaleX,v.scaleY];const y=[];(t[0]!==0||t[1]!==0)&&y.push(`translate(${t.join(",")})`),(i[0]!==1||i[1]!==1)&&y.push(`scale(${i.join(",")})`),e[0]!==0&&y.push(`rotate(${e[0]})`),c=y.join(" ")}else{const f=c.match(/translate\((.*?)\)/);f&&(t=f[1].split(h));const v=c.match(/rotate\((.*?)\)/);v&&(e=v[1].split(h));const y=c.match(/scale\((.*?)\)/);y&&(i=y[1].split(h))}}const l=i&&i[0]?parseFloat(i[0]):1;return{raw:c||"",translation:{tx:t&&t[0]?parseInt(t[0],10):0,ty:t&&t[1]?parseInt(t[1],10):0},rotation:{angle:e&&e[0]?parseInt(e[0],10):0,cx:e&&e[1]?parseInt(e[1],10):void 0,cy:e&&e[2]?parseInt(e[2],10):void 0},scale:{sx:l,sy:i&&i[1]?parseFloat(i[1]):l}}}function Jh(c,t){const e=t.x*c.a+t.y*c.c+0,i=t.x*c.b+t.y*c.d+0;return{x:e,y:i}}function Tl(c){const t=Jh(c,{x:0,y:1}),e=Jh(c,{x:1,y:0}),i=180/Math.PI*Math.atan2(t.y,t.x)-90,l=180/Math.PI*Math.atan2(e.y,e.x);return{skewX:i,skewY:l,translateX:c.e,translateY:c.f,scaleX:Math.sqrt(c.a*c.a+c.b*c.b),scaleY:Math.sqrt(c.c*c.c+c.d*c.d),rotation:i}}function Yv(c){let t,e,i,l;return c?(t=c.a==null?1:c.a,l=c.d==null?1:c.d,e=c.b,i=c.c):t=l=1,{sx:e?Math.sqrt(t*t+e*e):t,sy:i?Math.sqrt(i*i+l*l):l}}function Kv(c){let t={x:0,y:1};c&&(t=Jh(c,t));const e=180*Math.atan2(t.y,t.x)/Math.PI%360-90;return{angle:e%360+(e<0?360:0)}}function Jv(c){return{tx:c&&c.e||0,ty:c&&c.f||0}}function gi(c,t,e={}){if(t==null)return ka(nn(c,"transform"));if(e.absolute){c.setAttribute("transform",Io(t));return}const i=c.transform,l=_s(t);i.baseVal.appendItem(l)}function Vi(c,t,e=0,i={}){let l=nn(c,"transform");const h=Al(l);if(t==null)return h.translation;l=h.raw,l=l.replace(/translate\([^)]*\)/g,"").trim();const f=i.absolute?t:h.translation.tx+t,v=i.absolute?e:h.translation.ty+e,y=`translate(${f},${v})`;c.setAttribute("transform",`${y} ${l}`.trim())}function pi(c,t,e,i,l={}){let h=nn(c,"transform");const f=Al(h);if(t==null)return f.rotation;h=f.raw,h=h.replace(/rotate\([^)]*\)/g,"").trim(),t%=360;const v=l.absolute?t:f.rotation.angle+t,y=e!=null&&i!=null?`,${e},${i}`:"",x=`rotate(${v}${y})`;c.setAttribute("transform",`${h} ${x}`.trim())}function Ml(c,t,e){let i=nn(c,"transform");const l=Al(i);if(t==null)return l.scale;e=e==null?t:e,i=l.raw,i=i.replace(/scale\([^)]*\)/g,"").trim();const h=`scale(${t},${e})`;c.setAttribute("transform",`${i} ${h}`.trim())}function hr(c,t){if(hi(t)&&hi(c)){const e=t.getScreenCTM(),i=c.getScreenCTM();if(e&&i)return e.inverse().multiply(i)}return _n()}function qv(c,t){let e=_n();if(hi(t)&&hi(c)){let i=c;const l=[];for(;i&&i!==t;){const h=i.getAttribute("transform")||null,f=ka(h);l.push(f),i=i.parentNode}l.reverse().forEach(h=>{e=e.multiply(h)})}return e}function qh(c,t,e){const i=c instanceof SVGSVGElement?c:c.ownerSVGElement,l=i.createSVGPoint();l.x=t,l.y=e;try{const h=i.getScreenCTM(),f=l.matrixTransform(h.inverse()),v=hr(c,i).inverse();return f.matrixTransform(v)}catch(h){return l}}var dr;(function(c){const t={};function e(h){return t[h]||{}}c.get=e;function i(h,f){t[h]=f}c.register=i;function l(h){delete t[h]}c.unregister=l})(dr||(dr={}));var Jr;(function(c){const t=new WeakMap;function e(h){return t.has(h)||t.set(h,{events:Object.create(null)}),t.get(h)}c.ensure=e;function i(h){return t.get(h)}c.get=i;function l(h){return t.delete(h)}c.remove=l})(Jr||(Jr={}));var _e;(function(c){c.returnTrue=()=>!0,c.returnFalse=()=>!1;function t(l){l.stopPropagation()}c.stopPropagationCallback=t;function e(l,h,f){l.addEventListener!=null&&l.addEventListener(h,f)}c.addEventListener=e;function i(l,h,f){l.removeEventListener!=null&&l.removeEventListener(h,f)}c.removeEventListener=i})(_e||(_e={})),function(c){const t=/[^\x20\t\r\n\f]+/g,e=/^([^.]*)(?:\.(.+)|)/;function i(v){return(v||"").match(t)||[""]}c.splitType=i;function l(v){const y=e.exec(v)||[];return{originType:y[1]?y[1].trim():y[1],namespaces:y[2]?y[2].split(".").map(x=>x.trim()).sort():[]}}c.normalizeType=l;function h(v){return v.nodeType===1||v.nodeType===9||!+v.nodeType}c.isValidTarget=h;function f(v,y){if(y){const x=v;return x.querySelector!=null&&x.querySelector(y)!=null}return!0}c.isValidSelector=f}(_e||(_e={})),function(c){let t=0;const e=new WeakMap;function i(v){return e.has(v)||(e.set(v,t),t+=1),e.get(v)}c.ensureHandlerId=i;function l(v){return e.get(v)}c.getHandlerId=l;function h(v){return e.delete(v)}c.removeHandlerId=h;function f(v,y){return e.set(v,y)}c.setHandlerId=f}(_e||(_e={})),function(c){function t(e,i){const l=[],h=Jr.get(e),f=h&&h.events&&h.events[i.type],v=f&&f.handlers||[],y=f?f.delegateCount:0;if(y>0&&!(i.type==="click"&&typeof i.button=="number"&&i.button>=1)){for(let x=i.target;x!==e;x=x.parentNode||e)if(x.nodeType===1&&!(i.type==="click"&&x.disabled===!0)){const E=[],S={};for(let _=0;_<y;_+=1){const T=v[_],D=T.selector;if(D!=null&&S[D]==null){const L=e,B=[];L.querySelectorAll(D).forEach(j=>{B.push(j)}),S[D]=B.includes(x)}S[D]&&E.push(T)}E.length&&l.push({elem:x,handlers:E})}}return y<v.length&&l.push({elem:e,handlers:v.slice(y)}),l}c.getHandlerQueue=t}(_e||(_e={})),function(c){function t(e){return e!=null&&e===e.window}c.isWindow=t}(_e||(_e={})),function(c){function t(e,i){const l=e.nodeType===9?e.documentElement:e,h=i&&i.parentNode;return e===h||!!(h&&h.nodeType===1&&(l.contains?l.contains(h):e.compareDocumentPosition&&e.compareDocumentPosition(h)&16))}c.contains=t}(_e||(_e={}));class Pr{constructor(t,e){this.isDefaultPrevented=_e.returnFalse,this.isPropagationStopped=_e.returnFalse,this.isImmediatePropagationStopped=_e.returnFalse,this.isSimulated=!1,this.preventDefault=()=>{const i=this.originalEvent;this.isDefaultPrevented=_e.returnTrue,i&&!this.isSimulated&&i.preventDefault()},this.stopPropagation=()=>{const i=this.originalEvent;this.isPropagationStopped=_e.returnTrue,i&&!this.isSimulated&&i.stopPropagation()},this.stopImmediatePropagation=()=>{const i=this.originalEvent;this.isImmediatePropagationStopped=_e.returnTrue,i&&!this.isSimulated&&i.stopImmediatePropagation(),this.stopPropagation()},typeof t=="string"?this.type=t:t.type&&(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?_e.returnTrue:_e.returnFalse,this.target=t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget,this.timeStamp=t.timeStamp),e&&Object.assign(this,e),this.timeStamp||(this.timeStamp=Date.now())}}(function(c){function t(e){return e instanceof c?e:new c(e)}c.create=t})(Pr||(Pr={})),function(c){function t(e,i){Object.defineProperty(c.prototype,e,{enumerable:!0,configurable:!0,get:typeof i=="function"?function(){if(this.originalEvent)return i(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set(l){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:l})}})}c.addProperty=t}(Pr||(Pr={})),function(c){const t={bubbles:!0,cancelable:!0,eventPhase:!0,detail:!0,view:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pageX:!0,pageY:!0,screenX:!0,screenY:!0,toElement:!0,pointerId:!0,pointerType:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,touches:!0,changedTouches:!0,targetTouches:!0,which:!0,altKey:!0,ctrlKey:!0,metaKey:!0,shiftKey:!0};Object.keys(t).forEach(e=>c.addProperty(e,t[e]))}(Pr||(Pr={}));var Ui;(function(c){dr.register("load",{noBubble:!0})})(Ui||(Ui={})),function(c){dr.register("beforeunload",{postDispatch(t,e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}})}(Ui||(Ui={})),function(c){dr.register("mouseenter",{delegateType:"mouseover",bindType:"mouseover",handle(t,e){let i;const l=e.relatedTarget,h=e.handleObj;return(!l||l!==t&&!_e.contains(t,l))&&(e.type=h.originType,i=h.handler.call(t,e),e.type="mouseover"),i}}),dr.register("mouseleave",{delegateType:"mouseout",bindType:"mouseout",handle(t,e){let i;const l=e.relatedTarget,h=e.handleObj;return(!l||l!==t&&!_e.contains(t,l))&&(e.type=h.originType,i=h.handler.call(t,e),e.type="mouseout"),i}})}(Ui||(Ui={}));var NE=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e},Ba;(function(c){let t;function e(f,v,y,x,E){if(!_e.isValidTarget(f))return;let S;if(typeof y!="function"){const{handler:L,selector:B}=y,j=NE(y,["handler","selector"]);y=L,E=B,S=j}const _=Jr.ensure(f);let T=_.handler;T==null&&(T=_.handler=function(L,...B){return t!==L.type?l(f,L,...B):void 0});const D=_e.ensureHandlerId(y);_e.splitType(v).forEach(L=>{const{originType:B,namespaces:j}=_e.normalizeType(L);if(!B)return;let V=B,G=dr.get(V);V=(E?G.delegateType:G.bindType)||V,G=dr.get(V);const X=Object.assign({type:V,originType:B,data:x,selector:E,guid:D,handler:y,namespace:j.join(".")},S),K=_.events;let it=K[V];it||(it=K[V]={handlers:[],delegateCount:0},(!G.setup||G.setup(f,x,j,T)===!1)&&_e.addEventListener(f,V,T)),G.add&&(_e.removeHandlerId(X.handler),G.add(f,X),_e.setHandlerId(X.handler,D)),E?(it.handlers.splice(it.delegateCount,0,X),it.delegateCount+=1):it.handlers.push(X)})}c.on=e;function i(f,v,y,x,E){const S=Jr.get(f);if(!S)return;const _=S.events;_&&(_e.splitType(v).forEach(T=>{const{originType:D,namespaces:L}=_e.normalizeType(T);if(!D){Object.keys(_).forEach(K=>{i(f,K+T,y,x,!0)});return}let B=D;const j=dr.get(B);B=(x?j.delegateType:j.bindType)||B;const V=_[B];if(!V)return;const G=L.length>0?new RegExp(`(^|\\.)${L.join("\\.(?:.*\\.|)")}(\\.|$)`):null,X=V.handlers.length;for(let K=V.handlers.length-1;K>=0;K-=1){const it=V.handlers[K];(E||D===it.originType)&&(!y||_e.getHandlerId(y)===it.guid)&&(G==null||it.namespace&&G.test(it.namespace))&&(x==null||x===it.selector||x==="**"&&it.selector)&&(V.handlers.splice(K,1),it.selector&&(V.delegateCount-=1),j.remove&&j.remove(f,it))}X&&V.handlers.length===0&&((!j.teardown||j.teardown(f,L,S.handler)===!1)&&_e.removeEventListener(f,B,S.handler),delete _[B])}),Object.keys(_).length===0&&Jr.remove(f))}c.off=i;function l(f,v,...y){const x=Pr.create(v);x.delegateTarget=f;const E=dr.get(x.type);if(E.preDispatch&&E.preDispatch(f,x)===!1)return;const S=_e.getHandlerQueue(f,x);for(let _=0,T=S.length;_<T&&!x.isPropagationStopped();_+=1){const D=S[_];x.currentTarget=D.elem;for(let L=0,B=D.handlers.length;L<B&&!x.isImmediatePropagationStopped();L+=1){const j=D.handlers[L];if(x.rnamespace==null||j.namespace&&x.rnamespace.test(j.namespace)){x.handleObj=j,x.data=j.data;const V=dr.get(j.originType).handle,G=V?V(D.elem,x,...y):j.handler.call(D.elem,x,...y);G!==void 0&&(x.result=G,G===!1&&(x.preventDefault(),x.stopPropagation()))}}}return E.postDispatch&&E.postDispatch(f,x),x.result}c.dispatch=l;function h(f,v,y,x){let E=f,S=typeof f=="string"?f:f.type,_=typeof f=="string"||E.namespace==null?[]:E.namespace.split(".");const T=y;if(T.nodeType===3||T.nodeType===8)return;S.indexOf(".")>-1&&(_=S.split("."),S=_.shift(),_.sort());const D=S.indexOf(":")<0&&`on${S}`;E=f instanceof Pr?f:new Pr(S,typeof f=="object"?f:null),E.namespace=_.join("."),E.rnamespace=E.namespace?new RegExp(`(^|\\.)${_.join("\\.(?:.*\\.|)")}(\\.|$)`):null,E.result=void 0,E.target||(E.target=T);const L=[E];Array.isArray(v)?L.push(...v):L.push(v);const B=dr.get(S);if(!x&&B.trigger&&B.trigger(T,E,v)===!1)return;let j;const V=[T];if(!x&&!B.noBubble&&!_e.isWindow(T)){j=B.delegateType||S;let X=T,K=T.parentNode;for(;K!=null;)V.push(K),X=K,K=K.parentNode;const it=T.ownerDocument||document;if(X===it){const At=X.defaultView||X.parentWindow||window;V.push(At)}}let G=T;for(let X=0,K=V.length;X<K&&!E.isPropagationStopped();X+=1){const it=V[X];G=it,E.type=X>1?j:B.bindType||S;const At=Jr.get(it);At&&At.events[E.type]&&At.handler&&At.handler.call(it,...L);const jt=D&&it[D]||null;jt&&_e.isValidTarget(it)&&(E.result=jt.call(it,...L),E.result===!1&&E.preventDefault())}if(E.type=S,!x&&!E.isDefaultPrevented()){const X=B.preventDefault;if((X==null||X(V.pop(),E,v)===!1)&&_e.isValidTarget(T)&&D&&typeof T[S]=="function"&&!_e.isWindow(T)){const K=T[D];K&&(T[D]=null),t=S,E.isPropagationStopped()&&G.addEventListener(S,_e.stopPropagationCallback),T[S](),E.isPropagationStopped()&&G.removeEventListener(S,_e.stopPropagationCallback),t=void 0,K&&(T[D]=K)}}return E.result}c.trigger=h})(Ba||(Ba={}));var kn;(function(c){function t(h,f,v,y,x){return za.on(h,f,v,y,x),h}c.on=t;function e(h,f,v,y,x){return za.on(h,f,v,y,x,!0),h}c.once=e;function i(h,f,v,y){return za.off(h,f,v,y),h}c.off=i;function l(h,f,v,y){return Ba.trigger(f,v,h,y),h}c.trigger=l})(kn||(kn={}));var za;(function(c){function t(i,l,h,f,v,y){if(typeof l=="object"){typeof h!="string"&&(f=f||h,h=void 0),Object.keys(l).forEach(x=>t(i,x,h,f,l[x],y));return}if(f==null&&v==null?(v=h,f=h=void 0):v==null&&(typeof h=="string"?(v=f,f=void 0):(v=f,f=h,h=void 0)),v===!1)v=_e.returnFalse;else if(!v)return;if(y){const x=v;v=function(E,...S){return c.off(i,E),x.call(this,E,...S)},_e.setHandlerId(v,_e.ensureHandlerId(x))}Ba.on(i,l,v,f,h)}c.on=t;function e(i,l,h,f){const v=l;if(v&&v.preventDefault!=null&&v.handleObj!=null){const y=v.handleObj;e(v.delegateTarget,y.namespace?`${y.originType}.${y.namespace}`:y.originType,y.selector,y.handler);return}if(typeof l=="object"){const y=l;Object.keys(y).forEach(x=>e(i,x,h,y[x]));return}(h===!1||typeof h=="function")&&(f=h,h=void 0),f===!1&&(f=_e.returnFalse),Ba.off(i,l,f,h)}c.off=e})(za||(za={}));class Qh{constructor(t,e,i){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=hn.isEventSupported("wheel")?"wheel":"mousewheel",this.target=t,this.onWheelCallback=e,this.onWheelGuard=i,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){this.target.addEventListener(this.eventName,this.onWheel,{passive:!1})}disable(){this.target.removeEventListener(this.eventName,this.onWheel)}onWheel(t){if(this.onWheelGuard!=null&&!this.onWheelGuard(t))return;this.deltaX+=t.deltaX,this.deltaY+=t.deltaY,t.preventDefault();let e;(this.deltaX!==0||this.deltaY!==0)&&(t.stopPropagation(),e=!0),e===!0&&this.animationFrameId===0&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(t)}))}didWheel(t){this.animationFrameId=0,this.onWheelCallback(t,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function Fa(c){const t=c.getBoundingClientRect(),e=c.ownerDocument.defaultView;return{top:t.top+e.pageYOffset,left:t.left+e.pageXOffset}}function Qv(c){return c.getBoundingClientRect().width}function DE(c){return c.getBoundingClientRect().height}function RE(c){const t=ys(c,"position")==="fixed";let e;if(t){const i=c.getBoundingClientRect();e={left:i.left,top:i.top}}else e=Fa(c);if(!t){const i=c.ownerDocument;let l=c.offsetParent||i.documentElement;for(;(l===i.body||l===i.documentElement)&&ys(l,"position")==="static";)l=l.parentNode;if(l!==c&&OE(l)){const h=Fa(l);e.top-=h.top+bs(l,"borderTopWidth"),e.left-=h.left+bs(l,"borderLeftWidth")}}return{top:e.top-bs(c,"marginTop"),left:e.left-bs(c,"marginLeft")}}function td(c,t=60){let e=null;return(...i)=>{e&&clearTimeout(e),e=window.setTimeout(()=>{c.apply(this,i)},t)}}function tm(c){let t=null,e=[];const i=()=>{if(getComputedStyle(c).position==="static"){const x=c.style;x.position="relative"}const y=document.createElement("object");return y.onload=()=>{y.contentDocument.defaultView.addEventListener("resize",l),l()},y.style.display="block",y.style.position="absolute",y.style.top="0",y.style.left="0",y.style.height="100%",y.style.width="100%",y.style.overflow="hidden",y.style.pointerEvents="none",y.style.zIndex="-1",y.style.opacity="0",y.setAttribute("tabindex","-1"),y.type="text/html",c.appendChild(y),y.data="about:blank",y},l=td(()=>{e.forEach(y=>y(c))}),h=y=>{t||(t=i()),e.indexOf(y)===-1&&e.push(y)},f=()=>{t&&t.parentNode&&(t.contentDocument&&t.contentDocument.defaultView.removeEventListener("resize",l),t.parentNode.removeChild(t),t=null,e=[])};return{element:c,bind:h,destroy:f,unbind:y=>{const x=e.indexOf(y);x!==-1&&e.splice(x,1),e.length===0&&t&&f()}}}function LE(c){let t=null,e=[];const i=td(()=>{e.forEach(y=>{y(c)})}),l=()=>{const y=new ResizeObserver(i);return y.observe(c),i(),y},h=y=>{t||(t=l()),e.indexOf(y)===-1&&e.push(y)},f=()=>{t&&(t.disconnect(),e=[],t=null)};return{element:c,bind:h,destroy:f,unbind:y=>{const x=e.indexOf(y);x!==-1&&e.splice(x,1),e.length===0&&t&&f()}}}const kE=typeof ResizeObserver!="undefined"?LE:tm;var Ga;(function(c){const t=new WeakMap;function e(l){let h=t.get(l);return h||(h=kE(l),t.set(l,h),h)}function i(l){l.destroy(),t.delete(l.element)}c.bind=(l,h)=>{const f=e(l);return f.bind(h),()=>f.unbind(h)},c.clear=l=>{const h=e(l);i(h)}})(Ga||(Ga={}));class ja{constructor(t={}){this.comparator=t.comparator||ja.defaultComparator,this.index={},this.data=t.data||[],this.heapify()}isEmpty(){return this.data.length===0}insert(t,e,i){const l={priority:t,value:e},h=this.data.length;return i&&(l.id=i,this.index[i]=h),this.data.push(l),this.bubbleUp(h),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(t,e){const i=this.index[t];if(typeof i=="undefined")throw new Error(`Node with id '${t}' was not found in the heap.`);const l=this.data,h=l[i].priority,f=this.comparator(e,h);f<0?(l[i].priority=e,this.bubbleUp(i)):f>0&&(l[i].priority=e,this.bubbleDown(i))}remove(){const t=this.data,e=t[0],i=t.pop();return e.id&&delete this.index[e.id],t.length>0&&(t[0]=i,i.id&&(this.index[i.id]=0),this.bubbleDown(0)),e?e.value:null}heapify(){for(let t=0;t<this.data.length;t+=1)this.bubbleUp(t)}bubbleUp(t){const e=this.data;let i,l,h=t;for(;h>0&&(l=h-1>>>1,this.comparator(e[h].priority,e[l].priority)<0);){i=e[l],e[l]=e[h];let f=e[h].id;f!=null&&(this.index[f]=l),e[h]=i,f=e[h].id,f!=null&&(this.index[f]=h),h=l}}bubbleDown(t){const e=this.data,i=e.length-1;let l=t;for(;;){const h=(l<<1)+1,f=h+1;let v=l;if(h<=i&&this.comparator(e[h].priority,e[v].priority)<0&&(v=h),f<=i&&this.comparator(e[f].priority,e[v].priority)<0&&(v=f),v!==l){const y=e[v];e[v]=e[l];let x=e[l].id;x!=null&&(this.index[x]=v),e[l]=y,x=e[l].id,x!=null&&(this.index[x]=l),l=v}else break}}}(function(c){c.defaultComparator=(t,e)=>t-e})(ja||(ja={}));var ed;(function(c){function t(e,i,l=(h,f)=>1){const h={},f={},v={},y=new ja;for(h[i]=0,Object.keys(e).forEach(x=>{x!==i&&(h[x]=1/0),y.insert(h[x],x,x)});!y.isEmpty();){const x=y.remove();v[x]=!0;const E=e[x]||[];for(let S=0;S<E.length;S+=1){const _=E[S];if(!v[_]){const T=h[x]+l(x,_);T<h[_]&&(h[_]=T,f[_]=x,y.updatePriority(_,T))}}}return f}c.run=t})(ed||(ed={}));class vi{constructor(t,e,i,l){if(t==null)return this.set(255,255,255,1);if(typeof t=="number")return this.set(t,e,i,l);if(typeof t=="string")return vi.fromString(t)||this;if(Array.isArray(t))return this.set(t);this.set(t.r,t.g,t.b,t.a==null?1:t.a)}blend(t,e,i){this.set(t.r+(e.r-t.r)*i,t.g+(e.g-t.g)*i,t.b+(e.b-t.b)*i,t.a+(e.a-t.a)*i)}lighten(t){const e=vi.lighten(this.toArray(),t);this.r=e[0],this.g=e[1],this.b=e[2],this.a=e[3]}darken(t){this.lighten(-t)}set(t,e,i,l){const h=Array.isArray(t)?t[0]:t,f=Array.isArray(t)?t[1]:e,v=Array.isArray(t)?t[2]:i,y=Array.isArray(t)?t[3]:l;return this.r=Math.round(Or(h,0,255)),this.g=Math.round(Or(f,0,255)),this.b=Math.round(Or(v,0,255)),this.a=y==null?1:Or(y,0,1),this}toHex(){return`#${["r","g","b"].map(e=>{const i=this[e].toString(16);return i.length<2?`0${i}`:i}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return vi.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(t){const e=`${this.r},${this.g},${this.b},`;return t?`rgb(${e})`:`rgba(${e},${this.a})`}toGrey(){return vi.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(c){function t(G){return new c(G)}c.fromArray=t;function e(G){return new c([...D(G),1])}c.fromHex=e;function i(G){const X=G.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(X){const K=X[1].split(/\s*,\s*/).map(it=>parseInt(it,10));return new c(K)}return null}c.fromRGBA=i;function l(G,X,K){K<0&&++K,K>1&&--K;const it=6*K;return it<1?G+(X-G)*it:2*K<1?X:3*K<2?G+(X-G)*(2/3-K)*6:G}function h(G){const X=G.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(X){const K=X[2].split(/\s*,\s*/),it=(parseFloat(K[0])%360+360)%360/360,At=parseFloat(K[1])/100,jt=parseFloat(K[2])/100,Vt=K[3]==null?1:parseInt(K[3],10);return new c(x(it,At,jt,Vt))}return null}c.fromHSLA=h;function f(G){if(G.startsWith("#"))return e(G);if(G.startsWith("rgb"))return i(G);const X=c.named[G];return X?e(X):h(G)}c.fromString=f;function v(G,X){return c.fromArray([G,G,G,X])}c.makeGrey=v;function y(G,X,K,it){const At=Array.isArray(G)?G[0]:G,jt=Array.isArray(G)?G[1]:X,Vt=Array.isArray(G)?G[2]:K,ie=Array.isArray(G)?G[3]:it,Kt=Math.max(At,jt,Vt),ce=Math.min(At,jt,Vt),pn=(Kt+ce)/2;let je=0,lt=0;if(ce!==Kt){const It=Kt-ce;switch(lt=pn>.5?It/(2-Kt-ce):It/(Kt+ce),Kt){case At:je=(jt-Vt)/It+(jt<Vt?6:0);break;case jt:je=(Vt-At)/It+2;break;case Vt:je=(At-jt)/It+4;break;default:break}je/=6}return[je,lt,pn,ie==null?1:ie]}c.rgba2hsla=y;function x(G,X,K,it){const At=Array.isArray(G)?G[0]:G,jt=Array.isArray(G)?G[1]:X,Vt=Array.isArray(G)?G[2]:K,ie=Array.isArray(G)?G[3]:it,Kt=Vt<=.5?Vt*(jt+1):Vt+jt-Vt*jt,ce=2*Vt-Kt;return[l(ce,Kt,At+1/3)*256,l(ce,Kt,At)*256,l(ce,Kt,At-1/3)*256,ie==null?1:ie]}c.hsla2rgba=x;function E(G){return new c(Math.round(Math.random()*256),Math.round(Math.random()*256),Math.round(Math.random()*256),G?void 0:parseFloat(Math.random().toFixed(2)))}c.random=E;function S(){const G="0123456789ABCDEF";let X="#";for(let K=0;K<6;K+=1)X+=G[Math.floor(Math.random()*16)];return X}c.randomHex=S;function _(G){return E(G).toString()}c.randomRGBA=_;function T(G,X){if(typeof G=="string"){const Vt=G[0]==="#",[ie,Kt,ce]=D(G);return X?ie*.299+Kt*.587+ce*.114>186?"#000000":"#ffffff":`${Vt?"#":""}${L(255-ie,255-Kt,255-ce)}`}const K=G[0],it=G[1],At=G[2],jt=G[3];return X?K*.299+it*.587+At*.114>186?[0,0,0,jt]:[255,255,255,jt]:[255-K,255-it,255-At,jt]}c.invert=T;function D(G){const X=G.indexOf("#")===0?G:`#${G}`;let K=+`0x${X.substr(1)}`;if(!(X.length===4||X.length===7)||Number.isNaN(K))throw new Error("Invalid hex color.");const it=X.length===4?4:8,At=(1<<it)-1,jt=["b","g","r"].map(()=>{const Vt=K&At;return K>>=it,it===4?17*Vt:Vt});return[jt[2],jt[1],jt[0]]}function L(G,X,K){const it=At=>At.length<2?`0${At}`:At;return`${it(G.toString(16))}${it(X.toString(16))}${it(K.toString(16))}`}function B(G,X){return V(G,X)}c.lighten=B;function j(G,X){return V(G,-X)}c.darken=j;function V(G,X){if(typeof G=="string"){const At=G[0]==="#",jt=parseInt(At?G.substr(1):G,16),Vt=Or((jt>>16)+X,0,255),ie=Or((jt>>8&255)+X,0,255),Kt=Or((jt&255)+X,0,255);return`${At?"#":""}${(Kt|ie<<8|Vt<<16).toString(16)}`}const K=L(G[0],G[1],G[2]),it=D(V(K,X));return[it[0],it[1],it[2],G[3]]}})(vi||(vi={})),function(c){c.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(vi||(vi={}));class nd{constructor(){this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(t){return this.map.has(t)}get(t){return this.map.get(t)}set(t,e){this.map.set(t,e),this.arr.push(t)}delete(t){const e=this.arr.indexOf(t);e>=0&&this.arr.splice(e,1);const i=this.map.get(t);return this.map.delete(t),i}each(t){this.arr.forEach(e=>{const i=this.map.get(e);t(i,e)})}dispose(){this.clear()}}var Po;(function(c){function t(l){const h=[],f=[];return Array.isArray(l)?h.push(...l):l.split("|").forEach(v=>{v.indexOf("&")===-1?h.push(v):f.push(...v.split("&"))}),{or:h,and:f}}c.parse=t;function e(l,h){if(l!=null&&h!=null){const f=t(l),v=t(h),y=f.or.sort(),x=v.or.sort(),E=f.and.sort(),S=v.and.sort(),_=(T,D)=>T.length===D.length&&(T.length===0||T.every((L,B)=>L===D[B]));return _(y,x)&&_(E,S)}return l==null&&h==null}c.equals=e;function i(l,h,f){if(h==null||Array.isArray(h)&&h.length===0)return f?l.altKey!==!0&&l.ctrlKey!==!0&&l.metaKey!==!0&&l.shiftKey!==!0:!0;const{or:v,and:y}=t(h),x=E=>{const S=`${E.toLowerCase()}Key`;return l[S]===!0};return v.some(E=>x(E))&&y.every(E=>x(E))}c.isMatch=i})(Po||(Po={}));var Cs;(function(c){c.linear=t=>t,c.quad=t=>t*t,c.cubic=t=>t*t*t,c.inout=t=>{if(t<=0)return 0;if(t>=1)return 1;const e=t*t,i=e*t;return 4*(t<.5?i:3*(t-e)+i-.75)},c.exponential=t=>Math.pow(2,10*(t-1)),c.bounce=t=>{for(let e=0,i=1;;e+=i,i/=2)if(t>=(7-4*e)/11){const l=(11-6*e-11*t)/4;return-l*l+i*i}}})(Cs||(Cs={})),function(c){c.decorators={reverse(t){return e=>1-t(1-e)},reflect(t){return e=>.5*(e<.5?t(2*e):2-t(2-2*e))},clamp(t,e=0,i=1){return l=>{const h=t(l);return h<e?e:h>i?i:h}},back(t=1.70158){return e=>e*e*((t+1)*e-t)},elastic(t=1.5){return e=>Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*t/3*e)}}}(Cs||(Cs={})),function(c){function t(lt){return-1*Math.cos(lt*(Math.PI/2))+1}c.easeInSine=t;function e(lt){return Math.sin(lt*(Math.PI/2))}c.easeOutSine=e;function i(lt){return-.5*(Math.cos(Math.PI*lt)-1)}c.easeInOutSine=i;function l(lt){return lt*lt}c.easeInQuad=l;function h(lt){return lt*(2-lt)}c.easeOutQuad=h;function f(lt){return lt<.5?2*lt*lt:-1+(4-2*lt)*lt}c.easeInOutQuad=f;function v(lt){return lt*lt*lt}c.easeInCubic=v;function y(lt){const It=lt-1;return It*It*It+1}c.easeOutCubic=y;function x(lt){return lt<.5?4*lt*lt*lt:(lt-1)*(2*lt-2)*(2*lt-2)+1}c.easeInOutCubic=x;function E(lt){return lt*lt*lt*lt}c.easeInQuart=E;function S(lt){const It=lt-1;return 1-It*It*It*It}c.easeOutQuart=S;function _(lt){const It=lt-1;return lt<.5?8*lt*lt*lt*lt:1-8*It*It*It*It}c.easeInOutQuart=_;function T(lt){return lt*lt*lt*lt*lt}c.easeInQuint=T;function D(lt){const It=lt-1;return 1+It*It*It*It*It}c.easeOutQuint=D;function L(lt){const It=lt-1;return lt<.5?16*lt*lt*lt*lt*lt:1+16*It*It*It*It*It}c.easeInOutQuint=L;function B(lt){return lt===0?0:Math.pow(2,10*(lt-1))}c.easeInExpo=B;function j(lt){return lt===1?1:-Math.pow(2,-10*lt)+1}c.easeOutExpo=j;function V(lt){if(lt===0||lt===1)return lt;const It=lt*2,Ie=It-1;return It<1?.5*Math.pow(2,10*Ie):.5*(-Math.pow(2,-10*Ie)+2)}c.easeInOutExpo=V;function G(lt){const It=lt/1;return-1*(Math.sqrt(1-It*lt)-1)}c.easeInCirc=G;function X(lt){const It=lt-1;return Math.sqrt(1-It*It)}c.easeOutCirc=X;function K(lt){const It=lt*2,Ie=It-2;return It<1?-.5*(Math.sqrt(1-It*It)-1):.5*(Math.sqrt(1-Ie*Ie)+1)}c.easeInOutCirc=K;function it(lt,It=1.70158){return lt*lt*((It+1)*lt-It)}c.easeInBack=it;function At(lt,It=1.70158){const Ie=lt/1-1;return Ie*Ie*((It+1)*Ie+It)+1}c.easeOutBack=At;function jt(lt,It=1.70158){const Ie=lt*2,Sn=Ie-2,On=It*1.525;return Ie<1?.5*Ie*Ie*((On+1)*Ie-On):.5*(Sn*Sn*((On+1)*Sn+On)+2)}c.easeInOutBack=jt;function Vt(lt,It=.7){if(lt===0||lt===1)return lt;const Sn=lt/1-1,On=1-It,tr=On/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*Sn)*Math.sin((Sn-tr)*(2*Math.PI)/On))}c.easeInElastic=Vt;function ie(lt,It=.7){const Ie=1-It,Sn=lt*2;if(lt===0||lt===1)return lt;const On=Ie/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Sn)*Math.sin((Sn-On)*(2*Math.PI)/Ie)+1}c.easeOutElastic=ie;function Kt(lt,It=.65){const Ie=1-It;if(lt===0||lt===1)return lt;const Sn=lt*2,On=Sn-1,tr=Ie/(2*Math.PI)*Math.asin(1);return Sn<1?-.5*(Math.pow(2,10*On)*Math.sin((On-tr)*(2*Math.PI)/Ie)):Math.pow(2,-10*On)*Math.sin((On-tr)*(2*Math.PI)/Ie)*.5+1}c.easeInOutElastic=Kt;function ce(lt){const It=lt/1;if(It<1/2.75)return 7.5625*It*It;if(It<2/2.75){const Ie=It-.5454545454545454;return 7.5625*Ie*Ie+.75}if(It<2.5/2.75){const Ie=It-.8181818181818182;return 7.5625*Ie*Ie+.9375}{const Ie=It-.9545454545454546;return 7.5625*Ie*Ie+.984375}}c.easeOutBounce=ce;function pn(lt){return 1-ce(1-lt)}c.easeInBounce=pn;function je(lt){return lt<.5?pn(lt*2)*.5:ce(lt*2-1)*.5+.5}c.easeInOutBounce=je}(Cs||(Cs={}));var Ss;(function(c){c.number=(t,e)=>{const i=e-t;return l=>t+i*l},c.object=(t,e)=>{const i=Object.keys(t);return l=>{const h={};for(let f=i.length-1;f!==-1;f-=1){const v=i[f];h[v]=t[v]+(e[v]-t[v])*l}return h}},c.unit=(t,e)=>{const i=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,l=i.exec(t),h=i.exec(e),f=h?h[1]:"",v=l?+l[1]:0,y=h?+h[1]:0,x=f.indexOf("."),E=x>0?f[1].length-x-1:0,S=y-v,_=l?l[2]:"";return T=>(v+S*T).toFixed(E)+_},c.color=(t,e)=>{const i=parseInt(t.slice(1),16),l=parseInt(e.slice(1),16),h=i&255,f=(l&255)-h,v=i&65280,y=(l&65280)-v,x=i&16711680,E=(l&16711680)-x;return S=>{const _=h+f*S&255,T=v+y*S&65280,D=x+E*S&16711680;return`#${(1<<24|_|T|D).toString(16).slice(1)}`}}})(Ss||(Ss={}));const Va=[];function em(c,t){const e=Va.find(i=>i.name===c);if(!(e&&(e.loadTimes+=1,e.loadTimes>1))&&!hn.isApplyingHMR()){const i=document.createElement("style");i.setAttribute("type","text/css"),i.textContent=t;const l=document.querySelector("head");l&&l.insertBefore(i,l.firstChild),Va.push({name:c,loadTimes:1,styleElement:i})}}function nm(c){const t=Va.findIndex(e=>e.name===c);if(t>-1){const e=Va[t];if(e.loadTimes-=1,e.loadTimes>0)return;let i=e.styleElement;i&&i.parentNode&&i.parentNode.removeChild(i),i=null,Va.splice(t,1)}}var $e;(function(c){function t(i){return 180*i/Math.PI%360}c.toDeg=t,c.toRad=function(i,l=!1){return(l?i:i%360)*Math.PI/180};function e(i){return i%360+(i<0?360:0)}c.normalize=e})($e||($e={}));var rn;(function(c){function t(v,y=0){return Number.isInteger(v)?v:+v.toFixed(y)}c.round=t;function e(v,y){let x,E;if(y==null?(E=v==null?1:v,x=0):(E=y,x=v==null?0:v),E<x){const S=x;x=E,E=S}return Math.floor(Math.random()*(E-x+1)+x)}c.random=e;function i(v,y,x){return Number.isNaN(v)?NaN:Number.isNaN(y)||Number.isNaN(x)?0:y<x?v<y?y:v>x?x:v:v<x?x:v>y?y:v}c.clamp=i;function l(v,y){return y*Math.round(v/y)}c.snapToGrid=l;function h(v,y){return y!=null&&v!=null&&y.x>=v.x&&y.x<=v.x+v.width&&y.y>=v.y&&y.y<=v.y+v.height}c.containsPoint=h;function f(v,y){const x=v.x-y.x,E=v.y-y.y;return x*x+E*E}c.squaredLength=f})(rn||(rn={}));class mi{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class W extends mi{constructor(t,e){super(),this.x=t==null?0:t,this.y=e==null?0:e}round(t=0){return this.x=rn.round(this.x,t),this.y=rn.round(this.y,t),this}add(t,e){const i=W.create(t,e);return this.x+=i.x,this.y+=i.y,this}update(t,e){const i=W.create(t,e);return this.x=i.x,this.y=i.y,this}translate(t,e){const i=W.create(t,e);return this.x+=i.x,this.y+=i.y,this}rotate(t,e){const i=W.rotate(this,t,e);return this.x=i.x,this.y=i.y,this}scale(t,e,i=new W){const l=W.create(i);return this.x=l.x+t*(this.x-l.x),this.y=l.y+e*(this.y-l.y),this}closest(t){if(t.length===1)return W.create(t[0]);let e=null,i=1/0;return t.forEach(l=>{const h=this.squaredDistance(l);h<i&&(e=l,i=h)}),e?W.create(e):null}distance(t){return Math.sqrt(this.squaredDistance(t))}squaredDistance(t){const e=W.create(t),i=this.x-e.x,l=this.y-e.y;return i*i+l*l}manhattanDistance(t){const e=W.create(t);return Math.abs(e.x-this.x)+Math.abs(e.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(t=new W){const e=W.create(t),i=-(e.y-this.y),l=e.x-this.x;let h=Math.atan2(i,l);return h<0&&(h=2*Math.PI+h),180*h/Math.PI}angleBetween(t,e){if(this.equals(t)||this.equals(e))return NaN;let i=this.theta(e)-this.theta(t);return i<0&&(i+=360),i}vectorAngle(t){return new W(0,0).angleBetween(this,t)}toPolar(t){return this.update(W.toPolar(this,t)),this}changeInAngle(t,e,i=new W){return this.clone().translate(-t,-e).theta(i)-this.theta(i)}adhereToRect(t){return rn.containsPoint(t,this)||(this.x=Math.min(Math.max(this.x,t.x),t.x+t.width),this.y=Math.min(Math.max(this.y,t.y),t.y+t.height)),this}bearing(t){const e=W.create(t),i=$e.toRad(this.y),l=$e.toRad(e.y),h=this.x,f=e.x,v=$e.toRad(f-h),y=Math.sin(v)*Math.cos(l),x=Math.cos(i)*Math.sin(l)-Math.sin(i)*Math.cos(l)*Math.cos(v),E=$e.toDeg(Math.atan2(y,x)),S=["NE","E","SE","S","SW","W","NW","N"];let _=E-22.5;return _<0&&(_+=360),_=parseInt(_/45,10),S[_]}cross(t,e){if(t!=null&&e!=null){const i=W.create(t),l=W.create(e);return(l.x-this.x)*(i.y-this.y)-(l.y-this.y)*(i.x-this.x)}return NaN}dot(t){const e=W.create(t);return this.x*e.x+this.y*e.y}diff(t,e){if(typeof t=="number")return new W(this.x-t,this.y-e);const i=W.create(t);return new W(this.x-i.x,this.y-i.y)}lerp(t,e){const i=W.create(t);return new W((1-e)*this.x+e*i.x,(1-e)*this.y+e*i.y)}normalize(t=1){const e=t/this.magnitude();return this.scale(e,e)}move(t,e){const i=W.create(t),l=$e.toRad(i.theta(this));return this.translate(Math.cos(l)*e,-Math.sin(l)*e)}reflection(t){return W.create(t).move(this,this.distance(t))}snapToGrid(t,e){return this.x=rn.snapToGrid(this.x,t),this.y=rn.snapToGrid(this.y,e==null?t:e),this}equals(t){const e=W.create(t);return e!=null&&e.x===this.x&&e.y===this.y}clone(){return W.clone(this)}toJSON(){return W.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(c){function t(e){return e!=null&&e instanceof c}c.isPoint=t})(W||(W={})),function(c){function t(i){return i!=null&&typeof i=="object"&&typeof i.x=="number"&&typeof i.y=="number"}c.isPointLike=t;function e(i){return i!=null&&Array.isArray(i)&&i.length===2&&typeof i[0]=="number"&&typeof i[1]=="number"}c.isPointData=e}(W||(W={})),function(c){function t(S,_){return S==null||typeof S=="number"?new c(S,_):e(S)}c.create=t;function e(S){return c.isPoint(S)?new c(S.x,S.y):Array.isArray(S)?new c(S[0],S[1]):new c(S.x,S.y)}c.clone=e;function i(S){return c.isPoint(S)?{x:S.x,y:S.y}:Array.isArray(S)?{x:S[0],y:S[1]}:{x:S.x,y:S.y}}c.toJSON=i;function l(S,_,T=new c){let D=Math.abs(S*Math.cos(_)),L=Math.abs(S*Math.sin(_));const B=e(T),j=$e.normalize($e.toDeg(_));return j<90?L=-L:j<180?(D=-D,L=-L):j<270&&(D=-D),new c(B.x+D,B.y+L)}c.fromPolar=l;function h(S,_=new c){const T=e(S),D=e(_),L=T.x-D.x,B=T.y-D.y;return new c(Math.sqrt(L*L+B*B),$e.toRad(D.theta(T)))}c.toPolar=h;function f(S,_){return S===_?!0:S!=null&&_!=null?S.x===_.x&&S.y===_.y:!1}c.equals=f;function v(S,_){if(S==null&&_!=null||S!=null&&_==null||S!=null&&_!=null&&S.length!==_.length)return!1;if(S!=null&&_!=null){for(let T=0,D=S.length;T<D;T+=1)if(!f(S[T],_[T]))return!1}return!0}c.equalPoints=v;function y(S,_,T,D){return new c(rn.random(S,_),rn.random(T,D))}c.random=y;function x(S,_,T){const D=$e.toRad($e.normalize(-_)),L=Math.sin(D),B=Math.cos(D);return E(S,B,L,T)}c.rotate=x;function E(S,_,T,D=new c){const L=e(S),B=e(D),j=L.x-B.x,V=L.y-B.y,G=j*_-V*T,X=V*_+j*T;return new c(G+B.x,X+B.y)}c.rotateEx=E}(W||(W={}));class Gt extends mi{get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new W(this.x,this.y)}get topLeft(){return new W(this.x,this.y)}get topCenter(){return new W(this.x+this.width/2,this.y)}get topRight(){return new W(this.x+this.width,this.y)}get center(){return new W(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new W(this.x,this.y+this.height)}get bottomCenter(){return new W(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new W(this.x+this.width,this.y+this.height)}get corner(){return new W(this.x+this.width,this.y+this.height)}get rightMiddle(){return new W(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new W(this.x,this.y+this.height/2)}get topLine(){return new Wt(this.topLeft,this.topRight)}get rightLine(){return new Wt(this.topRight,this.bottomRight)}get bottomLine(){return new Wt(this.bottomLeft,this.bottomRight)}get leftLine(){return new Wt(this.topLeft,this.bottomLeft)}constructor(t,e,i,l){super(),this.x=t==null?0:t,this.y=e==null?0:e,this.width=i==null?0:i,this.height=l==null?0:l}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(t){if(!t)return this.clone();const e=$e.toRad(t),i=Math.abs(Math.sin(e)),l=Math.abs(Math.cos(e)),h=this.width*l+this.height*i,f=this.width*i+this.height*l;return new Gt(this.x+(this.width-h)/2,this.y+(this.height-f)/2,h,f)}round(t=0){return this.x=rn.round(this.x,t),this.y=rn.round(this.y,t),this.width=rn.round(this.width,t),this.height=rn.round(this.height,t),this}add(t,e,i,l){const h=Gt.create(t,e,i,l),f=Math.min(this.x,h.x),v=Math.min(this.y,h.y),y=Math.max(this.x+this.width,h.x+h.width),x=Math.max(this.y+this.height,h.y+h.height);return this.x=f,this.y=v,this.width=y-f,this.height=x-v,this}update(t,e,i,l){const h=Gt.create(t,e,i,l);return this.x=h.x,this.y=h.y,this.width=h.width,this.height=h.height,this}inflate(t,e){const i=t,l=e!=null?e:t;return this.x-=i,this.y-=l,this.width+=2*i,this.height+=2*l,this}snapToGrid(t,e){const i=this.origin.snapToGrid(t,e),l=this.corner.snapToGrid(t,e);return this.x=i.x,this.y=i.y,this.width=l.x-i.x,this.height=l.y-i.y,this}translate(t,e){const i=W.create(t,e);return this.x+=i.x,this.y+=i.y,this}scale(t,e,i=new W){const l=this.origin.scale(t,e,i);return this.x=l.x,this.y=l.y,this.width*=t,this.height*=e,this}rotate(t,e=this.getCenter()){if(t!==0){const i=$e.toRad(t),l=Math.cos(i),h=Math.sin(i);let f=this.getOrigin(),v=this.getTopRight(),y=this.getBottomRight(),x=this.getBottomLeft();f=W.rotateEx(f,l,h,e),v=W.rotateEx(v,l,h,e),y=W.rotateEx(y,l,h,e),x=W.rotateEx(x,l,h,e);const E=new Gt(f.x,f.y,0,0);E.add(v.x,v.y,0,0),E.add(y.x,y.y,0,0),E.add(x.x,x.y,0,0),this.update(E)}return this}rotate90(){const t=(this.width-this.height)/2;this.x+=t,this.y-=t;const e=this.width;return this.width=this.height,this.height=e,this}moveAndExpand(t){const e=Gt.clone(t);return this.x+=e.x||0,this.y+=e.y||0,this.width+=e.width||0,this.height+=e.height||0,this}getMaxScaleToFit(t,e=this.center){const i=Gt.clone(t),l=e.x,h=e.y;let f=1/0,v=1/0,y=1/0,x=1/0,E=1/0,S=1/0,_=1/0,T=1/0;const D=i.topLeft;D.x<l&&(f=(this.x-l)/(D.x-l)),D.y<h&&(E=(this.y-h)/(D.y-h));const L=i.bottomRight;L.x>l&&(v=(this.x+this.width-l)/(L.x-l)),L.y>h&&(S=(this.y+this.height-h)/(L.y-h));const B=i.topRight;B.x>l&&(y=(this.x+this.width-l)/(B.x-l)),B.y<h&&(_=(this.y-h)/(B.y-h));const j=i.bottomLeft;return j.x<l&&(x=(this.x-l)/(j.x-l)),j.y>h&&(T=(this.y+this.height-h)/(j.y-h)),{sx:Math.min(f,v,y,x),sy:Math.min(E,S,_,T)}}getMaxUniformScaleToFit(t,e=this.center){const i=this.getMaxScaleToFit(t,e);return Math.min(i.sx,i.sy)}containsPoint(t,e){return rn.containsPoint(this,W.create(t,e))}containsRect(t,e,i,l){const h=Gt.create(t,e,i,l),f=this.x,v=this.y,y=this.width,x=this.height,E=h.x,S=h.y,_=h.width,T=h.height;return y===0||x===0||_===0||T===0?!1:E>=f&&S>=v&&E+_<=f+y&&S+T<=v+x}intersectsWithLine(t){const e=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],i=[],l=[];return e.forEach(h=>{const f=t.intersectsWithLine(h);f!==null&&l.indexOf(f.toString())<0&&(i.push(f),l.push(f.toString()))}),i.length>0?i:null}intersectsWithLineFromCenterToPoint(t,e){const i=W.clone(t),l=this.center;let h=null;e!=null&&e!==0&&i.rotate(e,l);const f=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],v=new Wt(l,i);for(let y=f.length-1;y>=0;y-=1){const x=f[y].intersectsWithLine(v);if(x!==null){h=x;break}}return h&&e!=null&&e!==0&&h.rotate(-e,l),h}intersectsWithRect(t,e,i,l){const h=Gt.create(t,e,i,l);if(!this.isIntersectWithRect(h))return null;const f=this.origin,v=this.corner,y=h.origin,x=h.corner,E=Math.max(f.x,y.x),S=Math.max(f.y,y.y);return new Gt(E,S,Math.min(v.x,x.x)-E,Math.min(v.y,x.y)-S)}isIntersectWithRect(t,e,i,l){const h=Gt.create(t,e,i,l),f=this.origin,v=this.corner,y=h.origin,x=h.corner;return!(x.x<=f.x||x.y<=f.y||y.x>=v.x||y.y>=v.y)}normalize(){let t=this.x,e=this.y,i=this.width,l=this.height;return this.width<0&&(t=this.x+this.width,i=-this.width),this.height<0&&(e=this.y+this.height,l=-this.height),this.x=t,this.y=e,this.width=i,this.height=l,this}union(t){const e=Gt.clone(t),i=this.origin,l=this.corner,h=e.origin,f=e.corner,v=Math.min(i.x,h.x),y=Math.min(i.y,h.y),x=Math.max(l.x,f.x),E=Math.max(l.y,f.y);return new Gt(v,y,x-v,E-y)}getNearestSideToPoint(t){const e=W.clone(t),i=e.x-this.x,l=this.x+this.width-e.x,h=e.y-this.y,f=this.y+this.height-e.y;let v=i,y="left";return l<v&&(v=l,y="right"),h<v&&(v=h,y="top"),f<v&&(y="bottom"),y}getNearestPointToPoint(t){const e=W.clone(t);if(this.containsPoint(e)){const i=this.getNearestSideToPoint(e);if(i==="left")return new W(this.x,e.y);if(i==="top")return new W(e.x,this.y);if(i==="right")return new W(this.x+this.width,e.y);if(i==="bottom")return new W(e.x,this.y+this.height)}return e.adhereToRect(this)}equals(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.width===this.width&&t.height===this.height}clone(){return new Gt(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(c){function t(e){return e!=null&&e instanceof c}c.isRectangle=t})(Gt||(Gt={})),function(c){function t(e){return e!=null&&typeof e=="object"&&typeof e.x=="number"&&typeof e.y=="number"&&typeof e.width=="number"&&typeof e.height=="number"}c.isRectangleLike=t}(Gt||(Gt={})),function(c){function t(f,v,y,x){return f==null||typeof f=="number"?new c(f,v,y,x):e(f)}c.create=t;function e(f){return c.isRectangle(f)?f.clone():Array.isArray(f)?new c(f[0],f[1],f[2],f[3]):new c(f.x,f.y,f.width,f.height)}c.clone=e;function i(f){return new c(f.x-f.a,f.y-f.b,2*f.a,2*f.b)}c.fromEllipse=i;function l(f){return new c(0,0,f.width,f.height)}c.fromSize=l;function h(f,v){return new c(f.x,f.y,v.width,v.height)}c.fromPositionAndSize=h}(Gt||(Gt={}));class Wt extends mi{get center(){return new W((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}constructor(t,e,i,l){super(),typeof t=="number"&&typeof e=="number"?(this.start=new W(t,e),this.end=new W(i,l)):(this.start=W.create(t),this.end=W.create(e))}getCenter(){return this.center}round(t=0){return this.start.round(t),this.end.round(t),this}translate(t,e){return typeof t=="number"?(this.start.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.end.translate(t)),this}rotate(t,e){return this.start.rotate(t,e),this.end.rotate(t,e),this}scale(t,e,i){return this.start.scale(t,e,i),this.end.scale(t,e,i),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const t=this.start.x-this.end.x,e=this.start.y-this.end.y;return t*t+e*e}setLength(t){const e=this.length();if(!e)return this;const i=t/e;return this.scale(i,i,this.start)}parallel(t){const e=this.clone();if(!e.isDifferentiable())return e;const{start:i,end:l}=e,h=i.clone().rotate(270,l),f=l.clone().rotate(90,i);return i.move(f,t),l.move(h,t),e}vector(){return new W(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const t=new W(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,t)}bbox(){const t=Math.min(this.start.x,this.end.x),e=Math.min(this.start.y,this.end.y),i=Math.max(this.start.x,this.end.x),l=Math.max(this.start.y,this.end.y);return new Gt(t,e,i-t,l-e)}bearing(){return this.start.bearing(this.end)}closestPoint(t){return this.pointAt(this.closestPointNormalizedLength(t))}closestPointLength(t){return this.closestPointNormalizedLength(t)*this.length()}closestPointTangent(t){return this.tangentAt(this.closestPointNormalizedLength(t))}closestPointNormalizedLength(t){const e=this.vector().dot(new Wt(this.start,t).vector()),i=Math.min(1,Math.max(0,e/this.squaredLength()));return Number.isNaN(i)?0:i}pointAt(t){const e=this.start,i=this.end;return t<=0?e.clone():t>=1?i.clone():e.lerp(i,t)}pointAtLength(t){const e=this.start,i=this.end;let l=!0;t<0&&(l=!1,t=-t);const h=this.length();if(t>=h)return l?i.clone():e.clone();const f=(l?t:h-t)/h;return this.pointAt(f)}divideAt(t){const e=this.pointAt(t);return[new Wt(this.start,e),new Wt(e,this.end)]}divideAtLength(t){const e=this.pointAtLength(t);return[new Wt(this.start,e),new Wt(e,this.end)]}containsPoint(t){const e=this.start,i=this.end;if(e.cross(t,i)!==0)return!1;const l=this.length();return!(new Wt(e,t).length()>l||new Wt(t,i).length()>l)}intersect(t,e){const i=t.intersectsWithLine(this,e);return i?Array.isArray(i)?i:[i]:null}intersectsWithLine(t){const e=new W(this.end.x-this.start.x,this.end.y-this.start.y),i=new W(t.end.x-t.start.x,t.end.y-t.start.y),l=e.x*i.y-e.y*i.x,h=new W(t.start.x-this.start.x,t.start.y-this.start.y),f=h.x*i.y-h.y*i.x,v=h.x*e.y-h.y*e.x;if(l===0||f*l<0||v*l<0)return null;if(l>0){if(f>l||v>l)return null}else if(f<l||v<l)return null;return new W(this.start.x+f*e.x/l,this.start.y+f*e.y/l)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(t){const e=W.clone(t),i=this.start,l=this.end;return((l.x-i.x)*(e.y-i.y)-(l.y-i.y)*(e.x-i.x))/this.length()}pointSquaredDistance(t,e){const i=W.create(t,e);return this.closestPoint(i).squaredDistance(i)}pointDistance(t,e){const i=W.create(t,e);return this.closestPoint(i).distance(i)}tangentAt(t){if(!this.isDifferentiable())return null;const e=this.start,i=this.end,l=this.pointAt(t),h=new Wt(e,i);return h.translate(l.x-e.x,l.y-e.y),h}tangentAtLength(t){if(!this.isDifferentiable())return null;const e=this.start,i=this.end,l=this.pointAtLength(t),h=new Wt(e,i);return h.translate(l.x-e.x,l.y-e.y),h}relativeCcw(t,e){const i=W.create(t,e);let l=i.x-this.start.x,h=i.y-this.start.y;const f=this.end.x-this.start.x,v=this.end.y-this.start.y;let y=l*v-h*f;return y===0&&(y=l*f+h*v,y>0&&(l-=f,h-=v,y=l*f+h*v,y<0&&(y=0))),y<0?-1:y>0?1:0}equals(t){return t!=null&&this.start.x===t.start.x&&this.start.y===t.start.y&&this.end.x===t.end.x&&this.end.y===t.end.y}clone(){return new Wt(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}(function(c){function t(e){return e!=null&&e instanceof c}c.isLine=t})(Wt||(Wt={}));class jr extends mi{get center(){return new W(this.x,this.y)}constructor(t,e,i,l){super(),this.x=t==null?0:t,this.y=e==null?0:e,this.a=i==null?0:i,this.b=l==null?0:l}bbox(){return Gt.fromEllipse(this)}getCenter(){return this.center}inflate(t,e){const i=t,l=e!=null?e:t;return this.a+=2*i,this.b+=2*l,this}normalizedDistance(t,e){const i=W.create(t,e),l=i.x-this.x,h=i.y-this.y,f=this.a,v=this.b;return l*l/(f*f)+h*h/(v*v)}containsPoint(t,e){return this.normalizedDistance(t,e)<=1}intersectsWithLine(t){const e=[],i=this.a,l=this.b,h=t.start,f=t.end,v=t.vector(),y=h.diff(new W(this.x,this.y)),x=new W(v.x/(i*i),v.y/(l*l)),E=new W(y.x/(i*i),y.y/(l*l)),S=v.dot(x),_=v.dot(E),T=y.dot(E)-1,D=_*_-S*T;if(D<0)return null;if(D>0){const L=Math.sqrt(D),B=(-_-L)/S,j=(-_+L)/S;if((B<0||B>1)&&(j<0||j>1))return null;B>=0&&B<=1&&e.push(h.lerp(f,B)),j>=0&&j<=1&&e.push(h.lerp(f,j))}else{const L=-_/S;if(L>=0&&L<=1)e.push(h.lerp(f,L));else return null}return e}intersectsWithLineFromCenterToPoint(t,e=0){const i=W.clone(t);e&&i.rotate(e,this.getCenter());const l=i.x-this.x,h=i.y-this.y;let f;if(l===0)return f=this.bbox().getNearestPointToPoint(i),e?f.rotate(-e,this.getCenter()):f;const v=h/l,y=v*v,x=this.a*this.a,E=this.b*this.b;let S=Math.sqrt(1/(1/x+y/E));S=l<0?-S:S;const _=v*S;return f=new W(this.x+S,this.y+_),e?f.rotate(-e,this.getCenter()):f}tangentTheta(t){const e=W.clone(t),i=e.x,l=e.y,h=this.a,f=this.b,v=this.bbox().center,y=v.x,x=v.y,E=30,S=i>v.x+h/2,_=i<v.x-h/2;let T,D;return S||_?(D=i>v.x?l-E:l+E,T=h*h/(i-y)-h*h*(l-x)*(D-x)/(f*f*(i-y))+y):(T=l>v.y?i+E:i-E,D=f*f/(l-x)-f*f*(i-y)*(T-y)/(h*h*(l-x))+x),new W(T,D).theta(e)}scale(t,e){return this.a*=t,this.b*=e,this}rotate(t,e){const i=Gt.fromEllipse(this);i.rotate(t,e);const l=jr.fromRect(i);return this.a=l.a,this.b=l.b,this.x=l.x,this.y=l.y,this}translate(t,e){const i=W.create(t,e);return this.x+=i.x,this.y+=i.y,this}equals(t){return t!=null&&t.x===this.x&&t.y===this.y&&t.a===this.a&&t.b===this.b}clone(){return new jr(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(c){function t(e){return e!=null&&e instanceof c}c.isEllipse=t})(jr||(jr={})),function(c){function t(l,h,f,v){return l==null||typeof l=="number"?new c(l,h,f,v):e(l)}c.create=t;function e(l){return c.isEllipse(l)?l.clone():Array.isArray(l)?new c(l[0],l[1],l[2],l[3]):new c(l.x,l.y,l.a,l.b)}c.parse=e;function i(l){const h=l.center;return new c(h.x,h.y,l.width/2,l.height/2)}c.fromRect=i}(jr||(jr={}));const BE=new RegExp("^[\\s\\dLMCZz,.]*$");function Os(c){return typeof c!="string"?!1:BE.test(c)}function rd(c,t){return(c%t+t)%t}function yi(c,t,e,i,l){const h=[],f=c[c.length-1],v=t!=null&&t>0,y=t||0;if(i&&v){c=c.slice();const S=c[0],_=new W(f.x+(S.x-f.x)/2,f.y+(S.y-f.y)/2);c.splice(0,0,_)}let x=c[0],E=1;for(e?h.push("M",x.x,x.y):h.push("L",x.x,x.y);E<(i?c.length:c.length-1);){let S=c[rd(E,c.length)],_=x.x-S.x,T=x.y-S.y;if(v&&(_!==0||T!==0)&&(l==null||l.indexOf(E-1)<0)){let D=Math.sqrt(_*_+T*T);const L=_*Math.min(y,D/2)/D,B=T*Math.min(y,D/2)/D,j=S.x+L,V=S.y+B;h.push("L",j,V);let G=c[rd(E+1,c.length)];for(;E<c.length-2&&Math.round(G.x-S.x)===0&&Math.round(G.y-S.y)===0;)G=c[rd(E+2,c.length)],E+=1;_=G.x-S.x,T=G.y-S.y,D=Math.max(1,Math.sqrt(_*_+T*T));const X=_*Math.min(y,D/2)/D,K=T*Math.min(y,D/2)/D,it=S.x+X,At=S.y+K;h.push("Q",S.x,S.y,it,At),S=new W(it,At)}else h.push("L",S.x,S.y);x=S,E+=1}return i?h.push("Z"):h.push("L",f.x,f.y),h.map(S=>typeof S=="string"?S:+S.toFixed(3)).join(" ")}function vt(c,t={}){const e=[];return c&&c.length&&c.forEach(i=>{Array.isArray(i)?e.push({x:i[0],y:i[1]}):e.push({x:i.x,y:i.y})}),yi(e,t.round,t.initialMove==null||t.initialMove,t.close,t.exclude)}function Il(c,t,e,i,l=0,h=0,f=0,v,y){if(e===0||i===0)return[];v-=c,y-=t,e=Math.abs(e),i=Math.abs(i);const x=-v/2,E=-y/2,S=Math.cos(l*Math.PI/180),_=Math.sin(l*Math.PI/180),T=S*x+_*E,D=-1*_*x+S*E,L=T*T,B=D*D,j=e*e,V=i*i,G=L/j+B/V;let X;if(G>1)e=Math.sqrt(G)*e,i=Math.sqrt(G)*i,X=0;else{let Ho=1;h===f&&(Ho=-1),X=Ho*Math.sqrt((j*V-j*B-V*L)/(j*B+V*L))}const K=X*e*D/i,it=-1*X*i*T/e,At=S*K-_*it+v/2,jt=_*K+S*it+y/2;let Vt=Math.atan2((D-it)/i,(T-K)/e)-Math.atan2(0,1),ie=Vt>=0?Vt:2*Math.PI+Vt;Vt=Math.atan2((-D-it)/i,(-T-K)/e)-Math.atan2((D-it)/i,(T-K)/e);let Kt=Vt>=0?Vt:2*Math.PI+Vt;f===0&&Kt>0?Kt-=2*Math.PI:f!==0&&Kt<0&&(Kt+=2*Math.PI);const ce=Kt*2/Math.PI,pn=Math.ceil(ce<0?-1*ce:ce),je=Kt/pn,lt=8/3*Math.sin(je/4)*Math.sin(je/4)/Math.sin(je/2),It=S*e,Ie=S*i,Sn=_*e,On=_*i;let tr=Math.cos(ie),fr=Math.sin(ie),g0=-lt*(It*fr+On*tr),p0=-lt*(Sn*fr-Ie*tr),zs=0,$d=0;const Uo=[];for(let Ho=0;Ho<pn;Ho+=1){ie+=je,tr=Math.cos(ie),fr=Math.sin(ie),zs=It*tr-On*fr+At,$d=Sn*tr+Ie*fr+jt;const JC=-lt*(It*fr+On*tr),qC=-lt*(Sn*fr-Ie*tr),su=Ho*6;Uo[su]=Number(g0+c),Uo[su+1]=Number(p0+t),Uo[su+2]=Number(zs-JC+c),Uo[su+3]=Number($d-qC+t),Uo[su+4]=Number(zs+c),Uo[su+5]=Number($d+t),g0=zs+JC,p0=$d+qC}return Uo.map(Ho=>+Ho.toFixed(2))}function zE(c,t,e,i,l=0,h=0,f=0,v,y){const x=[],E=Il(c,t,e,i,l,h,f,v,y);if(E!=null)for(let S=0,_=E.length;S<_;S+=6)x.push("C",E[S],E[S+1],E[S+2],E[S+3],E[S+4],E[S+5]);return x.join(" ")}class bn extends mi{get start(){return this.points[0]||null}get end(){return this.points[this.points.length-1]||null}constructor(t){if(super(),t!=null){if(typeof t=="string")return bn.parse(t);this.points=t.map(e=>W.create(e))}else this.points=[]}scale(t,e,i=new W){return this.points.forEach(l=>l.scale(t,e,i)),this}rotate(t,e){return this.points.forEach(i=>i.rotate(t,e)),this}translate(t,e){const i=W.create(t,e);return this.points.forEach(l=>l.translate(i.x,i.y)),this}round(t=0){return this.points.forEach(e=>e.round(t)),this}bbox(){if(this.points.length===0)return new Gt;let t=1/0,e=-1/0,i=1/0,l=-1/0;const h=this.points;for(let f=0,v=h.length;f<v;f+=1){const y=h[f],x=y.x,E=y.y;x<t&&(t=x),x>e&&(e=x),E<i&&(i=E),E>l&&(l=E)}return new Gt(t,i,e-t,l-i)}closestPoint(t){const e=this.closestPointLength(t);return this.pointAtLength(e)}closestPointLength(t){const e=this.points,i=e.length;if(i===0||i===1)return 0;let l=0,h=0,f=1/0;for(let v=0,y=i-1;v<y;v+=1){const x=new Wt(e[v],e[v+1]),E=x.length(),S=x.closestPointNormalizedLength(t),T=x.pointAt(S).squaredDistance(t);T<f&&(f=T,h=l+S*E),l+=E}return h}closestPointNormalizedLength(t){const e=this.length();return e===0?0:this.closestPointLength(t)/e}closestPointTangent(t){const e=this.closestPointLength(t);return this.tangentAtLength(e)}containsPoint(t){if(this.points.length===0)return!1;const e=W.clone(t),i=e.x,l=e.y,h=this.points,f=h.length;let v=f-1,y=0;for(let x=0;x<f;x+=1){const E=h[v],S=h[x];if(e.equals(E))return!0;const _=new Wt(E,S);if(_.containsPoint(t))return!0;if(l<=E.y&&l>S.y||l>E.y&&l<=S.y){const T=E.x-i>S.x-i?E.x-i:S.x-i;if(T>=0){const D=new W(i+T,l),L=new Wt(t,D);_.intersectsWithLine(L)&&(y+=1)}}v=x}return y%2===1}intersectsWithLine(t){const e=[];for(let i=0,l=this.points.length-1;i<l;i+=1){const h=this.points[i],f=this.points[i+1],v=t.intersectsWithLine(new Wt(h,f));v&&e.push(v)}return e.length>0?e:null}isDifferentiable(){for(let t=0,e=this.points.length-1;t<e;t+=1){const i=this.points[t],l=this.points[t+1];if(new Wt(i,l).isDifferentiable())return!0}return!1}length(){let t=0;for(let e=0,i=this.points.length-1;e<i;e+=1){const l=this.points[e],h=this.points[e+1];t+=l.distance(h)}return t}pointAt(t){const e=this.points,i=e.length;if(i===0)return null;if(i===1||t<=0)return e[0].clone();if(t>=1)return e[i-1].clone();const h=this.length()*t;return this.pointAtLength(h)}pointAtLength(t){const e=this.points,i=e.length;if(i===0)return null;if(i===1)return e[0].clone();let l=!0;t<0&&(l=!1,t=-t);let h=0;for(let v=0,y=i-1;v<y;v+=1){const x=l?v:y-1-v,E=e[x],S=e[x+1],_=new Wt(E,S),T=E.distance(S);if(t<=h+T)return _.pointAtLength((l?1:-1)*(t-h));h+=T}return(l?e[i-1]:e[0]).clone()}tangentAt(t){const i=this.points.length;if(i===0||i===1)return null;t<0&&(t=0),t>1&&(t=1);const h=this.length()*t;return this.tangentAtLength(h)}tangentAtLength(t){const e=this.points,i=e.length;if(i===0||i===1)return null;let l=!0;t<0&&(l=!1,t=-t);let h,f=0;for(let v=0,y=i-1;v<y;v+=1){const x=l?v:y-1-v,E=e[x],S=e[x+1],_=new Wt(E,S),T=E.distance(S);if(_.isDifferentiable()){if(t<=f+T)return _.tangentAtLength((l?1:-1)*(t-f));h=_}f+=T}if(h){const v=l?1:0;return h.tangentAt(v)}return null}simplify(t={}){const e=this.points;if(e.length<3)return this;const i=t.threshold||0;let l=0;for(;e[l+2];){const h=l,f=l+1,v=l+2,y=e[h],x=e[f],E=e[v];new Wt(y,E).closestPoint(x).distance(x)<=i?e.splice(f,1):l+=1}return this}toHull(){const t=this.points,e=t.length;if(e===0)return new bn;let i=t[0];for(let _=1;_<e;_+=1)(t[_].y<i.y||t[_].y===i.y&&t[_].x>i.x)&&(i=t[_]);const l=[];for(let _=0;_<e;_+=1){let T=i.theta(t[_]);T===0&&(T=360),l.push([t[_],_,T])}if(l.sort((_,T)=>{let D=_[2]-T[2];return D===0&&(D=T[1]-_[1]),D}),l.length>2){const _=l[l.length-1];l.unshift(_)}const h={},f=[],v=_=>`${_[0].toString()}@${_[1]}`;for(;l.length!==0;){const _=l.pop(),T=_[0];if(h[v(_)])continue;let D=!1;for(;!D;)if(f.length<2)f.push(_),D=!0;else{const L=f.pop(),B=L[0],j=f.pop(),V=j[0],G=V.cross(B,T);if(G<0)f.push(j),f.push(L),f.push(_),D=!0;else if(G===0){const K=B.angleBetween(V,T);Math.abs(K-180)<1e-10||B.equals(T)||V.equals(B)?(h[v(L)]=B,f.push(j)):Math.abs((K+1)%360-1)<1e-10&&(f.push(j),l.push(L))}else h[v(L)]=B,f.push(j)}}f.length>2&&f.pop();let y,x=-1;for(let _=0,T=f.length;_<T;_+=1){const D=f[_][1];(y===void 0||D<y)&&(y=D,x=_)}let E=[];if(x>0){const _=f.slice(x),T=f.slice(0,x);E=_.concat(T)}else E=f;const S=[];for(let _=0,T=E.length;_<T;_+=1)S.push(E[_][0]);return new bn(S)}equals(t){return t==null||t.points.length!==this.points.length?!1:t.points.every((e,i)=>e.equals(this.points[i]))}clone(){return new bn(this.points.map(t=>t.clone()))}toJSON(){return this.points.map(t=>t.toJSON())}serialize(){return this.points.map(t=>`${t.serialize()}`).join(" ")}}(function(c){function t(e){return e!=null&&e instanceof c}c.isPolyline=t})(bn||(bn={})),function(c){function t(e){const i=e.trim();if(i==="")return new c;const l=[],h=i.split(/\s*,\s*|\s+/);for(let f=0,v=h.length;f<v;f+=2)l.push({x:+h[f],y:+h[f+1]});return new c(l)}c.parse=t}(bn||(bn={}));class Cn extends mi{constructor(t,e,i,l){super(),this.PRECISION=3,this.start=W.create(t),this.controlPoint1=W.create(e),this.controlPoint2=W.create(i),this.end=W.create(l)}bbox(){const t=this.start,e=this.controlPoint1,i=this.controlPoint2,l=this.end,h=t.x,f=t.y,v=e.x,y=e.y,x=i.x,E=i.y,S=l.x,_=l.y,T=[],D=[],L=[[],[]];let B,j,V,G,X,K,it,At;for(let Ie=0;Ie<2;Ie+=1){if(Ie===0?(j=6*h-12*v+6*x,B=-3*h+9*v-9*x+3*S,V=3*v-3*h):(j=6*f-12*y+6*E,B=-3*f+9*y-9*E+3*_,V=3*y-3*f),Math.abs(B)<1e-12){if(Math.abs(j)<1e-12)continue;G=-V/j,G>0&&G<1&&D.push(G);continue}it=j*j-4*V*B,At=Math.sqrt(it),!(it<0)&&(X=(-j+At)/(2*B),X>0&&X<1&&D.push(X),K=(-j-At)/(2*B),K>0&&K<1&&D.push(K))}let jt,Vt,ie,Kt=D.length;const ce=Kt;for(;Kt;)Kt-=1,G=D[Kt],ie=1-G,jt=ie*ie*ie*h+3*ie*ie*G*v+3*ie*G*G*x+G*G*G*S,L[0][Kt]=jt,Vt=ie*ie*ie*f+3*ie*ie*G*y+3*ie*G*G*E+G*G*G*_,L[1][Kt]=Vt,T[Kt]={X:jt,Y:Vt};D[ce]=0,D[ce+1]=1,T[ce]={X:h,Y:f},T[ce+1]={X:S,Y:_},L[0][ce]=h,L[1][ce]=f,L[0][ce+1]=S,L[1][ce+1]=_,D.length=ce+2,L[0].length=ce+2,L[1].length=ce+2,T.length=ce+2;const pn=Math.min.apply(null,L[0]),je=Math.min.apply(null,L[1]),lt=Math.max.apply(null,L[0]),It=Math.max.apply(null,L[1]);return new Gt(pn,je,lt-pn,It-je)}closestPoint(t,e={}){return this.pointAtT(this.closestPointT(t,e))}closestPointLength(t,e={}){const i=this.getOptions(e);return this.lengthAtT(this.closestPointT(t,i),i)}closestPointNormalizedLength(t,e={}){const i=this.getOptions(e),l=this.closestPointLength(t,i);if(!l)return 0;const h=this.length(i);return h===0?0:l/h}closestPointT(t,e={}){const i=this.getPrecision(e),l=this.getDivisions(e),h=Math.pow(10,-i);let f=null,v=0,y=0,x=0,E=0,S=0,_=null;const T=l.length;let D=T>0?1/T:0;for(l.forEach((L,B)=>{const j=L.start.distance(t),V=L.end.distance(t),G=j+V;(_==null||G<_)&&(f=L,v=B*D,y=(B+1)*D,x=j,E=V,_=G,S=L.endpointDistance())});;){const L=x?Math.abs(x-E)/x:0,B=E!=null?Math.abs(x-E)/E:0,j=L<h||B<h,V=x?x<S*h:!0,G=E?E<S*h:!0;if(j||(V||G))return x<=E?v:y;const K=f.divide(.5);D/=2;const it=K[0].start.distance(t),At=K[0].end.distance(t),jt=it+At,Vt=K[1].start.distance(t),ie=K[1].end.distance(t),Kt=Vt+ie;jt<=Kt?(f=K[0],y-=D,x=it,E=At):(f=K[1],v+=D,x=Vt,E=ie)}}closestPointTangent(t,e={}){return this.tangentAtT(this.closestPointT(t,e))}containsPoint(t,e={}){return this.toPolyline(e).containsPoint(t)}divideAt(t,e={}){if(t<=0)return this.divideAtT(0);if(t>=1)return this.divideAtT(1);const i=this.tAt(t,e);return this.divideAtT(i)}divideAtLength(t,e={}){const i=this.tAtLength(t,e);return this.divideAtT(i)}divide(t){return this.divideAtT(t)}divideAtT(t){const e=this.start,i=this.controlPoint1,l=this.controlPoint2,h=this.end;if(t<=0)return[new Cn(e,e,e,e),new Cn(e,i,l,h)];if(t>=1)return[new Cn(e,i,l,h),new Cn(h,h,h,h)];const f=this.getSkeletonPoints(t),v=f.startControlPoint1,y=f.startControlPoint2,x=f.divider,E=f.dividerControlPoint1,S=f.dividerControlPoint2;return[new Cn(e,v,y,x),new Cn(x,E,S,h)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(t){const e=this.start,i=this.controlPoint1,l=this.controlPoint2,h=this.end;if(t<=0)return{startControlPoint1:e.clone(),startControlPoint2:e.clone(),divider:e.clone(),dividerControlPoint1:i.clone(),dividerControlPoint2:l.clone()};if(t>=1)return{startControlPoint1:i.clone(),startControlPoint2:l.clone(),divider:h.clone(),dividerControlPoint1:h.clone(),dividerControlPoint2:h.clone()};const f=new Wt(e,i).pointAt(t),v=new Wt(i,l).pointAt(t),y=new Wt(l,h).pointAt(t),x=new Wt(f,v).pointAt(t),E=new Wt(v,y).pointAt(t),S=new Wt(x,E).pointAt(t);return{startControlPoint1:f,startControlPoint2:x,divider:S,dividerControlPoint1:E,dividerControlPoint2:y}}getSubdivisions(t={}){const e=this.getPrecision(t);let i=[new Cn(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(e===0)return i;let l=this.endpointDistance();const h=Math.pow(10,-e);let f=0;for(;;){f+=1;const v=[];i.forEach(E=>{const S=E.divide(.5);v.push(S[0],S[1])});const y=v.reduce((E,S)=>E+S.endpointDistance(),0),x=y!==0?(y-l)/y:0;if(f>1&&x<h)return v;i=v,l=y}}length(t={}){return this.getDivisions(t).reduce((i,l)=>i+l.endpointDistance(),0)}lengthAtT(t,e={}){if(t<=0)return 0;const i=e.precision===void 0?this.PRECISION:e.precision;return this.divide(t)[0].length({precision:i})}pointAt(t,e={}){if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const i=this.tAt(t,e);return this.pointAtT(i)}pointAtLength(t,e={}){const i=this.tAtLength(t,e);return this.pointAtT(i)}pointAtT(t){return t<=0?this.start.clone():t>=1?this.end.clone():this.getSkeletonPoints(t).divider}isDifferentiable(){const t=this.start,e=this.controlPoint1,i=this.controlPoint2,l=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(l))}tangentAt(t,e={}){if(!this.isDifferentiable())return null;t<0?t=0:t>1&&(t=1);const i=this.tAt(t,e);return this.tangentAtT(i)}tangentAtLength(t,e={}){if(!this.isDifferentiable())return null;const i=this.tAtLength(t,e);return this.tangentAtT(i)}tangentAtT(t){if(!this.isDifferentiable())return null;t<0&&(t=0),t>1&&(t=1);const e=this.getSkeletonPoints(t),i=e.startControlPoint2,l=e.dividerControlPoint1,h=e.divider,f=new Wt(i,l);return f.translate(h.x-i.x,h.y-i.y),f}getPrecision(t={}){return t.precision==null?this.PRECISION:t.precision}getDivisions(t={}){if(t.subdivisions!=null)return t.subdivisions;const e=this.getPrecision(t);return this.getSubdivisions({precision:e})}getOptions(t={}){const e=this.getPrecision(t),i=this.getDivisions(t);return{precision:e,subdivisions:i}}tAt(t,e={}){if(t<=0)return 0;if(t>=1)return 1;const i=this.getOptions(e),h=this.length(i)*t;return this.tAtLength(h,i)}tAtLength(t,e={}){let i=!0;t<0&&(i=!1,t=-t);const l=this.getPrecision(e),h=this.getDivisions(e),f={precision:l,subdivisions:h};let v=null,y,x,E=0,S=0,_=0;const T=h.length;let D=T>0?1/T:0;for(let j=0;j<T;j+=1){const V=i?j:T-1-j,G=h[j],X=G.endpointDistance();if(t<=_+X){v=G,y=V*D,x=(V+1)*D,E=i?t-_:X+_-t,S=i?X+_-t:t-_;break}_+=X}if(v==null)return i?1:0;const L=this.length(f),B=Math.pow(10,-l);for(;;){let j;if(j=L!==0?E/L:0,j<B)return y;if(j=L!==0?S/L:0,j<B)return x;let V,G;const X=v.divide(.5);D/=2;const K=X[0].endpointDistance(),it=X[1].endpointDistance();E<=K?(v=X[0],x-=D,V=E,G=K-V):(v=X[1],y+=D,V=E-K,G=it-V),E=V,S=G}}toPoints(t={}){const e=this.getDivisions(t),i=[e[0].start.clone()];return e.forEach(l=>i.push(l.end.clone())),i}toPolyline(t={}){return new bn(this.toPoints(t))}scale(t,e,i){return this.start.scale(t,e,i),this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this}rotate(t,e){return this.start.rotate(t,e),this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?(this.start.translate(t,e),this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.start.translate(t),this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return t!=null&&this.start.equals(t.start)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)&&this.end.equals(t.end)}clone(){return new Cn(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(c){function t(e){return e!=null&&e instanceof c}c.isCurve=t})(Cn||(Cn={})),function(c){function t(l){const h=l.length,f=[],v=[];let y=2;f[0]=l[0]/y;for(let x=1;x<h;x+=1)v[x]=1/y,y=(x<h-1?4:3.5)-v[x],f[x]=(l[x]-f[x-1])/y;for(let x=1;x<h;x+=1)f[h-x-1]-=v[h-x]*f[h-x];return f}function e(l){const h=l.map(_=>W.clone(_)),f=[],v=[],y=h.length-1;if(y===1)return f[0]=new W((2*h[0].x+h[1].x)/3,(2*h[0].y+h[1].y)/3),v[0]=new W(2*f[0].x-h[0].x,2*f[0].y-h[0].y),[f,v];const x=[];for(let _=1;_<y-1;_+=1)x[_]=4*h[_].x+2*h[_+1].x;x[0]=h[0].x+2*h[1].x,x[y-1]=(8*h[y-1].x+h[y].x)/2;const E=t(x);for(let _=1;_<y-1;_+=1)x[_]=4*h[_].y+2*h[_+1].y;x[0]=h[0].y+2*h[1].y,x[y-1]=(8*h[y-1].y+h[y].y)/2;const S=t(x);for(let _=0;_<y;_+=1)f.push(new W(E[_],S[_])),_<y-1?v.push(new W(2*h[_+1].x-E[_+1],2*h[_+1].y-S[_+1])):v.push(new W((h[y].x+E[y-1])/2,(h[y].y+S[y-1])/2));return[f,v]}function i(l){if(l==null||Array.isArray(l)&&l.length<2)throw new Error("At least 2 points are required");const h=e(l),f=[];for(let v=0,y=h[0].length;v<y;v+=1){const x=new W(h[0][v].x,h[0][v].y),E=new W(h[1][v].x,h[1][v].y);f.push(new c(l[v],x,E,l[v+1]))}return f}c.throughPoints=i}(Cn||(Cn={}));class Pl extends mi{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(this.previousSegment==null)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(t,e){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(t);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(t,e){if(t<=0)return 0;const i=this.length();return t>=1?i:i*t}divideAtT(t){if(this.divideAt)return this.divideAt(t);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(t){if(this.pointAt)return this.pointAt(t);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(t){if(this.tangentAt)return this.tangentAt(t);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class rr extends Pl{constructor(t,e){super(),Wt.isLine(t)?this.endPoint=t.end.clone().round(2):this.endPoint=W.create(t,e).round(2)}get type(){return"L"}get line(){return new Wt(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[new rr(e[0]),new rr(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[new rr(e[0]),new rr(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return this.previousSegment==null?!1:!this.start.equals(this.end)}clone(){return new rr(this.end)}scale(t,e,i){return this.end.scale(t,e,i),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}(function(c){function t(...e){const i=e.length,l=e[0];if(Wt.isLine(l))return new c(l);if(W.isPointLike(l))return i===1?new c(l):e.map(f=>new c(f));if(i===2)return new c(+e[0],+e[1]);const h=[];for(let f=0;f<i;f+=2){const v=+e[f],y=+e[f+1];h.push(new c(v,y))}return h}c.create=t})(rr||(rr={}));class No extends Pl{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new Wt(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(t){return this.line.closestPoint(t)}closestPointLength(t){return this.line.closestPointLength(t)}closestPointNormalizedLength(t){return this.line.closestPointNormalizedLength(t)}closestPointTangent(t){return this.line.closestPointTangent(t)}length(){return this.line.length()}divideAt(t){const e=this.line.divideAt(t);return[e[1].isDifferentiable()?new rr(e[0]):this.clone(),new rr(e[1])]}divideAtLength(t){const e=this.line.divideAtLength(t);return[e[1].isDifferentiable()?new rr(e[0]):this.clone(),new rr(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.line.pointAt(t)}pointAtLength(t){return this.line.pointAtLength(t)}tangentAt(t){return this.line.tangentAt(t)}tangentAtLength(t){return this.line.tangentAtLength(t)}isDifferentiable(){return!this.previousSegment||!this.subpathStartSegment?!1:!this.start.equals(this.end)}scale(){return this}rotate(){return this}translate(){return this}equals(t){return this.type===t.type&&this.start.equals(t.start)&&this.end.equals(t.end)}clone(){return new No}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}(function(c){function t(){return new c}c.create=t})(No||(No={}));class As extends Pl{constructor(t,e){super(),this.isVisible=!1,this.isSubpathStart=!0,Wt.isLine(t)||Cn.isCurve(t)?this.endPoint=t.end.clone().round(2):this.endPoint=W.create(t,e).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(t,e,i){return this.end.scale(t,e,i),this}rotate(t,e){return this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?this.end.translate(t,e):this.end.translate(t),this}clone(){return new As(this.end)}equals(t){return this.type===t.type&&this.end.equals(t.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const t=this.end;return`${this.type} ${t.x} ${t.y}`}}(function(c){function t(...e){const i=e.length,l=e[0];if(Wt.isLine(l))return new c(l);if(Cn.isCurve(l))return new c(l);if(W.isPointLike(l)){if(i===1)return new c(l);const f=[];for(let v=0;v<i;v+=1)v===0?f.push(new c(e[v])):f.push(new rr(e[v]));return f}if(i===2)return new c(+e[0],+e[1]);const h=[];for(let f=0;f<i;f+=2){const v=+e[f],y=+e[f+1];f===0?h.push(new c(v,y)):h.push(new rr(v,y))}return h}c.create=t})(As||(As={}));class Nr extends Pl{constructor(t,e,i,l,h,f){super(),Cn.isCurve(t)?(this.controlPoint1=t.controlPoint1.clone().round(2),this.controlPoint2=t.controlPoint2.clone().round(2),this.endPoint=t.end.clone().round(2)):typeof t=="number"?(this.controlPoint1=new W(t,e).round(2),this.controlPoint2=new W(i,l).round(2),this.endPoint=new W(h,f).round(2)):(this.controlPoint1=W.create(t).round(2),this.controlPoint2=W.create(e).round(2),this.endPoint=W.create(i).round(2))}get type(){return"C"}get curve(){return new Cn(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(t){return this.curve.closestPoint(t)}closestPointLength(t){return this.curve.closestPointLength(t)}closestPointNormalizedLength(t){return this.curve.closestPointNormalizedLength(t)}closestPointTangent(t){return this.curve.closestPointTangent(t)}length(){return this.curve.length()}divideAt(t,e={}){const i=this.curve.divideAt(t,e);return[new Nr(i[0]),new Nr(i[1])]}divideAtLength(t,e={}){const i=this.curve.divideAtLength(t,e);return[new Nr(i[0]),new Nr(i[1])]}divideAtT(t){const e=this.curve.divideAtT(t);return[new Nr(e[0]),new Nr(e[1])]}getSubdivisions(){return[]}pointAt(t){return this.curve.pointAt(t)}pointAtLength(t){return this.curve.pointAtLength(t)}tangentAt(t){return this.curve.tangentAt(t)}tangentAtLength(t){return this.curve.tangentAtLength(t)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.start,e=this.controlPoint1,i=this.controlPoint2,l=this.end;return!(t.equals(e)&&e.equals(i)&&i.equals(l))}scale(t,e,i){return this.controlPoint1.scale(t,e,i),this.controlPoint2.scale(t,e,i),this.end.scale(t,e,i),this}rotate(t,e){return this.controlPoint1.rotate(t,e),this.controlPoint2.rotate(t,e),this.end.rotate(t,e),this}translate(t,e){return typeof t=="number"?(this.controlPoint1.translate(t,e),this.controlPoint2.translate(t,e),this.end.translate(t,e)):(this.controlPoint1.translate(t),this.controlPoint2.translate(t),this.end.translate(t)),this}equals(t){return this.start.equals(t.start)&&this.end.equals(t.end)&&this.controlPoint1.equals(t.controlPoint1)&&this.controlPoint2.equals(t.controlPoint2)}clone(){return new Nr(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const t=this.controlPoint1,e=this.controlPoint2,i=this.end;return[this.type,t.x,t.y,e.x,e.y,i.x,i.y].join(" ")}}(function(c){function t(...e){const i=e.length,l=e[0];if(Cn.isCurve(l))return new c(l);if(W.isPointLike(l)){if(i===3)return new c(e[0],e[1],e[2]);const f=[];for(let v=0;v<i;v+=3)f.push(new c(e[v],e[v+1],e[v+2]));return f}if(i===6)return new c(e[0],e[1],e[2],e[3],e[4],e[5]);const h=[];for(let f=0;f<i;f+=6)h.push(new c(e[f],e[f+1],e[f+2],e[f+3],e[f+4],e[f+5]));return h}c.create=t})(Nr||(Nr={}));function Nl(c,t,e){return{x:c*Math.cos(e)-t*Math.sin(e),y:c*Math.sin(e)+t*Math.cos(e)}}function rm(c,t,e,i,l,h){const f=.3333333333333333,v=2/3;return[f*c+v*e,f*t+v*i,f*l+v*e,f*h+v*i,l,h]}function im(c,t,e,i,l,h,f,v,y,x){const E=Math.PI*120/180,S=Math.PI/180*(+l||0);let _=[],T,D,L,B,j;if(x)D=x[0],L=x[1],B=x[2],j=x[3];else{T=Nl(c,t,-S),c=T.x,t=T.y,T=Nl(v,y,-S),v=T.x,y=T.y;const je=(c-v)/2,lt=(t-y)/2;let It=je*je/(e*e)+lt*lt/(i*i);It>1&&(It=Math.sqrt(It),e=It*e,i=It*i);const Ie=e*e,Sn=i*i,On=(h===f?-1:1)*Math.sqrt(Math.abs((Ie*Sn-Ie*lt*lt-Sn*je*je)/(Ie*lt*lt+Sn*je*je)));B=On*e*lt/i+(c+v)/2,j=On*-i*je/e+(t+y)/2,D=Math.asin((t-j)/i),L=Math.asin((y-j)/i),D=c<B?Math.PI-D:D,L=v<B?Math.PI-L:L,D<0&&(D=Math.PI*2+D),L<0&&(L=Math.PI*2+L),f&&D>L&&(D-=Math.PI*2),!f&&L>D&&(L-=Math.PI*2)}let V=L-D;if(Math.abs(V)>E){const je=L,lt=v,It=y;L=D+E*(f&&L>D?1:-1),v=B+e*Math.cos(L),y=j+i*Math.sin(L),_=im(v,y,e,i,l,0,f,lt,It,[L,je,B,j])}V=L-D;const G=Math.cos(D),X=Math.sin(D),K=Math.cos(L),it=Math.sin(L),At=Math.tan(V/4),jt=4/3*(e*At),Vt=4/3*(i*At),ie=[c,t],Kt=[c+jt*X,t-Vt*G],ce=[v+jt*it,y-Vt*K],pn=[v,y];if(Kt[0]=2*ie[0]-Kt[0],Kt[1]=2*ie[1]-Kt[1],x)return[Kt,ce,pn].concat(_);{_=[Kt,ce,pn].concat(_).join().split(",");const je=[],lt=_.length;for(let It=0;It<lt;It+=1)je[It]=It%2?Nl(+_[It-1],+_[It],S).y:Nl(+_[It],+_[It+1],S).x;return je}}function FE(c){if(!c)return null;const t=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,e=new RegExp(`([a-z])[${t},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${t}]*,?[${t}]*)+)`,"ig"),i=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${t}]*,?[${t}]*`,"ig"),l={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},h=[];return c.replace(e,(f,v,y)=>{const x=[];let E=v.toLowerCase();y.replace(i,(_,T)=>(T&&x.push(+T),_)),E==="m"&&x.length>2&&(h.push([v,...x.splice(0,2)]),E="l",v=v==="m"?"l":"L");const S=l[E];for(;x.length>=S&&(h.push([v,...x.splice(0,S)]),!!S););return f}),h}function GE(c){const t=FE(c);if(!t||!t.length)return[["M",0,0]];let e=0,i=0,l=0,h=0;const f=[];for(let v=0,y=t.length;v<y;v+=1){const x=[];f.push(x);const E=t[v],S=E[0];if(S!==S.toUpperCase())switch(x[0]=S.toUpperCase(),x[0]){case"A":x[1]=E[1],x[2]=E[2],x[3]=E[3],x[4]=E[4],x[5]=E[5],x[6]=+E[6]+e,x[7]=+E[7]+i;break;case"V":x[1]=+E[1]+i;break;case"H":x[1]=+E[1]+e;break;case"M":l=+E[1]+e,h=+E[2]+i;for(let _=1,T=E.length;_<T;_+=1)x[_]=+E[_]+(_%2?e:i);break;default:for(let _=1,T=E.length;_<T;_+=1)x[_]=+E[_]+(_%2?e:i);break}else for(let _=0,T=E.length;_<T;_+=1)x[_]=E[_];switch(x[0]){case"Z":e=+l,i=+h;break;case"H":e=x[1];break;case"V":i=x[1];break;case"M":l=x[x.length-2],h=x[x.length-1],e=x[x.length-2],i=x[x.length-1];break;default:e=x[x.length-2],i=x[x.length-1];break}}return f}function jE(c){const t=GE(c),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function i(y,x,E){let S,_;if(!y)return["C",x.x,x.y,x.x,x.y,x.x,x.y];switch(y[0]in{T:1,Q:1}||(x.qx=null,x.qy=null),y[0]){case"M":x.X=y[1],x.Y=y[2];break;case"A":return parseFloat(y[1])===0||parseFloat(y[2])===0?["L",y[6],y[7]]:["C"].concat(im.apply(0,[x.x,x.y].concat(y.slice(1))));case"S":return E==="C"||E==="S"?(S=x.x*2-x.bx,_=x.y*2-x.by):(S=x.x,_=x.y),["C",S,_].concat(y.slice(1));case"T":return E==="Q"||E==="T"?(x.qx=x.x*2-x.qx,x.qy=x.y*2-x.qy):(x.qx=x.x,x.qy=x.y),["C"].concat(rm(x.x,x.y,x.qx,x.qy,y[1],y[2]));case"Q":return x.qx=y[1],x.qy=y[2],["C"].concat(rm(x.x,x.y,y[1],y[2],y[3],y[4]));case"H":return["L"].concat(y[1],x.y);case"V":return["L"].concat(x.x,y[1]);case"L":break;case"Z":break;default:break}return y}function l(y,x){if(y[x].length>7){y[x].shift();const E=y[x];for(;E.length;)h[x]="A",x+=1,y.splice(x,0,["C"].concat(E.splice(0,6)));y.splice(x,1),v=t.length}}const h=[];let f="",v=t.length;for(let y=0;y<v;y+=1){let x="";t[y]&&(x=t[y][0]),x!=="C"&&(h[y]=x,y>0&&(f=h[y-1])),t[y]=i(t[y],e,f),h[y]!=="A"&&x==="C"&&(h[y]="C"),l(t,y);const E=t[y],S=E.length;e.x=E[S-2],e.y=E[S-1],e.bx=parseFloat(E[S-4])||e.x,e.by=parseFloat(E[S-3])||e.y}return(!t[0][0]||t[0][0]!=="M")&&t.unshift(["M",0,0]),t}function VE(c){return jE(c).map(t=>t.map(e=>typeof e=="string"?e:rn.round(e,2))).join(",").split(",").join(" ")}class he extends mi{constructor(t){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(t))if(Wt.isLine(t[0])||Cn.isCurve(t[0])){let e=null;t.forEach((l,h)=>{h===0&&this.appendSegment(he.createSegment("M",l.start)),e!=null&&!e.end.equals(l.start)&&this.appendSegment(he.createSegment("M",l.start)),Wt.isLine(l)?this.appendSegment(he.createSegment("L",l.end)):Cn.isCurve(l)&&this.appendSegment(he.createSegment("C",l.controlPoint1,l.controlPoint2,l.end)),e=l})}else t.forEach(i=>{i.isSegment&&this.appendSegment(i)});else t!=null&&(Wt.isLine(t)?(this.appendSegment(he.createSegment("M",t.start)),this.appendSegment(he.createSegment("L",t.end))):Cn.isCurve(t)?(this.appendSegment(he.createSegment("M",t.start)),this.appendSegment(he.createSegment("C",t.controlPoint1,t.controlPoint2,t.end))):bn.isPolyline(t)?t.points&&t.points.length&&t.points.forEach((e,i)=>{const l=i===0?he.createSegment("M",e):he.createSegment("L",e);this.appendSegment(l)}):t.isSegment&&this.appendSegment(t))}get start(){const t=this.segments,e=t.length;if(e===0)return null;for(let i=0;i<e;i+=1){const l=t[i];if(l.isVisible)return l.start}return t[e-1].end}get end(){const t=this.segments,e=t.length;if(e===0)return null;for(let i=e-1;i>=0;i-=1){const l=t[i];if(l.isVisible)return l.end}return t[e-1].end}moveTo(...t){return this.appendSegment(As.create.call(null,...t))}lineTo(...t){return this.appendSegment(rr.create.call(null,...t))}curveTo(...t){return this.appendSegment(Nr.create.call(null,...t))}arcTo(t,e,i,l,h,f,v){const y=this.end||new W,x=typeof f=="number"?Il(y.x,y.y,t,e,i,l,h,f,v):Il(y.x,y.y,t,e,i,l,h,f.x,f.y);if(x!=null)for(let E=0,S=x.length;E<S;E+=6)this.curveTo(x[E],x[E+1],x[E+2],x[E+3],x[E+4],x[E+5]);return this}quadTo(t,e,i,l){const h=this.end||new W,f=["M",h.x,h.y];if(typeof t=="number")f.push("Q",t,e,i,l);else{const y=e;f.push("Q",t.x,t.y,y.x,y.y)}const v=he.parse(f.join(" "));return this.appendSegment(v.segments.slice(1)),this}close(){return this.appendSegment(No.create())}drawPoints(t,e={}){const i=vt(t,e),l=he.parse(i);l&&l.segments&&this.appendSegment(l.segments)}bbox(){const t=this.segments,e=t.length;if(e===0)return null;let i;for(let h=0;h<e;h+=1){const f=t[h];if(f.isVisible){const v=f.bbox();v!=null&&(i=i?i.union(v):v)}}if(i!=null)return i;const l=t[e-1];return new Gt(l.end.x,l.end.y,0,0)}appendSegment(t){const e=this.segments.length;let i=e!==0?this.segments[e-1]:null,l;const h=null;if(Array.isArray(t))for(let f=0,v=t.length;f<v;f+=1){const y=t[f];l=this.prepareSegment(y,i,h),this.segments.push(l),i=l}else t!=null&&t.isSegment&&(l=this.prepareSegment(t,i,h),this.segments.push(l));return this}insertSegment(t,e){const i=this.segments.length;if(t<0&&(t=i+t+1),t>i||t<0)throw new Error("Index out of range.");let l,h=null,f=null;if(i!==0&&(t>=1?(h=this.segments[t-1],f=h.nextSegment):(h=null,f=this.segments[0])),!Array.isArray(e))l=this.prepareSegment(e,h,f),this.segments.splice(t,0,l);else for(let v=0,y=e.length;v<y;v+=1){const x=e[v];l=this.prepareSegment(x,h,f),this.segments.splice(t+v,0,l),h=l}return this}removeSegment(t){const e=this.fixIndex(t),i=this.segments.splice(e,1)[0],l=i.previousSegment,h=i.nextSegment;return l&&(l.nextSegment=h),h&&(h.previousSegment=l),i.isSubpathStart&&h&&this.updateSubpathStartSegment(h),i}replaceSegment(t,e){const i=this.fixIndex(t);let l;const h=this.segments[i];let f=h.previousSegment;const v=h.nextSegment;let y=h.isSubpathStart;if(!Array.isArray(e))l=this.prepareSegment(e,f,v),this.segments.splice(i,1,l),y&&l.isSubpathStart&&(y=!1);else{this.segments.splice(t,1);for(let x=0,E=e.length;x<E;x+=1){const S=e[x];l=this.prepareSegment(S,f,v),this.segments.splice(t+x,0,l),f=l,y&&l.isSubpathStart&&(y=!1)}}y&&v&&this.updateSubpathStartSegment(v)}getSegment(t){const e=this.fixIndex(t);return this.segments[e]}fixIndex(t){const e=this.segments.length;if(e===0)throw new Error("Path has no segments.");let i=t;for(;i<0;)i=e+i;if(i>=e||i<0)throw new Error("Index out of range.");return i}segmentAt(t,e={}){const i=this.segmentIndexAt(t,e);return i?this.getSegment(i):null}segmentAtLength(t,e={}){const i=this.segmentIndexAtLength(t,e);return i?this.getSegment(i):null}segmentIndexAt(t,e={}){if(this.segments.length===0)return null;const i=rn.clamp(t,0,1),l=this.getOptions(e),f=this.length(l)*i;return this.segmentIndexAtLength(f,l)}segmentIndexAtLength(t,e={}){const i=this.segments.length;if(i===0)return null;let l=!0;t<0&&(l=!1,t=-t);const h=this.getPrecision(e),f=this.getSubdivisions(e);let v=0,y=null;for(let x=0;x<i;x+=1){const E=l?x:i-1-x,S=this.segments[E],_=f[E],T=S.length({precision:h,subdivisions:_});if(S.isVisible){if(t<=v+T)return E;y=E}v+=T}return y}getSegmentSubdivisions(t={}){const e=this.getPrecision(t),i=[];for(let l=0,h=this.segments.length;l<h;l+=1){const v=this.segments[l].getSubdivisions({precision:e});i.push(v)}return i}updateSubpathStartSegment(t){let e=t.previousSegment,i=t;for(;i&&!i.isSubpathStart;)e!=null?i.subpathStartSegment=e.subpathStartSegment:i.subpathStartSegment=null,e=i,i=i.nextSegment}prepareSegment(t,e,i){t.previousSegment=e,t.nextSegment=i,e!=null&&(e.nextSegment=t),i!=null&&(i.previousSegment=t);let l=t;return t.isSubpathStart&&(t.subpathStartSegment=t,l=i),l!=null&&this.updateSubpathStartSegment(l),t}closestPoint(t,e={}){const i=this.closestPointT(t,e);return i?this.pointAtT(i):null}closestPointLength(t,e={}){const i=this.getOptions(e),l=this.closestPointT(t,i);return l?this.lengthAtT(l,i):0}closestPointNormalizedLength(t,e={}){const i=this.getOptions(e),l=this.closestPointLength(t,i);if(l===0)return 0;const h=this.length(i);return h===0?0:l/h}closestPointT(t,e={}){if(this.segments.length===0)return null;const i=this.getPrecision(e),l=this.getSubdivisions(e);let h,f=1/0;for(let v=0,y=this.segments.length;v<y;v+=1){const x=this.segments[v],E=l[v];if(x.isVisible){const S=x.closestPointT(t,{precision:i,subdivisions:E}),_=x.pointAtT(S),T=rn.squaredLength(_,t);T<f&&(h={segmentIndex:v,value:S},f=T)}}return h||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(t,e={}){if(this.segments.length===0)return null;const i=this.getPrecision(e),l=this.getSubdivisions(e);let h,f=1/0;for(let v=0,y=this.segments.length;v<y;v+=1){const x=this.segments[v],E=l[v];if(x.isDifferentiable()){const S=x.closestPointT(t,{precision:i,subdivisions:E}),_=x.pointAtT(S),T=rn.squaredLength(_,t);T<f&&(h=x.tangentAtT(S),f=T)}}return h||null}containsPoint(t,e={}){const i=this.toPolylines(e);if(!i)return!1;let l=0;for(let h=0,f=i.length;h<f;h+=1)i[h].containsPoint(t)&&(l+=1);return l%2===1}pointAt(t,e={}){if(this.segments.length===0)return null;if(t<=0)return this.start.clone();if(t>=1)return this.end.clone();const i=this.getOptions(e),h=this.length(i)*t;return this.pointAtLength(h,i)}pointAtLength(t,e={}){if(this.segments.length===0)return null;if(t===0)return this.start.clone();let i=!0;t<0&&(i=!1,t=-t);const l=this.getPrecision(e),h=this.getSubdivisions(e);let f,v=0;for(let x=0,E=this.segments.length;x<E;x+=1){const S=i?x:E-1-x,_=this.segments[S],T=h[S],D=_.length({precision:l,subdivisions:T});if(_.isVisible){if(t<=v+D)return _.pointAtLength((i?1:-1)*(t-v),{precision:l,subdivisions:T});f=_}v+=D}return f?i?f.end:f.start:this.segments[this.segments.length-1].end.clone()}pointAtT(t){const e=this.segments,i=e.length;if(i===0)return null;const l=t.segmentIndex;if(l<0)return e[0].pointAtT(0);if(l>=i)return e[i-1].pointAtT(1);const h=rn.clamp(t.value,0,1);return e[l].pointAtT(h)}divideAt(t,e={}){if(this.segments.length===0)return null;const i=rn.clamp(t,0,1),l=this.getOptions(e),f=this.length(l)*i;return this.divideAtLength(f,l)}divideAtLength(t,e={}){if(this.segments.length===0)return null;let i=!0;t<0&&(i=!1,t=-t);const l=this.getPrecision(e),h=this.getSubdivisions(e);let f=0,v,y,x,E,S;for(let K=0,it=this.segments.length;K<it;K+=1){const At=i?K:it-1-K,jt=this.getSegment(At),Vt=h[At],ie={precision:l,subdivisions:Vt},Kt=jt.length(ie);if(jt.isDifferentiable()&&(x=jt,E=At,t<=f+Kt)){y=At,v=jt.divideAtLength((i?1:-1)*(t-f),ie);break}f+=Kt}if(!x)return null;v||(y=E,S=i?1:0,v=x.divideAtT(S));const _=this.clone(),T=y;_.replaceSegment(T,v);const D=T;let L=T+1,B=T+2;v[0].isDifferentiable()||(_.removeSegment(D),L-=1,B-=1);const j=_.getSegment(L).start;_.insertSegment(L,he.createSegment("M",j)),B+=1,v[1].isDifferentiable()||(_.removeSegment(B-1),B-=1);const V=B-D-1;for(let K=B,it=_.segments.length;K<it;K+=1){const At=this.getSegment(K-V),jt=_.getSegment(K);if(jt.type==="Z"&&!At.subpathStartSegment.end.equals(jt.subpathStartSegment.end)){const Vt=he.createSegment("L",At.end);_.replaceSegment(K,Vt)}}const G=new he(_.segments.slice(0,L)),X=new he(_.segments.slice(L));return[G,X]}intersectsWithLine(t,e={}){const i=this.toPolylines(e);if(i==null)return null;let l=null;for(let h=0,f=i.length;h<f;h+=1){const v=i[h],y=t.intersect(v);y&&(l==null&&(l=[]),Array.isArray(y)?l.push(...y):l.push(y))}return l}isDifferentiable(){for(let t=0,e=this.segments.length;t<e;t+=1)if(this.segments[t].isDifferentiable())return!0;return!1}isValid(){const t=this.segments;return t.length===0||t[0].type==="M"}length(t={}){if(this.segments.length===0)return 0;const e=this.getSubdivisions(t);let i=0;for(let l=0,h=this.segments.length;l<h;l+=1){const f=this.segments[l],v=e[l];i+=f.length({subdivisions:v})}return i}lengthAtT(t,e={}){const i=this.segments.length;if(i===0)return 0;let l=t.segmentIndex;if(l<0)return 0;let h=rn.clamp(t.value,0,1);l>=i&&(l=i-1,h=1);const f=this.getPrecision(e),v=this.getSubdivisions(e);let y=0;for(let S=0;S<l;S+=1){const _=this.segments[S],T=v[S];y+=_.length({precision:f,subdivisions:T})}const x=this.segments[l],E=v[l];return y+=x.lengthAtT(h,{precision:f,subdivisions:E}),y}tangentAt(t,e={}){if(this.segments.length===0)return null;const i=rn.clamp(t,0,1),l=this.getOptions(e),f=this.length(l)*i;return this.tangentAtLength(f,l)}tangentAtLength(t,e={}){if(this.segments.length===0)return null;let i=!0;t<0&&(i=!1,t=-t);const l=this.getPrecision(e),h=this.getSubdivisions(e);let f,v=0;for(let y=0,x=this.segments.length;y<x;y+=1){const E=i?y:x-1-y,S=this.segments[E],_=h[E],T=S.length({precision:l,subdivisions:_});if(S.isDifferentiable()){if(t<=v+T)return S.tangentAtLength((i?1:-1)*(t-v),{precision:l,subdivisions:_});f=S}v+=T}if(f){const y=i?1:0;return f.tangentAtT(y)}return null}tangentAtT(t){const e=this.segments.length;if(e===0)return null;const i=t.segmentIndex;if(i<0)return this.segments[0].tangentAtT(0);if(i>=e)return this.segments[e-1].tangentAtT(1);const l=rn.clamp(t.value,0,1);return this.segments[i].tangentAtT(l)}getPrecision(t={}){return t.precision==null?this.PRECISION:t.precision}getSubdivisions(t={}){if(t.segmentSubdivisions==null){const e=this.getPrecision(t);return this.getSegmentSubdivisions({precision:e})}return t.segmentSubdivisions}getOptions(t={}){const e=this.getPrecision(t),i=this.getSubdivisions(t);return{precision:e,segmentSubdivisions:i}}toPoints(t={}){const e=this.segments,i=e.length;if(i===0)return null;const l=this.getSubdivisions(t),h=[];let f=[];for(let v=0;v<i;v+=1){const y=e[v];if(y.isVisible){const x=l[v];x.length>0?x.forEach(E=>f.push(E.start)):f.push(y.start)}else f.length>0&&(f.push(e[v-1].end),h.push(f),f=[])}return f.length>0&&(f.push(this.end),h.push(f)),h}toPolylines(t={}){const e=this.toPoints(t);return e?e.map(i=>new bn(i)):null}scale(t,e,i){return this.segments.forEach(l=>l.scale(t,e,i)),this}rotate(t,e){return this.segments.forEach(i=>i.rotate(t,e)),this}translate(t,e){return typeof t=="number"?this.segments.forEach(i=>i.translate(t,e)):this.segments.forEach(i=>i.translate(t)),this}clone(){const t=new he;return this.segments.forEach(e=>t.appendSegment(e.clone())),t}equals(t){if(t==null)return!1;const e=this.segments,i=t.segments,l=e.length;if(i.length!==l)return!1;for(let h=0;h<l;h+=1){const f=e[h],v=i[h];if(f.type!==v.type||!f.equals(v))return!1}return!0}toJSON(){return this.segments.map(t=>t.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(t=>t.serialize()).join(" ")}toString(){return this.serialize()}}(function(c){function t(e){return e!=null&&e instanceof c}c.isPath=t})(he||(he={})),function(c){function t(i){if(!i)return new c;const l=new c,h=/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g,f=c.normalize(i).match(h);if(f!=null)for(let v=0,y=f.length;v<y;v+=1){const x=f[v],E=/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g,S=x.match(E);if(S!=null){const _=S[0],T=S.slice(1).map(L=>+L),D=e.call(null,_,...T);l.appendSegment(D)}}return l}c.parse=t;function e(i,...l){if(i==="M")return As.create.call(null,...l);if(i==="L")return rr.create.call(null,...l);if(i==="C")return Nr.create.call(null,...l);if(i==="z"||i==="Z")return No.create();throw new Error(`Invalid path segment type "${i}"`)}c.createSegment=e}(he||(he={})),function(c){c.normalize=VE,c.isValid=Os,c.drawArc=zE,c.drawPoints=vt,c.arcToCurves=Il}(he||(he={}));class Mn{constructor(t){this.options=Object.assign({},t),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(t,e,i=!1){if(typeof t=="object"){Object.entries(t).forEach(([f,v])=>{this.register(f,v,e)});return}this.exist(t)&&!i&&!hn.isApplyingHMR()&&this.onDuplicated(t);const l=this.options.process,h=l?ue(l,this,t,e):e;return this.data[t]=h,h}unregister(t){const e=t?this.data[t]:null;return delete this.data[t],e}get(t){return t?this.data[t]:null}exist(t){return t?this.data[t]!=null:!1}onDuplicated(t){try{throw this.options.onConflict&&ue(this.options.onConflict,this,t),new Error(`${Ca(this.options.type)} with name '${t}' already registered.`)}catch(e){throw e}}onNotFound(t,e){throw new Error(this.getSpellingSuggestion(t,e))}getSpellingSuggestion(t,e){const i=this.getSpellingSuggestionForName(t),l=e?`${e} ${vE(this.options.type)}`:this.options.type;return`${Ca(l)} with name '${t}' does not exist.${i?` Did you mean '${i}'?`:""}`}getSpellingSuggestionForName(t){return bE(t,Object.keys(this.data),e=>e)}}(function(c){function t(e){return new c(e)}c.create=t})(Mn||(Mn={}));const UE={color:"#aaaaaa",thickness:1,markup:"rect",update(c,t){const e=t.thickness*t.sx,i=t.thickness*t.sy;nn(c,{width:e,height:i,rx:e,ry:i,fill:t.color})}},HE={color:"#aaaaaa",thickness:1,markup:"rect",update(c,t){const e=t.sx<=1?t.thickness*t.sx:t.thickness;nn(c,{width:e,height:e,rx:e,ry:e,fill:t.color})}},Vr={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(c,t){let e;const i=t.width,l=t.height,h=t.thickness;i-h>=0&&l-h>=0?e=["M",i,0,"H0 M0 0 V0",l].join(" "):e="M 0 0 0 0",nn(c,{d:e,stroke:t.color,"stroke-width":t.thickness})}},Dl=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(c,t){let e;const i=t.width,l=t.height,h=t.thickness;i-h>=0&&l-h>=0?e=["M",i,0,"H0 M0 0 V0",l].join(" "):e="M 0 0 0 0",nn(c,{d:e,stroke:t.color,"stroke-width":t.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(c,t){let e;const i=t.factor||1,l=t.width*i,h=t.height*i,f=t.thickness;l-f>=0&&h-f>=0?e=["M",l,0,"H0 M0 0 V0",h].join(" "):e="M 0 0 0 0",t.width=l,t.height=h,nn(c,{d:e,stroke:t.color,"stroke-width":t.thickness})}}];class sr{constructor(){this.patterns={},this.root=Ee.create(at(),{width:"100%",height:"100%"},[Rn("defs")]).node}add(t,e){const i=this.root.childNodes[0];i&&i.appendChild(e),this.patterns[t]=e,Ee.create("rect",{width:"100%",height:"100%",fill:`url(#${t})`}).appendTo(this.root)}get(t){return this.patterns[t]}has(t){return this.patterns[t]!=null}}(function(c){c.presets=xt,c.registry=Mn.create({type:"grid"}),c.registry.register(c.presets,!0)})(sr||(sr={}));const om=function(c){const t=document.createElement("canvas"),e=c.width,i=c.height;t.width=e*2,t.height=i;const l=t.getContext("2d");return l.drawImage(c,0,0,e,i),l.translate(2*e,0),l.scale(-1,1),l.drawImage(c,0,0,e,i),t},sm=function(c){const t=document.createElement("canvas"),e=c.width,i=c.height;t.width=e,t.height=i*2;const l=t.getContext("2d");return l.drawImage(c,0,0,e,i),l.translate(0,2*i),l.scale(1,-1),l.drawImage(c,0,0,e,i),t},am=function(c){const t=document.createElement("canvas"),e=c.width,i=c.height;t.width=2*e,t.height=2*i;const l=t.getContext("2d");return l.drawImage(c,0,0,e,i),l.setTransform(-1,0,0,-1,t.width,t.height),l.drawImage(c,0,0,e,i),l.setTransform(-1,0,0,1,t.width,0),l.drawImage(c,0,0,e,i),l.setTransform(1,0,0,-1,0,t.height),l.drawImage(c,0,0,e,i),t},$E=function(c,t){const e=c.width,i=c.height,l=document.createElement("canvas");l.width=e*3,l.height=i*3;const h=l.getContext("2d"),f=t.angle!=null?-t.angle:-20,v=$e.toRad(f),y=l.width/4,x=l.height/4;for(let E=0;E<4;E+=1)for(let S=0;S<4;S+=1)(E+S)%2>0&&(h.setTransform(1,0,0,1,(2*E-1)*y,(2*S-1)*x),h.rotate(v),h.drawImage(c,-e/2,-i/2,e,i));return l};var Hi;(function(c){c.presets=Object.assign({},Ct),c.presets["flip-x"]=om,c.presets["flip-y"]=sm,c.presets["flip-xy"]=am,c.registry=Mn.create({type:"background pattern"}),c.registry.register(c.presets,!0)})(Hi||(Hi={}));function Un(c,t){return c!=null?c:t}function Ke(c,t){return c!=null&&Number.isFinite(c)?c:t}function cm(c={}){const t=Un(c.color,"blue"),e=Ke(c.width,1),i=Ke(c.margin,2),l=Ke(c.opacity,1),h=i,f=i+e;return`
    <filter>
      <feFlood flood-color="${t}" flood-opacity="${l}" result="colored"/>
      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${f}" />
      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${h}" />
      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>
      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>
      <feMerge>
        <feMergeNode in="outline"/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>
  `.trim()}function Be(c={}){const t=Un(c.color,"red"),e=Ke(c.blur,0),i=Ke(c.width,1),l=Ke(c.opacity,1);return`
      <filter>
        <feFlood flood-color="${t}" flood-opacity="${l}" result="colored"/>
        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${i}"/>
        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>
        <feGaussianBlur result="blured" in="composed" stdDeviation="${e}"/>
        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>
      </filter>
    `.trim()}function WE(c={}){const t=Ke(c.x,2);return`
    <filter>
      <feGaussianBlur stdDeviation="${c.y!=null&&Number.isFinite(c.y)?[t,c.y]:t}"/>
    </filter>
  `.trim()}function XE(c={}){const t=Ke(c.dx,0),e=Ke(c.dy,0),i=Un(c.color,"black"),l=Ke(c.blur,4),h=Ke(c.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>
         <feDropShadow stdDeviation="${l}" dx="${t}" dy="${e}" flood-color="${i}" flood-opacity="${h}" />
       </filter>`.trim():`<filter>
         <feGaussianBlur in="SourceAlpha" stdDeviation="${l}" />
         <feOffset dx="${t}" dy="${e}" result="offsetblur" />
         <feFlood flood-color="${i}" />
         <feComposite in2="offsetblur" operator="in" />
         <feComponentTransfer>
           <feFuncA type="linear" slope="${h}" />
         </feComponentTransfer>
         <feMerge>
           <feMergeNode/>
           <feMergeNode in="SourceGraphic"/>
         </feMerge>
       </filter>`.trim()}function lm(c={}){const t=Ke(c.amount,1),e=.2126+.7874*(1-t),i=.7152-.7152*(1-t),l=.0722-.0722*(1-t),h=.2126-.2126*(1-t),f=.7152+.2848*(1-t),v=.0722-.0722*(1-t),y=.2126-.2126*(1-t),x=.0722+.9278*(1-t);return`
    <filter>
      <feColorMatrix type="matrix" values="${e} ${i} ${l} 0 0 ${h} ${f} ${v} 0 0 ${y} ${i} ${x} 0 0 0 0 0 1 0"/>
    </filter>
  `.trim()}function Do(c={}){const t=Ke(c.amount,1),e=.393+.607*(1-t),i=.769-.769*(1-t),l=.189-.189*(1-t),h=.349-.349*(1-t),f=.686+.314*(1-t),v=.168-.168*(1-t),y=.272-.272*(1-t),x=.534-.534*(1-t),E=.131+.869*(1-t);return`
      <filter>
        <feColorMatrix type="matrix" values="${e} ${i} ${l} 0 0 ${h} ${f} ${v} 0 0 ${y} ${x} ${E} 0 0 0 0 0 1 0"/>
      </filter>
    `.trim()}function Rl(c={}){return`
      <filter>
        <feColorMatrix type="saturate" values="${1-Ke(c.amount,1)}"/>
      </filter>
    `.trim()}function ZE(c={}){return`
      <filter>
        <feColorMatrix type="hueRotate" values="${Ke(c.angle,0)}"/>
      </filter>
    `.trim()}function Ua(c={}){const t=Ke(c.amount,1),e=1-t;return`
      <filter>
        <feComponentTransfer>
          <feFuncR type="table" tableValues="${t} ${e}"/>
          <feFuncG type="table" tableValues="${t} ${e}"/>
          <feFuncB type="table" tableValues="${t} ${e}"/>
        </feComponentTransfer>
      </filter>
    `.trim()}function Ha(c={}){const t=Ke(c.amount,1);return`
    <filter>
      <feComponentTransfer>
        <feFuncR type="linear" slope="${t}"/>
        <feFuncG type="linear" slope="${t}"/>
        <feFuncB type="linear" slope="${t}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}function YE(c={}){const t=Ke(c.amount,1),e=.5-t/2;return`
    <filter>
     <feComponentTransfer>
        <feFuncR type="linear" slope="${t}" intercept="${e}"/>
        <feFuncG type="linear" slope="${t}" intercept="${e}"/>
        <feFuncB type="linear" slope="${t}" intercept="${e}"/>
      </feComponentTransfer>
    </filter>
  `.trim()}var Ts;(function(c){c.presets=St,c.registry=Mn.create({type:"filter"}),c.registry.register(c.presets,!0)})(Ts||(Ts={}));const KE={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},JE={},um={position:$i("x","width","origin")},hm={position:$i("y","height","origin")},qE={position:$i("x","width","corner")},id={position:$i("y","height","corner")},od={set:bi("width","width")},dm={set:bi("height","height")},fm={set:bi("rx","width")},gm={set:bi("ry","height")},Ll={set:(c=>{const t=bi(c,"width"),e=bi(c,"height");return function(i,l){const h=l.refBBox,f=h.height>h.width?t:e;return ue(f,this,i,l)}})("r")},QE={set(c,{refBBox:t}){let e=parseFloat(c);const i=Ar(c);i&&(e/=100);const l=Math.sqrt(t.height*t.height+t.width*t.width);let h;return Number.isFinite(e)&&(i||e>=0&&e<=1?h=e*l:h=Math.max(e+l,0)),{r:h}}},$a={set:bi("cx","width")},t_={set:bi("cy","height")},Wa={set:mm({resetOffset:!0})},pm={set:mm({resetOffset:!1})},Xa={set:ad({resetOffset:!0})},vm={set:ad({resetOffset:!1})},sd=Ll,e_=Wa,n_=Xa,r_=um,i_=hm,o_=od,s_=dm;function $i(c,t,e){return(i,{refBBox:l})=>{if(i==null)return null;let h=parseFloat(i);const f=Ar(i);f&&(h/=100);let v;if(Number.isFinite(h)){const x=l[e];f||h>0&&h<1?v=x[c]+l[t]*h:v=x[c]+h}const y=new W;return y[c]=v||0,y}}function bi(c,t){return function(e,{refBBox:i}){let l=parseFloat(e);const h=Ar(e);h&&(l/=100);const f={};if(Number.isFinite(l)){const v=h||l>=0&&l<=1?l*i[t]:Math.max(l+i[t],0);f[c]=v}return f}}function Ro(c,t){const e="x6-shape",i=t&&t.resetOffset;return function(l,{elem:h,refBBox:f}){let v=br(h,e);if(!v||v.value!==l){const L=c(l);v={value:l,shape:L,shapeBBox:L.bbox()},br(h,e,v)}const y=v.shape.clone(),x=v.shapeBBox.clone(),E=x.getOrigin(),S=f.getOrigin();x.x=S.x,x.y=S.y;const _=f.getMaxScaleToFit(x,S),T=x.width===0||f.width===0?1:_.sx,D=x.height===0||f.height===0?1:_.sy;return y.scale(T,D,E),i&&y.translate(-E.x,-E.y),y}}function mm(c){function t(i){return he.parse(i)}const e=Ro(t,c);return(i,l)=>({d:e(i,l).serialize()})}function ad(c){const t=Ro(e=>new bn(e),c);return(e,i)=>({points:t(e,i).serialize()})}const ym={qualify:Br,set(c,{view:t}){return`url(#${t.graph.defineGradient(c)})`}},bm={qualify:Br,set(c,{view:t}){const e=t.cell,i=Object.assign({},c);if(e.isEdge()&&i.type==="linearGradient"){const l=t,h=l.sourcePoint,f=l.targetPoint;i.id=`gradient-${i.type}-${e.id}`,i.attrs=Object.assign(Object.assign({},i.attrs),{x1:h.x,y1:h.y,x2:f.x,y2:f.y,gradientUnits:"userSpaceOnUse"}),t.graph.defs.remove(i.id)}return`url(#${t.graph.defineGradient(i)})`}},Ms={qualify(c,{attrs:t}){return t.textWrap==null||!Br(t.textWrap)},set(c,{view:t,elem:e,attrs:i}){const l="x6-text",h=br(e,l),f=E=>{try{return JSON.parse(E)}catch(S){return E}},v={x:i.x,eol:i.eol,annotations:f(i.annotations),textPath:f(i["text-path"]||i.textPath),textVerticalAnchor:i["text-vertical-anchor"]||i.textVerticalAnchor,displayEmpty:(i["display-empty"]||i.displayEmpty)==="true",lineHeight:i["line-height"]||i.lineHeight},y=i["font-size"]||i.fontSize,x=JSON.stringify([c,v]);if(y&&e.setAttribute("font-size",y),h==null||h!==x){const E=v.textPath;if(E!=null&&typeof E=="object"){const S=E.selector;if(typeof S=="string"){const _=t.find(S)[0];_ instanceof SVGPathElement&&(Aa(_),v.textPath=Object.assign({"xlink:href":`#${_.id}`},E))}}Wh(e,`${c}`,v),br(e,l,x)}}},cd={qualify:Br,set(c,{view:t,elem:e,attrs:i,refBBox:l}){const h=c,f=h.width||0;Ar(f)?l.width*=parseFloat(f)/100:f<=0?l.width+=f:l.width=f;const v=h.height||0;Ar(v)?l.height*=parseFloat(v)/100:v<=0?l.height+=v:l.height=v;let y,x=h.text;x==null&&(x=i.text||(e==null?void 0:e.textContent)),x!=null?y=_l(`${x}`,l,{"font-weight":i["font-weight"]||i.fontWeight,"font-size":i["font-size"]||i.fontSize,"font-family":i["font-family"]||i.fontFamily,lineHeight:i.lineHeight},{ellipsis:h.ellipsis}):y="",ue(Ms.set,this,y,{view:t,elem:e,attrs:i,refBBox:l,cell:t.cell})}},Lo=(c,{attrs:t})=>t.text!==void 0,a_={qualify:Lo},c_={qualify:Lo},l_={qualify:Lo},ld={qualify:Lo},ud={qualify:Lo},ko={qualify:Lo},u_={qualify(c,{elem:t}){return t instanceof SVGElement},set(c,{elem:t}){const e="x6-title",i=`${c}`,l=br(t,e);if(l==null||l!==i){br(t,e,i);const h=t.firstChild;if(h&&h.tagName.toUpperCase()==="TITLE"){const f=h;f.textContent=i}else{const f=document.createElementNS(t.namespaceURI,"title");f.textContent=i,t.insertBefore(f,h)}}}},h_={offset:hd("x","width","right")},kl={offset:hd("y","height","bottom")},xm={offset(c,{refBBox:t}){return c?{x:-t.x,y:-t.y}:{x:0,y:0}}};function hd(c,t,e){return(i,{refBBox:l})=>{const h=new W;let f;return i==="middle"?f=l[t]/2:i===e?f=l[t]:typeof i=="number"&&Number.isFinite(i)?f=i>-1&&i<1?-l[t]*i:-i:Ar(i)?f=l[t]*parseFloat(i)/100:f=0,h[c]=-(l[c]+f),h}}const d_={qualify:Br,set(c,{elem:t}){xs(t,c)}},f_={set(c,{elem:t}){t.innerHTML=`${c}`}},dd={qualify:Br,set(c,{view:t}){return`url(#${t.graph.defineFilter(c)})`}},wm={set(c){return c!=null&&typeof c=="object"&&c.id?c.id:c}};function Wi(c,t,e){let i,l;typeof t=="object"?(i=t.x,l=t.y):(i=t,l=e);const h=he.parse(c),f=h.bbox();if(f){let v=-f.height/2-f.y,y=-f.width/2-f.x;typeof i=="number"&&(y-=i),typeof l=="number"&&(v-=l),h.translate(y,v)}return h.serialize()}var Bl=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const g_=c=>{var{size:t,width:e,height:i,offset:l,open:h}=c,f=Bl(c,["size","width","height","offset","open"]);return Em({size:t,width:e,height:i,offset:l},h===!0,!0,void 0,f)},fd=c=>{var{size:t,width:e,height:i,offset:l,factor:h}=c,f=Bl(c,["size","width","height","offset","factor"]);return Em({size:t,width:e,height:i,offset:l},!1,!1,h,f)};function Em(c,t,e,i=3/4,l={}){const h=c.size||10,f=c.width||h,v=c.height||h,y=new he,x={};if(t)y.moveTo(f,0).lineTo(0,v/2).lineTo(f,v),x.fill="none";else{if(y.moveTo(0,v/2),y.lineTo(f,0),!e){const E=Or(i,0,1);y.lineTo(f*E,v/2)}y.lineTo(f,v),y.close()}return Object.assign(Object.assign(Object.assign({},x),l),{tagName:"path",d:Wi(y.serialize(),{x:c.offset!=null?c.offset:-f/2})})}var p_=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const Za=c=>{var{size:t,width:e,height:i,offset:l}=c,h=p_(c,["size","width","height","offset"]);const f=t||10,v=e||f,y=i||f,x=new he;return x.moveTo(0,y/2).lineTo(v/2,0).lineTo(v,y/2).lineTo(v/2,y).close(),Object.assign(Object.assign({},h),{tagName:"path",d:Wi(x.serialize(),l==null?-v/2:l)})};var qr=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const _m=c=>{var{d:t,offsetX:e,offsetY:i}=c,l=qr(c,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},l),{tagName:"path",d:Wi(t,e,i)})};var v_=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const Cm=c=>{var{size:t,width:e,height:i,offset:l}=c,h=v_(c,["size","width","height","offset"]);const f=t||10,v=e||f,y=i||f,x=new he;return x.moveTo(0,0).lineTo(v,y).moveTo(0,y).lineTo(v,0),Object.assign(Object.assign({},h),{tagName:"path",fill:"none",d:Wi(x.serialize(),l||-v/2)})};var Sm=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const Te=c=>{var{width:t,height:e,offset:i,open:l,flip:h}=c,f=Sm(c,["width","height","offset","open","flip"]);let v=e||6;const y=t||10,x=l===!0,E=h===!0,S=Object.assign(Object.assign({},f),{tagName:"path"});E&&(v=-v);const _=new he;return _.moveTo(0,v).lineTo(y,0),x?S.fill="none":(_.lineTo(y,v),_.close()),S.d=Wi(_.serialize(),{x:i||-y/2,y:v/2}),S};var zl=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const Fl=c=>{var{r:t}=c,e=zl(c,["r"]);const i=t||5;return Object.assign(Object.assign({cx:i},e),{tagName:"circle",r:i})},Om=c=>{var{r:t}=c,e=zl(c,["r"]);const i=t||5,l=new he;return l.moveTo(i,0).lineTo(i,i*2),l.moveTo(0,i).lineTo(i*2,i),{children:[Object.assign(Object.assign({},Fl({r:i})),{fill:"none"}),Object.assign(Object.assign({},e),{tagName:"path",d:Wi(l.serialize(),-i)})]}};var m_=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const gd=c=>{var{rx:t,ry:e}=c,i=m_(c,["rx","ry"]);const l=t||5,h=e||5;return Object.assign(Object.assign({cx:l},i),{tagName:"ellipse",rx:l,ry:h})};var Xi;(function(c){c.presets=Bt,c.registry=Mn.create({type:"marker"}),c.registry.register(c.presets,!0)})(Xi||(Xi={})),function(c){c.normalize=Wi}(Xi||(Xi={}));var pd=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};function Gl(c){return typeof c=="string"||Br(c)}const jl={qualify:Gl,set(c,{view:t,attrs:e}){return vd("marker-start",c,t,e)}},Am={qualify:Gl,set(c,{view:t,attrs:e}){return vd("marker-end",c,t,e,{transform:"rotate(180)"})}},Tm={qualify:Gl,set(c,{view:t,attrs:e}){return vd("marker-mid",c,t,e)}};function vd(c,t,e,i,l={}){const h=typeof t=="string"?{name:t}:t,{name:f,args:v}=h,y=pd(h,["name","args"]);let x=y;if(f&&typeof f=="string"){const S=Xi.registry.get(f);if(S)x=S(Object.assign(Object.assign({},y),v));else return Xi.registry.onNotFound(f)}const E=Object.assign(Object.assign(Object.assign({},y_(i,c)),l),x);return{[c]:`url(#${e.graph.defineMarker(E)})`}}function y_(c,t){const e={},i=c.stroke;typeof i=="string"&&(e.stroke=i,e.fill=i);let l=c.strokeOpacity;if(l==null&&(l=c["stroke-opacity"]),l==null&&(l=c.opacity),l!=null&&(e["stroke-opacity"]=l,e["fill-opacity"]=l),t!=="marker-mid"){const h=parseFloat(c.strokeWidth||c["stroke-width"]);if(Number.isFinite(h)&&h>1){const f=Math.ceil(h/2);e.refX=t==="marker-start"?f:-f}}return e}const Zi=(c,{view:t})=>t.cell.isEdge(),Vl={qualify:Zi,set(c,t){var e,i,l,h;const f=t.view,v=c.reverse||!1,y=c.stubs||0;let x;if(Number.isFinite(y)&&y!==0)if(v){let E,S;const _=f.getConnectionLength()||0;y<0?(E=(_+y)/2,S=-y):(E=y,S=_-y*2);const T=f.getConnection();x=(h=(l=(i=(e=T==null?void 0:T.divideAtLength(E))===null||e===void 0?void 0:e[1])===null||i===void 0?void 0:i.divideAtLength(S))===null||l===void 0?void 0:l[0])===null||h===void 0?void 0:h.serialize()}else{let E;y<0?E=((f.getConnectionLength()||0)+y)/2:E=y;const S=f.getConnection();if(S){const _=S.divideAtLength(E),T=S.divideAtLength(-E);_&&T&&(x=`${_[0].serialize()} ${T[1].serialize()}`)}}return{d:x||f.getConnectionPathData()}}},md={qualify:Zi,set:xd("getTangentAtLength",{rotate:!0})},Mm={qualify:Zi,set:xd("getTangentAtLength",{rotate:!1})},yd={qualify:Zi,set:xd("getTangentAtRatio",{rotate:!0})},b_={qualify:Zi,set:xd("getTangentAtRatio",{rotate:!1})},bd=md,x_=yd;function xd(c,t){const e={x:1,y:0};return(i,l)=>{let h,f;const v=l.view,y=v[c](Number(i));return y?(f=t.rotate?y.vector().vectorAngle(e):0,h=y.start):(h=v.path.start,f=0),f===0?{transform:`translate(${h.x},${h.y}')`}:{transform:`translate(${h.x},${h.y}') rotate(${f})`}}}var Qr;(function(c){function t(e,i,l){return!!(e!=null&&(typeof e=="string"||typeof e.qualify!="function"||ue(e.qualify,this,i,l)))}c.isValidDefinition=t})(Qr||(Qr={})),function(c){c.presets=Object.assign(Object.assign({},KE),Zt),c.registry=Mn.create({type:"attribute definition"}),c.registry.register(c.presets,!0)}(Qr||(Qr={}));const Jn={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,prefix(c){return`${Jn.prefixCls}-${c}`}},Ul=Jn.prefix("highlighted"),w_={highlight(c,t,e){const i=e&&e.className||Ul;He(t,i)},unhighlight(c,t,e){const i=e&&e.className||Ul;vr(t,i)}},Im=Jn.prefix("highlight-opacity"),E_={highlight(c,t){He(t,Im)},unhighlight(c,t){vr(t,Im)}};var qe;(function(c){c.normalizeMarker=Wi;function t(_,T){const D=Zv(_.x,_.y).matrixTransform(T);return new W(D.x,D.y)}c.transformPoint=t;function e(_,T){return new Wt(t(_.start,T),t(_.end,T))}c.transformLine=e;function i(_,T){let D=_ instanceof bn?_.points:_;return Array.isArray(D)||(D=[]),new bn(D.map(L=>t(L,T)))}c.transformPolyline=i;function l(_,T){const L=Rn("svg").createSVGPoint();L.x=_.x,L.y=_.y;const B=L.matrixTransform(T);L.x=_.x+_.width,L.y=_.y;const j=L.matrixTransform(T);L.x=_.x+_.width,L.y=_.y+_.height;const V=L.matrixTransform(T);L.x=_.x,L.y=_.y+_.height;const G=L.matrixTransform(T),X=Math.min(B.x,j.x,V.x,G.x),K=Math.max(B.x,j.x,V.x,G.x),it=Math.min(B.y,j.y,V.y,G.y),At=Math.max(B.y,j.y,V.y,G.y);return new Gt(X,it,K-X,At-it)}c.transformRectangle=l;function h(_,T,D){let L;const B=_.ownerSVGElement;if(!B)return new Gt(0,0,0,0);try{L=_.getBBox()}catch(V){L={x:_.clientLeft,y:_.clientTop,width:_.clientWidth,height:_.clientHeight}}if(T)return Gt.create(L);const j=hr(_,D||B);return l(L,j)}c.bbox=h;function f(_,T={}){let D;if(!_.ownerSVGElement||!hi(_)){if(pt(_)){const{left:V,top:G,width:X,height:K}=v(_);return new Gt(V,G,X,K)}return new Gt(0,0,0,0)}let B=T.target;if(!T.recursive){try{D=_.getBBox()}catch(G){D={x:_.clientLeft,y:_.clientTop,width:_.clientWidth,height:_.clientHeight}}if(!B)return Gt.create(D);const V=hr(_,B);return l(D,V)}{const V=_.childNodes,G=V.length;if(G===0)return f(_,{target:B});B||(B=_);for(let X=0;X<G;X+=1){const K=V[X];let it;K.childNodes.length===0?it=f(K,{target:B}):it=f(K,{target:B,recursive:!0}),D?D=D.union(it):D=it}return D}}c.getBBox=f;function v(_){let T=0,D=0,L=0,B=0;if(_){let j=_;for(;j;)T+=j.offsetLeft,D+=j.offsetTop,j=j.offsetParent,j&&(T+=parseInt(wl(j,"borderLeft"),10),D+=parseInt(wl(j,"borderTop"),10));L=_.offsetWidth,B=_.offsetHeight}return{left:T,top:D,width:L,height:B}}c.getBoundingOffsetRect=v;function y(_){const T=D=>{const L=_.getAttribute(D),B=L?parseFloat(L):0;return Number.isNaN(B)?0:B};switch(_ instanceof SVGElement&&_.nodeName.toLowerCase()){case"rect":return new Gt(T("x"),T("y"),T("width"),T("height"));case"circle":return new jr(T("cx"),T("cy"),T("r"),T("r"));case"ellipse":return new jr(T("cx"),T("cy"),T("rx"),T("ry"));case"polyline":{const D=Ra(_);return new bn(D)}case"polygon":{const D=Ra(_);return D.length>1&&D.push(D[0]),new bn(D)}case"path":{let D=_.getAttribute("d");return he.isValid(D)||(D=he.normalize(D)),he.parse(D)}case"line":return new Wt(T("x1"),T("y1"),T("x2"),T("y2"));default:break}return f(_)}c.toGeometryShape=y;function x(_,T,D,L){const B=W.create(T),j=W.create(D);L||(L=_ instanceof SVGSVGElement?_:_.ownerSVGElement);const V=Ml(_);_.setAttribute("transform","");const G=f(_,{target:L}).scale(V.sx,V.sy),X=_s();X.setTranslate(-G.x-G.width/2,-G.y-G.height/2);const K=_s(),it=B.angleBetween(j,B.clone().translate(1,0));it&&K.setRotate(it,0,0);const At=_s(),jt=B.clone().move(j,G.width/2);At.setTranslate(2*B.x-jt.x,2*B.y-jt.y);const Vt=hr(_,L),ie=_s();ie.setMatrix(At.matrix.multiply(K.matrix.multiply(X.matrix.multiply(Vt.scale(V.sx,V.sy))))),_.setAttribute("transform",Io(ie.matrix))}c.translateAndAutoOrient=x;function E(_){if(_==null)return null;let T=_;do{let D=T.tagName;if(typeof D!="string")return null;if(D=D.toUpperCase(),Fi(T,"x6-port"))T=T.nextElementSibling;else if(D==="G")T=T.firstElementChild;else if(D==="TITLE")T=T.nextElementSibling;else break}while(T);return T}c.findShapeNode=E;function S(_){const T=E(_);if(!hi(T)){if(pt(_)){const{left:B,top:j,width:V,height:G}=v(_);return new Gt(B,j,V,G)}return new Gt(0,0,0,0)}return y(T).bbox()||Gt.create()}c.getBBoxV2=S})(qe||(qe={}));const Pm={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},Nm={highlight(c,t,e){const i=xi.getHighlighterId(t,e);if(xi.hasCache(i))return;e=ah({},e,Pm);const l=Ee.create(t);let h,f;try{h=l.toPathData()}catch(E){f=qe.bbox(l.node,!0),h=Yh(Object.assign(Object.assign({},e),f))}const v=Rn("path");if(nn(v,Object.assign({d:h,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},e.attrs?Ao(e.attrs):null)),c.isEdgeElement(t))nn(v,"d",c.getConnectionPathData());else{let E=l.getTransformToElement(c.container);const S=e.padding;if(S){f==null&&(f=qe.bbox(l.node,!0));const _=f.x+f.width/2,T=f.y+f.height/2;f=qe.transformRectangle(f,E);const D=Math.max(f.width,1),L=Math.max(f.height,1),B=(D+S)/D,j=(L+S)/L,V=_n({a:B,b:0,c:0,d:j,e:_-B*_,f:T-j*T});E=E.multiply(V)}gi(v,E)}He(v,Jn.prefix("highlight-stroke"));const y=c.cell,x=()=>xi.removeHighlighter(i);y.on("removed",x),y.model&&y.model.on("reseted",x),c.container.appendChild(v),xi.setCache(i,v)},unhighlight(c,t,e){xi.removeHighlighter(xi.getHighlighterId(t,e))}};var xi;(function(c){function t(f,v){return Aa(f),f.id+JSON.stringify(v)}c.getHighlighterId=t;const e={};function i(f,v){e[f]=v}c.setCache=i;function l(f){return e[f]!=null}c.hasCache=l;function h(f){const v=e[f];v&&(So(v),delete e[f])}c.removeHighlighter=h})(xi||(xi={}));var wi;(function(c){function t(e,i){if(typeof i.highlight!="function")throw new Error(`Highlighter '${e}' is missing required \`highlight()\` method`);if(typeof i.unhighlight!="function")throw new Error(`Highlighter '${e}' is missing required \`unhighlight()\` method`)}c.check=t})(wi||(wi={})),function(c){c.presets=Ut,c.registry=Mn.create({type:"highlighter"}),c.registry.register(c.presets,!0)}(wi||(wi={}));function Hl(c,t={}){return new W(ur(t.x,c.width),ur(t.y,c.height))}function wd(c,t,e){return Object.assign({angle:t,position:c.toJSON()},e)}const __=(c,t)=>c.map(({x:e,y:i,angle:l})=>wd(Hl(t,{x:e,y:i}),l||0)),Dm=(c,t,e)=>{const i=e.start||0,l=e.step||20;return Ed(c,t,i,(h,f)=>(h+.5-f/2)*l)},C_=(c,t,e)=>{const i=e.start||0,l=e.step||360/c.length;return Ed(c,t,i,h=>h*l)};function Ed(c,t,e,i){const l=t.getCenter(),h=t.getTopCenter(),f=t.width/t.height,v=jr.fromRect(t),y=c.length;return c.map((x,E)=>{const S=e+i(E,y),_=h.clone().rotate(-S,l).scale(f,1,l),T=x.compensateRotate?-v.tangentTheta(_):0;return(x.dx||x.dy)&&_.translate(x.dx||0,x.dy||0),x.dr&&_.move(l,x.dr),wd(_.round(),T,x)})}var S_=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const O_=(c,t,e)=>{const i=Hl(t,e.start||t.getOrigin()),l=Hl(t,e.end||t.getCorner());return Ya(c,i,l,e)},Rm=(c,t,e)=>Ya(c,t.getTopLeft(),t.getBottomLeft(),e),A_=(c,t,e)=>Ya(c,t.getTopRight(),t.getBottomRight(),e),Lm=(c,t,e)=>Ya(c,t.getTopLeft(),t.getTopRight(),e),T_=(c,t,e)=>Ya(c,t.getBottomLeft(),t.getBottomRight(),e);function Ya(c,t,e,i){const l=new Wt(t,e),h=c.length;return c.map((f,v)=>{var{strict:y}=f,x=S_(f,["strict"]);const E=y||i.strict?(v+1)/(h+1):(v+.5)/h,S=l.pointAt(E);return(x.dx||x.dy)&&S.translate(x.dx||0,x.dy||0),wd(S.round(),0,x)})}var Yi;(function(c){c.presets=Ft,c.registry=Mn.create({type:"port layout"}),c.registry.register(c.presets,!0)})(Yi||(Yi={}));const M_={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function Ki(c,t){const{x:e,y:i,angle:l,attrs:h}=t||{};return ah({},{angle:l,attrs:h,position:{x:e,y:i}},c,M_)}const km=(c,t,e)=>Ki({position:t.getTopLeft()},e),_d=(c,t,e)=>Ki({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},e),I_=(c,t,e)=>Ki({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},e),P_=(c,t,e)=>Ki({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},e),N_=(c,t,e)=>Ki({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},e),D_=(c,t,e)=>Bm(c,t,!1,e),R_=(c,t,e)=>Bm(c,t,!0,e),Is=(c,t,e)=>zm(c,t,!1,e),Ps=(c,t,e)=>zm(c,t,!0,e);function Bm(c,t,e,i){const l=i.offset!=null?i.offset:15,h=t.getCenter().theta(c),f=Cd(t);let v,y,x,E,S=0;return h<f[1]||h>f[2]?(v=".3em",y=l,x=0,E="start"):h<f[0]?(v="0",y=0,x=-l,e?(S=-90,E="start"):E="middle"):h<f[3]?(v=".3em",y=-l,x=0,E="end"):(v=".6em",y=0,x=l,e?(S=90,E="start"):E="middle"),Ki({position:{x:Math.round(y),y:Math.round(x)},angle:S,attrs:{".":{y:v,"text-anchor":E}}},i)}function zm(c,t,e,i){const l=i.offset!=null?i.offset:15,h=t.getCenter().theta(c),f=Cd(t);let v,y,x,E,S=0;return h<f[1]||h>f[2]?(v=".3em",y=-l,x=0,E="end"):h<f[0]?(v=".6em",y=0,x=l,e?(S=90,E="start"):E="middle"):h<f[3]?(v=".3em",y=l,x=0,E="start"):(v="0em",y=0,x=-l,e?(S=-90,E="start"):E="middle"),Ki({position:{x:Math.round(y),y:Math.round(x)},angle:S,attrs:{".":{y:v,"text-anchor":E}}},i)}function Cd(c){const t=c.getCenter(),e=t.theta(c.getTopLeft()),i=t.theta(c.getBottomLeft()),l=t.theta(c.getBottomRight()),h=t.theta(c.getTopRight());return[e,h,l,i]}const L_=(c,t,e)=>Fm(c.diff(t.getCenter()),!1,e),k_=(c,t,e)=>Fm(c.diff(t.getCenter()),!0,e);function Fm(c,t,e){const i=e.offset!=null?e.offset:20,l=new W(0,0),h=-c.theta(l),f=c.clone().move(l,i).diff(c).round();let v=".3em",y,x=h;return(h+90)%180===0?(y=t?"end":"middle",!t&&h===-270&&(v="0em")):h>-270&&h<-90?(y="start",x=h-180):y="end",Ki({position:f.round().toJSON(),angle:t?x:0,attrs:{".":{y:v,"text-anchor":y}}},e)}var Ns;(function(c){c.presets=J,c.registry=Mn.create({type:"port label layout"}),c.registry.register(c.presets,!0)})(Ns||(Ns={}));var B_=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class dn extends lr{get priority(){return 2}get disposeContainer(){return!0}constructor(){super(),this.cid=Sd.uniqueId(),dn.views[this.cid]=this}confirmUpdate(t,e){return 0}empty(t=this.container){return ps(t),this}unmount(t=this.container){return So(t),this}remove(t=this.container){return t===this.container?(this.removeEventListeners(document),this.onRemove(),delete dn.views[this.cid],this.disposeContainer&&this.unmount(t)):this.unmount(t),this}onRemove(){}setClass(t,e=this.container){e.classList.value=Array.isArray(t)?t.join(" "):t}addClass(t,e=this.container){return He(e,Array.isArray(t)?t.join(" "):t),this}removeClass(t,e=this.container){return vr(e,Array.isArray(t)?t.join(" "):t),this}setStyle(t,e=this.container){return xs(e,t),this}setAttrs(t,e=this.container){return t!=null&&e!=null&&nn(e,t),this}findAttr(t,e=this.container){let i=e;for(;i&&i.nodeType===1;){const l=i.getAttribute(t);if(l!=null)return l;if(i===this.container)return null;i=i.parentNode}return null}find(t,e=this.container,i=this.selectors){return dn.find(t,e,i).elems}findOne(t,e=this.container,i=this.selectors){const l=this.find(t,e,i);return l.length>0?l[0]:null}findByAttr(t,e=this.container){let i=e;for(;i&&i.getAttribute;){const l=i.getAttribute(t);if((l!=null||i===this.container)&&l!=="false")return i;i=i.parentNode}return null}getSelector(t,e){let i;if(t===this.container)return typeof e=="string"&&(i=`> ${e}`),i;if(t){const l=pl(t)+1;i=`${t.tagName.toLowerCase()}:nth-child(${l})`,e&&(i+=` > ${e}`),i=this.getSelector(t.parentNode,i)}return i}prefixClassName(t){return Jn.prefix(t)}delegateEvents(t,e){if(t==null)return this;e||this.undelegateEvents();const i=/^(\S+)\s*(.*)$/;return Object.keys(t).forEach(l=>{const h=l.match(i);if(h==null)return;const f=this.getEventHandler(t[l]);typeof f=="function"&&this.delegateEvent(h[1],h[2],f)}),this}undelegateEvents(){return kn.off(this.container,this.getEventNamespace()),this}delegateDocumentEvents(t,e){return this.addEventListeners(document,t,e),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(t,e,i){return kn.on(this.container,t+this.getEventNamespace(),e,i),this}undelegateEvent(t,e,i){const l=t+this.getEventNamespace();return e==null?kn.off(this.container,l):typeof e=="string"?kn.off(this.container,l,e,i):kn.off(this.container,l,e),this}addEventListeners(t,e,i){if(e==null)return this;const l=this.getEventNamespace();return Object.keys(e).forEach(h=>{const f=this.getEventHandler(e[h]);typeof f=="function"&&kn.on(t,h+l,i,f)}),this}removeEventListeners(t){return t!=null&&kn.off(t,this.getEventNamespace()),this}getEventNamespace(){return`.${Jn.prefixCls}-event-${this.cid}`}getEventHandler(t){let e;if(typeof t=="string"){const i=this[t];typeof i=="function"&&(e=(...l)=>i.call(this,...l))}else e=(...i)=>t.call(this,...i);return e}getEventTarget(t,e={}){const{target:i,type:l,clientX:h=0,clientY:f=0}=t;return e.fromPoint||l==="touchmove"||l==="touchend"?document.elementFromPoint(h,f):i}stopPropagation(t){return this.setEventData(t,{propagationStopped:!0}),this}isPropagationStopped(t){return this.getEventData(t).propagationStopped===!0}getEventData(t){return this.eventData(t)}setEventData(t,e){return this.eventData(t,e)}eventData(t,e){if(t==null)throw new TypeError("Event object required");let i=t.data;const l=`__${this.cid}__`;return e==null?i==null?{}:i[l]||{}:(i==null&&(i=t.data={}),i[l]==null?i[l]=Object.assign({},e):i[l]=Object.assign(Object.assign({},i[l]),e),i[l])}normalizeEvent(t){return dn.normalizeEvent(t)}dispose(){this.remove()}}B_([dn.dispose()],dn.prototype,"dispose",null),function(c){function t(l,h){return h?Rn(l||"g"):gl(l||"div")}c.createElement=t;function e(l,h,f){if(!l||l===".")return{elems:[h]};if(f){const v=f[l];if(v)return{elems:Array.isArray(v)?v:[v]}}if(Jn.useCSSSelector){const v=l.includes(">")?`:scope ${l}`:l;return{isCSSSelector:!0,elems:Array.prototype.slice.call(h.querySelectorAll(v))}}return{elems:[]}}c.find=e;function i(l){let h=l;const f=l.originalEvent,v=f&&f.changedTouches&&f.changedTouches[0];if(v){for(const y in l)v[y]===void 0&&(v[y]=l[y]);h=v}return h}c.normalizeEvent=i}(dn||(dn={})),function(c){c.views={};function t(e){return c.views[e]||null}c.getView=t}(dn||(dn={}));var Sd;(function(c){let t=0;function e(){const i=`v${t}`;return t+=1,i}c.uniqueId=e})(Sd||(Sd={}));class Od{constructor(t){this.view=t,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new nd,this.pathCache={}}get(t){return this.elemCache.has(t)||this.elemCache.set(t,{}),this.elemCache.get(t)}getData(t){const e=this.get(t);return e.data||(e.data={}),e.data}getMatrix(t){const e=this.get(t);if(e.matrix==null){const i=this.view.container;e.matrix=qv(t,i)}return _n(e.matrix)}getShape(t){const e=this.get(t);return e.shape==null&&(e.shape=qe.toGeometryShape(t)),e.shape.clone()}getBoundingRect(t){const e=this.get(t);return e.boundingRect==null&&(e.boundingRect=qe.getBBoxV2(t)),e.boundingRect.clone()}}var on;(function(c){function t(x){return x!=null&&!e(x)}c.isJSONMarkup=t;function e(x){return x!=null&&typeof x=="string"}c.isStringMarkup=e;function i(x){return x==null||e(x)?x:gn(x)}c.clone=i;function l(x){return`${x}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}c.sanitize=l;function h(x,E={ns:Dn.svg}){const S=document.createDocumentFragment(),_={},T={},D=[{markup:Array.isArray(x)?x:[x],parent:S,ns:E.ns}];for(;D.length>0;){const L=D.pop();let B=L.ns||Dn.svg;const j=L.markup,V=L.parent;j.forEach(G=>{const X=G.tagName;if(!X)throw new TypeError("Invalid tagName");G.ns&&(B=G.ns);const K=B?gl(X,B):jh(X),it=G.attrs;it&&nn(K,Ao(it));const At=G.style;At&&xs(K,At);const jt=G.className;jt!=null&&K.setAttribute("class",Array.isArray(jt)?jt.join(" "):jt),G.textContent&&(K.textContent=G.textContent);const Vt=G.selector;if(Vt!=null){if(T[Vt])throw new TypeError("Selector must be unique");T[Vt]=K}if(G.groupSelector){let Kt=G.groupSelector;Array.isArray(Kt)||(Kt=[Kt]),Kt.forEach(ce=>{_[ce]||(_[ce]=[]),_[ce].push(K)})}V.appendChild(K);const ie=G.children;Array.isArray(ie)&&D.push({ns:B,markup:ie,parent:K})})}return Object.keys(_).forEach(L=>{if(T[L])throw new Error("Ambiguous group selector");T[L]=_[L]}),{fragment:S,selectors:T,groups:_}}c.parseJSONMarkup=h;function f(x){return x instanceof SVGElement?Rn("g"):jh("div")}function v(x){if(e(x)){const T=Ee.createVectors(x),D=T.length;if(D===1)return{elem:T[0].node};if(D>1){const L=f(T[0].node);return T.forEach(B=>{L.appendChild(B.node)}),{elem:L}}return{}}const E=h(x),S=E.fragment;let _=null;return S.childNodes.length>1?(_=f(S.firstChild),_.appendChild(S)):_=S.firstChild,{elem:_,selectors:E.selectors}}c.renderMarkup=v;function y(x){const E=Ee.createVectors(x),S=document.createDocumentFragment();for(let _=0,T=E.length;_<T;_+=1){const D=E[_].node;S.appendChild(D)}return{fragment:S,selectors:{}}}c.parseLabelStringMarkup=y})(on||(on={})),function(c){function t(e,i,l){if(e!=null){let h;const f=e.tagName.toLowerCase();if(e===i)return typeof l=="string"?h=`> ${f} > ${l}`:h=`> ${f}`,h;const v=e.parentNode;if(v&&v.childNodes.length>1){const y=pl(e)+1;h=`${f}:nth-child(${y})`}else h=f;return l&&(h+=` > ${l}`),t(e.parentNode,i,h)}return l}c.getSelector=t}(on||(on={})),function(c){function t(){return"g"}c.getPortContainerMarkup=t;function e(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}}c.getPortMarkup=e;function i(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}c.getPortLabelMarkup=i}(on||(on={})),function(c){function t(){return[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}]}c.getEdgeMarkup=t}(on||(on={})),function(c){function t(e=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:Dn.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:Dn.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:e?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}c.getForeignObjectMarkup=t}(on||(on={}));class Ad{constructor(t){this.view=t}get cell(){return this.view.cell}getDefinition(t){return this.cell.getAttrDefinition(t)}processAttrs(t,e){let i,l,h,f;const v=[];return Object.keys(e).forEach(y=>{const x=e[y],E=this.getDefinition(y),S=ue(Qr.isValidDefinition,this.view,E,x,{elem:t,attrs:e,cell:this.cell,view:this.view});if(E&&S)typeof E=="string"?(i==null&&(i={}),i[E]=x):x!==null&&v.push({name:y,definition:E});else{i==null&&(i={});const _=Lv.includes(y)?y:pv(y);i[_]=x}}),v.forEach(({name:y,definition:x})=>{const E=e[y];typeof x.set=="function"&&(l==null&&(l={}),l[y]=E),typeof x.offset=="function"&&(h==null&&(h={}),h[y]=E),typeof x.position=="function"&&(f==null&&(f={}),f[y]=E)}),{raw:e,normal:i,set:l,offset:h,position:f}}mergeProcessedAttrs(t,e){t.set=Object.assign(Object.assign({},t.set),e.set),t.position=Object.assign(Object.assign({},t.position),e.position),t.offset=Object.assign(Object.assign({},t.offset),e.offset);const i=t.normal&&t.normal.transform;i!=null&&e.normal&&(e.normal.transform=i),t.normal=e.normal}findAttrs(t,e,i,l){const h=[],f=new nd;return Object.keys(t).forEach(v=>{const y=t[v];if(!Br(y))return;const{isCSSSelector:x,elems:E}=dn.find(v,e,l);i[v]=E;for(let S=0,_=E.length;S<_;S+=1){const T=E[S],D=l&&l[v]===T,L=f.get(T);if(L){L.array||(h.push(T),L.array=!0,L.attrs=[L.attrs],L.priority=[L.priority]);const B=L.attrs,j=L.priority;if(D)B.unshift(y),j.unshift(-1);else{const V=ww(j,x?-1:_);B.splice(V,0,y),j.splice(V,0,_)}}else f.set(T,{elem:T,attrs:y,priority:D?-1:_,array:!1})}}),h.forEach(v=>{const y=f.get(v),x=y.attrs;y.attrs=x.reduceRight((E,S)=>An(E,S),{})}),f}updateRelativeAttrs(t,e,i){const l=e.raw||{};let h=e.normal||{};const f=e.set,v=e.position,y=e.offset,x=()=>({elem:t,cell:this.cell,view:this.view,attrs:l,refBBox:i.clone()});if(f!=null&&Object.keys(f).forEach(B=>{const j=f[B],V=this.getDefinition(B);if(V!=null){const G=ue(V.set,this.view,j,x());typeof G=="object"?h=Object.assign(Object.assign({},h),G):G!=null&&(h[B]=G)}}),t instanceof HTMLElement){this.view.setAttrs(h,t);return}const E=h.transform,S=E?`${E}`:null,_=ka(S),T=new W(_.e,_.f);E&&(delete h.transform,_.e=0,_.f=0);let D=!1;v!=null&&Object.keys(v).forEach(B=>{const j=v[B],V=this.getDefinition(B);if(V!=null){const G=ue(V.position,this.view,j,x());G!=null&&(D=!0,T.translate(W.create(G)))}}),this.view.setAttrs(h,t);let L=!1;if(y!=null){const B=this.view.getBoundingRectOfElement(t);if(B.width>0&&B.height>0){const j=qe.transformRectangle(B,_);Object.keys(y).forEach(V=>{const G=y[V],X=this.getDefinition(V);if(X!=null){const K=ue(X.offset,this.view,G,{elem:t,cell:this.cell,view:this.view,attrs:l,refBBox:j});K!=null&&(L=!0,T.translate(W.create(K)))}})}}(E!=null||D||L)&&(T.round(1),_.e=T.x,_.f=T.y,t.setAttribute("transform",Io(_)))}update(t,e,i){const l={},h=this.findAttrs(i.attrs||e,t,l,i.selectors),f=i.attrs?this.findAttrs(e,t,l,i.selectors):h,v=[];h.each(E=>{const S=E.elem,_=E.attrs,T=this.processAttrs(S,_);if(T.set==null&&T.position==null&&T.offset==null)this.view.setAttrs(T.normal,S);else{const D=f.get(S),L=D?D.attrs:null,B=L&&_.ref==null?L.ref:_.ref;let j;if(B){if(j=(l[B]||this.view.find(B,t,i.selectors))[0],!j)throw new Error(`"${B}" reference does not exist.`)}else j=null;const V={node:S,refNode:j,attributes:L,processedAttributes:T},G=v.findIndex(X=>X.refNode===S);G>-1?v.splice(G,0,V):v.push(V)}});const y=new nd;let x;v.forEach(E=>{const S=E.node,_=E.refNode;let T;const D=_!=null&&i.rotatableNode!=null&&Uh(i.rotatableNode,_);if(_&&(T=y.get(_)),!T){const j=D?i.rotatableNode:t;T=_?qe.getBBox(_,{target:j}):i.rootBBox,_&&y.set(_,T)}let L;i.attrs&&E.attributes?(L=this.processAttrs(S,E.attributes),this.mergeProcessedAttrs(L,E.processedAttributes)):L=E.processedAttributes;let B=T;D&&i.rotatableNode!=null&&!i.rotatableNode.contains(S)&&(x||(x=ka(nn(i.rotatableNode,"transform"))),B=qe.transformRectangle(T,x)),this.updateRelativeAttrs(S,L,B)})}}class Gm{get cell(){return this.view.cell}constructor(t,e,i=[]){this.view=t;const l={},h={};let f=0;Object.keys(e).forEach(y=>{let x=e[y];Array.isArray(x)||(x=[x]),x.forEach(E=>{let S=l[E];S||(f+=1,S=l[E]=1<<f),h[y]|=S})});let v=i;if(Array.isArray(v)||(v=[v]),v.forEach(y=>{l[y]||(f+=1,l[y]=1<<f)}),f>25)throw new Error("Maximum number of flags exceeded.");this.flags=l,this.attrs=h,this.bootstrap=i}getFlag(t){const e=this.flags;return e==null?0:Array.isArray(t)?t.reduce((i,l)=>i|e[l],0):e[t]|0}hasAction(t,e){return t&this.getFlag(e)}removeAction(t,e){return t^t&this.getFlag(e)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let t=0;return this.attrs&&Object.keys(this.attrs).forEach(e=>{this.cell.hasChanged(e)&&(t|=this.attrs[e])}),t}}var z_=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h},F_=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class In extends dn{static getDefaults(){return this.defaults}static config(t){this.defaults=this.getOptions(t)}static getOptions(t){const e=(x,E)=>E!=null?pr([...Array.isArray(x)?x:[x],...Array.isArray(E)?E:[E]]):Array.isArray(x)?[...x]:[x],i=gn(this.getDefaults()),{bootstrap:l,actions:h,events:f,documentEvents:v}=t,y=F_(t,["bootstrap","actions","events","documentEvents"]);return l&&(i.bootstrap=e(i.bootstrap,l)),h&&Object.entries(h).forEach(([x,E])=>{const S=i.actions[x];E&&S?i.actions[x]=e(S,E):E&&(i.actions[x]=e(E))}),f&&(i.events=Object.assign(Object.assign({},i.events),f)),t.documentEvents&&(i.documentEvents=Object.assign(Object.assign({},i.documentEvents),v)),An(i,y)}get[Symbol.toStringTag](){return In.toStringTag}constructor(t,e={}){super(),this.cell=t,this.options=this.ensureOptions(e),this.graph=this.options.graph,this.attr=new Ad(this),this.flag=new Gm(this,this.options.actions,this.options.bootstrap),this.cache=new Od(this),this.setContainer(this.ensureContainer()),this.setup(),this.init()}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(t){return this.getConstructor().getOptions(t)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return dn.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(t){if(this.container!==t){this.undelegateEvents(),this.container=t,this.options.events!=null&&this.delegateEvents(this.options.events);const e=this.getContainerAttrs();e!=null&&this.setAttrs(e,t);const i=this.getContainerStyle();i!=null&&this.setStyle(i,t);const l=this.getContainerClassName();l!=null&&this.addClass(l,t)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(t,e={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(t){return this.flag.getFlag(t)}hasAction(t,e){return this.flag.hasAction(t,e)}removeAction(t,e){return this.flag.removeAction(t,e)}handleAction(t,e,i,l){if(this.hasAction(t,e)){i();const h=[e];return l&&(typeof l=="string"?h.push(l):h.push(...l)),this.removeAction(t,h)}return t}setup(){this.cell.on("changed",this.onCellChanged,this)}onCellChanged({options:t}){this.onAttrsChange(t)}onAttrsChange(t){let e=this.flag.getChangedFlag();t.updated||!e||(t.dirty&&this.hasAction(e,"update")&&(e|=this.getFlag("render")),t.toolId&&(t.async=!1),this.graph!=null&&this.graph.renderer.requestViewUpdate(this,e,t))}parseJSONMarkup(t,e){const i=on.parseJSONMarkup(t),l=i.selectors,h=this.rootSelector;if(e&&h){if(l[h])throw new Error("Invalid root selector");l[h]=e}return i}can(t){let e=this.graph.options.interacting;if(typeof e=="function"&&(e=ue(e,this.graph,this)),typeof e=="object"){let i=e[t];return typeof i=="function"&&(i=ue(i,this.graph,this)),i!==!1}return typeof e=="boolean"?e:!1}cleanCache(){return this.cache.clean(),this}getCache(t){return this.cache.get(t)}getDataOfElement(t){return this.cache.getData(t)}getMatrixOfElement(t){return this.cache.getMatrix(t)}getShapeOfElement(t){return this.cache.getShape(t)}getBoundingRectOfElement(t){return this.cache.getBoundingRect(t)}getBBoxOfElement(t){const e=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),l=this.getRootRotatedMatrix(),h=this.getRootTranslatedMatrix();return qe.transformRectangle(e,h.multiply(l).multiply(i))}getUnrotatedBBoxOfElement(t){const e=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),l=this.getRootTranslatedMatrix();return qe.transformRectangle(e,l.multiply(i))}getBBox(t={}){let e;if(t.useCellGeometry){const i=this.cell,l=i.isNode()?i.getAngle():0;e=i.getBBox().bbox(l)}else e=this.getBBoxOfElement(this.container);return this.graph.coord.localToGraphRect(e)}getRootTranslatedMatrix(){const t=this.cell,e=t.isNode()?t.getPosition():{x:0,y:0};return _n().translate(e.x,e.y)}getRootRotatedMatrix(){let t=_n();const e=this.cell,i=e.isNode()?e.getAngle():0;if(i){const l=e.getBBox(),h=l.width/2,f=l.height/2;t=t.translate(h,f).rotate(i).translate(-h,-f)}return t}findMagnet(t=this.container){return this.findByAttr("magnet",t)}updateAttrs(t,e,i={}){i.rootBBox==null&&(i.rootBBox=new Gt),i.selectors==null&&(i.selectors=this.selectors),this.attr.update(t,e,i)}isEdgeElement(t){return this.cell.isEdge()&&(t==null||t===this.container)}prepareHighlight(t,e={}){const i=t||this.container;return e.partial=i===this.container,i}highlight(t,e={}){const i=this.prepareHighlight(t,e);return this.notify("cell:highlight",{magnet:i,options:e,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:i,options:e,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:i,options:e,view:this,node:this.cell,cell:this.cell}),this}unhighlight(t,e={}){const i=this.prepareHighlight(t,e);return this.notify("cell:unhighlight",{magnet:i,options:e,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:i,options:e,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:i,options:e,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(t,e){}getEdgeTerminal(t,e,i,l,h){const f=this.cell,v=this.findAttr("port",t),y=t.getAttribute("data-selector"),x={cell:f.id};return y!=null&&(x.magnet=y),v!=null?(x.port=v,f.isNode()&&!f.hasPort(v)&&y==null&&(x.selector=this.getSelector(t))):y==null&&this.container!==t&&(x.selector=this.getSelector(t)),x}getMagnetFromEdgeTerminal(t){const e=this.cell,i=this.container,l=t.port;let h=t.magnet,f;return l!=null&&e.isNode()&&e.hasPort(l)?f=this.findPortElem(l,h)||i:(h||(h=t.selector),!h&&l!=null&&(h=`[port="${l}"]`),f=this.findOne(h,i,this.selectors)),f}hasTools(t){const e=this.tools;return e==null?!1:t==null?!0:e.name===t}addTools(t){if(this.removeTools(),t){if(!this.can("toolsAddable"))return this;const e=Pn.isToolsView(t)?t:new Pn(t);this.tools=e,e.config({view:this}),e.mount()}return this}updateTools(t={}){return this.tools&&this.tools.update(t),this}removeTools(){return this.tools&&(this.tools.remove(),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}notify(t,e){return this.trigger(t,e),this.graph.trigger(t,e),this}getEventArgs(t,e,i){const l=this,h=l.cell;return e==null||i==null?{e:t,view:l,cell:h}:{e:t,x:e,y:i,view:l,cell:h}}onClick(t,e,i){this.notify("cell:click",this.getEventArgs(t,e,i))}onDblClick(t,e,i){this.notify("cell:dblclick",this.getEventArgs(t,e,i))}onContextMenu(t,e,i){this.notify("cell:contextmenu",this.getEventArgs(t,e,i))}onMouseDown(t,e,i){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,e,i))}onMouseUp(t,e,i){this.notify("cell:mouseup",this.getEventArgs(t,e,i)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(t,e,i){this.notify("cell:mousemove",this.getEventArgs(t,e,i))}onMouseOver(t){this.notify("cell:mouseover",this.getEventArgs(t))}onMouseOut(t){this.notify("cell:mouseout",this.getEventArgs(t))}onMouseEnter(t){this.notify("cell:mouseenter",this.getEventArgs(t))}onMouseLeave(t){this.notify("cell:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,l){this.notify("cell:mousewheel",Object.assign({delta:l},this.getEventArgs(t,e,i)))}onCustomEvent(t,e,i,l){this.notify("cell:customevent",Object.assign({name:e},this.getEventArgs(t,i,l))),this.notify(e,Object.assign({},this.getEventArgs(t,i,l)))}onMagnetMouseDown(t,e,i,l){}onMagnetDblClick(t,e,i,l){}onMagnetContextMenu(t,e,i,l){}onLabelMouseDown(t,e,i){}checkMouseleave(t){const e=this.getEventTarget(t,{fromPoint:!0}),i=this.graph.findViewByElem(e);i!==this&&(this.onMouseLeave(t),i&&i.onMouseEnter(t))}dispose(){this.cell.off("changed",this.onCellChanged,this)}}In.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},z_([In.dispose()],In.prototype,"dispose",null),function(c){c.Flag=Gm,c.Attr=Ad}(In||(In={})),function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag],l=e;return(i==null||i===c.toStringTag)&&typeof l.isNodeView=="function"&&typeof l.isEdgeView=="function"&&typeof l.confirmUpdate=="function"}c.isCellView=t}(In||(In={})),function(c){function t(i){return function(l){l.config({priority:i})}}c.priority=t;function e(i){return function(l){l.config({bootstrap:i})}}c.bootstrap=e}(In||(In={})),function(c){c.registry=Mn.create({type:"view"})}(In||(In={}));class Pn extends dn{get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Pn.toStringTag}constructor(t={}){super(),this.svgContainer=this.createContainer(!0,t),this.htmlContainer=this.createContainer(!1,t),this.config(t)}createContainer(t,e){const i=t?dn.createElement("g",!0):dn.createElement("div",!1);return He(i,this.prefixClassName("cell-tools")),e.className&&He(i,e.className),i}config(t){if(this.options=Object.assign(Object.assign({},this.options),t),!In.isCellView(t.view)||t.view===this.cellView)return this;this.cellView=t.view,this.cell.isEdge()?(He(this.svgContainer,this.prefixClassName("edge-tools")),He(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(He(this.svgContainer,this.prefixClassName("node-tools")),He(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const e=this.options.items;if(!Array.isArray(e))return this;this.tools=[];const i=[];e.forEach(l=>{Pn.ToolItem.isToolItem(l)?l.name==="vertices"?i.unshift(l):i.push(l):(typeof l=="object"?l.name:l)==="vertices"?i.unshift(l):i.push(l)});for(let l=0;l<i.length;l+=1){const h=i[l];let f;if(Pn.ToolItem.isToolItem(h))f=h;else{const v=typeof h=="object"?h.name:h,y=typeof h=="object"?h.args||{}:{};if(v){if(this.cell.isNode()){const x=Ds.registry.get(v);if(x)f=new x(y);else return Ds.registry.onNotFound(v)}else if(this.cell.isEdge()){const x=Rs.registry.get(v);if(x)f=new x(y);else return Rs.registry.onNotFound(v)}}}f&&(f.config(this.cellView,this),f.render(),(f.options.isSVGElement!==!1?this.svgContainer:this.htmlContainer).appendChild(f.container),this.tools.push(f))}return this}update(t={}){const e=this.tools;return e&&e.forEach(i=>{t.toolId!==i.cid&&i.isVisible()&&i.update()}),this}focus(t){const e=this.tools;return e&&e.forEach(i=>{t===i?i.show():i.hide()}),this}blur(t){const e=this.tools;return e&&e.forEach(i=>{i!==t&&!i.isVisible()&&(i.show(),i.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const t=this.tools;return t&&(t.forEach(e=>e.remove()),this.tools=null),So(this.svgContainer),So(this.htmlContainer),super.remove()}mount(){const t=this.tools,e=this.cellView;if(e&&t){const i=t.some(h=>h.options.isSVGElement!==!1),l=t.some(h=>h.options.isSVGElement===!1);i&&(this.options.local?e.container:e.graph.view.decorator).appendChild(this.svgContainer),l&&this.graph.container.appendChild(this.htmlContainer)}return this}}(function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag],l=e;return(i==null||i===c.toStringTag)&&l.graph!=null&&l.cell!=null&&typeof l.config=="function"&&typeof l.update=="function"&&typeof l.focus=="function"&&typeof l.blur=="function"&&typeof l.show=="function"&&typeof l.hide=="function"}c.isToolsView=t})(Pn||(Pn={})),function(c){class t extends dn{static getDefaults(){return this.defaults}static config(i){this.defaults=this.getOptions(i)}static getOptions(i){return An(gn(this.getDefaults()),i)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}constructor(i={}){super(),this.visible=!0,this.options=this.getOptions(i),this.container=dn.createElement(this.options.tagName||"g",this.options.isSVGElement!==!1),He(this.container,this.prefixClassName("cell-tool")),typeof this.options.className=="string"&&He(this.container,this.options.className),this.init()}init(){}getOptions(i){return this.constructor.getOptions(i)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(i,l){return this.cellView=i,this.parent=l,this.stamp(this.container),this.cell.isEdge()?He(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&He(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const i=this.options.markup;if(i){const l=on.parseJSONMarkup(i);this.container.appendChild(l.fragment),this.childNodes=l.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(i){i&&i.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return this.visible}focus(){const i=this.options.focusOpacity;return i!=null&&Number.isFinite(i)&&(this.container.style.opacity=`${i}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(i){return this.graph==null||this.cellView==null?!0:this.graph.view.guard(i,this.cellView)}}t.defaults={isSVGElement:!0,tagName:"g"},c.ToolItem=t,function(e){let i=0;function l(f){return f?hs(f):(i+=1,`CustomTool${i}`)}function h(f){const v=ba(l(f.name),this);return v.config(f),v}e.define=h}(t=c.ToolItem||(c.ToolItem={})),function(e){e.toStringTag=`X6.${e.name}`;function i(l){if(l==null)return!1;if(l instanceof e)return!0;const h=l[Symbol.toStringTag],f=l;return(h==null||h===e.toStringTag)&&f.graph!=null&&f.cell!=null&&typeof f.config=="function"&&typeof f.update=="function"&&typeof f.focus=="function"&&typeof f.blur=="function"&&typeof f.show=="function"&&typeof f.hide=="function"&&typeof f.isVisible=="function"}e.isToolItem=i}(t=c.ToolItem||(c.ToolItem={}))}(Pn||(Pn={}));const G_=c=>c;function jm(c,t){return t===0?"0%":`${Math.round(c/t*100)}%`}function ee(c){return(e,i,l,h)=>i.isEdgeElement(l)?V_(c,e,i,l,h):j_(c,e,i,l,h)}function j_(c,t,e,i,l){const h=e.cell,f=h.getAngle(),v=e.getUnrotatedBBoxOfElement(i),y=h.getBBox().getCenter(),x=W.create(l).rotate(f,y);let E=x.x-v.x,S=x.y-v.y;return c&&(E=jm(E,v.width),S=jm(S,v.height)),t.anchor={name:"topLeft",args:{dx:E,dy:S,rotate:!0}},t}function V_(c,t,e,i,l){const h=e.getConnection();if(!h)return t;const f=h.closestPointLength(l);if(c){const v=h.length();t.anchor={name:"ratio",args:{ratio:f/v}}}else t.anchor={name:"length",args:{length:f}};return t}const Vm=ee(!0),U_=ee(!1);var Td;(function(c){c.presets=Ot,c.registry=Mn.create({type:"connection strategy"}),c.registry.register(c.presets,!0)})(Td||(Td={}));function Um(c,t,e,i){return ue(Td.presets.pinRelative,this.graph,{},t,e,c,this.cell,i,{}).anchor}function Md(c,t){return t?c.cell.getBBox():c.cell.isEdge()?c.getConnection().bbox():c.getUnrotatedBBoxOfElement(c.container)}class Ei extends Pn.ToolItem{onRender(){He(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const e=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();gi(this.container,e,{absolute:!0})}getNodeMatrix(){const t=this.cellView,e=this.options;let{x:i=0,y:l=0}=e;const{offset:h,useCellGeometry:f,rotate:v}=e;let y=Md(t,f);const x=t.cell.getAngle();v||(y=y.bbox(x));let E=0,S=0;typeof h=="number"?(E=h,S=h):typeof h=="object"&&(E=h.x,S=h.y),i=ur(i,y.width),l=ur(l,y.height);let _=_n().translate(y.x+y.width/2,y.y+y.height/2);return v&&(_=_.rotate(x)),_=_.translate(i+E-y.width/2,l+S-y.height/2),_}getEdgeMatrix(){const t=this.cellView,e=this.options,{offset:i=0,distance:l=0,rotate:h}=e;let f,v,y;const x=ur(l,1);x>=0&&x<=1?f=t.getTangentAtRatio(x):f=t.getTangentAtLength(x),f?(v=f.start,y=f.vector().vectorAngle(new W(1,0))||0):(v=t.getConnection().start,y=0);let E=_n().translate(v.x,v.y).rotate(y);return typeof i=="object"?E=E.translate(i.x||0,i.y||0):E=E.translate(0,i),h||(E=E.rotate(-y)),E}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.options.onClick;typeof e=="function"&&ue(e,this.cellView,{e:t,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(c){c.config({name:"button",useCellGeometry:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(Ei||(Ei={})),function(c){c.Remove=c.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,useCellGeometry:!0,onClick({view:t,btn:e}){e.parent.remove(),t.cell.remove({ui:!0,toolId:e.cid})}})}(Ei||(Ei={}));var xn=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class Ka extends Pn.ToolItem{onRender(){if(He(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const t=this.options.attrs,{class:e}=t,i=xn(t,["class"]);nn(this.container,Ao(i)),e&&He(this.container,e)}this.update()}update(){const t=this.cellView,e=this.options,{useCellGeometry:i,rotate:l}=e,h=Co(e.padding);let f=Md(t,i).moveAndExpand({x:-h.left,y:-h.top,width:h.left+h.right,height:h.top+h.bottom});const v=t.cell;if(v.isNode()){const y=v.getAngle();if(y)if(l){const x=v.getBBox().getCenter();pi(this.container,y,x.x,x.y,{absolute:!0})}else f=f.bbox(y)}return nn(this.container,f.toJSON()),this}}(function(c){c.config({name:"boundary",tagName:"rect",padding:10,useCellGeometry:!0,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})})(Ka||(Ka={}));class Ja extends Pn.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}renderHandles(){const t=this.vertices;for(let e=0,i=t.length;e<i;e+=1){const l=t[e],h=this.options.createHandle,f=this.options.processHandle,v=h({index:e,graph:this.graph,guard:y=>this.guard(y),attrs:this.options.attrs||{}});f&&f(v),v.updatePosition(l.x,l.y),this.stamp(v.container),this.container.appendChild(v.container),this.handles.push(v),this.startHandleListening(v)}}updateHandles(){const t=this.vertices;for(let e=0,i=t.length;e<i;e+=1){const l=t[e],h=this.handles[e];h&&h.updatePosition(l.x,l.y)}}updatePath(){const t=this.childNodes.connection;t&&t.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.on("remove",this.onHandleRemove,this)}stopHandleListening(t){const e=this.cellView;e.can("vertexMovable")&&(t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)),e.can("vertexDeletable")&&t.off("remove",this.onHandleRemove,this)}getNeighborPoints(t){const e=this.cellView,i=this.vertices,l=t>0?i[t-1]:e.sourceAnchor,h=t<i.length-1?i[t+1]:e.targetAnchor;return{prev:W.create(l),next:W.create(h)}}getMouseEventArgs(t){const e=this.normalizeEvent(t),{x:i,y:l}=this.graph.snapToGrid(e.clientX,e.clientY);return{e,x:i,y:l}}onHandleChange({e:t}){this.focus();const e=this.cellView;if(e.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:i,x:l,y:h}=this.getMouseEventArgs(t);this.eventData(i,{start:{x:l,y:h}}),e.notifyMouseDown(i,l,h)}}onHandleChanging({handle:t,e}){const i=this.cellView,l=t.options.index,{e:h,x:f,y:v}=this.getMouseEventArgs(e),y={x:f,y:v};this.snapVertex(y,l),i.cell.setVertexAt(l,y,{ui:!0,toolId:this.cid}),t.updatePosition(y.x,y.y),this.options.stopPropagation||i.notifyMouseMove(h,f,v)}stopBatch(t){this.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),t&&this.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid})}onHandleChanged({e:t}){const e=this.options,i=this.cellView;if(e.addable&&this.updatePath(),!e.removeRedundancies){this.stopBatch(this.eventData(t).vertexAdded);return}i.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),this.stopBatch(this.eventData(t).vertexAdded);const{e:h,x:f,y:v}=this.getMouseEventArgs(t);if(!this.options.stopPropagation){i.notifyMouseUp(h,f,v);const{start:y}=this.eventData(h);if(y){const{x,y:E}=y;x===f&&E===v&&i.onClick(h,f,v)}}i.checkMouseleave(h),e.onChanged&&e.onChanged({edge:i.cell,edgeView:i})}snapVertex(t,e){const i=this.options.snapRadius||0;if(i>0){const l=this.getNeighborPoints(e),h=l.prev,f=l.next;Math.abs(t.x-h.x)<i?t.x=h.x:Math.abs(t.x-f.x)<i&&(t.x=f.x),Math.abs(t.y-h.y)<i?t.y=l.prev.y:Math.abs(t.y-f.y)<i&&(t.y=f.y)}}onHandleRemove({handle:t,e}){if(this.options.removable){const i=t.options.index,l=this.cellView;l.cell.removeVertexAt(i,{ui:!0}),this.options.addable&&this.updatePath(),l.checkMouseleave(this.normalizeEvent(e))}}allowAddVertex(t){const e=this.guard(t),i=this.options.addable&&this.cellView.can("vertexAddable"),l=this.options.modifiers?Po.isMatch(t,this.options.modifiers):!0;return!e&&i&&l}onPathMouseDown(t){const e=this.cellView;if(!this.allowAddVertex(t))return;t.stopPropagation(),t.preventDefault();const i=this.normalizeEvent(t),l=this.graph.snapToGrid(i.clientX,i.clientY).toJSON();e.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const h=e.getVertexIndex(l.x,l.y);this.snapVertex(l,h),e.cell.insertVertex(l,h,{ui:!0,toolId:this.cid}),this.render();const f=this.handles[h];this.eventData(i,{vertexAdded:!0}),f.onMouseDown(i)}onRemove(){this.resetHandles()}}(function(c){class t extends dn{get graph(){return this.options.graph}constructor(i){super(),this.options=i,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}render(){this.container=dn.createElement("circle",!0);const i=this.options.attrs;if(typeof i=="function"){const l=c.getDefaults();this.setAttrs(Object.assign(Object.assign({},l.attrs),i(this)))}else this.setAttrs(i);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(i,l){this.setAttrs({cx:i,cy:l})}onMouseDown(i){this.options.guard(i)||(i.stopPropagation(),i.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.data),this.emit("change",{e:i,handle:this}))}onMouseMove(i){this.emit("changing",{e:i,handle:this})}onMouseUp(i){this.emit("changed",{e:i,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(i){this.emit("remove",{e:i,handle:this})}}c.Handle=t})(Ja||(Ja={})),function(c){const t=Jn.prefix("edge-tool-vertex-path");c.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:e=>new c.Handle(e),markup:[{tagName:"path",selector:"connection",className:t,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${t}`]:"onPathMouseDown",[`touchstart .${t}`]:"onPathMouseDown"}})}(Ja||(Ja={}));class qa extends Pn.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){He(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const t=this.cellView,e=[...this.vertices];e.unshift(t.sourcePoint),e.push(t.targetPoint);for(let i=0,l=e.length;i<l-1;i+=1){const h=e[i],f=e[i+1],v=this.renderHandle(h,f,i);this.stamp(v.container),this.handles.push(v)}return this}renderHandle(t,e,i){const l=this.options.createHandle({index:i,graph:this.graph,guard:h=>this.guard(h),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(l),this.updateHandle(l,t,e),this.container.appendChild(l.container),this.startHandleListening(l),l}startHandleListening(t){t.on("change",this.onHandleChange,this),t.on("changing",this.onHandleChanging,this),t.on("changed",this.onHandleChanged,this)}stopHandleListening(t){t.off("change",this.onHandleChange,this),t.off("changing",this.onHandleChanging,this),t.off("changed",this.onHandleChanged,this)}resetHandles(){const t=this.handles;this.handles=[],t&&t.forEach(e=>{this.stopHandleListening(e),e.remove()})}shiftHandleIndexes(t){const e=this.handles;for(let i=0,l=e.length;i<l;i+=1)e[i].options.index+=t}resetAnchor(t,e){const i=this.cellView.cell,l={ui:!0,toolId:this.cid};e?i.prop([t,"anchor"],e,l):i.removeProp([t,"anchor"],l)}snapHandle(t,e,i){const l=t.options.axis,h=t.options.index,y=this.cellView.cell.getVertices(),x=y[h-2]||i.sourceAnchor,E=y[h+1]||i.targetAnchor,S=this.options.snapRadius;return Math.abs(e[l]-x[l])<S?e[l]=x[l]:Math.abs(e[l]-E[l])<S&&(e[l]=E[l]),e}onHandleChanging({handle:t,e}){const i=this.graph,l=this.options,h=this.cellView,f=l.anchor,v=t.options.axis,y=t.options.index-1,x=this.getEventData(e),E=this.normalizeEvent(e),S=i.snapToGrid(E.clientX,E.clientY),_=this.snapHandle(t,S.clone(),x),T=gn(this.vertices);let D=T[y],L=T[y+1];const B=h.sourceView,j=h.sourceBBox;let V=!1,G=!1;if(D?y===0?j.containsPoint(D)?(T.shift(),this.shiftHandleIndexes(-1),V=!0):(D[v]=_[v],G=!0):D[v]=_[v]:(D=h.sourceAnchor.toJSON(),D[v]=_[v],j.containsPoint(D)?V=!0:(T.unshift(D),this.shiftHandleIndexes(1),G=!0)),typeof f=="function"&&B){if(V){const jt=x.sourceAnchor.clone();jt[v]=_[v];const Vt=ue(f,h,jt,B,h.sourceMagnet||B.container,"source",h,this);this.resetAnchor("source",Vt)}G&&this.resetAnchor("source",x.sourceAnchorDef)}const X=h.targetView,K=h.targetBBox;let it=!1,At=!1;if(L?y===T.length-2?K.containsPoint(L)?(T.pop(),it=!0):(L[v]=_[v],At=!0):L[v]=_[v]:(L=h.targetAnchor.toJSON(),L[v]=_[v],K.containsPoint(L)?it=!0:(T.push(L),At=!0)),typeof f=="function"&&X){if(it){const jt=x.targetAnchor.clone();jt[v]=_[v];const Vt=ue(f,h,jt,X,h.targetMagnet||X.container,"target",h,this);this.resetAnchor("target",Vt)}At&&this.resetAnchor("target",x.targetAnchorDef)}W.equalPoints(T,this.vertices)||this.cellView.cell.setVertices(T,{ui:!0,toolId:this.cid}),this.updateHandle(t,D,L,0),l.stopPropagation||h.notifyMouseMove(E,S.x,S.y)}onHandleChange({handle:t,e}){const i=this.options,l=this.handles,h=this.cellView,f=t.options.index;if(Array.isArray(l)){for(let v=0,y=l.length;v<y;v+=1)v!==f&&l[v].hide();if(this.focus(),this.setEventData(e,{sourceAnchor:h.sourceAnchor.clone(),targetAnchor:h.targetAnchor.clone(),sourceAnchorDef:gn(this.cell.prop(["source","anchor"])),targetAnchorDef:gn(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!i.stopPropagation){const v=this.normalizeEvent(e),y=this.graph.snapToGrid(v.clientX,v.clientY);h.notifyMouseDown(v,y.x,y.y)}}}onHandleChanged({e:t}){const e=this.options,i=this.cellView;e.removeRedundancies&&i.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const l=this.normalizeEvent(t),h=this.graph.snapToGrid(l.clientX,l.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),e.stopPropagation||i.notifyMouseUp(l,h.x,h.y),i.checkMouseleave(l),e.onChanged&&e.onChanged({edge:i.cell,edgeView:i})}updateHandle(t,e,i,l=0){const h=this.options.precision||0,f=Math.abs(e.x-i.x)<h,v=Math.abs(e.y-i.y)<h;if(f||v){const y=new Wt(e,i);if(y.length()<this.options.threshold)t.hide();else{const E=y.getCenter(),S=f?"x":"y";E[S]+=l||0;const _=y.vector().vectorAngle(new W(1,0));t.updatePosition(E.x,E.y,_,this.cellView),t.show(),t.options.axis=S}}else t.hide()}onRemove(){this.resetHandles()}}(function(c){class t extends dn{constructor(i){super(),this.options=i,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=dn.createElement("rect",!0);const i=this.options.attrs;if(typeof i=="function"){const l=c.getDefaults();this.setAttrs(Object.assign(Object.assign({},l.attrs),i(this)))}else this.setAttrs(i);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(i,l,h,f){const v=f.getClosestPoint(new W(i,l))||new W(i,l);let y=_n().translate(v.x,v.y);if(v.equals({x:i,y:l}))y=y.rotate(h);else{let E=new Wt(i,l,v.x,v.y).vector().vectorAngle(new W(1,0));E!==0&&(E+=90),y=y.rotate(E)}this.setAttrs({transform:Io(y),cursor:h%180===0?"row-resize":"col-resize"})}onMouseDown(i){this.options.guard(i)||(this.trigger("change",{e:i,handle:this}),i.stopPropagation(),i.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},i.data))}onMouseMove(i){this.emit("changing",{e:i,handle:this})}onMouseUp(i){this.emit("changed",{e:i,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}c.Handle=t})(qa||(qa={})),function(c){c.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:t=>new c.Handle(t),anchor:Um})}(qa||(qa={}));class $l extends Pn.ToolItem{get type(){return this.options.type}onRender(){He(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){const t=this.type;return this.cellView.getTerminalView(t)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const t=this.childNodes;if(!t)return;const e=t.anchor;if(!e)return;const i=this.type,l=this.cellView,h=this.options,f=l.getTerminalAnchor(i),v=l.cell.prop([i,"anchor"]);e.setAttribute("transform",`translate(${f.x}, ${f.y})`);const y=v?h.customAnchorAttrs:h.defaultAnchorAttrs;y&&Object.keys(y).forEach(x=>{e.setAttribute(x,y[x])})}updateArea(){const t=this.childNodes;if(!t)return;const e=t.area;if(!e)return;const i=this.type,l=this.cellView,h=l.getTerminalView(i);if(h){const f=h.cell,v=l.getTerminalMagnet(i);let y=this.options.areaPadding||0;Number.isFinite(y)||(y=0);let x,E,S;h.isEdgeElement(v)?(x=h.getBBox(),E=0,S=x.getCenter()):(x=h.getUnrotatedBBoxOfElement(v),E=f.getAngle(),S=x.getCenter(),E&&S.rotate(-E,f.getBBox().getCenter())),x.inflate(y),nn(e,{x:-x.width/2,y:-x.height/2,width:x.width,height:x.height,transform:`translate(${S.x}, ${S.y}) rotate(${E})`})}}toggleArea(t){if(this.childNodes){const e=this.childNodes.area;e&&(e.style.display=t?"":"none")}}onMouseDown(t){this.guard(t)||(t.stopPropagation(),t.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(t){const e=this.type,i=this.cell;t?i.prop([e,"anchor"],t,{rewrite:!0,ui:!0,toolId:this.cid}):i.removeProp([e,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(t){const e=this.type,i=this.cellView,l=i.getTerminalView(e);if(l==null)return;const h=this.normalizeEvent(t),f=l.cell,v=i.getTerminalMagnet(e);let y=this.graph.coord.clientToLocalPoint(h.clientX,h.clientY);const x=this.options.snap;if(typeof x=="function"){const _=ue(x,i,y,l,v,e,i,this);y=W.create(_)}if(this.options.restrictArea)if(l.isEdgeElement(v)){const _=l.getClosestPoint(y);_&&(y=_)}else{const _=l.getUnrotatedBBoxOfElement(v),T=f.getAngle(),D=f.getBBox().getCenter(),L=y.clone().rotate(T,D);_.containsPoint(L)||(y=_.getNearestPointToPoint(L).rotate(-T,D))}let E;const S=this.options.anchor;typeof S=="function"&&(E=ue(S,i,y,l,v,e,i,this)),this.resetAnchor(E),this.update()}onMouseUp(t){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1);const e=this.cellView;this.options.removeRedundancies&&e.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const t=this.options.resetAnchor;t&&this.resetAnchor(t===!0?void 0:t),this.update()}}(function(c){c.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:Um,snap(t,e,i,l,h,f){const v=f.options.snapRadius||0,y=l==="source",x=y?0:-1,E=this.cell.getVertexAt(x)||this.getTerminalAnchor(y?"target":"source");return E&&(Math.abs(E.x-t.x)<v&&(t.x=E.x),Math.abs(E.y-t.y)<v&&(t.y=E.y)),t}})})($l||($l={}));const H_=$l.define({name:"source-anchor",type:"source"}),$_=$l.define({name:"target-anchor",type:"target"});var Id=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class Wl extends Pn.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const t=this.options.attrs,{class:e}=t,i=Id(t,["class"]);this.setAttrs(i,this.container),e&&He(this.container,e)}}onRender(){He(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const t=this.ratio,e=this.cellView,i=e.getTangentAtRatio(t),l=i?i.start:e.getPointAtRatio(t),h=i&&i.vector().vectorAngle(new W(1,0))||0;if(!l)return this;const f=_n().translate(l.x,l.y).rotate(h);return gi(this.container,f,{absolute:!0}),this}onMouseDown(t){if(this.guard(t))return;t.stopPropagation(),t.preventDefault();const e=this.cellView;if(e.can("arrowheadMovable")){e.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const i=this.graph.snapToGrid(t.clientX,t.clientY),l=e.prepareArrowheadDragging(this.type,{x:i.x,y:i.y,options:Object.assign(Object.assign({},this.options),{toolId:this.cid})});this.cellView.setEventData(t,l),this.delegateDocumentEvents(this.options.documentEvents,t.data),e.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(t){const e=this.normalizeEvent(t),i=this.graph.snapToGrid(e.clientX,e.clientY);this.cellView.onMouseMove(e,i.x,i.y),this.update()}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),i=this.cellView,l=this.graph.snapToGrid(e.clientX,e.clientY);i.onMouseUp(e,l.x,l.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",i.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}(function(c){c.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})})(Wl||(Wl={}));const Xl=Wl.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),Zl=Wl.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class Ji extends Pn.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5,this.dblClick=this.onCellDblClick.bind(this)}onRender(){const t=this.cellView;t&&t.on("cell:dblclick",this.dblClick)}createElement(){const t=[this.prefixClassName(`${this.cell.isEdge()?"edge":"node"}-tool-editor`),this.prefixClassName("cell-tool-editor")];this.editor=Pn.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}removeElement(){this.undelegateDocumentEvents(),this.editor&&(this.container.removeChild(this.editor),this.editor=null)}updateEditor(){const{cell:t,editor:e}=this;if(!e)return;const{style:i}=e;t.isNode()?this.updateNodeEditorTransform():t.isEdge()&&this.updateEdgeEditorTransform();const{attrs:l}=this.options;i.fontSize=`${l.fontSize}px`,i.fontFamily=l.fontFamily,i.color=l.color,i.backgroundColor=l.backgroundColor;const h=this.getCellText()||"";return e.innerText=h,this.setCellText(""),this}updateNodeEditorTransform(){const{graph:t,cell:e,editor:i}=this;if(!i)return;let l=W.create(),h=20,f="",{x:v,y}=this.options;const{width:x,height:E}=this.options;if(typeof v!="undefined"&&typeof y!="undefined"){const T=e.getBBox();v=ur(v,T.width),y=ur(y,T.height),l=T.topLeft.translate(v,y),h=T.width-v*2}else{const T=e.getBBox();l=T.center,h=T.width-4,f="translate(-50%, -50%)"}const S=t.scale(),{style:_}=i;l=t.localToGraph(l),_.left=`${l.x}px`,_.top=`${l.y}px`,_.transform=`scale(${S.sx}, ${S.sy}) ${f}`,_.minWidth=`${h}px`,typeof x=="number"&&(_.width=`${x}px`),typeof E=="number"&&(_.height=`${E}px`)}updateEdgeEditorTransform(){if(!this.event)return;const{graph:t,editor:e}=this;if(!e)return;let i=W.create(),l=20;const{style:h}=e,f=this.event.target,v=f.parentElement;if(v&&Fi(v,this.prefixClassName("edge-label"))){const E=v.getAttribute("data-index")||"0";this.labelIndex=parseInt(E,10);const S=v.getAttribute("transform"),{translation:_}=Al(S);i=new W(_.tx,_.ty),l=qe.getBBox(f).width}else{if(!this.options.labelAddable)return this;i=t.clientToLocal(W.create(this.event.clientX,this.event.clientY));const S=this.cellView.path.closestPointLength(i);this.distance=S,this.labelIndex=-1}i=t.localToGraph(i);const x=t.scale();h.left=`${i.x}px`,h.top=`${i.y}px`,h.minWidth=`${l}px`,h.transform=`scale(${x.sx}, ${x.sy}) translate(-50%, -50%)`}onDocumentMouseUp(t){if(this.editor&&t.target!==this.editor){const e=this.editor.innerText.replace(/\n$/,"")||"";this.setCellText(e!==""?e:null),this.removeElement()}}onCellDblClick({e:t}){this.editor||(t.stopPropagation(),this.removeElement(),this.event=t,this.createElement(),this.updateEditor(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents))}onMouseDown(t){t.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor&&(this.editor.focus(),this.selectText())})}selectText(){if(window.getSelection&&this.editor){const t=document.createRange(),e=window.getSelection();t.selectNodeContents(this.editor),e.removeAllRanges(),e.addRange(t)}}getCellText(){const{getText:t}=this.options;if(typeof t=="function")return ue(t,this.cellView,{cell:this.cell,index:this.labelIndex});if(typeof t=="string"){if(this.cell.isNode())return this.cell.attr(t);if(this.cell.isEdge()&&this.labelIndex!==-1)return this.cell.prop(`labels/${this.labelIndex}/attrs/${t}`)}}setCellText(t){const e=this.options.setText;if(typeof e=="function"){ue(e,this.cellView,{cell:this.cell,value:t,index:this.labelIndex,distance:this.distance});return}if(typeof e=="string"){if(this.cell.isNode()){t!==null&&this.cell.attr(e,t);return}if(this.cell.isEdge()){const i=this.cell;if(this.labelIndex===-1){if(t){const l={position:{distance:this.distance},attrs:{}};Eo(l,`attrs/${e}`,t),i.appendLabel(l)}}else t!==null?i.prop(`labels/${this.labelIndex}/attrs/${e}`,t):typeof this.labelIndex=="number"&&i.removeLabelAt(this.labelIndex)}}}onRemove(){const t=this.cellView;t&&t.off("cell:dblclick",this.dblClick),this.removeElement()}}(function(c){c.config({tagName:"div",isSVGElement:!1,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mouseup:"onDocumentMouseUp",touchend:"onDocumentMouseUp",touchcancel:"onDocumentMouseUp"}})})(Ji||(Ji={})),function(c){c.NodeEditor=c.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:"text/text",setText:"text/text"}),c.EdgeEditor=c.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:"label/text",setText:"label/text"})}(Ji||(Ji={}));var Qa=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e},Ds;(function(c){c.presets={boundary:Ka,button:Ei,"button-remove":Ei.Remove,"node-editor":Ji.NodeEditor},c.registry=Mn.create({type:"node tool",process(t,e){if(typeof e=="function")return e;let i=Pn.ToolItem;const{inherit:l}=e,h=Qa(e,["inherit"]);if(l){const f=this.get(l);f==null?this.onNotFound(l,"inherited"):i=f}return h.name==null&&(h.name=t),i.define.call(i,h)}}),c.registry.register(c.presets,!0)})(Ds||(Ds={}));var Rs;(function(c){c.presets={boundary:Ka,vertices:Ja,segments:qa,button:Ei,"button-remove":Ei.Remove,"source-anchor":H_,"target-anchor":$_,"source-arrowhead":Xl,"target-arrowhead":Zl,"edge-editor":Ji.EdgeEditor},c.registry=Mn.create({type:"edge tool",process(t,e){if(typeof e=="function")return e;let i=Pn.ToolItem;const{inherit:l}=e,h=Qa(e,["inherit"]);if(l){const f=this.get(l);f==null?this.onNotFound(l,"inherited"):i=f}return h.name==null&&(h.name=t),i.define.call(i,h)}}),c.registry.register(c.presets,!0)})(Rs||(Rs={}));const W_=_i("center"),X_=_i("topCenter"),Yl=_i("bottomCenter"),Kl=_i("leftMiddle"),Z_=_i("rightMiddle"),ir=_i("topLeft"),Y_=_i("topRight"),K_=_i("bottomLeft"),J_=_i("bottomRight");function _i(c){return function(t,e,i,l={}){const h=l.rotate?t.getUnrotatedBBoxOfElement(e):t.getBBoxOfElement(e),f=h[c];f.x+=ur(l.dx,h.width),f.y+=ur(l.dy,h.height);const v=t.cell;return l.rotate?f.rotate(-v.getAngle(),v.getBBox().getCenter()):f}}function Jl(c){return function(t,e,i,l){if(i instanceof Element){const h=this.graph.findViewByElem(i);let f;if(h)if(h.isEdgeElement(i)){const v=l.fixedAt!=null?l.fixedAt:"50%";f=Hm(h,v)}else f=h.getBBoxOfElement(i).getCenter();else f=new W;return c.call(this,t,e,f,l)}return c.apply(this,arguments)}}function Hm(c,t){const e=Ar(t),i=typeof t=="string"?parseFloat(t):t;return e?c.getPointAtRatio(i/100):c.getPointAtLength(i)}const q_=Jl(function(c,t,e,i){const l=$e.normalize(c.cell.getAngle()),h=c.getBBoxOfElement(t),f=h.getCenter(),v=h.getTopLeft(),y=h.getBottomRight();let x=i.padding;if(Number.isFinite(x)||(x=0),v.y+x<=e.y&&e.y<=y.y-x){const E=e.y-f.y;f.x+=l===0||l===180?0:E*1/Math.tan($e.toRad(l)),f.y+=E}else if(v.x+x<=e.x&&e.x<=y.x-x){const E=e.x-f.x;f.y+=l===90||l===270?0:E*Math.tan($e.toRad(l)),f.x+=E}return f}),$m=function(c,t,e,i,l){const h=c.cell.getConnectionPoint(this.cell,l);return(i.dx||i.dy)&&h.translate(i.dx||0,i.dy||0),h},Wm=Jl(function(c,t,e,i){let l,h=0,f;const v=c.cell;i.rotate?(l=c.getUnrotatedBBoxOfElement(t),f=v.getBBox().getCenter(),h=v.getAngle()):l=c.getBBoxOfElement(t);const y=i.padding;y!=null&&Number.isFinite(y)&&l.inflate(y),i.rotate&&e.rotate(h,f);const x=l.getNearestSideToPoint(e);let E;switch(x){case"left":E=l.getLeftMiddle();break;case"right":E=l.getRightMiddle();break;case"top":E=l.getTopCenter();break;case"bottom":E=l.getBottomCenter();break;default:break}const S=i.direction;return S==="H"?(x==="top"||x==="bottom")&&(e.x<=l.x+l.width?E=l.getLeftMiddle():E=l.getRightMiddle()):S==="V"&&(e.y<=l.y+l.height?E=l.getTopCenter():E=l.getBottomCenter()),i.rotate?E.rotate(-h,f):E});var Ls;(function(c){c.presets=Rt,c.registry=Mn.create({type:"node endpoint"}),c.registry.register(c.presets,!0)})(Ls||(Ls={}));const YC=function(c,t,e,i){let l=i.ratio!=null?i.ratio:.5;return l>1&&(l/=100),c.getPointAtRatio(l)},Pd=function(c,t,e,i){const l=i.length!=null?i.length:20;return c.getPointAtLength(l)},Bn=function(c,t,e,i){const l=c.getClosestPoint(e);return l!=null?l:new W},qi=Jl(Bn),KC=Jl(function(c,t,e,i){const h=c.getConnection(),f=c.getConnectionSubdivisions(),v=new Wt(e.clone().translate(0,1e6),e.clone().translate(0,-1e6)),y=new Wt(e.clone().translate(1e6,0),e.clone().translate(-1e6,0)),x=v.intersect(h,{segmentSubdivisions:f}),E=y.intersect(h,{segmentSubdivisions:f}),S=[];return x&&S.push(...x),E&&S.push(...E),S.length>0?e.closest(S):i.fallbackAt!=null?Hm(c,i.fallbackAt):ue(Bn,this,c,t,e,i)});var Bo;(function(c){c.presets=Mt,c.registry=Mn.create({type:"edge endpoint"}),c.registry.register(c.presets,!0)})(Bo||(Bo={}));function ql(c,t,e){let i;if(typeof e=="object"){if(Number.isFinite(e.y)){const h=new Wt(t,c),{start:f,end:v}=h.parallel(e.y);t=f,c=v}i=e.x}else i=e;if(i==null||!Number.isFinite(i))return c;const l=c.distance(t);return i===0&&l>0?c:c.move(t,-Math.min(i,l-1))}function Ql(c){const t=c.getAttribute("stroke-width");return t===null?0:parseFloat(t)||0}function tC(c){if(c==null)return null;let t=c;do{let e=t.tagName;if(typeof e!="string")return null;if(e=e.toUpperCase(),e==="G")t=t.firstElementChild;else if(e==="TITLE")t=t.nextElementSibling;else break}while(t);return t}const Xm=function(c,t,e,i){const l=t.getBBoxOfElement(e);i.stroked&&l.inflate(Ql(e)/2);const h=c.intersect(l),f=h&&h.length?c.start.closest(h):c.end;return ql(f,c.start,i.offset)},Zm=function(c,t,e,i,l){const h=t.cell,f=h.isNode()?h.getAngle():0;if(f===0)return ue(Xm,this,c,t,e,i,l);const v=t.getUnrotatedBBoxOfElement(e);i.stroked&&v.inflate(Ql(e)/2);const y=v.getCenter(),x=c.clone().rotate(f,y),E=x.setLength(1e6).intersect(v),S=E&&E.length?x.start.closest(E).rotate(-f,y):c.end;return ql(S,c.start,i.offset)},eC=function(c,t,e,i){let l,h;const f=c.end,v=i.selector;if(typeof v=="string"?l=t.findOne(v):Array.isArray(v)?l=xa(e,v):l=tC(e),!hi(l)){if(l===e||!hi(e))return f;l=e}const y=t.getShapeOfElement(l),x=t.getMatrixOfElement(l),E=t.getRootTranslatedMatrix(),S=t.getRootRotatedMatrix(),_=E.multiply(S).multiply(x),T=_.inverse(),D=qe.transformLine(c,T),L=D.start.clone(),B=t.getDataOfElement(l);if(i.insideout===!1){B.shapeBBox==null&&(B.shapeBBox=y.bbox());const X=B.shapeBBox;if(X!=null&&X.containsPoint(L))return f}i.extrapolate===!0&&D.setLength(1e6);let j;if(he.isPath(y)){const X=i.precision||2;B.segmentSubdivisions==null&&(B.segmentSubdivisions=y.getSegmentSubdivisions({precision:X})),j={precision:X,segmentSubdivisions:B.segmentSubdivisions},h=D.intersect(y,j)}else h=D.intersect(y);h?Array.isArray(h)&&(h=L.closest(h)):i.sticky===!0&&(Gt.isRectangle(y)?h=y.getNearestPointToPoint(L):jr.isEllipse(y)?h=y.intersectsWithLineFromCenterToPoint(L):h=y.closestPoint(L,j));const V=h?qe.transformPoint(h,_):f;let G=i.offset||0;return i.stroked!==!1&&(typeof G=="object"?(G=Object.assign({},G),G.x==null&&(G.x=0),G.x+=Ql(l)/2):G+=Ql(l)/2),ql(V,c.start,G)};function nC(c,t,e=0){const{start:i,end:l}=c;let h,f,v,y;switch(t){case"left":y="x",h=l,f=i,v=-1;break;case"right":y="x",h=i,f=l,v=1;break;case"top":y="y",h=l,f=i,v=-1;break;case"bottom":y="y",h=i,f=l,v=1;break;default:return}i[y]<l[y]?h[y]=f[y]:f[y]=h[y],Number.isFinite(e)&&(h[y]+=v*e,f[y]+=v*e)}const rC=function(c,t,e,i){const{alignOffset:l,align:h}=i;return h&&nC(c,h,l),ql(c.end,c.start,i.offset)};var zo;(function(c){c.presets=Nt,c.registry=Mn.create({type:"connection point"}),c.registry.register(c.presets,!0)})(zo||(zo={}));const iC=function(c){return[...c]},oC=function(c,t,e){const i=t.side||"bottom",l=Co(t.padding||40),h=e.sourceBBox,f=e.targetBBox,v=h.getCenter(),y=f.getCenter();let x,E,S;switch(i){case"top":S=-1,x="y",E="height";break;case"left":S=-1,x="x",E="width";break;case"right":S=1,x="x",E="width";break;case"bottom":default:S=1,x="y",E="height";break}return v[x]+=S*(h[E]/2+l[i]),y[x]+=S*(f[E]/2+l[i]),S*(v[x]-y[x])>0?y[x]=v[x]:v[x]=y[x],[v.toJSON(),...c,y.toJSON()]};function tu(c){return new Gt(c.x,c.y,0,0)}function tc(c={}){const t=Co(c.padding||20);return{x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}function Ym(c,t={}){return c.sourceBBox.clone().moveAndExpand(tc(t))}function Nd(c,t={}){return c.targetBBox.clone().moveAndExpand(tc(t))}function sC(c,t={}){return c.sourceAnchor?c.sourceAnchor:Ym(c,t).getCenter()}function Km(c,t={}){return c.targetAnchor?c.targetAnchor:Nd(c,t).getCenter()}const Jm=function(c,t,e){let i=Ym(e,t),l=Nd(e,t);const h=sC(e,t),f=Km(e,t);i=i.union(tu(h)),l=l.union(tu(f));const v=c.map(E=>W.create(E));v.unshift(h),v.push(f);let y=null;const x=[];for(let E=0,S=v.length-1;E<S;E+=1){let _=null;const T=v[E],D=v[E+1],L=Dr.getBearing(T,D)!=null;if(E===0)E+1===S?i.intersectsWithRect(l.clone().inflate(1))?_=Dr.insideNode(T,D,i,l):L||(_=Dr.nodeToNode(T,D,i,l)):i.containsPoint(D)?_=Dr.insideNode(T,D,i,tu(D).moveAndExpand(tc(t))):L||(_=Dr.nodeToVertex(T,D,i));else if(E+1===S){const B=L&&Dr.getBearing(D,T)===y;l.containsPoint(T)||B?_=Dr.insideNode(T,D,tu(T).moveAndExpand(tc(t)),l,y):L||(_=Dr.vertexToNode(T,D,l,y))}else L||(_=Dr.vertexToVertex(T,D,y));_?(x.push(..._.points),y=_.direction):y=Dr.getBearing(T,D),E+1<S&&x.push(D)}return x};var Dr;(function(c){const t={N:"S",S:"N",E:"W",W:"E"},e={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function i(S,_,T){let D=new W(S.x,_.y);return T.containsPoint(D)&&(D=new W(_.x,S.y)),D}function l(S,_){return S[_==="W"||_==="E"?"width":"height"]}c.getBBoxSize=l;function h(S,_){return S.x===_.x?S.y>_.y?"N":"S":S.y===_.y?S.x>_.x?"W":"E":null}c.getBearing=h;function f(S,_,T){const D=new W(S.x,_.y),L=new W(_.x,S.y),B=h(S,D),j=h(S,L),V=T?t[T]:null,G=B===T||B!==V&&(j===V||j!==T)?D:L;return{points:[G],direction:h(G,_)}}c.vertexToVertex=f;function v(S,_,T){const D=i(S,_,T);return{points:[D],direction:h(D,_)}}c.nodeToVertex=v;function y(S,_,T,D){const L=[new W(S.x,_.y),new W(_.x,S.y)],B=L.filter(G=>!T.containsPoint(G)),j=B.filter(G=>h(G,S)!==D);let V;if(j.length>0)return V=j.filter(G=>h(S,G)===D).pop(),V=V||j[0],{points:[V],direction:h(V,_)};{V=il(L,B)[0];const G=W.create(_).move(V,-l(T,D)/2);return{points:[i(G,S,T),G],direction:h(G,_)}}}c.vertexToNode=y;function x(S,_,T,D){let L=v(_,S,D);const B=L.points[0];if(T.containsPoint(B)){L=v(S,_,T);const j=L.points[0];if(D.containsPoint(j)){const V=W.create(S).move(j,-l(T,h(S,j))/2),G=W.create(_).move(B,-l(D,h(_,B))/2),X=new Wt(V,G).getCenter(),K=v(S,X,T),it=f(X,_,K.direction);L.points=[K.points[0],it.points[0]],L.direction=it.direction}}return L}c.nodeToNode=x;function E(S,_,T,D,L){const B=T.union(D).inflate(1),j=B.getCenter(),V=j.distance(_)>j.distance(S),G=V?_:S,X=V?S:_;let K,it,At;L?(K=W.fromPolar(B.width+B.height,e[L],G),K=B.getNearestPointToPoint(K).move(K,-1)):K=B.getNearestPointToPoint(G).move(G,1),it=i(K,X,B);let jt;K.round().equals(it.round())?(it=W.fromPolar(B.width+B.height,$e.toRad(K.theta(G))+Math.PI/2,X),it=B.getNearestPointToPoint(it).move(X,1).round(),At=i(K,it,B),jt=V?[it,At,K]:[K,At,it]):jt=V?[it,K]:[K,it];const Vt=h(V?K:it,_);return{points:jt,direction:Vt}}c.insideNode=E})(Dr||(Dr={}));const aC={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeNodes:[],excludeShapes:[],startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return Qi(this.step,this)},directions(){const c=Qi(this.step,this),t=Qi(this.cost,this);return[{cost:t,offsetX:c,offsetY:0},{cost:t,offsetX:-c,offsetY:0},{cost:t,offsetX:0,offsetY:c},{cost:t,offsetX:0,offsetY:-c}]},penalties(){const c=Qi(this.step,this);return{0:0,45:c/2,90:c/2}},paddingBox(){const c=Qi(this.step,this);return{x:-c,y:-c,width:2*c,height:2*c}},fallbackRouter:Jm,draggingRouter:null,snapToGrid:!0};function Qi(c,t){return typeof c=="function"?c.call(t):c}function cC(c){const t=Object.keys(c).reduce((e,i)=>{const l=e;return i==="fallbackRouter"||i==="draggingRouter"||i==="fallbackRoute"?l[i]=c[i]:l[i]=Qi(c[i],c),e},{});if(t.padding){const e=Co(t.padding);t.paddingBox={x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}return t.directions.forEach(e=>{const i=new W(0,0),l=new W(e.offsetX,e.offsetY);e.angle=$e.normalize(i.theta(l))}),t}const qm=1,Dd=2;class lC{constructor(){this.items=[],this.hash={},this.values={}}add(t,e){this.hash[t]?this.items.splice(this.items.indexOf(t),1):this.hash[t]=qm,this.values[t]=e;const i=_p(this.items,t,l=>this.values[l]);this.items.splice(i,0,t)}pop(){const t=this.items.shift();return t&&(this.hash[t]=Dd),t}isOpen(t){return this.hash[t]===qm}isClose(t){return this.hash[t]===Dd}isEmpty(){return this.items.length===0}}class Qm{constructor(t){this.options=t,this.mapGridSize=100,this.map={}}build(t,e){const i=this.options,l=i.excludeTerminals.reduce((x,E)=>{const S=e[E];if(S){const _=t.getCell(S.cell);_&&x.push(_)}return x},[]);let h=[];const f=t.getCell(e.getSourceCellId());f&&(h=gp(h,f.getAncestors().map(x=>x.id)));const v=t.getCell(e.getTargetCellId());v&&(h=gp(h,v.getAncestors().map(x=>x.id)));const y=this.mapGridSize;return t.getNodes().reduce((x,E)=>{const S=l.some(B=>B.id===E.id),_=E.shape?i.excludeShapes.includes(E.shape):!1,T=i.excludeNodes.some(B=>typeof B=="string"?E.id===B:B===E),D=h.includes(E.id),L=_||S||T||D;if(E.isVisible()&&!L){const B=E.getBBox().moveAndExpand(i.paddingBox),j=B.getOrigin().snapToGrid(y),V=B.getCorner().snapToGrid(y);for(let G=j.x;G<=V.x;G+=y)for(let X=j.y;X<=V.y;X+=y){const K=new W(G,X).toString();x[K]==null&&(x[K]=[]),x[K].push(B)}}return x},this.map),this}isAccessible(t){const e=t.clone().snapToGrid(this.mapGridSize).toString(),i=this.map[e];return i?i.every(l=>!l.containsPoint(t)):!0}}function t0(c,t){const e=c.sourceBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function e0(c,t){const e=c.targetBBox.clone();return t&&t.paddingBox?e.moveAndExpand(t.paddingBox):e}function Rd(c,t){return c.sourceAnchor?c.sourceAnchor:t0(c,t).getCenter()}function uC(c,t){return c.targetAnchor?c.targetAnchor:e0(c,t).getCenter()}function eu(c,t,e,i,l){const h=360/e,f=c.theta(hC(c,t,i,l)),v=$e.normalize(f+h/2);return h*Math.floor(v/h)}function hC(c,t,e,i){const l=i.step,h=t.x-c.x,f=t.y-c.y,v=h/e.x,y=f/e.y,x=v*l,E=y*l;return new W(c.x+x,c.y+E)}function n0(c,t){const e=Math.abs(c-t);return e>180?360-e:e}function r0(c,t){const e=t.step;return t.directions.forEach(i=>{i.gridOffsetX=i.offsetX/e*c.x,i.gridOffsetY=i.offsetY/e*c.y}),t.directions}function dC(c,t,e){return{source:t.clone(),x:Ld(e.x-t.x,c),y:Ld(e.y-t.y,c)}}function Ld(c,t){if(!c)return t;const e=Math.abs(c),i=Math.round(e/t);if(!i)return e;const l=i*t,f=(e-l)/i;return t+f}function fC(c,t){const e=t.source,i=rn.snapToGrid(c.x-e.x,t.x)+e.x,l=rn.snapToGrid(c.y-e.y,t.y)+e.y;return new W(i,l)}function ec(c,t){return c.round(t)}function to(c,t,e){return ec(fC(c.clone(),t),e)}function nc(c){return c.toString()}function kd(c){return new W(c.x===0?0:Math.abs(c.x)/c.x,c.y===0?0:Math.abs(c.y)/c.y)}function i0(c,t){let e=1/0;for(let i=0,l=t.length;i<l;i+=1){const h=c.manhattanDistance(t[i]);h<e&&(e=h)}return e}function o0(c,t,e,i,l){const h=l.precision,f=l.directionMap,v=c.diff(t.getCenter()),y=Object.keys(f).reduce((x,E)=>{if(e.includes(E)){const S=f[E],_=new W(c.x+S.x*(Math.abs(v.x)+t.width),c.y+S.y*(Math.abs(v.y)+t.height)),D=new Wt(c,_).intersect(t)||[];let L,B=null;for(let j=0;j<D.length;j+=1){const V=D[j],G=c.squaredDistance(V);(L==null||G>L)&&(L=G,B=V)}if(B){let j=to(B,i,h);t.containsPoint(j)&&(j=to(j.translate(S.x*i.x,S.y*i.y),i,h)),x.push(j)}}return x},[]);return t.containsPoint(c)||y.push(to(c,i,h)),y}function s0(c,t,e,i,l){const h=[];let f=kd(l.diff(e)),v=nc(e),y=c[v],x;for(;y;){x=t[v];const _=kd(x.diff(y));_.equals(f)||(h.unshift(x),f=_),v=nc(y),y=c[v]}const E=t[v];return kd(E.diff(i)).equals(f)||h.unshift(E),h}function a0(c,t,e,i,l){const h=l.precision;let f,v;Gt.isRectangle(t)?f=ec(Rd(c,l).clone(),h):f=ec(t.clone(),h),Gt.isRectangle(e)?v=ec(uC(c,l).clone(),h):v=ec(e.clone(),h);const y=dC(l.step,f,v),x=f,E=v;let S,_;if(Gt.isRectangle(t)?S=o0(x,t,l.startDirections,y,l):S=[x],Gt.isRectangle(e)?_=o0(v,e,l.endDirections,y,l):_=[E],S=S.filter(T=>i.isAccessible(T)),_=_.filter(T=>i.isAccessible(T)),S.length>0&&_.length>0){const T=new lC,D={},L={},B={};for(let ie=0,Kt=S.length;ie<Kt;ie+=1){const ce=S[ie],pn=nc(ce);T.add(pn,i0(ce,_)),D[pn]=ce,B[pn]=0}const j=l.previousDirectionAngle,V=j===void 0;let G,X;const K=r0(y,l),it=K.length,At=_.reduce((ie,Kt)=>{const ce=nc(Kt);return ie.push(ce),ie},[]),jt=W.equalPoints(S,_);let Vt=l.maxLoopCount;for(;!T.isEmpty()&&Vt>0;){const ie=T.pop(),Kt=D[ie],ce=L[ie],pn=B[ie],je=Kt.equals(x),lt=ce==null;let It;if(lt?V?je?It=null:It=eu(x,Kt,it,y,l):It=j:It=eu(ce,Kt,it,y,l),!(lt&&jt)&&At.indexOf(ie)>=0)return l.previousDirectionAngle=It,s0(L,D,Kt,x,E);for(let Sn=0;Sn<it;Sn+=1){G=K[Sn];const On=G.angle;if(X=n0(It,On),!(V&&je)&&X>l.maxDirectionChange)continue;const tr=to(Kt.clone().translate(G.gridOffsetX||0,G.gridOffsetY||0),y,h),fr=nc(tr);if(T.isClose(fr)||!i.isAccessible(tr))continue;if(At.indexOf(fr)>=0&&!tr.equals(E)){const Uo=eu(tr,E,it,y,l);if(n0(On,Uo)>l.maxDirectionChange)continue}const g0=G.cost,p0=je?0:l.penalties[X],zs=pn+g0+p0;(!T.isOpen(fr)||zs<B[fr])&&(D[fr]=tr,L[fr]=Kt,B[fr]=zs,T.add(fr,zs+i0(tr,_)))}Vt-=1}}return l.fallbackRoute?ue(l.fallbackRoute,this,x,E,l):null}function c0(c,t=10){if(c.length<=1)return c;for(let e=0,i=c.length;e<i-1;e+=1){const l=c[e],h=c[e+1];if(l.x===h.x){const f=t*Math.round(l.x/t);l.x!==f&&(l.x=f,h.x=f)}else if(l.y===h.y){const f=t*Math.round(l.y/t);l.y!==f&&(l.y=f,h.y=f)}}return c}const l0=function(c,t,e){const i=cC(t),l=t0(e,i),h=e0(e,i),f=Rd(e,i),v=new Qm(i).build(e.graph.model,e.cell),y=c.map(T=>W.create(T)),x=[];let E=f,S,_;for(let T=0,D=y.length;T<=D;T+=1){let L=null;if(S=_||l,_=y[T],_==null){_=h;const j=e.cell;if((j.getSourceCellId()==null||j.getTargetCellId()==null)&&typeof i.draggingRouter=="function"){const G=S===l?f:S,X=_.getOrigin();L=ue(i.draggingRouter,e,G,X,i)}}if(L==null&&(L=a0(e,S,_,v,i)),L===null)return console.warn("Unable to execute manhattan algorithm, use orth instead"),ue(i.fallbackRouter,this,c,i,e);const B=L[0];B&&B.equals(E)&&L.shift(),E=L[L.length-1]||E,x.push(...L)}return i.snapToGrid?c0(x,e.graph.grid.getGridSize()):x},u0=function(c,t,e){return ue(l0,this,c,Object.assign(Object.assign({},aC),t),e)},gC={maxDirectionChange:45,directions(){const c=Qi(this.step,this),t=Qi(this.cost,this),e=Math.ceil(Math.sqrt(c*c<<1));return[{cost:t,offsetX:c,offsetY:0},{cost:e,offsetX:c,offsetY:c},{cost:t,offsetX:0,offsetY:c},{cost:e,offsetX:-c,offsetY:c},{cost:t,offsetX:-c,offsetY:0},{cost:e,offsetX:-c,offsetY:-c},{cost:t,offsetX:0,offsetY:-c},{cost:e,offsetX:c,offsetY:-c}]},fallbackRoute(c,t,e){const i=c.theta(t),l=[];let h={x:t.x,y:c.y},f={x:c.x,y:t.y};if(i%180>90){const G=h;h=f,f=G}const v=i%90<45?h:f,y=new Wt(c,v),x=90*Math.ceil(i/90),E=W.fromPolar(y.squaredLength(),$e.toRad(x+135),v),S=new Wt(t,E),_=y.intersectsWithLine(S),T=_||t,D=_?T:c,L=360/e.directions.length,B=D.theta(t),j=$e.normalize(B+L/2),V=L*Math.floor(j/L);return e.previousDirectionAngle=V,T&&l.push(T.round()),l.push(t),l}},pC=function(c,t,e){return ue(u0,this,c,Object.assign(Object.assign({},gC),t),e)},vC=function(c,t,e){const i=t.offset||32,l=t.min==null?16:t.min;let h=0,f=t.direction;const v=e.sourceBBox,y=e.targetBBox,x=v.getCenter(),E=y.getCenter();if(typeof i=="number"&&(h=i),f==null){let j=y.left-v.right,V=y.top-v.bottom;j>=0&&V>=0?f=j>=V?"L":"T":j<=0&&V>=0?(j=v.left-y.right,j>=0?f=j>=V?"R":"T":f="T"):j>=0&&V<=0?(V=v.top-y.bottom,V>=0?f=j>=V?"L":"B":f="L"):(j=v.left-y.right,V=v.top-y.bottom,j>=0&&V>=0?f=j>=V?"R":"B":j<=0&&V>=0?f="B":j>=0&&V<=0?f="R":f=Math.abs(j)>Math.abs(V)?"R":"B")}f==="H"?f=E.x-x.x>=0?"L":"R":f==="V"&&(f=E.y-x.y>=0?"T":"B"),i==="center"&&(f==="L"?h=(y.left-v.right)/2:f==="R"?h=(v.left-y.right)/2:f==="T"?h=(y.top-v.bottom)/2:f==="B"&&(h=(v.top-y.bottom)/2));let S,_,T;const D=f==="L"||f==="R";if(D){if(E.y===x.y)return[...c];T=f==="L"?1:-1,S="x",_="width"}else{if(E.x===x.x)return[...c];T=f==="T"?1:-1,S="y",_="height"}const L=x.clone(),B=E.clone();if(L[S]+=T*(v[_]/2+h),B[S]-=T*(y[_]/2+h),D){const j=L.x,V=B.x,G=v.width/2+l,X=y.width/2+l;E.x>x.x?V<=j&&(L.x=Math.max(V,x.x+G),B.x=Math.min(j,E.x-X)):V>=j&&(L.x=Math.min(V,x.x-G),B.x=Math.max(j,E.x+X))}else{const j=L.y,V=B.y,G=v.height/2+l,X=y.height/2+l;E.y>x.y?V<=j&&(L.y=Math.max(V,x.y+G),B.y=Math.min(j,E.y-X)):V>=j&&(L.y=Math.min(V,x.y-G),B.y=Math.max(j,E.y+X))}return[L.toJSON(),...c,B.toJSON()]};function Fo(c,t){if(t!=null&&t!==!1){const e=typeof t=="boolean"?0:t;if(e>0){const i=W.create(c[1]).move(c[2],e),l=W.create(c[1]).move(c[0],e);return[i.toJSON(),...c,l.toJSON()]}{const i=c[1];return[Object.assign({},i),...c,Object.assign({},i)]}}return c}const h0=function(c,t,e){const i=t.width||50,h=(t.height||80)/2,f=t.angle||"auto",v=e.sourceAnchor,y=e.targetAnchor,x=e.sourceBBox,E=e.targetBBox;if(v.equals(y)){const S=j=>{const V=$e.toRad(j),G=Math.sin(V),X=Math.cos(V),K=new W(v.x+X*i,v.y+G*i),it=new W(K.x-X*h,K.y-G*h),At=it.clone().rotate(-90,K),jt=it.clone().rotate(90,K);return[At.toJSON(),K.toJSON(),jt.toJSON()]},_=j=>{const V=v.clone().move(j,-1),G=new Wt(V,j);return!x.containsPoint(j)&&!x.intersectsWithLine(G)},T=[0,90,180,270,45,135,225,315];if(typeof f=="number")return Fo(S(f),t.merge);const D=x.getCenter();if(D.equals(v))return Fo(S(0),t.merge);const L=D.angleBetween(v,D.clone().translate(1,0));let B=S(L);if(_(B[1]))return Fo(B,t.merge);for(let j=1,V=T.length;j<V;j+=1)if(B=S(L+T[j]),_(B[1]))return Fo(B,t.merge);return Fo(B,t.merge)}{const S=new Wt(v,y);let _=S.parallel(-i),T=_.getCenter(),D=_.start.clone().move(_.end,h),L=_.end.clone().move(_.start,h);const B=S.parallel(-1),j=new Wt(B.start,T),V=new Wt(B.end,T);if((x.containsPoint(T)||E.containsPoint(T)||x.intersectsWithLine(j)||x.intersectsWithLine(V)||E.intersectsWithLine(j)||E.intersectsWithLine(V))&&(_=S.parallel(i),T=_.getCenter(),D=_.start.clone().move(_.end,h),L=_.end.clone().move(_.start,h)),t.merge){const G=new Wt(v,y),X=new Wt(T,G.center).setLength(Number.MAX_SAFE_INTEGER),K=x.intersectsWithLine(X),it=E.intersectsWithLine(X),At=K?Array.isArray(K)?K:[K]:[];it&&(Array.isArray(it)?At.push(...it):At.push(it));const jt=G.center.closest(At);jt?(e.sourceAnchor=jt.clone(),e.targetAnchor=jt.clone()):(e.sourceAnchor=G.center.clone(),e.targetAnchor=G.center.clone())}return Fo([D.toJSON(),T.toJSON(),L.toJSON()],t.merge)}};var ti;(function(c){c.presets=zt,c.registry=Mn.create({type:"router"}),c.registry.register(c.presets,!0)})(ti||(ti={}));const mC=function(c,t,e,i={}){const l=[c,...e,t],h=new bn(l),f=new he(h);return i.raw?f:f.serialize()},yC=function(c,t,e,i={}){const l=e.length===3?0:1,h=W.create(e[0+l]),f=W.create(e[2+l]),v=W.create(e[1+l]);if(!W.equals(c,t)){const x=new W((c.x+t.x)/2,(c.y+t.y)/2),E=x.angleBetween(W.create(c).rotate(90,x),v);E>1&&(h.rotate(180-E,x),f.rotate(180-E,x),v.rotate(180-E,x))}const y=`
     M ${c.x} ${c.y}
     Q ${h.x} ${h.y} ${v.x} ${v.y}
     Q ${f.x} ${f.y} ${t.x} ${t.y}
  `;return i.raw?he.parse(y):y},nu=function(c,t,e,i={}){const l=new he;l.appendSegment(he.createSegment("M",c));const h=1/3,f=2/3,v=i.radius||10;let y,x;for(let E=0,S=e.length;E<S;E+=1){const _=W.create(e[E]),T=e[E-1]||c,D=e[E+1]||t;y=x||_.distance(T)/2,x=_.distance(D)/2;const L=-Math.min(v,y),B=-Math.min(v,x),j=_.clone().move(T,L).round(),V=_.clone().move(D,B).round(),G=new W(h*j.x+f*_.x,f*_.y+h*j.y),X=new W(h*V.x+f*_.x,f*_.y+h*V.y);l.appendSegment(he.createSegment("L",j)),l.appendSegment(he.createSegment("C",G,X,V))}return l.appendSegment(he.createSegment("L",t)),i.raw?l:l.serialize()},Go=function(c,t,e,i={}){let l,h=i.direction;if(e&&e.length!==0){const f=[c,...e,t],v=Cn.throughPoints(f);l=new he(v)}else if(l=new he,l.appendSegment(he.createSegment("M",c)),h||(h=Math.abs(c.x-t.x)>=Math.abs(c.y-t.y)?"H":"V"),h==="H"){const f=(c.x+t.x)/2;l.appendSegment(he.createSegment("C",f,c.y,f,t.y,t.x,t.y))}else{const f=(c.y+t.y)/2;l.appendSegment(he.createSegment("C",c.x,f,t.x,f,t.x,t.y))}return i.raw?l:l.serialize()},d0=1,rc=1/3,ru=2/3;function Bd(c){let t=c.graph._jumpOverUpdateList;if(t==null&&(t=c.graph._jumpOverUpdateList=[],c.graph.on("cell:mouseup",()=>{const e=c.graph._jumpOverUpdateList;setTimeout(()=>{for(let i=0;i<e.length;i+=1)e[i].update()})}),c.graph.on("model:reseted",()=>{t=c.graph._jumpOverUpdateList=[]})),t.indexOf(c)<0){t.push(c);const e=()=>t.splice(t.indexOf(c),1);c.cell.once("change:connector",e),c.cell.once("removed",e)}}function zd(c,t,e=[]){const i=[c,...e,t],l=[];return i.forEach((h,f)=>{const v=i[f+1];v!=null&&l.push(new Wt(h,v))}),l}function f0(c,t){const e=[];return t.forEach(i=>{const l=c.intersectsWithLine(i);l&&e.push(l)}),e}function n(c,t){return new Wt(c,t).squaredLength()}function r(c,t,e){return t.reduce((i,l,h)=>{if(u.includes(l))return i;const f=i.pop()||c,v=W.create(l).move(f.start,-e);let y=W.create(l).move(f.start,+e);const x=t[h+1];if(x!=null){const _=y.distance(x);_<=e&&(y=x.move(f.start,_),u.push(x))}else if(v.distance(f.end)<e*2+d0)return i.push(f),i;if(y.distance(f.start)<e*2+d0)return i.push(f),i;const S=new Wt(v,y);return a.push(S),i.push(new Wt(f.start,v),S,new Wt(y,f.end)),i},[])}function o(c,t,e,i){const l=new he;let h;return h=he.createSegment("M",c[0].start),l.appendSegment(h),c.forEach((f,v)=>{if(a.includes(f)){let y,x,E,S;if(e==="arc"){y=-90,x=f.start.diff(f.end),(x.x<0||x.x===0&&x.y<0)&&(y+=180);const T=f.getCenter(),D=new Wt(T,f.end).rotate(y,T);let L;L=new Wt(f.start,T),E=L.pointAt(2/3).rotate(y,f.start),S=D.pointAt(1/3).rotate(-y,D.end),h=he.createSegment("C",E,S,D.end),l.appendSegment(h),L=new Wt(T,f.end),E=D.pointAt(1/3).rotate(y,D.end),S=L.pointAt(1/3).rotate(-y,f.end),h=he.createSegment("C",E,S,f.end),l.appendSegment(h)}else if(e==="gap")h=he.createSegment("M",f.end),l.appendSegment(h);else if(e==="cubic"){y=f.start.theta(f.end);const _=t*.6;let T=t*1.35;x=f.start.diff(f.end),(x.x<0||x.x===0&&x.y<0)&&(T*=-1),E=new W(f.start.x+_,f.start.y+T).rotate(y,f.start),S=new W(f.end.x-_,f.end.y+T).rotate(y,f.end),h=he.createSegment("C",E,S,f.end),l.appendSegment(h)}}else{const y=c[v+1];i===0||!y||a.includes(y)?(h=he.createSegment("L",f.end),l.appendSegment(h)):s(i,l,f.end,f.start,y.end)}}),l}function s(c,t,e,i,l){const h=e.distance(i)/2,f=e.distance(l)/2,v=-Math.min(c,h),y=-Math.min(c,f),x=e.clone().move(i,v).round(),E=e.clone().move(l,y).round(),S=new W(rc*x.x+ru*e.x,ru*e.y+rc*x.y),_=new W(rc*E.x+ru*e.x,ru*e.y+rc*E.y);let T;T=he.createSegment("L",x),t.appendSegment(T),T=he.createSegment("C",S,_,E),t.appendSegment(T)}let a,u;const d=function(c,t,e,i={}){a=[],u=[],Bd(this);const l=i.size||5,h=i.type||"arc",f=i.radius||0,v=i.ignoreConnectors||["smooth"],y=this.graph,E=y.model.getEdges();if(E.length===1)return o(zd(c,t,e),l,h,f);const S=this.cell,_=E.indexOf(S),T=y.options.connecting.connector||{},D=E.filter((X,K)=>{const it=X.getConnector()||T;return v.includes(it.name)?!1:K>_?it.name!=="jumpover":!0}),L=D.map(X=>y.findViewByCell(X)),B=zd(c,t,e),j=L.map(X=>X==null?[]:X===this?B:zd(X.sourcePoint,X.targetPoint,X.routePoints)),V=[];B.forEach(X=>{const K=D.reduce((it,At,jt)=>{if(At!==S){const Vt=f0(X,j[jt]);it.push(...Vt)}return it},[]).sort((it,At)=>n(X.start,it)-n(X.start,At));K.length>0?V.push(...r(X,K,l)):V.push(X)});const G=o(V,l,h,f);return a=[],u=[],i.raw?G:G.serialize()};var g;(function(c){c.presets=De,c.registry=Mn.create({type:"connector"}),c.registry.register(c.presets,!0)})(g||(g={}));var p=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class m extends lr{constructor(t={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(gn(t)),this.changed={}}mutate(t,e={}){const i=e.unset===!0,l=e.silent===!0,h=[],f=this.changing;this.changing=!0,f||(this.previous=gn(this.data),this.changed={});const v=this.data,y=this.previous,x=this.changed;if(Object.keys(t).forEach(E=>{const S=E,_=t[S];Xr(v[S],_)||h.push(S),Xr(y[S],_)?delete x[S]:x[S]=_,i?delete v[S]:v[S]=_}),!l&&h.length>0&&(this.pending=!0,this.pendingOptions=e,h.forEach(E=>{this.emit("change:*",{key:E,options:e,store:this,current:v[E],previous:y[E]})})),f)return this;if(!l)for(;this.pending;)this.pending=!1,this.emit("changed",{current:v,previous:y,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(t,e){if(t==null)return this.data;const i=this.data[t];return i==null?e:i}getPrevious(t){if(this.previous){const e=this.previous[t];return e==null?void 0:e}}set(t,e,i){return t!=null&&(typeof t=="object"?this.mutate(t,e):this.mutate({[t]:e},i)),this}remove(t,e){const l={};let h;if(typeof t=="string")l[t]=void 0,h=e;else if(Array.isArray(t))t.forEach(f=>l[f]=void 0),h=e;else{for(const f in this.data)l[f]=void 0;h=t}return this.mutate(l,Object.assign(Object.assign({},h),{unset:!0})),this}getByPath(t){return xa(this.data,t,"/")}setByPath(t,e,i={}){const l="/",h=Array.isArray(t)?[...t]:t.split(l),f=Array.isArray(t)?t.join(l):t,v=h[0],y=h.length;if(i.propertyPath=f,i.propertyValue=e,i.propertyPathArray=h,y===1)this.set(v,e,i);else{const x={};let E=x,S=v;for(let D=1;D<y;D+=1){const L=h[D],B=Number.isFinite(Number(L));E=E[S]=B?[]:{},S=L}Eo(x,h,e,l);const _=gn(this.data);i.rewrite&&uh(_,t,l);const T=An(_,x);this.set(v,T[v],i)}return this}removeByPath(t,e){const i=Array.isArray(t)?t:t.split("/"),l=i[0];if(i.length===1)this.remove(l,e);else{const h=i.slice(1),f=gn(this.get(l));f&&uh(f,h),this.set(l,f,e)}return this}hasChanged(t){return t==null?Object.keys(this.changed).length>0:t in this.changed}getChanges(t){if(t==null)return this.hasChanged()?gn(this.changed):null;const e=this.changing?this.previous:this.data,i={};let l;for(const h in t){const f=t[h];Xr(e[h],f)||(i[h]=f,l=!0)}return l?gn(i):null}toJSON(){return gn(this.data)}clone(){const t=this.constructor;return new t(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}p([lr.dispose()],m.prototype,"dispose",null);class b{constructor(t){this.cell=t,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(t,e,i={},l="/"){const h=this.cell.getPropByPath(t),f=sh(i,b.defaultOptions),v=this.getTiming(f.timing),y=this.getInterp(f.interp,h,e);let x=0;const E=Array.isArray(t)?t.join(l):t,S=Array.isArray(t)?t:t.split(l),_=()=>{const T=new Date().getTime();x===0&&(x=T);let L=(T-x)/f.duration;L<1?this.ids[E]=requestAnimationFrame(_):L=1;const B=y(v(L));this.cell.setPropByPath(S,B),i.progress&&i.progress(Object.assign({progress:L,currentValue:B},this.getArgs(E))),L===1&&(this.cell.notify("transition:complete",this.getArgs(E)),i.complete&&i.complete(this.getArgs(E)),this.cell.notify("transition:finish",this.getArgs(E)),i.finish&&i.finish(this.getArgs(E)),this.clean(E))};return setTimeout(()=>{this.stop(t,void 0,l),this.cache[E]={startValue:h,targetValue:e,options:f},this.ids[E]=requestAnimationFrame(_),this.cell.notify("transition:start",this.getArgs(E)),i.start&&i.start(this.getArgs(E))},i.delay),this.stop.bind(this,t,l,i)}stop(t,e={},i="/"){const l=Array.isArray(t)?t:t.split(i);return Object.keys(this.ids).filter(h=>Xr(l,h.split(i).slice(0,l.length))).forEach(h=>{cancelAnimationFrame(this.ids[h]);const f=this.cache[h],v=this.getArgs(h),y=Object.assign(Object.assign({},f.options),e),x=y.jumpedToEnd;x&&f.targetValue!=null&&(this.cell.setPropByPath(h,f.targetValue),this.cell.notify("transition:end",Object.assign({},v)),this.cell.notify("transition:complete",Object.assign({},v)),y.complete&&y.complete(Object.assign({},v)));const E=Object.assign({jumpedToEnd:x},v);this.cell.notify("transition:stop",Object.assign({},E)),y.stop&&y.stop(Object.assign({},E)),this.cell.notify("transition:finish",Object.assign({},v)),y.finish&&y.finish(Object.assign({},v)),this.clean(h)}),this}clean(t){delete this.ids[t],delete this.cache[t]}getTiming(t){return typeof t=="string"?Cs[t]:t}getInterp(t,e,i){return t?t(e,i):typeof i=="number"?Ss.number(e,i):typeof i=="string"?i[0]==="#"?Ss.color(e,i):Ss.unit(e,i):Ss.object(e,i)}getArgs(t){const e=this.cache[t];return{path:t,startValue:e.startValue,targetValue:e.targetValue,cell:this.cell}}}(function(c){c.defaultOptions={delay:10,duration:100,timing:"linear"}})(b||(b={}));var w=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h},C=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class O extends lr{static config(t){const{markup:e,propHooks:i,attrHooks:l}=t,h=C(t,["markup","propHooks","attrHooks"]);e!=null&&(this.markup=e),i&&(this.propHooks=this.propHooks.slice(),Array.isArray(i)?this.propHooks.push(...i):typeof i=="function"?this.propHooks.push(i):Object.values(i).forEach(f=>{typeof f=="function"&&this.propHooks.push(f)})),l&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),l)),this.defaults=An({},this.defaults,h)}static getMarkup(){return this.markup}static getDefaults(t){return t?this.defaults:gn(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(t,e){return this.propHooks.reduce((i,l)=>l?ue(l,t,i):i,e)}get[Symbol.toStringTag](){return O.toStringTag}constructor(t={}){super();const i=this.constructor.getDefaults(!0),l=An({},this.preprocess(i),this.preprocess(t));this.id=l.id||Oa(),this.store=new m(l),this.animation=new b(this),this.setup(),this.init(),this.postprocess(t)}init(){}get model(){return this._model}set model(t){this._model!==t&&(this._model=t)}preprocess(t,e){const i=t.id,h=this.constructor.applyPropHooks(this,t);return i==null&&e!==!0&&(h.id=Oa()),h}postprocess(t){}setup(){this.store.on("change:*",t=>{const{key:e,current:i,previous:l,options:h}=t;this.notify("change:*",{key:e,options:h,current:i,previous:l,cell:this}),this.notify(`change:${e}`,{options:h,current:i,previous:l,cell:this});const f=e;(f==="source"||f==="target")&&this.notify("change:terminal",{type:f,current:i,previous:l,options:h,cell:this})}),this.store.on("changed",({options:t})=>this.notify("changed",{options:t,cell:this}))}notify(t,e){this.trigger(t,e);const i=this.model;return i&&(i.notify(`cell:${t}`,e),this.isNode()?i.notify(`node:${t}`,Object.assign(Object.assign({},e),{node:this})):this.isEdge()&&i.notify(`edge:${t}`,Object.assign(Object.assign({},e),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(t){return this.store===t.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(t,e){return t==null?this.store.get():this.store.get(t,e)}setProp(t,e,i){if(typeof t=="string")this.store.set(t,e,i);else{const l=this.preprocess(t,!0);this.store.set(An({},this.getProp(),l),e),this.postprocess(t)}return this}removeProp(t,e){return typeof t=="string"||Array.isArray(t)?this.store.removeByPath(t,e):this.store.remove(e),this}hasChanged(t){return t==null?this.store.hasChanged():this.store.hasChanged(t)}getPropByPath(t){return this.store.getByPath(t)}setPropByPath(t,e,i={}){return this.model&&(t==="children"?this._children=e?e.map(l=>this.model.getCell(l)).filter(l=>l!=null):null:t==="parent"&&(this._parent=e?this.model.getCell(e):null)),this.store.setByPath(t,e,i),this}removePropByPath(t,e={}){const i=Array.isArray(t)?t:t.split("/");return i[0]==="attrs"&&(e.dirty=!0),this.store.removeByPath(i,e),this}prop(t,e,i){return t==null?this.getProp():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getPropByPath(t):e==null?this.removePropByPath(t,i||{}):this.setPropByPath(t,e,i||{}):this.setProp(t,e||{})}previous(t){return this.store.getPrevious(t)}get zIndex(){return this.getZIndex()}set zIndex(t){t==null?this.removeZIndex():this.setZIndex(t)}getZIndex(){return this.store.get("zIndex")}setZIndex(t,e={}){return this.store.set("zIndex",t,e),this}removeZIndex(t={}){return this.store.remove("zIndex",t),this}toFront(t={}){const e=this.model;if(e){let i=e.getMaxZIndex(),l;t.deep?(l=this.getDescendants({deep:!0,breadthFirst:!0}),l.unshift(this)):l=[this],i=i-l.length+1;const h=e.total();let f=e.indexOf(this)!==h-l.length;f||(f=l.some((v,y)=>v.getZIndex()!==i+y)),f&&this.batchUpdate("to-front",()=>{i+=l.length,l.forEach((v,y)=>{v.setZIndex(i+y,t)})})}return this}toBack(t={}){const e=this.model;if(e){let i=e.getMinZIndex(),l;t.deep?(l=this.getDescendants({deep:!0,breadthFirst:!0}),l.unshift(this)):l=[this];let h=e.indexOf(this)!==0;h||(h=l.some((f,v)=>f.getZIndex()!==i+v)),h&&this.batchUpdate("to-back",()=>{i-=l.length,l.forEach((f,v)=>{f.setZIndex(i+v,t)})})}return this}get markup(){return this.getMarkup()}set markup(t){t==null?this.removeMarkup():this.setMarkup(t)}getMarkup(){let t=this.store.get("markup");return t==null&&(t=this.constructor.getMarkup()),t}setMarkup(t,e={}){return this.store.set("markup",t,e),this}removeMarkup(t={}){return this.store.remove("markup",t),this}get attrs(){return this.getAttrs()}set attrs(t){t==null?this.removeAttrs():this.setAttrs(t)}getAttrs(){const t=this.store.get("attrs");return t?Object.assign({},t):{}}setAttrs(t,e={}){if(t==null)this.removeAttrs(e);else{const i=l=>this.store.set("attrs",l,e);if(e.overwrite===!0)i(t);else{const l=this.getAttrs();e.deep===!1?i(Object.assign(Object.assign({},l),t)):i(An({},l,t))}}return this}replaceAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateAttrs(t,e={}){return this.setAttrs(t,Object.assign(Object.assign({},e),{deep:!1}))}removeAttrs(t={}){return this.store.remove("attrs",t),this}getAttrDefinition(t){if(!t)return null;const i=this.constructor.getAttrHooks()||{};let l=i[t]||Qr.registry.get(t);if(!l){const h=Sa(t);l=i[h]||Qr.registry.get(h)}return l||null}getAttrByPath(t){return t==null||t===""?this.getAttrs():this.getPropByPath(this.prefixAttrPath(t))}setAttrByPath(t,e,i={}){return this.setPropByPath(this.prefixAttrPath(t),e,i),this}removeAttrByPath(t,e={}){return this.removePropByPath(this.prefixAttrPath(t),e),this}prefixAttrPath(t){return Array.isArray(t)?["attrs"].concat(t):`attrs/${t}`}attr(t,e,i){return t==null?this.getAttrByPath():typeof t=="string"||Array.isArray(t)?arguments.length===1?this.getAttrByPath(t):e==null?this.removeAttrByPath(t,i||{}):this.setAttrByPath(t,e,i||{}):this.setAttrs(t,e||{})}get visible(){return this.isVisible()}set visible(t){this.setVisible(t)}setVisible(t,e={}){return this.store.set("visible",t,e),this}isVisible(){return this.store.get("visible")!==!1}show(t={}){return this.isVisible()||this.setVisible(!0,t),this}hide(t={}){return this.isVisible()&&this.setVisible(!1,t),this}toggleVisible(t,e={}){const i=typeof t=="boolean"?t:!this.isVisible(),l=typeof t=="boolean"?e:t;return i?this.show(l):this.hide(l),this}get data(){return this.getData()}set data(t){this.setData(t)}getData(){return this.store.get("data")}setData(t,e={}){if(t==null)this.removeData(e);else{const i=l=>this.store.set("data",l,e);if(e.overwrite===!0)i(t);else{const l=this.getData();e.deep===!1?i(typeof t=="object"?Object.assign(Object.assign({},l),t):t):i(An({},l,t))}}return this}replaceData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{overwrite:!0}))}updateData(t,e={}){return this.setData(t,Object.assign(Object.assign({},e),{deep:!1}))}removeData(t={}){return this.store.remove("data",t),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const t=this.getParentId();if(t&&this.model){const e=this.model.getCell(t);return this._parent=e,e}return null}getChildren(){const t=this.store.get("children");if(t&&t.length&&this.model){const e=t.map(i=>{var l;return(l=this.model)===null||l===void 0?void 0:l.getCell(i)}).filter(i=>i!=null);return this._children=e,[...e]}return null}hasParent(){return this.parent!=null}isParentOf(t){return t!=null&&t.getParent()===this}isChildOf(t){return t!=null&&this.getParent()===t}eachChild(t,e){return this.children&&this.children.forEach(t,e),this}filterChild(t,e){return this.children?this.children.filter(t,e):[]}getChildCount(){return this.children==null?0:this.children.length}getChildIndex(t){return this.children==null?-1:this.children.indexOf(t)}getChildAt(t){return this.children!=null&&t>=0?this.children[t]:null}getAncestors(t={}){const e=[];let i=this.getParent();for(;i;)e.push(i),i=t.deep!==!1?i.getParent():null;return e}getDescendants(t={}){if(t.deep!==!1){if(t.breadthFirst){const e=[],i=this.getChildren()||[];for(;i.length>0;){const l=i.shift(),h=l.getChildren();e.push(l),h&&i.push(...h)}return e}{const e=this.getChildren()||[];return e.forEach(i=>{e.push(...i.getDescendants(t))}),e}}return this.getChildren()||[]}isDescendantOf(t,e={}){if(t==null)return!1;if(e.deep!==!1){let i=this.getParent();for(;i;){if(i===t)return!0;i=i.getParent()}return!1}return this.isChildOf(t)}isAncestorOf(t,e={}){return t==null?!1:t.isDescendantOf(this,e)}contains(t){return this.isAncestorOf(t)}getCommonAncestor(...t){return O.getCommonAncestor(this,...t)}setParent(t,e={}){return this._parent=t,t?this.store.set("parent",t.id,e):this.store.remove("parent",e),this}setChildren(t,e={}){return this._children=t,t!=null?this.store.set("children",t.map(i=>i.id),e):this.store.remove("children",e),this}unembed(t,e={}){const i=this.children;if(i!=null&&t!=null){const l=this.getChildIndex(t);l!==-1&&(i.splice(l,1),t.setParent(null,e),this.setChildren(i,e))}return this}embed(t,e={}){return t.addTo(this,e),this}addTo(t,e={}){return O.isCell(t)?t.addChild(this,e):t.addCell(this,e),this}insertTo(t,e,i={}){return t.insertChild(this,e,i),this}addChild(t,e={}){return this.insertChild(t,void 0,e)}insertChild(t,e,i={}){if(t!=null&&t!==this){const l=t.getParent(),h=this!==l;let f=e;if(f==null&&(f=this.getChildCount(),h||(f-=1)),l){const y=l.getChildren();if(y){const x=y.indexOf(t);x>=0&&(t.setParent(null,i),y.splice(x,1),l.setChildren(y,i))}}let v=this.children;if(v==null?(v=[],v.push(t)):v.splice(f,0,t),t.setParent(this,i),this.setChildren(v,i),h&&this.model){const y=this.model.getIncomingEdges(this),x=this.model.getOutgoingEdges(this);y&&y.forEach(E=>E.updateParent(i)),x&&x.forEach(E=>E.updateParent(i))}this.model&&this.model.addCell(t,i)}return this}removeFromParent(t={}){const e=this.getParent();if(e!=null){const i=e.getChildIndex(this);e.removeChildAt(i,t)}return this}removeChild(t,e={}){const i=this.getChildIndex(t);return this.removeChildAt(i,e)}removeChildAt(t,e={}){const i=this.getChildAt(t);return this.children!=null&&i!=null&&(this.unembed(i,e),i.remove(e)),i}remove(t={}){return this.batchUpdate("remove",()=>{const e=this.getParent();e&&e.removeChild(this,t),t.deep!==!1&&this.eachChild(i=>i.remove(t)),this.model&&this.model.removeCell(this,t)}),this}transition(t,e,i={},l="/"){return this.animation.start(t,e,i,l)}stopTransition(t,e,i="/"){return this.animation.stop(t,e,i),this}getTransitions(){return this.animation.get()}translate(t,e,i){return this}scale(t,e,i,l){return this}addTools(t,e,i){const l=Array.isArray(t)?t:[t],h=typeof e=="string"?e:null,f=typeof e=="object"?e:typeof i=="object"?i:{};if(f.reset)return this.setTools({name:h,items:l,local:f.local},f);let v=gn(this.getTools());if(v==null||h==null||v.name===h)return v==null&&(v={}),v.items||(v.items=[]),v.name=h,v.items=[...v.items,...l],this.setTools(Object.assign({},v),f)}setTools(t,e={}){return t==null?this.removeTools():this.store.set("tools",O.normalizeTools(t),e),this}getTools(){return this.store.get("tools")}removeTools(t={}){return this.store.remove("tools",t),this}hasTools(t){const e=this.getTools();return e==null?!1:t==null?!0:e.name===t}hasTool(t){const e=this.getTools();return e==null?!1:e.items.some(i=>typeof i=="string"?i===t:i.name===t)}removeTool(t,e={}){const i=gn(this.getTools());if(i){let l=!1;const h=i.items.slice(),f=v=>{h.splice(v,1),l=!0};if(typeof t=="number")f(t);else for(let v=h.length-1;v>=0;v-=1){const y=h[v];(typeof y=="string"?y===t:y.name===t)&&f(v)}l&&(i.items=h,this.setTools(i,e))}return this}getBBox(t){return new Gt}getConnectionPoint(t,e){return new W}toJSON(t={}){const e=Object.assign({},this.store.get()),i=Object.prototype.toString,l=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!e.shape){const D=this.constructor;throw new Error(`Unable to serialize ${l} missing "shape" prop, check the ${l} "${D.name||i.call(D)}"`)}const h=this.constructor,f=t.diff===!0,v=e.attrs||{},y=h.getDefaults(!0),x=f?this.preprocess(y,!0):y,E=x.attrs||{},S={};Object.entries(e).forEach(([D,L])=>{if(L!=null&&!Array.isArray(L)&&typeof L=="object"&&!Br(L))throw new Error(`Can only serialize ${l} with plain-object props, but got a "${i.call(L)}" type of key "${D}" on ${l} "${this.id}"`);if(D!=="attrs"&&D!=="shape"&&f){const B=x[D];Xr(L,B)&&delete e[D]}}),Object.keys(v).forEach(D=>{const L=v[D],B=E[D];Object.keys(L).forEach(j=>{const V=L[j],G=B?B[j]:null;V!=null&&typeof V=="object"&&!Array.isArray(V)?Object.keys(V).forEach(X=>{const K=V[X];if(B==null||G==null||!Q(G)||!Xr(G[X],K)){S[D]==null&&(S[D]={}),S[D][j]==null&&(S[D][j]={});const it=S[D][j];it[X]=K}}):(B==null||!Xr(G,V))&&(S[D]==null&&(S[D]={}),S[D][j]=V)})});const _=Object.assign(Object.assign({},e),{attrs:li(S)?void 0:S});_.attrs==null&&delete _.attrs;const T=_;return T.angle===0&&delete T.angle,gn(T)}clone(t={}){if(!t.deep){const i=Object.assign({},this.store.get());t.keepId||delete i.id,delete i.parent,delete i.children;const l=this.constructor;return new l(i)}return O.deepClone(this)[this.id]}findView(t){return t.findViewByCell(this)}startBatch(t,e={},i=this.model){return this.notify("batch:start",{name:t,data:e,cell:this}),i&&i.startBatch(t,Object.assign(Object.assign({},e),{cell:this})),this}stopBatch(t,e={},i=this.model){return i&&i.stopBatch(t,Object.assign(Object.assign({},e),{cell:this})),this.notify("batch:stop",{name:t,data:e,cell:this}),this}batchUpdate(t,e,i){const l=this.model;this.startBatch(t,i,l);const h=e();return this.stopBatch(t,i,l),h}dispose(){this.removeFromParent(),this.store.dispose()}}O.defaults={},O.attrHooks={},O.propHooks=[],w([lr.dispose()],O.prototype,"dispose",null),function(c){function t(e){return typeof e=="string"?{items:[e]}:Array.isArray(e)?{items:e}:e.items?e:{items:[e]}}c.normalizeTools=t}(O||(O={})),function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag],l=e;return(i==null||i===c.toStringTag)&&typeof l.isNode=="function"&&typeof l.isEdge=="function"&&typeof l.prop=="function"&&typeof l.attr=="function"}c.isCell=t}(O||(O={})),function(c){function t(...h){const f=h.filter(y=>y!=null).map(y=>y.getAncestors()).sort((y,x)=>y.length-x.length);return f.shift().find(y=>f.every(x=>x.includes(y)))||null}c.getCommonAncestor=t;function e(h,f={}){let v=null;for(let y=0,x=h.length;y<x;y+=1){const E=h[y];let S=E.getBBox(f);if(S){if(E.isNode()){const _=E.getAngle();_!=null&&_!==0&&(S=S.bbox(_))}v=v==null?S:v.union(S)}}return v}c.getCellsBBox=e;function i(h){const f=[h,...h.getDescendants({deep:!0})];return c.cloneCells(f)}c.deepClone=i;function l(h){const f=pr(h),v=f.reduce((y,x)=>(y[x.id]=x.clone(),y),{});return f.forEach(y=>{const x=v[y.id];if(x.isEdge()){const _=x.getSourceCellId(),T=x.getTargetCellId();_&&v[_]&&x.setSource(Object.assign(Object.assign({},x.getSource()),{cell:v[_].id})),T&&v[T]&&x.setTarget(Object.assign(Object.assign({},x.getTarget()),{cell:v[T].id}))}const E=y.getParent();E&&v[E.id]&&x.setParent(v[E.id]);const S=y.getChildren();if(S&&S.length){const _=S.reduce((T,D)=>(v[D.id]&&T.push(v[D.id]),T),[]);_.length>0&&x.setChildren(_)}}),v}c.cloneCells=l}(O||(O={})),function(c){c.config({propHooks(t){var{tools:e}=t,i=C(t,["tools"]);return e&&(i.tools=c.normalizeTools(e)),i}})}(O||(O={}));var A;(function(c){let t,e;function i(f,v){return v?t!=null&&t.exist(f):e!=null&&e.exist(f)}c.exist=i;function l(f){t=f}c.setEdgeRegistry=l;function h(f){e=f}c.setNodeRegistry=h})(A||(A={}));class M{constructor(t){this.ports=[],this.groups={},this.init(gn(t))}getPorts(){return this.ports}getGroup(t){return t!=null?this.groups[t]:null}getPortsByGroup(t){return this.ports.filter(e=>e.group===t||e.group==null&&t==null)}getPortsLayoutByGroup(t,e){const i=this.getPortsByGroup(t),l=t?this.getGroup(t):null,h=l?l.position:null,f=h?h.name:null;let v;if(f!=null){const S=Yi.registry.get(f);if(S==null)return Yi.registry.onNotFound(f);v=S}else v=Yi.presets.left;const y=i.map(S=>S&&S.position&&S.position.args||{}),x=h&&h.args||{};return v(y,e,x).map((S,_)=>{const T=i[_];return{portLayout:S,portId:T.id,portSize:T.size,portAttrs:T.attrs,labelSize:T.label.size,labelLayout:this.getPortLabelLayout(T,W.create(S.position),e)}})}init(t){const{groups:e,items:i}=t;e!=null&&Object.keys(e).forEach(l=>{this.groups[l]=this.parseGroup(e[l])}),Array.isArray(i)&&i.forEach(l=>{this.ports.push(this.parsePort(l))})}parseGroup(t){return Object.assign(Object.assign({},t),{label:this.getLabel(t,!0),position:this.getPortPosition(t.position,!0)})}parsePort(t){const e=Object.assign({},t),i=this.getGroup(t.group)||{};return e.markup=e.markup||i.markup,e.attrs=An({},i.attrs,e.attrs),e.position=this.createPosition(i,e),e.label=An({},i.label,this.getLabel(e)),e.zIndex=this.getZIndex(i,e),e.size=Object.assign(Object.assign({},i.size),e.size),e}getZIndex(t,e){return typeof e.zIndex=="number"?e.zIndex:typeof t.zIndex=="number"||t.zIndex==="auto"?t.zIndex:"auto"}createPosition(t,e){return An({name:"left",args:{}},t.position,{args:e.args})}getPortPosition(t,e=!1){if(t==null){if(e)return{name:"left",args:{}}}else{if(typeof t=="string")return{name:t,args:{}};if(Array.isArray(t))return{name:"absolute",args:{x:t[0],y:t[1]}};if(typeof t=="object")return t}return{args:{}}}getPortLabelPosition(t,e=!1){if(t==null){if(e)return{name:"left",args:{}}}else{if(typeof t=="string")return{name:t,args:{}};if(typeof t=="object")return t}return{args:{}}}getLabel(t,e=!1){const i=t.label||{};return i.position=this.getPortLabelPosition(i.position,e),i}getPortLabelLayout(t,e,i){const l=t.label.position.name||"left",h=t.label.position.args||{},f=Ns.registry.get(l)||Ns.presets.left;return f?f(e,i,h):null}}var P=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class I extends O{get[Symbol.toStringTag](){return I.toStringTag}constructor(t={}){super(t),this.initPorts()}preprocess(t,e){const{x:i,y:l,width:h,height:f}=t,v=P(t,["x","y","width","height"]);if(i!=null||l!=null){const y=v.position;v.position=Object.assign(Object.assign({},y),{x:i!=null?i:y?y.x:0,y:l!=null?l:y?y.y:0})}if(h!=null||f!=null){const y=v.size;v.size=Object.assign(Object.assign({},y),{width:h!=null?h:y?y.width:0,height:f!=null?f:y?y.height:0})}return super.preprocess(v,e)}isNode(){return!0}size(t,e,i){return t===void 0?this.getSize():typeof t=="number"?this.setSize(t,e,i):this.setSize(t,e)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,e,i){return typeof t=="object"?this.resize(t.width,t.height,e):this.resize(t,e,i),this}resize(t,e,i={}){this.startBatch("resize",i);const l=i.direction;if(l){const h=this.getSize();switch(l){case"left":case"right":e=h.height;break;case"top":case"bottom":t=h.width;break;default:break}let v={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[l];const y=$e.normalize(this.getAngle()||0);i.absolute&&(v+=Math.floor((y+45)/90),v%=4);const x=this.getBBox();let E;v===0?E=x.getBottomLeft():v===1?E=x.getCorner():v===2?E=x.getTopRight():E=x.getOrigin();const S=E.clone().rotate(-y,x.getCenter()),_=Math.sqrt(t*t+e*e)/2;let T=v*Math.PI/2;T+=Math.atan(v%2===0?e/t:t/e),T-=$e.toRad(y);const L=W.fromPolar(_,T,S).clone().translate(t/-2,e/-2);this.store.set("size",{width:t,height:e},i),this.setPosition(L.x,L.y,i)}else this.store.set("size",{width:t,height:e},i);return this.stopBatch("resize",i),this}scale(t,e,i,l={}){const h=this.getBBox().scale(t,e,i==null?void 0:i);return this.startBatch("scale",l),this.setPosition(h.x,h.y,l),this.resize(h.width,h.height,l),this.stopBatch("scale"),this}position(t,e,i){return typeof t=="number"?this.setPosition(t,e,i):this.getPosition(t)}getPosition(t={}){if(t.relative){const i=this.getParent();if(i!=null&&i.isNode()){const l=this.getPosition(),h=i.getPosition();return{x:l.x-h.x,y:l.y-h.y}}}const e=this.store.get("position");return e?Object.assign({},e):{x:0,y:0}}setPosition(t,e,i={}){let l,h,f;if(typeof t=="object"?(l=t.x,h=t.y,f=e||{}):(l=t,h=e,f=i||{}),f.relative){const v=this.getParent();if(v!=null&&v.isNode()){const y=v.getPosition();l+=y.x,h+=y.y}}if(f.deep){const v=this.getPosition();this.translate(l-v.x,h-v.y,f)}else this.store.set("position",{x:l,y:h},f);return this}translate(t=0,e=0,i={}){if(t===0&&e===0)return this;i.translateBy=i.translateBy||this.id;const l=this.getPosition();if(i.restrict!=null&&i.translateBy===this.id){const f=this.getBBox({deep:!0}),v=i.restrict,y=l.x-f.x,x=l.y-f.y,E=Math.max(v.x+y,Math.min(v.x+v.width+y-f.width,l.x+t)),S=Math.max(v.y+x,Math.min(v.y+v.height+x-f.height,l.y+e));t=E-l.x,e=S-l.y}const h={x:l.x+t,y:l.y+e};return i.tx=t,i.ty=e,i.transition?(typeof i.transition!="object"&&(i.transition={}),this.transition("position",h,Object.assign(Object.assign({},i.transition),{interp:Ss.object})),this.eachChild(f=>{var v;((v=i.exclude)===null||v===void 0?void 0:v.includes(f))||f.translate(t,e,i)})):(this.startBatch("translate",i),this.store.set("position",h,i),this.eachChild(f=>{var v;((v=i.exclude)===null||v===void 0?void 0:v.includes(f))||f.translate(t,e,i)}),this.stopBatch("translate",i)),this}angle(t,e){return t==null?this.getAngle():this.rotate(t,e)}getAngle(){return this.store.get("angle",0)}rotate(t,e={}){const i=this.getAngle();if(e.center){const l=this.getSize(),h=this.getPosition(),f=this.getBBox().getCenter();f.rotate(i-t,e.center);const v=f.x-l.width/2-h.x,y=f.y-l.height/2-h.y;this.startBatch("rotate",{angle:t,options:e}),this.setPosition(h.x+v,h.y+y,e),this.rotate(t,Object.assign(Object.assign({},e),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",e.absolute?t:(i+t)%360,e);return this}getBBox(t={}){if(t.deep){const e=this.getDescendants({deep:!0,breadthFirst:!0});return e.push(this),O.getCellsBBox(e)}return Gt.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,e){const i=this.getBBox(),l=i.getCenter(),h=t.getTerminal(e);if(h==null)return l;const f=h.port;if(!f||!this.hasPort(f))return l;const v=this.getPort(f);if(!v||!v.group)return l;const x=this.getPortsPosition(v.group)[f].position,E=W.create(x).translate(i.getOrigin()),S=this.getAngle();return S&&E.rotate(-S,l),E}fit(t={}){const i=(this.getChildren()||[]).filter(x=>x.isNode());if(i.length===0)return this;this.startBatch("fit-embeds",t),t.deep&&i.forEach(x=>x.fit(t));let{x:l,y:h,width:f,height:v}=O.getCellsBBox(i);const y=Co(t.padding);return l-=y.left,h-=y.top,f+=y.left+y.right,v+=y.bottom+y.top,this.store.set({position:{x:l,y:h},size:{width:f,height:v}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||on.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,e={}){return this.store.set("portContainerMarkup",on.clone(t),e),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||on.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,e={}){return this.store.set("portMarkup",on.clone(t),e),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||on.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,e={}){return this.store.set("portLabelMarkup",on.clone(t),e),this}get ports(){const t=this.store.get("ports",{items:[]});return t.items==null&&(t.items=[]),t}getPorts(){return gn(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(e=>e.group===t)}getPort(t){return gn(this.ports.items.find(e=>e.id&&e.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return this.getPortIndex(t)!==-1}getPortIndex(t){const e=typeof t=="string"?t:t.id;return e!=null?this.ports.items.findIndex(i=>i.id===e):-1}getPortsPosition(t){const e=this.getSize();return this.port.getPortsLayoutByGroup(t,new Gt(0,0,e.width,e.height)).reduce((l,h)=>{const f=h.portLayout;return l[h.portId]={position:Object.assign({},f.position),angle:f.angle||0},l},{})}getPortProp(t,e){return this.getPropByPath(this.prefixPortPath(t,e))}setPortProp(t,e,i,l){if(typeof e=="string"||Array.isArray(e)){const v=this.prefixPortPath(t,e),y=i;return this.setPropByPath(v,y,l)}const h=this.prefixPortPath(t),f=e;return this.setPropByPath(h,f,i)}removePortProp(t,e,i){return typeof e=="string"||Array.isArray(e)?this.removePropByPath(this.prefixPortPath(t,e),i):this.removePropByPath(this.prefixPortPath(t),e)}portProp(t,e,i,l){return e==null?this.getPortProp(t):typeof e=="string"||Array.isArray(e)?arguments.length===2?this.getPortProp(t,e):i==null?this.removePortProp(t,e,l):this.setPortProp(t,e,i,l):this.setPortProp(t,e,i)}prefixPortPath(t,e){const i=this.getPortIndex(t);if(i===-1)throw new Error(`Unable to find port with id: "${t}"`);return e==null||e===""?["ports","items",`${i}`]:Array.isArray(e)?["ports","items",`${i}`,...e]:`ports/items/${i}/${e}`}addPort(t,e){const i=[...this.ports.items];return i.push(t),this.setPropByPath("ports/items",i,e),this}addPorts(t,e){return this.setPropByPath("ports/items",[...this.ports.items,...t],e),this}insertPort(t,e,i){const l=[...this.ports.items];return l.splice(t,0,e),this.setPropByPath("ports/items",l,i),this}removePort(t,e={}){return this.removePortAt(this.getPortIndex(t),e)}removePortAt(t,e={}){if(t>=0){const i=[...this.ports.items];i.splice(t,1),e.rewrite=!0,this.setPropByPath("ports/items",i,e)}return this}removePorts(t,e){let i;if(Array.isArray(t)){if(i=e||{},t.length){i.rewrite=!0;const h=[...this.ports.items].filter(f=>!t.some(v=>{const y=typeof v=="string"?v:v.id;return f.id===y}));this.setPropByPath("ports/items",h,i)}}else i=t||{},i.rewrite=!0,this.setPropByPath("ports/items",[],i);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,e){return this.port.getPortsLayoutByGroup(t,e)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const t=this.ports,e={};t.items.forEach(f=>{f.id&&(e[f.id]=!0)});const i={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(f=>{f.id&&!e[f.id]&&(i[f.id]=!0)});const h=this.model;h&&!li(i)&&(h.getConnectedEdges(this,{incoming:!0}).forEach(y=>{const x=y.getTargetPortId();x&&i[x]&&y.remove()}),h.getConnectedEdges(this,{outgoing:!0}).forEach(y=>{const x=y.getSourcePortId();x&&i[x]&&y.remove()}))}validatePorts(){const t={},e=[];return this.ports.items.forEach(i=>{typeof i!="object"&&e.push(`Invalid port ${i}.`),i.id==null&&(i.id=this.generatePortId()),t[i.id]&&e.push("Duplicitied port id."),t[i.id]=!0}),e}generatePortId(){return Oa()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const e=this.port?this.port.getPorts():null;this.port=new M(this.ports);const i=this.port.getPorts(),l=e?i.filter(f=>e.find(v=>v.id===f.id)?null:f):[...i],h=e?e.filter(f=>i.find(v=>v.id===f.id)?null:f):[];l.length>0&&this.notify("ports:added",{added:l,cell:this,node:this}),h.length>0&&this.notify("ports:removed",{removed:h,cell:this,node:this})}}I.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag],l=e;return(i==null||i===c.toStringTag)&&typeof l.isNode=="function"&&typeof l.isEdge=="function"&&typeof l.prop=="function"&&typeof l.attr=="function"&&typeof l.size=="function"&&typeof l.position=="function"}c.isNode=t}(I||(I={})),function(c){c.config({propHooks(t){var{ports:e}=t,i=P(t,["ports"]);return e&&(i.ports=Array.isArray(e)?{items:e}:e),i}})}(I||(I={})),function(c){c.registry=Mn.create({type:"node",process(t,e){if(A.exist(t,!0))throw new Error(`Node with name '${t}' was registered by anthor Edge`);if(typeof e=="function")return e.config({shape:t}),e;let i=c;const{inherit:l}=e,h=P(e,["inherit"]);if(l)if(typeof l=="string"){const v=this.get(l);v==null?this.onNotFound(l,"inherited"):i=v}else i=l;h.constructorName==null&&(h.constructorName=t);const f=i.define.call(i,h);return f.config({shape:t}),f}}),A.setNodeRegistry(c.registry)}(I||(I={})),function(c){let t=0;function e(h){return h?hs(h):(t+=1,`CustomNode${t}`)}function i(h){const{constructorName:f,overwrite:v}=h,y=P(h,["constructorName","overwrite"]),x=ba(e(f||y.shape),this);return x.config(y),y.shape&&c.registry.register(y.shape,x,v),x}c.define=i;function l(h){const f=h.shape||"rect",v=c.registry.get(f);return v?new v(h):c.registry.onNotFound(f)}c.create=l}(I||(I={}));var N=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class R extends O{get[Symbol.toStringTag](){return R.toStringTag}constructor(t={}){super(t)}preprocess(t,e){const{source:i,sourceCell:l,sourcePort:h,sourcePoint:f,target:v,targetCell:y,targetPort:x,targetPoint:E}=t,_=N(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),T=D=>typeof D=="string"||typeof D=="number";if(i!=null)if(O.isCell(i))_.source={cell:i.id};else if(T(i))_.source={cell:i};else if(W.isPoint(i))_.source=i.toJSON();else if(Array.isArray(i))_.source={x:i[0],y:i[1]};else{const D=i.cell;O.isCell(D)?_.source=Object.assign(Object.assign({},i),{cell:D.id}):_.source=i}if(l!=null||h!=null){let D=_.source;if(l!=null){const L=T(l)?l:l.id;D?D.cell=L:D=_.source={cell:L}}h!=null&&D&&(D.port=h)}else f!=null&&(_.source=W.create(f).toJSON());if(v!=null)if(O.isCell(v))_.target={cell:v.id};else if(T(v))_.target={cell:v};else if(W.isPoint(v))_.target=v.toJSON();else if(Array.isArray(v))_.target={x:v[0],y:v[1]};else{const D=v.cell;O.isCell(D)?_.target=Object.assign(Object.assign({},v),{cell:D.id}):_.target=v}if(y!=null||x!=null){let D=_.target;if(y!=null){const L=T(y)?y:y.id;D?D.cell=L:D=_.target={cell:L}}x!=null&&D&&(D.port=x)}else E!=null&&(_.target=W.create(E).toJSON());return super.preprocess(_,e)}setup(){super.setup(),this.on("change:labels",t=>this.onLabelsChanged(t)),this.on("change:vertices",t=>this.onVertexsChanged(t))}isEdge(){return!0}disconnect(t={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}get source(){return this.getSource()}set source(t){this.setSource(t)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(t,e,i={}){return this.setTerminal("source",t,e,i)}get target(){return this.getTarget()}set target(t){this.setTarget(t)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(t,e,i={}){return this.setTerminal("target",t,e,i)}getTerminal(t){return Object.assign({},this.store.get(t))}setTerminal(t,e,i,l={}){if(O.isCell(e))return this.store.set(t,An({},i,{cell:e.id}),l),this;const h=e;return W.isPoint(e)||h.x!=null&&h.y!=null?(this.store.set(t,An({},i,{x:h.x,y:h.y}),l),this):(this.store.set(t,gn(e),l),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(t){const e=this[t];if(W.isPointLike(e))return W.create(e);const i=this.getTerminalCell(t);return i?i.getConnectionPoint(this,t):new W}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(t){if(this.model){const e=t==="source"?this.getSourceCellId():this.getTargetCellId();if(e)return this.model.getCell(e)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(t){let e=this;const i={};for(;e&&e.isEdge();){if(i[e.id])return null;i[e.id]=!0,e=e.getTerminalCell(t)}return e&&e.isNode()?e:null}get router(){return this.getRouter()}set router(t){t==null?this.removeRouter():this.setRouter(t)}getRouter(){return this.store.get("router")}setRouter(t,e,i){return typeof t=="object"?this.store.set("router",t,e):this.store.set("router",{name:t,args:e},i),this}removeRouter(t={}){return this.store.remove("router",t),this}get connector(){return this.getConnector()}set connector(t){t==null?this.removeConnector():this.setConnector(t)}getConnector(){return this.store.get("connector")}setConnector(t,e,i){return typeof t=="object"?this.store.set("connector",t,e):this.store.set("connector",{name:t,args:e},i),this}removeConnector(t={}){return this.store.remove("connector",t)}getDefaultLabel(){const t=this.constructor,e=this.store.get("defaultLabel")||t.defaultLabel||{};return gn(e)}get labels(){return this.getLabels()}set labels(t){this.setLabels(t)}getLabels(){return[...this.store.get("labels",[])].map(t=>this.parseLabel(t))}setLabels(t,e={}){return this.store.set("labels",Array.isArray(t)?t:[t],e),this}insertLabel(t,e,i={}){const l=this.getLabels(),h=l.length;let f=e!=null&&Number.isFinite(e)?e:h;return f<0&&(f=h+f+1),l.splice(f,0,this.parseLabel(t)),this.setLabels(l,i)}appendLabel(t,e={}){return this.insertLabel(t,-1,e)}getLabelAt(t){const e=this.getLabels();return t!=null&&Number.isFinite(t)?this.parseLabel(e[t]):null}setLabelAt(t,e,i={}){if(t!=null&&Number.isFinite(t)){const l=this.getLabels();l[t]=this.parseLabel(e),this.setLabels(l,i)}return this}removeLabelAt(t,e={}){const i=this.getLabels(),l=t!=null&&Number.isFinite(t)?t:-1,h=i.splice(l,1);return this.setLabels(i,e),h.length?h[0]:null}parseLabel(t){return typeof t=="string"?this.constructor.parseStringLabel(t):t}onLabelsChanged({previous:t,current:e}){const i=t&&e?e.filter(h=>t.find(f=>h===f||Xr(h,f))?null:h):e?[...e]:[],l=t&&e?t.filter(h=>e.find(f=>h===f||Xr(h,f))?null:h):t?[...t]:[];i.length>0&&this.notify("labels:added",{added:i,cell:this,edge:this}),l.length>0&&this.notify("labels:removed",{removed:l,cell:this,edge:this})}get vertices(){return this.getVertices()}set vertices(t){this.setVertices(t)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(t,e={}){const i=Array.isArray(t)?t:[t];return this.store.set("vertices",i.map(l=>W.toJSON(l)),e),this}insertVertex(t,e,i={}){const l=this.getVertices(),h=l.length;let f=e!=null&&Number.isFinite(e)?e:h;return f<0&&(f=h+f+1),l.splice(f,0,W.toJSON(t)),this.setVertices(l,i)}appendVertex(t,e={}){return this.insertVertex(t,-1,e)}getVertexAt(t){return t!=null&&Number.isFinite(t)?this.getVertices()[t]:null}setVertexAt(t,e,i={}){if(t!=null&&Number.isFinite(t)){const l=this.getVertices();l[t]=e,this.setVertices(l,i)}return this}removeVertexAt(t,e={}){const i=this.getVertices(),l=t!=null&&Number.isFinite(t)?t:-1;return i.splice(l,1),this.setVertices(i,e)}onVertexsChanged({previous:t,current:e}){const i=t&&e?e.filter(h=>t.find(f=>W.equals(h,f))?null:h):e?[...e]:[],l=t&&e?t.filter(h=>e.find(f=>W.equals(h,f))?null:h):t?[...t]:[];i.length>0&&this.notify("vertexs:added",{added:i,cell:this,edge:this}),l.length>0&&this.notify("vertexs:removed",{removed:l,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||on.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}translate(t,e,i={}){return i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=e,this.applyToPoints(l=>({x:(l.x||0)+t,y:(l.y||0)+e}),i)}scale(t,e,i,l={}){return this.applyToPoints(h=>W.create(h).scale(t,e,i).toJSON(),l)}applyToPoints(t,e={}){const i={},l=this.getSource(),h=this.getTarget();W.isPointLike(l)&&(i.source=t(l)),W.isPointLike(h)&&(i.target=t(h));const f=this.getVertices();return f.length>0&&(i.vertices=f.map(t)),this.store.set(i,e),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const t=[this.getSourcePoint(),...this.getVertices().map(e=>W.create(e)),this.getTargetPoint()];return new bn(t)}updateParent(t){let e=null;const i=this.getSourceCell(),l=this.getTargetCell(),h=this.getParent();return i&&l&&(i===l||i.isDescendantOf(l)?e=l:l.isDescendantOf(i)?e=i:e=O.getCommonAncestor(i,l)),h&&e&&e.id!==h.id&&h.unembed(this,t),e&&(!h||h.id!==e.id)&&e.embed(this,t),e}hasLoop(t={}){const e=this.getSource(),i=this.getTarget(),l=e.cell,h=i.cell;if(!l||!h)return!1;let f=l===h;if(!f&&t.deep&&this._model){const v=this.getSourceCell(),y=this.getTargetCell();v&&y&&(f=v.isAncestorOf(y,t)||y.isAncestorOf(v,t))}return f}getFragmentAncestor(){const t=[this,this.getSourceNode(),this.getTargetNode()].filter(e=>e!=null);return this.getCommonAncestor(...t)}isFragmentDescendantOf(t){const e=this.getFragmentAncestor();return!!e&&(e.id===t.id||e.isDescendantOf(t))}}R.defaults={},function(c){function t(e,i){const l=e,h=i;return l.cell===h.cell?l.port===h.port||l.port==null&&h.port==null:!1}c.equalTerminals=t}(R||(R={})),function(c){c.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}};function t(e){return{attrs:{label:{text:e}}}}c.parseStringLabel=t}(R||(R={})),function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag],l=e;return(i==null||i===c.toStringTag)&&typeof l.isNode=="function"&&typeof l.isEdge=="function"&&typeof l.prop=="function"&&typeof l.attr=="function"&&typeof l.disconnect=="function"&&typeof l.getSource=="function"&&typeof l.getTarget=="function"}c.isEdge=t}(R||(R={})),function(c){c.registry=Mn.create({type:"edge",process(t,e){if(A.exist(t,!1))throw new Error(`Edge with name '${t}' was registered by anthor Node`);if(typeof e=="function")return e.config({shape:t}),e;let i=c;const{inherit:l="edge"}=e,h=N(e,["inherit"]);if(typeof l=="string"){const v=this.get(l||"edge");v==null&&l?this.onNotFound(l,"inherited"):i=v}else i=l;h.constructorName==null&&(h.constructorName=t);const f=i.define.call(i,h);return f.config({shape:t}),f}}),A.setEdgeRegistry(c.registry)}(R||(R={})),function(c){let t=0;function e(h){return h?hs(h):(t+=1,`CustomEdge${t}`)}function i(h){const{constructorName:f,overwrite:v}=h,y=N(h,["constructorName","overwrite"]),x=ba(e(f||y.shape),this);return x.config(y),y.shape&&c.registry.register(y.shape,x,v),x}c.define=i;function l(h){const f=h.shape||"edge",v=c.registry.get(f);return v?new v(h):c.registry.onNotFound(f)}c.create=l}(R||(R={})),function(c){const t="basic.edge";c.config({shape:t,propHooks(e){const{label:i,vertices:l}=e,h=N(e,["label","vertices"]);if(i){h.labels==null&&(h.labels=[]);const f=typeof i=="string"?c.parseStringLabel(i):i;h.labels.push(f)}return l&&Array.isArray(l)&&(h.vertices=l.map(f=>W.create(f).toJSON())),h}}),c.registry.register(t,c)}(R||(R={}));var z=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class F extends lr{constructor(t,e={}){super(),this.length=0,this.comparator=e.comparator||"zIndex",this.clean(),t&&this.reset(t,{silent:!0})}toJSON(){return this.cells.map(t=>t.toJSON())}add(t,e,i){let l,h;typeof e=="number"?(l=e,h=Object.assign({merge:!1},i)):(l=this.length,h=Object.assign({merge:!1},e)),l>this.length&&(l=this.length),l<0&&(l+=this.length+1);const f=Array.isArray(t)?t:[t],v=this.comparator&&typeof e!="number"&&h.sort!==!1,y=this.comparator||null;let x=!1;const E=[],S=[];return f.forEach(_=>{const T=this.get(_);T?h.merge&&!_.isSameStore(T)&&(T.setProp(_.getProp(),i),S.push(T),v&&!x&&(y==null||typeof y=="function"?x=T.hasChanged():typeof y=="string"?x=T.hasChanged(y):x=y.some(D=>T.hasChanged(D)))):(E.push(_),this.reference(_))}),E.length&&(v&&(x=!0),this.cells.splice(l,0,...E),this.length=this.cells.length),x&&this.sort({silent:!0}),h.silent||(E.forEach((_,T)=>{const D={cell:_,index:l+T,options:h};this.trigger("added",D),h.dryrun||_.notify("added",Object.assign({},D))}),x&&this.trigger("sorted"),(E.length||S.length)&&this.trigger("updated",{added:E,merged:S,removed:[],options:h})),this}remove(t,e={}){const i=Array.isArray(t)?t:[t],l=this.removeCells(i,e);return!e.silent&&l.length>0&&this.trigger("updated",{options:e,removed:l,added:[],merged:[]}),Array.isArray(t)?l:l[0]}removeCells(t,e){const i=[];for(let l=0;l<t.length;l+=1){const h=this.get(t[l]);if(h==null)continue;const f=this.cells.indexOf(h);this.cells.splice(f,1),this.length-=1,delete this.map[h.id],i.push(h),this.unreference(h),e.dryrun||h.remove(),e.silent||(this.trigger("removed",{cell:h,index:f,options:e}),e.dryrun||h.notify("removed",{cell:h,index:f,options:e}))}return i}reset(t,e={}){const i=this.cells.slice();if(i.forEach(l=>this.unreference(l)),this.clean(),this.add(t,Object.assign({silent:!0},e)),!e.silent){const l=this.cells.slice();this.trigger("reseted",{options:e,previous:i,current:l});const h=[],f=[];l.forEach(v=>{i.some(x=>x.id===v.id)||h.push(v)}),i.forEach(v=>{l.some(x=>x.id===v.id)||f.push(v)}),this.trigger("updated",{options:e,added:h,removed:f,merged:[]})}return this}push(t,e){return this.add(t,this.length,e)}pop(t){const e=this.at(this.length-1);return this.remove(e,t)}unshift(t,e){return this.add(t,0,e)}shift(t){const e=this.at(0);return this.remove(e,t)}get(t){if(t==null)return null;const e=typeof t=="string"||typeof t=="number"?t:t.id;return this.map[e]||null}has(t){return this.get(t)!=null}at(t){return t<0&&(t+=this.length),this.cells[t]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(t){return this.cells.indexOf(t)}toArray(){return this.cells.slice()}sort(t={}){return this.comparator!=null&&(this.cells=Qw(this.cells,this.comparator),t.silent||this.trigger("sorted")),this}clone(){const t=this.constructor;return new t(this.cells.slice(),{comparator:this.comparator})}reference(t){this.map[t.id]=t,t.on("*",this.notifyCellEvent,this)}unreference(t){t.off("*",this.notifyCellEvent,this),delete this.map[t.id]}notifyCellEvent(t,e){const i=e.cell;this.trigger(`cell:${t}`,e),i&&(i.isNode()?this.trigger(`node:${t}`,Object.assign(Object.assign({},e),{node:i})):i.isEdge()&&this.trigger(`edge:${t}`,Object.assign(Object.assign({},e),{edge:i})))}clean(){this.length=0,this.cells=[],this.map={}}dispose(){this.reset([])}}z([F.dispose()],F.prototype,"dispose",null);var Z=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class ot extends lr{get[Symbol.toStringTag](){return ot.toStringTag}constructor(t=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new F(t),this.setup()}notify(t,e){this.trigger(t,e);const i=this.graph;return i&&(t==="sorted"||t==="reseted"||t==="updated"?i.trigger(`model:${t}`,e):i.trigger(t,e)),this}setup(){const t=this.collection;t.on("sorted",()=>this.notify("sorted",null)),t.on("updated",e=>this.notify("updated",e)),t.on("cell:change:zIndex",()=>this.sortOnChangeZ()),t.on("added",({cell:e})=>{this.onCellAdded(e)}),t.on("removed",e=>{const i=e.cell;this.onCellRemoved(i,e.options),this.notify("cell:removed",e),i.isNode()?this.notify("node:removed",Object.assign(Object.assign({},e),{node:i})):i.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},e),{edge:i}))}),t.on("reseted",e=>{this.onReset(e.current),this.notify("reseted",e)}),t.on("edge:change:source",({edge:e})=>this.onEdgeTerminalChanged(e,"source")),t.on("edge:change:target",({edge:e})=>{this.onEdgeTerminalChanged(e,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(t){const e=t.id;t.isEdge()?(t.updateParent(),this.edges[e]=!0,this.onEdgeTerminalChanged(t,"source"),this.onEdgeTerminalChanged(t,"target")):this.nodes[e]=!0}onCellRemoved(t,e){const i=t.id;if(t.isEdge()){delete this.edges[i];const l=t.getSource(),h=t.getTarget();if(l&&l.cell){const f=this.outgoings[l.cell],v=f?f.indexOf(i):-1;v>=0&&(f.splice(v,1),f.length===0&&delete this.outgoings[l.cell])}if(h&&h.cell){const f=this.incomings[h.cell],v=f?f.indexOf(i):-1;v>=0&&(f.splice(v,1),f.length===0&&delete this.incomings[h.cell])}}else delete this.nodes[i];e.clear||(e.disconnectEdges?this.disconnectConnectedEdges(t,e):this.removeConnectedEdges(t,e)),t.model===this&&(t.model=null)}onReset(t){this.nodes={},this.edges={},this.outgoings={},this.incomings={},t.forEach(e=>this.onCellAdded(e))}onEdgeTerminalChanged(t,e){const i=e==="source"?this.outgoings:this.incomings,l=t.previous(e);if(l&&l.cell){const f=O.isCell(l.cell)?l.cell.id:l.cell,v=i[f],y=v?v.indexOf(t.id):-1;y>=0&&(v.splice(y,1),v.length===0&&delete i[f])}const h=t.getTerminal(e);if(h&&h.cell){const f=O.isCell(h.cell)?h.cell.id:h.cell,v=i[f]||[];v.indexOf(t.id)===-1&&v.push(t.id),i[f]=v}}prepareCell(t,e){return!t.model&&(!e||!e.dryrun)&&(t.model=this),t.zIndex==null&&t.setZIndex(this.getMaxZIndex()+1,{silent:!0}),t}resetCells(t,e={}){return t.map(i=>this.prepareCell(i,Object.assign(Object.assign({},e),{dryrun:!0}))),this.collection.reset(t,e),t.map(i=>this.prepareCell(i,{options:e})),this}clear(t={}){const e=this.getCells();if(e.length===0)return this;const i=Object.assign(Object.assign({},t),{clear:!0});return this.batchUpdate("clear",()=>{const l=e.sort((h,f)=>{const v=h.isEdge()?1:2,y=f.isEdge()?1:2;return v-y});for(;l.length>0;){const h=l.shift();h&&h.remove(i)}},i),this}addNode(t,e={}){const i=I.isNode(t)?t:this.createNode(t);return this.addCell(i,e),i}updateNode(t,e={}){const i=this.createNode(t),l=i.getProp();return i.dispose(),this.updateCell(l,e)}createNode(t){return I.create(t)}addEdge(t,e={}){const i=R.isEdge(t)?t:this.createEdge(t);return this.addCell(i,e),i}createEdge(t){return R.create(t)}updateEdge(t,e={}){const i=this.createEdge(t),l=i.getProp();return i.dispose(),this.updateCell(l,e)}addCell(t,e={}){return Array.isArray(t)?this.addCells(t,e):(!this.collection.has(t)&&!this.addings.has(t)&&(this.addings.set(t,!0),this.collection.add(this.prepareCell(t,e),e),t.eachChild(i=>this.addCell(i,e)),this.addings.delete(t)),this)}addCells(t,e={}){const i=t.length;if(i===0)return this;const l=Object.assign(Object.assign({},e),{position:i-1,maxPosition:i-1});return this.startBatch("add",Object.assign(Object.assign({},l),{cells:t})),t.forEach(h=>{this.addCell(h,l),l.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},l),{cells:t})),this}updateCell(t,e={}){const i=t.id&&this.getCell(t.id);return i?this.batchUpdate("update",()=>(Object.entries(t).forEach(([l,h])=>i.setProp(l,h,e)),!0),t):!1}removeCell(t,e={}){const i=typeof t=="string"?this.getCell(t):t;return i&&this.has(i)?this.collection.remove(i,e):null}updateCellId(t,e){if(t.id===e)return;this.startBatch("update",{id:e}),t.prop("id",e);const i=t.clone({keepId:!0});return this.addCell(i),this.getConnectedEdges(t).forEach(h=>{const f=h.getSourceCell(),v=h.getTargetCell();f===t&&h.setSource(Object.assign(Object.assign({},h.getSource()),{cell:e})),v===t&&h.setTarget(Object.assign(Object.assign({},h.getTarget()),{cell:e}))}),this.removeCell(t),this.stopBatch("update",{id:e}),i}removeCells(t,e={}){return t.length?this.batchUpdate("remove",()=>t.map(i=>this.removeCell(i,e))):[]}removeConnectedEdges(t,e={}){const i=this.getConnectedEdges(t);return i.forEach(l=>{l.remove(e)}),i}disconnectConnectedEdges(t,e={}){const i=typeof t=="string"?t:t.id;this.getConnectedEdges(t).forEach(l=>{const h=l.getSourceCellId(),f=l.getTargetCellId();h===i&&l.setSource({x:0,y:0},e),f===i&&l.setTarget({x:0,y:0},e)})}has(t){return this.collection.has(t)}total(){return this.collection.length}indexOf(t){return this.collection.indexOf(t)}getCell(t){return this.collection.get(t)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const t=this.collection.first();return t&&t.getZIndex()||0}getMaxZIndex(){const t=this.collection.last();return t&&t.getZIndex()||0}getCellsFromCache(t){return t?Object.keys(t).map(e=>this.getCell(e)).filter(e=>e!=null):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(t){const e=typeof t=="string"?t:t.id,i=this.outgoings[e];return i?i.map(l=>this.getCell(l)).filter(l=>l&&l.isEdge()):null}getIncomingEdges(t){const e=typeof t=="string"?t:t.id,i=this.incomings[e];return i?i.map(l=>this.getCell(l)).filter(l=>l&&l.isEdge()):null}getConnectedEdges(t,e={}){const i=[],l=typeof t=="string"?this.getCell(t):t;if(l==null)return i;const h={},f=e.indirect;let v=e.incoming,y=e.outgoing;v==null&&y==null&&(v=y=!0);const x=(E,S)=>{const _=S?this.getOutgoingEdges(E):this.getIncomingEdges(E);if(_!=null&&_.forEach(T=>{h[T.id]||(i.push(T),h[T.id]=!0,f&&(v&&x(T,!1),y&&x(T,!0)))}),f&&E.isEdge()){const T=S?E.getTargetCell():E.getSourceCell();T&&T.isEdge()&&(h[T.id]||(i.push(T),x(T,S)))}};if(y&&x(l,!0),v&&x(l,!1),e.deep){const E=l.getDescendants({deep:!0}),S={};E.forEach(T=>{T.isNode()&&(S[T.id]=!0)});const _=(T,D)=>{const L=D?this.getOutgoingEdges(T.id):this.getIncomingEdges(T.id);L!=null&&L.forEach(B=>{if(!h[B.id]){const j=B.getSourceCell(),V=B.getTargetCell();if(!e.enclosed&&j&&S[j.id]&&V&&S[V.id])return;i.push(B),h[B.id]=!0}})};E.forEach(T=>{T.isEdge()||(y&&_(T,!0),v&&_(T,!1))})}return i}isBoundary(t,e){const i=typeof t=="string"?this.getCell(t):t,l=e?this.getIncomingEdges(i):this.getOutgoingEdges(i);return l==null||l.length===0}getBoundaryNodes(t){const e=[];return Object.keys(this.nodes).forEach(i=>{if(this.isBoundary(i,t)){const l=this.getCell(i);l&&e.push(l)}}),e}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(t){return this.isBoundary(t,!0)}isLeaf(t){return this.isBoundary(t,!1)}getNeighbors(t,e={}){let i=e.incoming,l=e.outgoing;i==null&&l==null&&(i=l=!0);const f=this.getConnectedEdges(t,e).reduce((v,y)=>{const x=y.hasLoop(e),E=y.getSourceCell(),S=y.getTargetCell();return i&&E&&E.isNode()&&!v[E.id]&&(x||E!==t&&(!e.deep||!E.isDescendantOf(t)))&&(v[E.id]=E),l&&S&&S.isNode()&&!v[S.id]&&(x||S!==t&&(!e.deep||!S.isDescendantOf(t)))&&(v[S.id]=S),v},{});if(t.isEdge()){if(i){const v=t.getSourceCell();v&&v.isNode()&&!f[v.id]&&(f[v.id]=v)}if(l){const v=t.getTargetCell();v&&v.isNode()&&!f[v.id]&&(f[v.id]=v)}}return Object.keys(f).map(v=>f[v])}isNeighbor(t,e,i={}){let l=i.incoming,h=i.outgoing;return l==null&&h==null&&(l=h=!0),this.getConnectedEdges(t,i).some(f=>{const v=f.getSourceCell(),y=f.getTargetCell();return!!(l&&v&&v.id===e.id||h&&y&&y.id===e.id)})}getSuccessors(t,e={}){const i=[];return this.search(t,(l,h)=>{l!==t&&this.matchDistance(h,e.distance)&&i.push(l)},Object.assign(Object.assign({},e),{outgoing:!0})),i}isSuccessor(t,e,i={}){let l=!1;return this.search(t,(h,f)=>{if(h===e&&h!==t&&this.matchDistance(f,i.distance))return l=!0,!1},Object.assign(Object.assign({},i),{outgoing:!0})),l}getPredecessors(t,e={}){const i=[];return this.search(t,(l,h)=>{l!==t&&this.matchDistance(h,e.distance)&&i.push(l)},Object.assign(Object.assign({},e),{incoming:!0})),i}isPredecessor(t,e,i={}){let l=!1;return this.search(t,(h,f)=>{if(h===e&&h!==t&&this.matchDistance(f,i.distance))return l=!0,!1},Object.assign(Object.assign({},i),{incoming:!0})),l}matchDistance(t,e){return e==null?!0:typeof e=="function"?e(t):Array.isArray(e)&&e.includes(t)?!0:t===e}getCommonAncestor(...t){const e=[];return t.forEach(i=>{i&&(Array.isArray(i)?e.push(...i):e.push(i))}),O.getCommonAncestor(...e)}getSubGraph(t,e={}){const i=[],l={},h=[],f=[],v=y=>{l[y.id]||(i.push(y),l[y.id]=y,y.isEdge()&&f.push(y),y.isNode()&&h.push(y))};return t.forEach(y=>{v(y),e.deep&&y.getDescendants({deep:!0}).forEach(E=>v(E))}),f.forEach(y=>{const x=y.getSourceCell(),E=y.getTargetCell();x&&!l[x.id]&&(i.push(x),l[x.id]=x,x.isNode()&&h.push(x)),E&&!l[E.id]&&(i.push(E),l[E.id]=E,E.isNode()&&h.push(E))}),h.forEach(y=>{this.getConnectedEdges(y,e).forEach(E=>{const S=E.getSourceCell(),_=E.getTargetCell();!l[E.id]&&S&&l[S.id]&&_&&l[_.id]&&(i.push(E),l[E.id]=E)})}),i}cloneSubGraph(t,e={}){const i=this.getSubGraph(t,e);return this.cloneCells(i)}cloneCells(t){return O.cloneCells(t)}getNodesFromPoint(t,e){const i=typeof t=="number"?{x:t,y:e||0}:t;return this.getNodes().filter(l=>l.getBBox().containsPoint(i))}getNodesInArea(t,e,i,l,h){const f=typeof t=="number"?new Gt(t,e,i,l):Gt.create(t),v=typeof t=="number"?h:e,y=v&&v.strict;return this.getNodes().filter(x=>{const E=x.getBBox();return y?f.containsRect(E):f.isIntersectWithRect(E)})}getEdgesInArea(t,e,i,l,h){const f=typeof t=="number"?new Gt(t,e,i,l):Gt.create(t),v=typeof t=="number"?h:e,y=v&&v.strict;return this.getEdges().filter(x=>{const E=x.getBBox();return E.width===0?E.inflate(1,0):E.height===0&&E.inflate(0,1),y?f.containsRect(E):f.isIntersectWithRect(E)})}getNodesUnderNode(t,e={}){const i=t.getBBox();return(e.by==null||e.by==="bbox"?this.getNodesInArea(i):this.getNodesFromPoint(i[e.by])).filter(h=>t.id!==h.id&&!h.isDescendantOf(t))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(t,e={}){return O.getCellsBBox(t,e)}search(t,e,i={}){i.breadthFirst?this.breadthFirstSearch(t,e,i):this.depthFirstSearch(t,e,i)}breadthFirstSearch(t,e,i={}){const l=[],h={},f={};for(l.push(t),f[t.id]=0;l.length>0;){const v=l.shift();if(v==null||h[v.id]||(h[v.id]=!0,ue(e,this,v,f[v.id])===!1))continue;this.getNeighbors(v,i).forEach(x=>{f[x.id]=f[v.id]+1,l.push(x)})}}depthFirstSearch(t,e,i={}){const l=[],h={},f={};for(l.push(t),f[t.id]=0;l.length>0;){const v=l.pop();if(v==null||h[v.id]||(h[v.id]=!0,ue(e,this,v,f[v.id])===!1))continue;const y=this.getNeighbors(v,i),x=l.length;y.forEach(E=>{f[E.id]=f[v.id]+1,l.splice(x,0,E)})}}getShortestPath(t,e,i={}){const l={};this.getEdges().forEach(x=>{const E=x.getSourceCellId(),S=x.getTargetCellId();E&&S&&(l[E]||(l[E]=[]),l[S]||(l[S]=[]),l[E].push(S),i.directed||l[S].push(E))});const h=typeof t=="string"?t:t.id,f=ed.run(l,h,i.weight),v=[];let y=typeof e=="string"?e:e.id;for(f[y]&&v.push(y);y=f[y];)v.unshift(y);return v}translate(t,e,i){return this.getCells().filter(l=>!l.hasParent()).forEach(l=>l.translate(t,e,i)),this}resize(t,e,i){return this.resizeCells(t,e,this.getCells(),i)}resizeCells(t,e,i,l={}){const h=this.getCellsBBox(i);if(h){const f=Math.max(t/h.width,0),v=Math.max(e/h.height,0),y=h.getOrigin();i.forEach(x=>x.scale(f,v,y,l))}return this}toJSON(t={}){return ot.toJSON(this.getCells(),t)}parseJSON(t){return ot.fromJSON(t)}fromJSON(t,e={}){const i=this.parseJSON(t);return this.resetCells(i,e),this}startBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)+1,this.notify("batch:start",{name:t,data:e}),this}stopBatch(t,e={}){return this.batches[t]=(this.batches[t]||0)-1,this.notify("batch:stop",{name:t,data:e}),this}batchUpdate(t,e,i={}){this.startBatch(t,i);const l=e();return this.stopBatch(t,i),l}hasActiveBatch(t=Object.keys(this.batches)){return(Array.isArray(t)?t:[t]).some(i=>this.batches[i]>0)}dispose(){this.collection.dispose()}}Z([ot.dispose()],ot.prototype,"dispose",null),function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag],l=e;return(i==null||i===c.toStringTag)&&typeof l.addNode=="function"&&typeof l.addEdge=="function"&&l.collection!=null}c.isModel=t}(ot||(ot={})),function(c){function t(i,l={}){return{cells:i.map(h=>h.toJSON(l))}}c.toJSON=t;function e(i){const l=[];return Array.isArray(i)?l.push(...i):(i.cells&&l.push(...i.cells),i.nodes&&i.nodes.forEach(h=>{h.shape==null&&(h.shape="rect"),l.push(h)}),i.edges&&i.edges.forEach(h=>{h.shape==null&&(h.shape="edge"),l.push(h)})),l.map(h=>{const f=h.shape;if(f){if(I.registry.exist(f))return I.create(h);if(R.registry.exist(f))return R.create(h)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}c.fromJSON=e}(ot||(ot={}));var nt=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class q extends I{get label(){return this.getLabel()}set label(t){this.setLabel(t)}getLabel(){return this.getAttrByPath("text/text")}setLabel(t,e){return t==null?this.removeLabel():this.setAttrByPath("text/text",t,e),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}(function(c){c.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},c.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},c.config({attrs:{text:Object.assign({},c.labelAttr)},propHooks(t){const{label:e}=t,i=nt(t,["label"]);return e&&Eo(i,"attrs/text/text",e),i},visible:!0})})(q||(q={}));var et=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};function st(c,t="body"){return[{tagName:c,selector:t},{tagName:"text",selector:"label"}]}function U(c="xlink:href"){return e=>{const{imageUrl:i,imageWidth:l,imageHeight:h}=e,f=et(e,["imageUrl","imageWidth","imageHeight"]);if(i!=null||l!=null||h!=null){const v=()=>{if(f.attrs){const y=f.attrs.image;i!=null&&(y[c]=i),l!=null&&(y.width=l),h!=null&&(y.height=h),f.attrs.image=y}};f.attrs?(f.attrs.image==null&&(f.attrs.image={}),v()):(f.attrs={image:{}},v())}return f}}function ct(c,t,e={}){const i={constructorName:c,markup:st(c,e.selector),attrs:{[c]:Object.assign({},q.bodyAttr)}};return(e.parent||q).define(An(i,t,{shape:c}))}const _t=ct("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),Tt=R.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}}),te=ct("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});var $t=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class Xt extends q{get points(){return this.getPoints()}set points(t){this.setPoints(t)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(t,e){return t==null?this.removePoints():this.setAttrByPath("body/refPoints",Xt.pointsToString(t),e),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}(function(c){function t(e){return typeof e=="string"?e:e.map(i=>Array.isArray(i)?i.join(","):W.isPointLike(i)?`${i.x}, ${i.y}`:"").join(" ")}c.pointsToString=t,c.config({propHooks(e){const{points:i}=e,l=$t(e,["points"]);if(i){const h=t(i);h&&Eo(l,"attrs/body/refPoints",h)}return l}})})(Xt||(Xt={}));const ne=ct("polygon",{},{parent:Xt}),Ce=ct("polyline",{},{parent:Xt});var Pe=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const Qe=q.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(c){const{path:t}=c,e=Pe(c,["path"]);return t&&Eo(e,"attrs/body/refD",t),e}});var We=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};const Dt=q.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},hn.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:Dn.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},q.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(c){const{text:t}=c,e=We(c,["text"]);return t&&Eo(e,"attrs/label/text",t),e},attrHooks:{text:{set(c,{cell:t,view:e,refBBox:i,elem:l,attrs:h}){if(l instanceof HTMLElement)l.textContent=c;else{const f=h.style||{},v={text:c,width:-5,height:"100%"},y=Object.assign({textVerticalAnchor:"middle"},f),x=Qr.presets.textWrap;return ue(x.set,this,v,{cell:t,view:e,elem:l,refBBox:i,attrs:y}),{fill:f.color||null}}},position(c,{refBBox:t,elem:e}){if(e instanceof SVGElement)return t.getCenter()}}}}),re=ct("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:U()},{selector:"image"}),Me=ct("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}});class ve extends In{constructor(){super(...arguments),this.portsCache={}}get[Symbol.toStringTag](){return ve.toStringTag}getContainerClassName(){const t=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||t.push(this.prefixClassName("node-immovable")),t.join(" ")}updateClassName(t){const e=t.target;if(e.hasAttribute("magnet")){const i=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?vr(e,i):He(e,i)}else{const i=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(i):this.addClass(i)}}isNodeView(){return!0}confirmUpdate(t,e={}){let i=t;return this.hasAction(i,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(i,"render")?(this.render(),i=this.removeAction(i,["render","update","resize","translate","rotate","ports","tools"])):(i=this.handleAction(i,"resize",()=>this.resize(),"update"),i=this.handleAction(i,"update",()=>this.update(),Jn.useCSSSelector?"ports":null),i=this.handleAction(i,"translate",()=>this.translate()),i=this.handleAction(i,"rotate",()=>this.rotate()),i=this.handleAction(i,"ports",()=>this.renderPorts()),i=this.handleAction(i,"tools",()=>{this.getFlag("tools")===t?this.renderTools():this.updateTools(e)})),i}update(t){this.cleanCache(),Jn.useCSSSelector&&this.removePorts();const e=this.cell,i=e.getSize(),l=e.getAttrs();this.updateAttrs(this.container,l,{attrs:t===l?null:t,rootBBox:new Gt(0,0,i.width,i.height),selectors:this.selectors}),Jn.useCSSSelector&&this.renderPorts()}renderMarkup(){const t=this.cell.markup;if(t){if(typeof t=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid node markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.appendChild(e.fragment)}render(){return this.empty(),this.renderMarkup(),this.resize(),this.updateTransform(),Jn.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(){this.cell.getAngle()&&this.rotate(),this.update()}translate(){this.updateTransform()}rotate(){this.updateTransform()}getTranslationString(){const t=this.cell.getPosition();return`translate(${t.x},${t.y})`}getRotationString(){const t=this.cell.getAngle();if(t){const e=this.cell.getSize();return`rotate(${t},${e.width/2},${e.height/2})`}}updateTransform(){let t=this.getTranslationString();const e=this.getRotationString();e&&(t+=` ${e}`),this.container.setAttribute("transform",t)}findPortElem(t,e){const i=t?this.portsCache[t]:null;if(!i)return null;const l=i.portContentElement,h=i.portContentSelectors||{};return this.findOne(e,l,h)}cleanPortsCache(){this.portsCache={}}removePorts(){Object.values(this.portsCache).forEach(t=>{So(t.portElement)})}renderPorts(){const t=this.container,e=[];t.childNodes.forEach(f=>{e.push(f)});const i=this.cell.getParsedPorts(),l=Op(i,"zIndex"),h="auto";l[h]&&l[h].forEach(f=>{const v=this.getPortElement(f);t.append(v),e.push(v)}),Object.keys(l).forEach(f=>{if(f!==h){const v=parseInt(f,10);this.appendPorts(l[f],v,e)}}),this.updatePorts()}appendPorts(t,e,i){const l=t.map(h=>this.getPortElement(h));i[e]||e<0?vl(i[Math.max(e,0)],l):Tn(this.container,l)}getPortElement(t){const e=this.portsCache[t.id];return e?e.portElement:this.createPortElement(t)}createPortElement(t){let e=on.renderMarkup(this.cell.getPortContainerMarkup());const i=e.elem;if(i==null)throw new Error("Invalid port container markup.");e=on.renderMarkup(this.getPortMarkup(t));const l=e.elem,h=e.selectors;if(l==null)throw new Error("Invalid port markup.");this.setAttrs({port:t.id,"port-group":t.group},l);let f="x6-port";t.group&&(f+=` x6-port-${t.group}`),He(i,f),He(i,"x6-port"),He(l,"x6-port-body"),i.appendChild(l);let v=h,y,x;if(this.existPortLabel(t)){if(e=on.renderMarkup(this.getPortLabelMarkup(t.label)),y=e.elem,x=e.selectors,y==null)throw new Error("Invalid port label markup.");if(h&&x){for(const S in x)if(h[S]&&S!==this.rootSelector)throw new Error("Selectors within port must be unique.");v=Object.assign(Object.assign({},h),x)}He(y,"x6-port-label"),i.appendChild(y)}return this.portsCache[t.id]={portElement:i,portSelectors:v,portLabelElement:y,portLabelSelectors:x,portContentElement:l,portContentSelectors:h},this.graph.options.onPortRendered&&this.graph.options.onPortRendered({port:t,node:this.cell,container:i,selectors:v,labelContainer:y,labelSelectors:x,contentContainer:l,contentSelectors:h}),i}updatePorts(){const t=this.cell.getParsedGroups(),e=Object.keys(t);e.length===0?this.updatePortGroup():e.forEach(i=>this.updatePortGroup(i))}updatePortGroup(t){const e=Gt.fromSize(this.cell.getSize()),i=this.cell.getPortsLayoutByGroup(t,e);for(let l=0,h=i.length;l<h;l+=1){const f=i[l],v=f.portId,y=this.portsCache[v]||{},x=f.portLayout;if(this.applyPortTransform(y.portElement,x),f.portAttrs!=null){const S={selectors:y.portSelectors||{}};f.portSize&&(S.rootBBox=Gt.fromSize(f.portSize)),this.updateAttrs(y.portElement,f.portAttrs,S)}const E=f.labelLayout;if(E&&y.portLabelElement&&(this.applyPortTransform(y.portLabelElement,E,-(x.angle||0)),E.attrs)){const S={selectors:y.portLabelSelectors||{}};f.labelSize&&(S.rootBBox=Gt.fromSize(f.labelSize)),this.updateAttrs(y.portLabelElement,E.attrs,S)}}}applyPortTransform(t,e,i=0){const l=e.angle,h=e.position,f=_n().rotate(i).translate(h.x||0,h.y||0).rotate(l||0);gi(t,f,{absolute:!0})}getPortMarkup(t){return t.markup||this.cell.portMarkup}getPortLabelMarkup(t){return t.markup||this.cell.portLabelMarkup}existPortLabel(t){return t.attrs&&t.attrs.text}getEventArgs(t,e,i){const l=this,h=l.cell,f=h;return e==null||i==null?{e:t,view:l,node:h,cell:f}:{e:t,x:e,y:i,view:l,node:h,cell:f}}getPortEventArgs(t,e,i){const l=this,h=l.cell,f=h;return i?{e:t,x:i.x,y:i.y,view:l,node:h,cell:f,port:e}:{e:t,view:l,node:h,cell:f,port:e}}notifyMouseDown(t,e,i){super.onMouseDown(t,e,i),this.notify("node:mousedown",this.getEventArgs(t,e,i))}notifyMouseMove(t,e,i){super.onMouseMove(t,e,i),this.notify("node:mousemove",this.getEventArgs(t,e,i))}notifyMouseUp(t,e,i){super.onMouseUp(t,e,i),this.notify("node:mouseup",this.getEventArgs(t,e,i))}notifyPortEvent(t,e,i){const l=this.findAttr("port",e.target);if(l){const h=e.type;t==="node:port:mouseenter"?e.type="mouseenter":t==="node:port:mouseleave"&&(e.type="mouseleave"),this.notify(t,this.getPortEventArgs(e,l,i)),e.type=h}}onClick(t,e,i){super.onClick(t,e,i),this.notify("node:click",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:click",t,{x:e,y:i})}onDblClick(t,e,i){super.onDblClick(t,e,i),this.notify("node:dblclick",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:dblclick",t,{x:e,y:i})}onContextMenu(t,e,i){super.onContextMenu(t,e,i),this.notify("node:contextmenu",this.getEventArgs(t,e,i)),this.notifyPortEvent("node:port:contextmenu",t,{x:e,y:i})}onMouseDown(t,e,i){this.isPropagationStopped(t)||(this.notifyMouseDown(t,e,i),this.notifyPortEvent("node:port:mousedown",t,{x:e,y:i}),this.startNodeDragging(t,e,i))}onMouseMove(t,e,i){const l=this.getEventData(t),h=l.action;if(h==="magnet")this.dragMagnet(t,e,i);else{if(h==="move"){const v=l.targetView||this;v.dragNode(t,e,i),v.notify("node:moving",{e:t,x:e,y:i,view:v,cell:v.cell,node:v.cell})}this.notifyMouseMove(t,e,i),this.notifyPortEvent("node:port:mousemove",t,{x:e,y:i})}this.setEventData(t,l)}onMouseUp(t,e,i){const l=this.getEventData(t),h=l.action;h==="magnet"?this.stopMagnetDragging(t,e,i):(this.notifyMouseUp(t,e,i),this.notifyPortEvent("node:port:mouseup",t,{x:e,y:i}),h==="move"&&(l.targetView||this).stopNodeDragging(t,e,i));const f=l.targetMagnet;f&&this.onMagnetClick(t,f,e,i),this.checkMouseleave(t)}onMouseOver(t){super.onMouseOver(t),this.notify("node:mouseover",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseenter",t),this.notifyPortEvent("node:port:mouseover",t)}onMouseOut(t){super.onMouseOut(t),this.notify("node:mouseout",this.getEventArgs(t)),this.notifyPortEvent("node:port:mouseleave",t),this.notifyPortEvent("node:port:mouseout",t)}onMouseEnter(t){this.updateClassName(t),super.onMouseEnter(t),this.notify("node:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("node:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,l){super.onMouseWheel(t,e,i,l),this.notify("node:mousewheel",Object.assign({delta:l},this.getEventArgs(t,e,i)))}onMagnetClick(t,e,i,l){const h=this.graph;h.view.getMouseMovedCount(t)>h.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:e},this.getEventArgs(t,i,l)))}onMagnetDblClick(t,e,i,l){this.notify("node:magnet:dblclick",Object.assign({magnet:e},this.getEventArgs(t,i,l)))}onMagnetContextMenu(t,e,i,l){this.notify("node:magnet:contextmenu",Object.assign({magnet:e},this.getEventArgs(t,i,l)))}onMagnetMouseDown(t,e,i,l){this.startMagnetDragging(t,i,l)}onCustomEvent(t,e,i,l){this.notify("node:customevent",Object.assign({name:e},this.getEventArgs(t,i,l))),super.onCustomEvent(t,e,i,l)}prepareEmbedding(t){const e=this.graph,l=this.getEventData(t).cell||this.cell,h=e.findViewByCell(l),f=e.snapToGrid(t.clientX,t.clientY);this.notify("node:embed",{e:t,node:l,view:h,cell:l,x:f.x,y:f.y,currentParent:l.getParent()})}processEmbedding(t,e){const i=e.cell||this.cell,l=e.graph||this.graph,h=l.options.embedding,f=h.findParent;let v=typeof f=="function"?ue(f,l,{view:this,node:this.cell}).filter(_=>O.isCell(_)&&this.cell.id!==_.id&&!_.isDescendantOf(this.cell)):l.model.getNodesUnderNode(i,{by:f});if(h.frontOnly&&v.length>0){const _=Op(v,"zIndex"),T=yh(Object.keys(_).map(D=>parseInt(D,10)));T&&(v=_[T])}v=v.filter(_=>_.visible);let y=null;const x=e.candidateEmbedView,E=h.validate;for(let _=v.length-1;_>=0;_-=1){const T=v[_];if(x&&x.cell.id===T.id){y=x;break}else{const D=T.findView(l);if(E&&ue(E,l,{child:this.cell,parent:D.cell,childView:this,parentView:D})){y=D;break}}}this.clearEmbedding(e),y&&y.highlight(null,{type:"embedding"}),e.candidateEmbedView=y;const S=l.snapToGrid(t.clientX,t.clientY);this.notify("node:embedding",{e:t,cell:i,node:i,view:l.findViewByCell(i),x:S.x,y:S.y,currentParent:i.getParent(),candidateParent:y?y.cell:null})}clearEmbedding(t){const e=t.candidateEmbedView;e&&(e.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null)}finalizeEmbedding(t,e){this.graph.startBatch("embedding");const i=e.cell||this.cell,l=e.graph||this.graph,h=l.findViewByCell(i),f=i.getParent(),v=e.candidateEmbedView;if(v?(v.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null,(f==null||f.id!==v.cell.id)&&v.cell.insertChild(i,void 0,{ui:!0})):f&&f.unembed(i,{ui:!0}),l.model.getConnectedEdges(i,{deep:!0}).forEach(y=>{y.updateParent({ui:!0})}),h&&v){const y=l.snapToGrid(t.clientX,t.clientY);h.notify("node:embedded",{e:t,cell:i,x:y.x,y:y.y,node:i,view:l.findViewByCell(i),previousParent:f,currentParent:i.getParent()})}this.graph.stopBatch("embedding")}getDelegatedView(){let t=this.cell,e=this;for(;e&&!t.isEdge();){if(!t.hasParent()||e.can("stopDelegateOnDragging"))return e;t=t.getParent(),e=this.graph.findViewByCell(t)}return null}validateMagnet(t,e,i){if(e.getAttribute("magnet")!=="passive"){const l=this.graph.options.connecting.validateMagnet;return l?ue(l,this.graph,{e:i,magnet:e,view:t,cell:t.cell}):!0}return!1}startMagnetDragging(t,e,i){if(!this.can("magnetConnectable"))return;t.stopPropagation();const l=t.currentTarget,h=this.graph;this.setEventData(t,{targetMagnet:l}),this.validateMagnet(this,l,t)?(h.options.magnetThreshold<=0&&this.startConnectting(t,l,e,i),this.setEventData(t,{action:"magnet"}),this.stopPropagation(t)):this.onMouseDown(t,e,i),h.view.delegateDragEvents(t,this)}startConnectting(t,e,i,l){this.graph.model.startBatch("add-edge");const h=this.createEdgeFromMagnet(e,i,l);h.setEventData(t,h.prepareArrowheadDragging("target",{x:i,y:l,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(t,{edgeView:h}),h.notifyMouseDown(t,i,l)}getDefaultEdge(t,e){let i;const l=this.graph.options.connecting.createEdge;return l&&(i=ue(l,this.graph,{sourceMagnet:e,sourceView:t,sourceCell:t.cell})),i}createEdgeFromMagnet(t,e,i){const l=this.graph,h=l.model,f=this.getDefaultEdge(this,t);return f.setSource(Object.assign(Object.assign({},f.getSource()),this.getEdgeTerminal(t,e,i,f,"source"))),f.setTarget(Object.assign(Object.assign({},f.getTarget()),{x:e,y:i})),f.addTo(h,{async:!1,ui:!0}),f.findView(l)}dragMagnet(t,e,i){const l=this.getEventData(t),h=l.edgeView;if(h)h.onMouseMove(t,e,i),this.autoScrollGraph(t.clientX,t.clientY);else{const f=this.graph,v=f.options.magnetThreshold,y=this.getEventTarget(t),x=l.targetMagnet;if(v==="onleave"){if(x===y||x.contains(y))return}else if(f.view.getMouseMovedCount(t)<=v)return;this.startConnectting(t,x,e,i)}}stopMagnetDragging(t,e,i){const h=this.eventData(t).edgeView;h&&(h.onMouseUp(t,e,i),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(t,e,i){this.notify("node:unhandled:mousedown",{e:t,x:e,y:i,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(t,e,i,l,h){let f=[h];const v=this.graph.getPlugin("selection");if(v&&v.isSelectionMovable()){const y=v.getSelectedCells();y.includes(h)&&(f=y.filter(x=>x.isNode()))}f.forEach(y=>{this.notify(t,{e,x:i,y:l,cell:y,node:y,view:y.findView(this.graph)})})}getRestrictArea(t){const e=this.graph.options.translating.restrict,i=typeof e=="function"?ue(e,this.graph,t):e;return typeof i=="number"?this.graph.transform.getGraphArea().inflate(i):i===!0?this.graph.transform.getGraphArea():i||null}startNodeDragging(t,e,i){const l=this.getDelegatedView();if(l==null||!l.can("nodeMovable"))return this.notifyUnhandledMouseDown(t,e,i);this.setEventData(t,{targetView:l,action:"move"});const h=W.create(l.cell.getPosition());l.setEventData(t,{moving:!1,offset:h.diff(e,i),restrict:this.getRestrictArea(l)})}dragNode(t,e,i){const l=this.cell,h=this.graph,f=h.getGridSize(),v=this.getEventData(t),y=v.offset,x=v.restrict;v.moving||(v.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",t,e,i,this.cell)),this.autoScrollGraph(t.clientX,t.clientY);const E=rn.snapToGrid(e+y.x,f),S=rn.snapToGrid(i+y.y,f);l.setPosition(E,S,{restrict:x,deep:!0,ui:!0}),h.options.embedding.enabled&&(v.embedding||(this.prepareEmbedding(t),v.embedding=!0),this.processEmbedding(t,v))}stopNodeDragging(t,e,i){const l=this.getEventData(t);l.embedding&&this.finalizeEmbedding(t,l),l.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",t,e,i,this.cell)),l.moving=!1,l.embedding=!1}autoScrollGraph(t,e){const i=this.graph.getPlugin("scroller");i&&i.autoScroll(t,e)}}(function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag],l=e;return(i==null||i===c.toStringTag)&&typeof l.isNodeView=="function"&&typeof l.isEdgeView=="function"&&typeof l.confirmUpdate=="function"&&typeof l.update=="function"&&typeof l.findPortElem=="function"&&typeof l.resize=="function"&&typeof l.rotate=="function"&&typeof l.translate=="function"}c.isNodeView=t})(ve||(ve={})),ve.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),ve.registry.register("node",ve,!0);class Oe extends In{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.labelDestroyFn={}}get[Symbol.toStringTag](){return Oe.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const t=this.sourceView;if(!t){const i=this.cell.getSource();return new Gt(i.x,i.y)}const e=this.sourceMagnet;return t.isEdgeElement(e)?new Gt(this.sourceAnchor.x,this.sourceAnchor.y):t.getBBoxOfElement(e||t.container)}get targetBBox(){const t=this.targetView;if(!t){const i=this.cell.getTarget();return new Gt(i.x,i.y)}const e=this.targetMagnet;return t.isEdgeElement(e)?new Gt(this.targetAnchor.x,this.targetAnchor.y):t.getBBoxOfElement(e||t.container)}isEdgeView(){return!0}confirmUpdate(t,e={}){let i=t;if(this.hasAction(i,"source")){if(!this.updateTerminalProperties("source"))return i;i=this.removeAction(i,"source")}if(this.hasAction(i,"target")){if(!this.updateTerminalProperties("target"))return i;i=this.removeAction(i,"target")}return this.hasAction(i,"render")?(this.render(),i=this.removeAction(i,["render","update","labels","tools"]),i):(i=this.handleAction(i,"update",()=>this.update(e)),i=this.handleAction(i,"labels",()=>this.onLabelsChange(e)),i=this.handleAction(i,"tools",()=>this.renderTools()),i)}render(){return this.empty(),this.renderMarkup(),this.labelContainer=null,this.renderLabels(),this.update(),this.renderTools(),this}renderMarkup(){const t=this.cell.markup;if(t){if(typeof t=="string")throw new TypeError("Not support string markup.");return this.renderJSONMarkup(t)}throw new TypeError("Invalid edge markup.")}renderJSONMarkup(t){const e=this.parseJSONMarkup(t,this.container);this.selectors=e.selectors,this.container.append(e.fragment)}customizeLabels(){if(this.labelContainer){const t=this.cell,e=t.labels;for(let i=0,l=e.length;i<l;i+=1){const h=e[i],f=this.labelCache[i],v=this.labelSelectors[i],y=this.graph.options.onEdgeLabelRendered;if(y){const x=y({edge:t,label:h,container:f,selectors:v});x&&(this.labelDestroyFn[i]=x)}}}}destroyCustomizeLabels(){const t=this.cell.labels;if(this.labelCache&&this.labelSelectors&&this.labelDestroyFn)for(let e=0,i=t.length;e<i;e+=1){const l=this.labelDestroyFn[e],h=this.labelCache[e],f=this.labelSelectors[e];l&&h&&f&&l({edge:this.cell,label:t[e],container:h,selectors:f})}this.labelDestroyFn={}}renderLabels(){const t=this.cell,e=t.getLabels(),i=e.length;let l=this.labelContainer;if(this.labelCache={},this.labelSelectors={},i<=0)return l&&l.parentNode&&l.parentNode.removeChild(l),this;l?this.empty(l):(l=Rn("g"),this.addClass(this.prefixClassName("edge-labels"),l),this.labelContainer=l);for(let h=0,f=e.length;h<f;h+=1){const v=e[h],y=this.normalizeLabelMarkup(this.parseLabelMarkup(v.markup));let x,E;if(y)x=y.node,E=y.selectors;else{const _=t.getDefaultLabel(),T=this.normalizeLabelMarkup(this.parseLabelMarkup(_.markup));x=T.node,E=T.selectors}x.setAttribute("data-index",`${h}`),l.appendChild(x);const S=this.rootSelector;if(E[S])throw new Error("Ambiguous label root selector.");E[S]=x,this.labelCache[h]=x,this.labelSelectors[h]=E}return l.parentNode==null&&this.container.appendChild(l),this.updateLabels(),this.customizeLabels(),this}onLabelsChange(t={}){this.destroyCustomizeLabels(),this.shouldRerenderLabels(t)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(t={}){const e=this.cell.previous("labels");if(e==null)return!0;if("propertyPathArray"in t&&"propertyValue"in t){const i=t.propertyPathArray||[],l=i.length;if(l>1){const h=i[1];if(e[h]){if(l===2)return typeof t.propertyValue=="object"&&uo(t.propertyValue,"markup");if(i[2]!=="markup")return!1}}}return!0}parseLabelMarkup(t){return t?typeof t=="string"?this.parseLabelStringMarkup(t):this.parseJSONMarkup(t):null}parseLabelStringMarkup(t){const e=Ee.createVectors(t),i=document.createDocumentFragment();for(let l=0,h=e.length;l<h;l+=1){const f=e[l].node;i.appendChild(f)}return{fragment:i,selectors:{}}}normalizeLabelMarkup(t){if(t==null)return;const e=t.fragment;if(!(e instanceof DocumentFragment)||!e.hasChildNodes())throw new Error("Invalid label markup.");let i;const l=e.childNodes;return l.length>1||l[0].nodeName.toUpperCase()!=="G"?i=Ee.create("g").append(e):i=Ee.create(l[0]),i.addClass(this.prefixClassName("edge-label")),{node:i.node,selectors:t.selectors}}updateLabels(){if(this.labelContainer){const t=this.cell,e=t.labels,i=this.can("edgeLabelMovable"),l=t.getDefaultLabel();for(let h=0,f=e.length;h<f;h+=1){const v=this.labelCache[h],y=this.labelSelectors[h];v.setAttribute("cursor",i?"move":"default");const x=e[h],E=An({},l.attrs,x.attrs);this.updateAttrs(v,E,{selectors:y,rootBBox:x.size?Gt.fromSize(x.size):void 0})}}}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}update(t={}){this.cleanCache(),this.updateConnection(t);const e=this.cell.getAttrs();return e!=null&&this.updateAttrs(this.container,e,{selectors:this.selectors}),this.updateLabelPositions(),this.updateTools(t),this}removeRedundantLinearVertices(t={}){const e=this.cell,i=e.getVertices(),l=[this.sourceAnchor,...i,this.targetAnchor],h=l.length,f=new bn(l);f.simplify({threshold:.01});const v=f.points.map(x=>x.toJSON()),y=v.length;return h===y?0:(e.setVertices(v.slice(1,y-1),t),h-y)}getTerminalView(t){switch(t){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalAnchor(t){switch(t){case"source":return W.create(this.sourceAnchor);case"target":return W.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalConnectionPoint(t){switch(t){case"source":return W.create(this.sourcePoint);case"target":return W.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${t}'`)}}getTerminalMagnet(t,e={}){switch(t){case"source":{if(e.raw)return this.sourceMagnet;const i=this.sourceView;return i?this.sourceMagnet||i.container:null}case"target":{if(e.raw)return this.targetMagnet;const i=this.targetView;return i?this.targetMagnet||i.container:null}default:throw new Error(`Unknown terminal type '${t}'`)}}updateConnection(t={}){const e=this.cell;if(t.translateBy&&e.isFragmentDescendantOf(t.translateBy)){const i=t.tx||0,l=t.ty||0;this.routePoints=new bn(this.routePoints).translate(i,l).points,this.translateConnectionPoints(i,l),this.path.translate(i,l)}else{const i=e.getVertices(),l=this.findAnchors(i);this.sourceAnchor=l.source,this.targetAnchor=l.target,this.routePoints=this.findRoutePoints(i);const h=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=h.source,this.targetPoint=h.target;const f=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,f.source||this.sourcePoint,f.target||this.targetPoint)}this.cleanCache()}findAnchors(t){const e=this.cell,i=e.source,l=e.target,h=t[0],f=t[t.length-1];return l.priority&&!i.priority?this.findAnchorsOrdered("target",f,"source",h):this.findAnchorsOrdered("source",h,"target",f)}findAnchorsOrdered(t,e,i,l){let h,f;const v=this.cell,y=v[t],x=v[i],E=this.getTerminalView(t),S=this.getTerminalView(i),_=this.getTerminalMagnet(t),T=this.getTerminalMagnet(i);if(E){let D;e?D=W.create(e):S?D=T:D=W.create(x),h=this.getAnchor(y.anchor,E,_,D,t)}else h=W.create(y);if(S){const D=W.create(l||h);f=this.getAnchor(x.anchor,S,T,D,i)}else f=W.isPointLike(x)?W.create(x):new W;return{[t]:h,[i]:f}}getAnchor(t,e,i,l,h){const f=e.isEdgeElement(i),v=this.graph.options.connecting;let y=typeof t=="string"?{name:t}:t;if(!y){const S=f?(h==="source"?v.sourceEdgeAnchor:v.targetEdgeAnchor)||v.edgeAnchor:(h==="source"?v.sourceAnchor:v.targetAnchor)||v.anchor;y=typeof S=="string"?{name:S}:S}if(!y)throw new Error("Anchor should be specified.");let x;const E=y.name;if(f){const S=Bo.registry.get(E);if(typeof S!="function")return Bo.registry.onNotFound(E);x=ue(S,this,e,i,l,y.args||{},h)}else{const S=Ls.registry.get(E);if(typeof S!="function")return Ls.registry.onNotFound(E);x=ue(S,this,e,i,l,y.args||{},h)}return x?x.round(this.POINT_ROUNDING):new W}findRoutePoints(t=[]){const e=this.graph.options.connecting.router||ti.presets.normal,i=this.cell.getRouter()||e;let l;if(typeof i=="function")l=ue(i,this,t,{},this);else{const h=typeof i=="string"?i:i.name,f=typeof i=="string"?{}:i.args||{},v=h?ti.registry.get(h):ti.presets.normal;if(typeof v!="function")return ti.registry.onNotFound(h);l=ue(v,this,t,f,this)}return l==null?t.map(h=>W.create(h)):l.map(h=>W.create(h))}findConnectionPoints(t,e,i){const l=this.cell,h=this.graph.options.connecting,f=l.getSource(),v=l.getTarget(),y=this.sourceView,x=this.targetView,E=t[0],S=t[t.length-1];let _;if(y&&!y.isEdgeElement(this.sourceMagnet)){const D=this.sourceMagnet||y.container,L=E||i,B=new Wt(L,e),j=f.connectionPoint||h.sourceConnectionPoint||h.connectionPoint;_=this.getConnectionPoint(j,y,D,B,"source")}else _=e;let T;if(x&&!x.isEdgeElement(this.targetMagnet)){const D=this.targetMagnet||x.container,L=v.connectionPoint||h.targetConnectionPoint||h.connectionPoint,B=S||e,j=new Wt(B,i);T=this.getConnectionPoint(L,x,D,j,"target")}else T=i;return{source:_,target:T}}getConnectionPoint(t,e,i,l,h){const f=l.end;if(t==null)return f;const v=typeof t=="string"?t:t.name,y=typeof t=="string"?{}:t.args,x=zo.registry.get(v);if(typeof x!="function")return zo.registry.onNotFound(v);const E=ue(x,this,l,e,i,y||{},h);return E?E.round(this.POINT_ROUNDING):f}findMarkerPoints(t,e,i){const l=S=>{const _=this.cell.getAttrs(),T=Object.keys(_);for(let D=0,L=T.length;D<L;D+=1){const B=_[T[D]];if(B[`${S}Marker`]||B[`${S}-marker`]){const j=B.strokeWidth||B["stroke-width"];if(j)return parseFloat(j);break}}return null},h=t[0],f=t[t.length-1];let v,y;const x=l("source");x&&(v=e.clone().move(h||i,-x));const E=l("target");return E&&(y=i.clone().move(f||e,-E)),this.sourceMarkerPoint=v||e.clone(),this.targetMarkerPoint=y||i.clone(),{source:v,target:y}}findPath(t,e,i){const l=this.cell.getConnector()||this.graph.options.connecting.connector;let h,f,v;if(typeof l=="string"?h=l:(h=l.name,f=l.args),h){const x=g.registry.get(h);if(typeof x!="function")return g.registry.onNotFound(h);v=x}else v=g.presets.normal;const y=ue(v,this,e,i,t,Object.assign(Object.assign({},f),{raw:!0}),this);return typeof y=="string"?he.parse(y):y}translateConnectionPoints(t,e){this.sourcePoint.translate(t,e),this.targetPoint.translate(t,e),this.sourceAnchor.translate(t,e),this.targetAnchor.translate(t,e),this.sourceMarkerPoint.translate(t,e),this.targetMarkerPoint.translate(t,e)}updateLabelPositions(){if(this.labelContainer==null)return this;if(!this.path)return this;const e=this.cell,i=e.getLabels();if(i.length===0)return this;const l=e.getDefaultLabel(),h=this.normalizeLabelPosition(l.position);for(let f=0,v=i.length;f<v;f+=1){const y=i[f],x=this.labelCache[f];if(!x)continue;const E=this.normalizeLabelPosition(y.position),S=An({},h,E),_=this.getLabelTransformationMatrix(S);x.setAttribute("transform",Io(_))}return this}updateTerminalProperties(t){const e=this.cell,i=this.graph,l=e[t],h=l&&l.cell,f=`${t}View`;if(!h)return this[f]=null,this.updateTerminalMagnet(t),!0;const v=i.getCellById(h);if(!v)throw new Error(`Edge's ${t} node with id "${h}" not exists`);const y=v.findView(i);return y?(this[f]=y,this.updateTerminalMagnet(t),!0):!1}updateTerminalMagnet(t){const e=`${t}Magnet`,i=this.getTerminalView(t);if(i){let l=i.getMagnetFromEdgeTerminal(this.cell[t]);l===i.container&&(l=null),this[e]=l}else this[e]=null}getLabelPositionAngle(t){const e=this.cell.getLabelAt(t);return e&&e.position&&typeof e.position=="object"&&e.position.angle||0}getLabelPositionArgs(t){const e=this.cell.getLabelAt(t);if(e&&e.position&&typeof e.position=="object")return e.position.options}getDefaultLabelPositionArgs(){const t=this.cell.getDefaultLabel();if(t&&t.position&&typeof t.position=="object")return t.position.options}mergeLabelPositionArgs(t,e){return t===null?null:t===void 0?e===null?null:e:An({},e,t)}getConnection(){return this.path!=null?this.path.clone():null}getConnectionPathData(){if(this.path==null)return"";const t=this.cache.pathCache;return uo(t,"data")||(t.data=this.path.serialize()),t.data||""}getConnectionSubdivisions(){if(this.path==null)return null;const t=this.cache.pathCache;return uo(t,"segmentSubdivisions")||(t.segmentSubdivisions=this.path.getSegmentSubdivisions()),t.segmentSubdivisions}getConnectionLength(){if(this.path==null)return 0;const t=this.cache.pathCache;return uo(t,"length")||(t.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),t.length}getPointAtLength(t){return this.path==null?null:this.path.pointAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(t){return this.path==null?null:(Ar(t)&&(t=parseFloat(t)/100),this.path.pointAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(t){return this.path==null?null:this.path.tangentAtLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(t){return this.path==null?null:this.path.tangentAt(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(t){return this.path==null?null:this.path.closestPoint(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(t){return this.path==null?null:this.path.closestPointLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(t){return this.path==null?null:this.path.closestPointNormalizedLength(t,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(t,e,i,l){const h={distance:0};let f=0,v;typeof i=="number"?(f=i,v=l):v=i,v!=null&&(h.options=v);const y=v&&v.absoluteOffset,x=!(v&&v.absoluteDistance),E=v&&v.absoluteDistance&&v.reverseDistance,S=this.path,_={segmentSubdivisions:this.getConnectionSubdivisions()},T=new W(t,e),D=S.closestPointT(T,_),L=this.getConnectionLength()||0;let B=S.lengthAtT(D,_);x&&(B=L>0?B/L:0),E&&(B=-1*(L-B)||1),h.distance=B;let j;y||(j=S.tangentAtT(D));let V;if(j)V=j.pointOffset(T);else{const G=S.pointAtT(D),X=T.diff(G);V={x:X.x,y:X.y}}return h.offset=V,h.angle=f,h}normalizeLabelPosition(t){return typeof t=="number"?{distance:t}:t}getLabelTransformationMatrix(t){const e=this.normalizeLabelPosition(t),i=e.options||{},l=e.angle||0,h=e.distance,f=h>0&&h<=1;let v=0;const y={x:0,y:0},x=e.offset;x&&(typeof x=="number"?v=x:(x.x!=null&&(y.x=x.x),x.y!=null&&(y.y=x.y)));const E=y.x!==0||y.y!==0||v===0,S=i.keepGradient,_=i.ensureLegibility,T=this.path,D={segmentSubdivisions:this.getConnectionSubdivisions()},L=f?h*this.getConnectionLength():h,B=T.tangentAtLength(L,D);let j,V=l;if(B){if(E)j=B.start,j.translate(y);else{const G=B.clone();G.rotate(-90,B.start),G.setLength(v),j=G.end}S&&(V=B.angle()+l,_&&(V=$e.normalize((V+90)%180-90)))}else j=T.start,E&&j.translate(y);return _n().translate(j.x,j.y).rotate(V)}getVertexIndex(t,e){const l=this.cell.getVertices(),h=this.getClosestPointLength(new W(t,e));let f=0;if(h!=null)for(const v=l.length;f<v;f+=1){const y=l[f],x=this.getClosestPointLength(y);if(x!=null&&h<x)break}return f}getEventArgs(t,e,i){const l=this,h=l.cell,f=h;return e==null||i==null?{e:t,view:l,edge:h,cell:f}:{e:t,x:e,y:i,view:l,edge:h,cell:f}}notifyUnhandledMouseDown(t,e,i){this.notify("edge:unhandled:mousedown",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(t,e,i){super.onMouseDown(t,e,i),this.notify("edge:mousedown",this.getEventArgs(t,e,i))}notifyMouseMove(t,e,i){super.onMouseMove(t,e,i),this.notify("edge:mousemove",this.getEventArgs(t,e,i))}notifyMouseUp(t,e,i){super.onMouseUp(t,e,i),this.notify("edge:mouseup",this.getEventArgs(t,e,i))}onClick(t,e,i){super.onClick(t,e,i),this.notify("edge:click",this.getEventArgs(t,e,i))}onDblClick(t,e,i){super.onDblClick(t,e,i),this.notify("edge:dblclick",this.getEventArgs(t,e,i))}onContextMenu(t,e,i){super.onContextMenu(t,e,i),this.notify("edge:contextmenu",this.getEventArgs(t,e,i))}onMouseDown(t,e,i){this.notifyMouseDown(t,e,i),this.startEdgeDragging(t,e,i)}onMouseMove(t,e,i){const l=this.getEventData(t);switch(l.action){case"drag-label":{this.dragLabel(t,e,i);break}case"drag-arrowhead":{this.dragArrowhead(t,e,i);break}case"drag-edge":{this.dragEdge(t,e,i);break}default:break}return this.notifyMouseMove(t,e,i),l}onMouseUp(t,e,i){const l=this.getEventData(t);switch(l.action){case"drag-label":{this.stopLabelDragging(t,e,i);break}case"drag-arrowhead":{this.stopArrowheadDragging(t,e,i);break}case"drag-edge":{this.stopEdgeDragging(t,e,i);break}default:break}return this.notifyMouseUp(t,e,i),this.checkMouseleave(t),l}onMouseOver(t){super.onMouseOver(t),this.notify("edge:mouseover",this.getEventArgs(t))}onMouseOut(t){super.onMouseOut(t),this.notify("edge:mouseout",this.getEventArgs(t))}onMouseEnter(t){super.onMouseEnter(t),this.notify("edge:mouseenter",this.getEventArgs(t))}onMouseLeave(t){super.onMouseLeave(t),this.notify("edge:mouseleave",this.getEventArgs(t))}onMouseWheel(t,e,i,l){super.onMouseWheel(t,e,i,l),this.notify("edge:mousewheel",Object.assign({delta:l},this.getEventArgs(t,e,i)))}onCustomEvent(t,e,i,l){if(Vh(t.target,"edge-tool",this.container)){if(t.stopPropagation(),this.can("useEdgeTools")){if(e==="edge:remove"){this.cell.remove({ui:!0});return}this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,i,l)))}this.notifyMouseDown(t,i,l)}else this.notify("edge:customevent",Object.assign({name:e},this.getEventArgs(t,i,l))),super.onCustomEvent(t,e,i,l)}onLabelMouseDown(t,e,i){this.notifyMouseDown(t,e,i),this.startLabelDragging(t,e,i),this.getEventData(t).stopPropagation&&t.stopPropagation()}startEdgeDragging(t,e,i){if(!this.can("edgeMovable")){this.notifyUnhandledMouseDown(t,e,i);return}this.setEventData(t,{x:e,y:i,moving:!1,action:"drag-edge"})}dragEdge(t,e,i){const l=this.getEventData(t);l.moving||(l.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(e-l.x,i-l.y,{ui:!0}),this.setEventData(t,{x:e,y:i}),this.notify("edge:moving",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(t,e,i){const l=this.getEventData(t);l.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e:t,x:e,y:i,view:this,cell:this.cell,edge:this.cell})),l.moving=!1}prepareArrowheadDragging(t,e){const i=this.getTerminalMagnet(t),l={action:"drag-arrowhead",x:e.x,y:e.y,isNewEdge:e.isNewEdge===!0,terminalType:t,initialMagnet:i,initialTerminal:Jc(this.cell[t]),fallbackAction:e.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(t),options:e.options};return this.beforeArrowheadDragging(l),l}createValidateConnectionArgs(t){const e=[];e[4]=t,e[5]=this;let i,l=0,h=0;t==="source"?(l=2,i="target"):(h=2,i="source");const f=this.cell[i],v=f.cell;if(v){let y;const x=e[l]=this.graph.findViewByCell(v);x&&(y=x.getMagnetFromEdgeTerminal(f),y===x.container&&(y=void 0)),e[l+1]=y}return(y,x)=>(e[h]=y,e[h+1]=y.container===x?void 0:x,e)}beforeArrowheadDragging(t){t.zIndex=this.cell.zIndex,this.cell.toFront();const e=this.container.style;t.pointerEvents=e.pointerEvents,e.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(t)}afterArrowheadDragging(t){t.zIndex!=null&&(this.cell.setZIndex(t.zIndex,{ui:!0}),t.zIndex=null);const e=this.container;e.style.pointerEvents=t.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(t)}validateConnection(t,e,i,l,h,f,v){const y=this.graph.options.connecting,x=y.allowLoop,E=y.allowNode,S=y.allowEdge,_=y.allowPort,T=y.allowMulti,D=y.validateConnection,L=f?f.cell:null,B=h==="target"?i:t,j=h==="target"?l:e;let V=!0;const G=X=>{const K=h==="source"?v?v.port:null:L?L.getSourcePortId():null,it=h==="target"?v?v.port:null:L?L.getTargetPortId():null;return ue(X,this.graph,{edge:L,edgeView:f,sourceView:t,targetView:i,sourcePort:K,targetPort:it,sourceMagnet:e,targetMagnet:l,sourceCell:t?t.cell:null,targetCell:i?i.cell:null,type:h})};if(x!=null&&(typeof x=="boolean"?!x&&t===i&&(V=!1):V=G(x)),V&&_!=null&&(typeof _=="boolean"?!_&&j&&(V=!1):V=G(_)),V&&S!=null&&(typeof S=="boolean"?!S&&Oe.isEdgeView(B)&&(V=!1):V=G(S)),V&&E!=null&&j==null&&(typeof E=="boolean"?!E&&ve.isNodeView(B)&&(V=!1):V=G(E)),V&&T!=null&&f){const X=f.cell,K=h==="source"?v:X.getSource(),it=h==="target"?v:X.getTarget(),At=v?this.graph.getCellById(v.cell):null;if(K&&it&&K.cell&&it.cell&&At)if(typeof T=="function")V=G(T);else{const jt=this.graph.model.getConnectedEdges(At,{outgoing:h==="source",incoming:h==="target"});jt.length&&(T==="withPort"?jt.some(ie=>{const Kt=ie.getSource(),ce=ie.getTarget();return Kt&&ce&&Kt.cell===K.cell&&ce.cell===it.cell&&Kt.port!=null&&Kt.port===K.port&&ce.port!=null&&ce.port===it.port})&&(V=!1):T||jt.some(ie=>{const Kt=ie.getSource(),ce=ie.getTarget();return Kt&&ce&&Kt.cell===K.cell&&ce.cell===it.cell})&&(V=!1))}}return V&&D!=null&&(V=G(D)),V}allowConnectToBlank(t){const e=this.graph,l=e.options.connecting.allowBlank;if(typeof l!="function")return!!l;const h=e.findViewByCell(t),f=t.getSourceCell(),v=t.getTargetCell(),y=e.findViewByCell(f),x=e.findViewByCell(v);return ue(l,e,{edge:t,edgeView:h,sourceCell:f,targetCell:v,sourceView:y,targetView:x,sourcePort:t.getSourcePortId(),targetPort:t.getTargetPortId(),sourceMagnet:h.sourceMagnet,targetMagnet:h.targetMagnet})}validateEdge(t,e,i){const l=this.graph;if(!this.allowConnectToBlank(t)){const f=t.getSourceCellId(),v=t.getTargetCellId();if(!(f&&v))return!1}const h=l.options.connecting.validateEdge;return h?ue(h,l,{edge:t,type:e,previous:i}):!0}arrowheadDragging(t,e,i,l){l.x=e,l.y=i,l.currentTarget!==t&&(l.currentMagnet&&l.currentView&&l.currentView.unhighlight(l.currentMagnet,{type:"magnetAdsorbed"}),l.currentView=this.graph.findViewByElem(t),l.currentView?(l.currentMagnet=l.currentView.findMagnet(t),l.currentMagnet&&this.validateConnection(...l.getValidateConnectionArgs(l.currentView,l.currentMagnet),l.currentView.getEdgeTerminal(l.currentMagnet,e,i,this.cell,l.terminalType))?l.currentView.highlight(l.currentMagnet,{type:"magnetAdsorbed"}):l.currentMagnet=null):l.currentMagnet=null),l.currentTarget=t,this.cell.prop(l.terminalType,{x:e,y:i},Object.assign(Object.assign({},l.options),{ui:!0}))}arrowheadDragged(t,e,i){const l=t.currentView,h=t.currentMagnet;if(!h||!l)return;l.unhighlight(h,{type:"magnetAdsorbed"});const f=t.terminalType,v=l.getEdgeTerminal(h,e,i,this.cell,f);this.cell.setTerminal(f,v,{ui:!0})}snapArrowhead(t,e,i){const l=this.graph,{snap:h,allowEdge:f}=l.options.connecting,v=typeof h=="object"&&h.radius||50,y=typeof h=="object"&&h.anchor||"center",x=l.renderer.findViewsInArea({x:t-v,y:e-v,width:2*v,height:2*v},{nodeOnly:!0});if(f){const X=l.renderer.findEdgeViewsFromPoint({x:t,y:e},v).filter(K=>K!==this);x.push(...X)}const E=i.closestView||null,S=i.closestMagnet||null;i.closestView=null,i.closestMagnet=null;let _,T=Number.MAX_SAFE_INTEGER;const D=new W(t,e);x.forEach(X=>{if(X.container.getAttribute("magnet")!=="false"){if(X.isNodeView())_=y==="center"?X.cell.getBBox().getCenter().distance(D):X.cell.getBBox().getNearestPointToPoint(D).distance(D);else if(X.isEdgeView()){const K=X.getClosestPoint(D);K?_=K.distance(D):_=Number.MAX_SAFE_INTEGER}_<v&&_<T&&(S===X.container||this.validateConnection(...i.getValidateConnectionArgs(X,null),X.getEdgeTerminal(X.container,t,e,this.cell,i.terminalType)))&&(T=_,i.closestView=X,i.closestMagnet=X.container)}X.container.querySelectorAll("[magnet]").forEach(K=>{if(K.getAttribute("magnet")!=="false"){const it=X.getBBoxOfElement(K);_=D.distance(it.getCenter()),_<v&&_<T&&(S===K||this.validateConnection(...i.getValidateConnectionArgs(X,K),X.getEdgeTerminal(K,t,e,this.cell,i.terminalType)))&&(T=_,i.closestView=X,i.closestMagnet=K)}})});let L;const B=i.terminalType,j=i.closestView,V=i.closestMagnet,G=S!==V;if(E&&G&&E.unhighlight(S,{type:"magnetAdsorbed"}),j){if(!G)return;j.highlight(V,{type:"magnetAdsorbed"}),L=j.getEdgeTerminal(V,t,e,this.cell,B)}else L={x:t,y:e};this.cell.setTerminal(B,L,{},Object.assign(Object.assign({},i.options),{ui:!0}))}snapArrowheadEnd(t){const e=t.closestView,i=t.closestMagnet;e&&i&&(e.unhighlight(i,{type:"magnetAdsorbed"}),t.currentMagnet=e.findMagnet(i)),t.closestView=null,t.closestMagnet=null}finishEmbedding(t){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(t.zIndex=null)}fallbackConnection(t){switch(t.fallbackAction){case"remove":this.cell.remove({ui:!0});break;case"revert":default:this.cell.prop(t.terminalType,t.initialTerminal,{ui:!0});break}}notifyConnectionEvent(t,e){const i=t.terminalType,l=t.initialTerminal,h=this.cell[i];if(h&&!R.equalTerminals(l,h)){const v=this.graph,y=l,x=y.cell?v.getCellById(y.cell):null,E=y.port,S=x?v.findViewByCell(x):null,_=x||t.isNewEdge?null:W.create(l).toJSON(),T=h,D=T.cell?v.getCellById(T.cell):null,L=T.port,B=D?v.findViewByCell(D):null,j=D?null:W.create(h).toJSON();this.notify("edge:connected",{e,previousCell:x,previousPort:E,previousView:S,previousPoint:_,currentCell:D,currentView:B,currentPort:L,currentPoint:j,previousMagnet:t.initialMagnet,currentMagnet:t.currentMagnet,edge:this.cell,view:this,type:i,isNew:t.isNewEdge})}}highlightAvailableMagnets(t){const e=this.graph,i=e.model.getCells();t.marked={};for(let l=0,h=i.length;l<h;l+=1){const f=e.findViewByCell(i[l]);if(!f||f.cell.id===this.cell.id)continue;const v=Array.prototype.slice.call(f.container.querySelectorAll("[magnet]"));f.container.getAttribute("magnet")!=="false"&&v.push(f.container);const y=v.filter(x=>this.validateConnection(...t.getValidateConnectionArgs(f,x),f.getEdgeTerminal(x,t.x,t.y,this.cell,t.terminalType)));if(y.length>0){for(let x=0,E=y.length;x<E;x+=1)f.highlight(y[x],{type:"magnetAvailable"});f.highlight(null,{type:"nodeAvailable"}),t.marked[f.cell.id]=y}}}unhighlightAvailableMagnets(t){const e=t.marked||{};Object.keys(e).forEach(i=>{const l=this.graph.findViewByCell(i);l&&(e[i].forEach(f=>{l.unhighlight(f,{type:"magnetAvailable"})}),l.unhighlight(null,{type:"nodeAvailable"}))}),t.marked=null}startArrowheadDragging(t,e,i){if(!this.can("arrowheadMovable")){this.notifyUnhandledMouseDown(t,e,i);return}const h=t.target.getAttribute("data-terminal"),f=this.prepareArrowheadDragging(h,{x:e,y:i});this.setEventData(t,f)}dragArrowhead(t,e,i){const l=this.getEventData(t);this.graph.options.connecting.snap?this.snapArrowhead(e,i,l):this.arrowheadDragging(this.getEventTarget(t),e,i,l)}stopArrowheadDragging(t,e,i){const l=this.graph,h=this.getEventData(t);l.options.connecting.snap?this.snapArrowheadEnd(h):this.arrowheadDragged(h,e,i),this.validateEdge(this.cell,h.terminalType,h.initialTerminal)?(this.finishEmbedding(h),this.notifyConnectionEvent(h,t)):this.fallbackConnection(h),this.afterArrowheadDragging(h)}startLabelDragging(t,e,i){if(this.can("edgeLabelMovable")){const l=t.currentTarget,h=parseInt(l.getAttribute("data-index"),10),f=this.getLabelPositionAngle(h),v=this.getLabelPositionArgs(h),y=this.getDefaultLabelPositionArgs(),x=this.mergeLabelPositionArgs(v,y);this.setEventData(t,{index:h,positionAngle:f,positionArgs:x,stopPropagation:!0,action:"drag-label"})}else this.setEventData(t,{stopPropagation:!0});this.graph.view.delegateDragEvents(t,this)}dragLabel(t,e,i){const l=this.getEventData(t),h=this.cell.getLabelAt(l.index),f=An({},h,{position:this.getLabelPosition(e,i,l.positionAngle,l.positionArgs)});this.cell.setLabelAt(l.index,f)}stopLabelDragging(t,e,i){}}(function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag],l=e;return(i==null||i===c.toStringTag)&&typeof l.isNodeView=="function"&&typeof l.isEdgeView=="function"&&typeof l.confirmUpdate=="function"&&typeof l.update=="function"&&typeof l.getConnection=="function"}c.isEdgeView=t})(Oe||(Oe={})),Oe.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],tools:["tools"],vertices:["vertices","update"]}}),Oe.registry.register("edge",Oe,!0);var kt=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class Qt extends dn{get disposeContainer(){return!1}get options(){return this.graph.options}constructor(t){super(),this.graph=t;const{selectors:e,fragment:i}=on.parseJSONMarkup(Qt.markup);this.background=e.background,this.grid=e.grid,this.svg=e.svg,this.defs=e.defs,this.viewport=e.viewport,this.primer=e.primer,this.stage=e.stage,this.decorator=e.decorator,this.overlay=e.overlay,this.container=this.options.container,this.restore=Qt.snapshoot(this.container),He(this.container,this.prefixClassName("graph")),Tn(this.container,i),this.delegateEvents()}delegateEvents(){const t=this.constructor;return super.delegateEvents(t.events),this}guard(t,e){return t.type==="mousedown"&&t.button===2||this.options.guard&&this.options.guard(t,e)?!0:t.data&&t.data.guarded!==void 0?t.data.guarded:!(e&&e.cell&&O.isCell(e.cell)||this.svg===t.target||this.container===t.target||this.svg.contains(t.target))}findView(t){return this.graph.findViewByElem(t)}onDblClick(t){this.options.preventDefaultDblClick&&t.preventDefault();const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const l=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onDblClick(e,l.x,l.y):this.graph.trigger("blank:dblclick",{e,x:l.x,y:l.y})}onClick(t){if(this.getMouseMovedCount(t)<=this.options.clickThreshold){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const l=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onClick(e,l.x,l.y):this.graph.trigger("blank:click",{e,x:l.x,y:l.y})}}isPreventDefaultContextMenu(t){let e=this.options.preventDefaultContextMenu;return typeof e=="function"&&(e=ue(e,this.graph,{view:t})),e}onContextMenu(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.isPreventDefaultContextMenu(i)&&t.preventDefault(),this.guard(e,i))return;const l=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onContextMenu(e,l.x,l.y):this.graph.trigger("blank:contextmenu",{e,x:l.x,y:l.y})}delegateDragEvents(t,e){t.data==null&&(t.data={}),this.setEventData(t,{currentView:e||null,mouseMovedCount:0,startPosition:{x:t.clientX,y:t.clientY}});const i=this.constructor;this.delegateDocumentEvents(i.documentEvents,t.data),this.undelegateEvents()}getMouseMovedCount(t){return this.getEventData(t).mouseMovedCount||0}onMouseDown(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;this.options.preventDefaultMouseDown&&t.preventDefault();const l=this.graph.snapToGrid(e.clientX,e.clientY);i?i.onMouseDown(e,l.x,l.y):(this.options.preventDefaultBlankAction&&["touchstart"].includes(e.type)&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e,x:l.x,y:l.y})),this.delegateDragEvents(e,i)}onMouseMove(t){const e=this.getEventData(t),i=e.startPosition;if(i&&i.x===t.clientX&&i.y===t.clientY||(e.mouseMovedCount==null&&(e.mouseMovedCount=0),e.mouseMovedCount+=1,e.mouseMovedCount<=this.options.moveThreshold))return;const h=this.normalizeEvent(t),f=this.graph.snapToGrid(h.clientX,h.clientY),v=e.currentView;v?v.onMouseMove(h,f.x,f.y):this.graph.trigger("blank:mousemove",{e:h,x:f.x,y:f.y}),this.setEventData(h,e)}onMouseUp(t){this.undelegateDocumentEvents();const e=this.normalizeEvent(t),i=this.graph.snapToGrid(e.clientX,e.clientY),h=this.getEventData(t).currentView;if(h?h.onMouseUp(e,i.x,i.y):this.graph.trigger("blank:mouseup",{e,x:i.x,y:i.y}),!t.isPropagationStopped()){const f=new Pr(t,{type:"click",data:t.data});this.onClick(f)}t.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(!this.guard(e,i))if(i)i.onMouseOver(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseover",{e})}}onMouseOut(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(!this.guard(e,i))if(i)i.onMouseOut(e);else{if(this.container===e.target)return;this.graph.trigger("blank:mouseout",{e})}}onMouseEnter(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const l=this.graph.findViewByElem(e.relatedTarget);if(i){if(l===i)return;i.onMouseEnter(e)}else{if(l)return;this.graph.trigger("graph:mouseenter",{e})}}onMouseLeave(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const l=this.graph.findViewByElem(e.relatedTarget);if(i){if(l===i)return;i.onMouseLeave(e)}else{if(l)return;this.graph.trigger("graph:mouseleave",{e})}}onMouseWheel(t){const e=this.normalizeEvent(t),i=this.findView(e.target);if(this.guard(e,i))return;const l=e.originalEvent,h=this.graph.snapToGrid(l.clientX,l.clientY),f=Math.max(-1,Math.min(1,l.wheelDelta||-l.detail));i?i.onMouseWheel(e,h.x,h.y,f):this.graph.trigger("blank:mousewheel",{e,delta:f,x:h.x,y:h.y})}onCustomEvent(t){const e=t.currentTarget,i=e.getAttribute("event")||e.getAttribute("data-event");if(i){const l=this.findView(e);if(l){const h=this.normalizeEvent(t);if(this.guard(h,l))return;const f=this.graph.snapToGrid(h.clientX,h.clientY);l.onCustomEvent(h,i,f.x,f.y)}}}handleMagnetEvent(t,e){const i=t.currentTarget,l=i.getAttribute("magnet");if(l&&l.toLowerCase()!=="false"){const h=this.findView(i);if(h){const f=this.normalizeEvent(t);if(this.guard(f,h))return;const v=this.graph.snapToGrid(f.clientX,f.clientY);ue(e,this.graph,h,f,i,v.x,v.y)}}}onMagnetMouseDown(t){this.handleMagnetEvent(t,(e,i,l,h,f)=>{e.onMagnetMouseDown(i,l,h,f)})}onMagnetDblClick(t){this.handleMagnetEvent(t,(e,i,l,h,f)=>{e.onMagnetDblClick(i,l,h,f)})}onMagnetContextMenu(t){const e=this.findView(t.target);this.isPreventDefaultContextMenu(e)&&t.preventDefault(),this.handleMagnetEvent(t,(i,l,h,f,v)=>{i.onMagnetContextMenu(l,h,f,v)})}onLabelMouseDown(t){const e=t.currentTarget,i=this.findView(e);if(i){const l=this.normalizeEvent(t);if(this.guard(l,i))return;const h=this.graph.snapToGrid(l.clientX,l.clientY);i.onLabelMouseDown(l,h.x,h.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}kt([dn.dispose()],Qt.prototype,"dispose",null),function(c){const t=`${Jn.prefixCls}-graph`;c.markup=[{ns:Dn.xhtml,tagName:"div",selector:"background",className:`${t}-background`},{ns:Dn.xhtml,tagName:"div",selector:"grid",className:`${t}-grid`},{ns:Dn.svg,tagName:"svg",selector:"svg",className:`${t}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":Dn.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${t}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${t}-svg-primer`},{tagName:"g",selector:"stage",className:`${t}-svg-stage`},{tagName:"g",selector:"decorator",className:`${t}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${t}-svg-overlay`}]}]}];function e(i){const l=i.cloneNode();return i.childNodes.forEach(h=>l.appendChild(h)),()=>{for(ps(i);i.attributes.length>0;)i.removeAttribute(i.attributes[0].name);for(let h=0,f=l.attributes.length;h<f;h+=1){const v=l.attributes[h];i.setAttribute(v.name,v.value)}l.childNodes.forEach(h=>i.appendChild(h))}}c.snapshoot=e}(Qt||(Qt={})),function(c){const t=Jn.prefixCls;c.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${t}-cell`]:"onMouseEnter",[`mouseleave  .${t}-cell`]:"onMouseLeave",[`mouseenter  .${t}-cell-tools`]:"onMouseEnter",[`mouseleave  .${t}-cell-tools`]:"onMouseLeave",[`mousedown   .${t}-cell [event]`]:"onCustomEvent",[`touchstart  .${t}-cell [event]`]:"onCustomEvent",[`mousedown   .${t}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${t}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${t}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${t}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${t}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${t}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${t}-cell image`]:"onImageDragStart",[`mousedown   .${t}-edge .${t}-edge-label`]:"onLabelMouseDown",[`touchstart  .${t}-edge .${t}-edge-label`]:"onLabelMouseDown"},c.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(Qt||(Qt={}));const Xe=`.x6-graph {
  position: relative;
  overflow: hidden;
  outline: none;
  touch-action: none;
}
.x6-graph-background,
.x6-graph-grid,
.x6-graph-svg {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
}
.x6-graph-background-stage,
.x6-graph-grid-stage,
.x6-graph-svg-stage {
  user-select: none;
}
.x6-graph.x6-graph-pannable {
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}
.x6-graph.x6-graph-panning {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
  user-select: none;
}
.x6-node {
  cursor: move;
  /* stylelint-disable-next-line */
}
.x6-node.x6-node-immovable {
  cursor: default;
}
.x6-node * {
  -webkit-user-drag: none;
}
.x6-node .scalable * {
  vector-effect: non-scaling-stroke;
}
.x6-node [magnet='true'] {
  cursor: crosshair;
  transition: opacity 0.3s;
}
.x6-node [magnet='true']:hover {
  opacity: 0.7;
}
.x6-node foreignObject {
  display: block;
  overflow: visible;
  background-color: transparent;
}
.x6-node foreignObject > body {
  position: static;
  width: 100%;
  height: 100%;
  margin: 0;
  padding: 0;
  overflow: visible;
  background-color: transparent;
}
.x6-edge .source-marker,
.x6-edge .target-marker {
  vector-effect: non-scaling-stroke;
}
.x6-edge .connection {
  stroke-linejoin: round;
  fill: none;
}
.x6-edge .connection-wrap {
  cursor: move;
  opacity: 0;
  fill: none;
  stroke: #000;
  stroke-width: 15;
  stroke-linecap: round;
  stroke-linejoin: round;
}
.x6-edge .connection-wrap:hover {
  opacity: 0.4;
  stroke-opacity: 0.4;
}
.x6-edge .vertices {
  cursor: move;
  opacity: 0;
}
.x6-edge .vertices .vertex {
  fill: #1abc9c;
}
.x6-edge .vertices .vertex :hover {
  fill: #34495e;
  stroke: none;
}
.x6-edge .vertices .vertex-remove {
  cursor: pointer;
  fill: #fff;
}
.x6-edge .vertices .vertex-remove-area {
  cursor: pointer;
  opacity: 0.1;
}
.x6-edge .vertices .vertex-group:hover .vertex-remove-area {
  opacity: 1;
}
.x6-edge .arrowheads {
  cursor: move;
  opacity: 0;
}
.x6-edge .arrowheads .arrowhead {
  fill: #1abc9c;
}
.x6-edge .arrowheads .arrowhead :hover {
  fill: #f39c12;
  stroke: none;
}
.x6-edge .tools {
  cursor: pointer;
  opacity: 0;
}
.x6-edge .tools .tool-options {
  display: none;
}
.x6-edge .tools .tool-remove circle {
  fill: #f00;
}
.x6-edge .tools .tool-remove path {
  fill: #fff;
}
.x6-edge:hover .vertices,
.x6-edge:hover .arrowheads,
.x6-edge:hover .tools {
  opacity: 1;
}
.x6-highlight-opacity {
  opacity: 0.3;
}
.x6-cell-tool-editor {
  position: relative;
  display: inline-block;
  min-height: 1em;
  margin: 0;
  padding: 0;
  line-height: 1;
  white-space: normal;
  text-align: center;
  vertical-align: top;
  overflow-wrap: normal;
  outline: none;
  transform-origin: 0 0;
  -webkit-user-drag: none;
}
.x6-edge-tool-editor {
  border: 1px solid #275fc5;
  border-radius: 2px;
}
`;class ae extends de{get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}constructor(t){super(),this.graph=t,this.init()}init(){}}var Ae=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class Se extends ae{init(){Jn.autoInsertCSS&&em("core",Xe)}dispose(){nm("core")}}Ae([Se.dispose()],Se.prototype,"dispose",null);var Ge=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e},tn;(function(c){function t(e){const{grid:i,panning:l,mousewheel:h,embedding:f}=e,v=Ge(e,["grid","panning","mousewheel","embedding"]),y=e.container;if(y!=null)v.width==null&&(v.width=y.clientWidth),v.height==null&&(v.height=y.clientHeight);else throw new Error("Ensure the container of the graph is specified and valid");const x=An({},c.defaults,v),E={size:10,visible:!1};return typeof i=="number"?x.grid={size:i,visible:!1}:typeof i=="boolean"?x.grid=Object.assign(Object.assign({},E),{visible:i}):x.grid=Object.assign(Object.assign({},E),i),["panning","mousewheel","embedding"].forEach(_=>{const T=e[_];typeof T=="boolean"?x[_].enabled=T:x[_]=Object.assign(Object.assign({},x[_]),T)}),x}c.get=t})(tn||(tn={})),function(c){c.defaults={x:0,y:0,scaling:{min:.01,max:16},grid:{size:10,visible:!1},background:!1,panning:{enabled:!1,eventTypes:["leftMouseDown"]},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Jn.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Jn.prefix("available-magnet")}}},connecting:{snap:!1,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,allowBlank:!0,allowMulti:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",router:"normal",connector:"normal",validateConnection({type:t,sourceView:e,targetView:i}){return(t==="target"?i:e)!=null},createEdge(){return new Tt}},translating:{restrict:!1},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},async:!0,virtual:!1,guard:()=>!1}}(tn||(tn={}));var wn=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h},qn=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class jo extends ae{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(t){this.grid.visible!==t&&(this.grid.visible=t,this.update())}getGridSize(){return this.grid.size}setGridSize(t){this.grid.size=Math.max(t,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(t){this.clear(),this.instance=null,Object.assign(this.grid,t),this.patterns=this.resolveGrid(t),this.update()}update(t={}){const e=this.grid.size;if(e<=1||!this.grid.visible)return this.clear();const i=this.graph.matrix(),l=this.getInstance(),h=Array.isArray(t)?t:[t];this.patterns.forEach((y,x)=>{const E=`pattern_${x}`,S=i.a||1,_=i.d||1,{update:T,markup:D}=y,L=qn(y,["update","markup"]),B=Object.assign(Object.assign(Object.assign({},L),h[x]),{sx:S,sy:_,ox:i.e||0,oy:i.f||0,width:e*S,height:e*_});l.has(E)||l.add(E,Ee.create("pattern",{id:E,patternUnits:"userSpaceOnUse"},Ee.createVectors(D)).node);const j=l.get(E);typeof T=="function"&&T(j.childNodes[0],B);let V=B.ox%B.width;V<0&&(V+=B.width);let G=B.oy%B.height;G<0&&(G+=B.height),nn(j,{x:V,y:G,width:B.width,height:B.height})});const f=new XMLSerializer().serializeToString(l.root),v=`url(data:image/svg+xml;base64,${btoa(f)})`;this.elem.style.backgroundImage=v}getInstance(){return this.instance||(this.instance=new sr),this.instance}resolveGrid(t){if(!t)return[];const e=t.type;if(e==null)return[Object.assign(Object.assign({},sr.presets.dot),t.args)];const i=sr.registry.get(e);if(i){let l=t.args||[];return Array.isArray(l)||(l=[l]),Array.isArray(i)?i.map((h,f)=>Object.assign(Object.assign({},h),l[f])):[Object.assign(Object.assign({},i),l[0])]}return sr.registry.onNotFound(e)}dispose(){this.stopListening(),this.clear()}}wn([ae.dispose()],jo.prototype,"dispose",null);class $n extends ae{get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get stage(){return this.graph.view.stage}init(){this.resize()}getMatrix(){const t=this.viewport.getAttribute("transform");return t!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=t),_n(this.viewportMatrix)}setMatrix(t){const e=_n(t),i=Io(e);this.viewport.setAttribute("transform",i),this.viewportMatrix=e,this.viewportTransformString=i}resize(t,e){let i=t===void 0?this.options.width:t,l=e===void 0?this.options.height:e;this.options.width=i,this.options.height=l,typeof i=="number"&&(i=Math.round(i)),typeof l=="number"&&(l=Math.round(l)),this.container.style.width=i==null?"":`${i}px`,this.container.style.height=l==null?"":`${l}px`;const h=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},h)),this}getComputedSize(){let t=this.options.width,e=this.options.height;return Sr(t)||(t=this.container.clientWidth),Sr(e)||(e=this.container.clientHeight),{width:t,height:e}}getScale(){return Yv(this.getMatrix())}scale(t,e=t,i=0,l=0){if(t=this.clampScale(t),e=this.clampScale(e),i||l){const f=this.getTranslation(),v=f.tx-i*(t-1),y=f.ty-l*(e-1);(v!==f.tx||y!==f.ty)&&this.translate(v,y)}const h=this.getMatrix();return h.a=t,h.d=e,this.setMatrix(h),this.graph.trigger("scale",{sx:t,sy:e,ox:i,oy:l}),this}clampScale(t){const e=this.graph.options.scaling;return Or(t,e.min||.01,e.max||16)}getZoom(){return this.getScale().sx}zoom(t,e){e=e||{};let i=t,l=t;const h=this.getScale(),f=this.getComputedSize();let v=f.width/2,y=f.height/2;if(e.absolute||(i+=h.sx,l+=h.sy),e.scaleGrid&&(i=Math.round(i/e.scaleGrid)*e.scaleGrid,l=Math.round(l/e.scaleGrid)*e.scaleGrid),e.maxScale&&(i=Math.min(e.maxScale,i),l=Math.min(e.maxScale,l)),e.minScale&&(i=Math.max(e.minScale,i),l=Math.max(e.minScale,l)),e.center&&(v=e.center.x,y=e.center.y),i=this.clampScale(i),l=this.clampScale(l),v||y){const x=this.getTranslation(),E=v-(v-x.tx)*(i/h.sx),S=y-(y-x.ty)*(l/h.sy);(E!==x.tx||S!==x.ty)&&this.translate(E,S)}return this.scale(i,l),this}getRotation(){return Kv(this.getMatrix())}rotate(t,e,i){if(e==null||i==null){const h=qe.getBBox(this.stage);e=h.width/2,i=h.height/2}const l=this.getMatrix().translate(e,i).rotate(t).translate(-e,-i);return this.setMatrix(l),this}getTranslation(){return Jv(this.getMatrix())}translate(t,e){const i=this.getMatrix();i.e=t||0,i.f=e||0,this.setMatrix(i);const l=this.getTranslation();return this.options.x=l.tx,this.options.y=l.ty,this.graph.trigger("translate",Object.assign({},l)),this}setOrigin(t,e){return this.translate(t||0,e||0)}fitToContent(t,e,i,l){if(typeof t=="object"){const G=t;t=G.gridWidth||1,e=G.gridHeight||1,i=G.padding||0,l=G}else t=t||1,e=e||1,i=i||0,l==null&&(l={});const h=Co(i),f=l.border||0,v=l.contentArea?Gt.create(l.contentArea):this.getContentArea(l);f>0&&v.inflate(f);const y=this.getScale(),x=this.getTranslation(),E=y.sx,S=y.sy;v.x*=E,v.y*=S,v.width*=E,v.height*=S;let _=Math.max(Math.ceil((v.width+v.x)/t),1)*t,T=Math.max(Math.ceil((v.height+v.y)/e),1)*e,D=0,L=0;(l.allowNewOrigin==="negative"&&v.x<0||l.allowNewOrigin==="positive"&&v.x>=0||l.allowNewOrigin==="any")&&(D=Math.ceil(-v.x/t)*t,D+=h.left,_+=D),(l.allowNewOrigin==="negative"&&v.y<0||l.allowNewOrigin==="positive"&&v.y>=0||l.allowNewOrigin==="any")&&(L=Math.ceil(-v.y/e)*e,L+=h.top,T+=L),_+=h.right,T+=h.bottom,_=Math.max(_,l.minWidth||0),T=Math.max(T,l.minHeight||0),_=Math.min(_,l.maxWidth||Number.MAX_SAFE_INTEGER),T=Math.min(T,l.maxHeight||Number.MAX_SAFE_INTEGER);const B=this.getComputedSize(),j=_!==B.width||T!==B.height;return(D!==x.tx||L!==x.ty)&&this.translate(D,L),j&&this.resize(_,T),new Gt(-D/E,-L/S,_/E,T/S)}scaleContentToFit(t={}){this.scaleContentToFitImpl(t)}scaleContentToFitImpl(t={},e=!0){let i,l;if(t.contentArea){const j=t.contentArea;i=this.graph.localToGraph(j),l=W.create(j)}else i=this.getContentBBox(t),l=this.graph.graphToLocal(i);if(!i.width||!i.height)return;const h=Co(t.padding),f=t.minScale||0,v=t.maxScale||Number.MAX_SAFE_INTEGER,y=t.minScaleX||f,x=t.maxScaleX||v,E=t.minScaleY||f,S=t.maxScaleY||v;let _;if(t.viewportArea)_=t.viewportArea;else{const j=this.getComputedSize(),V=this.getTranslation();_={x:V.tx,y:V.ty,width:j.width,height:j.height}}_=Gt.create(_).moveAndExpand({x:h.left,y:h.top,width:-h.left-h.right,height:-h.top-h.bottom});const T=this.getScale();let D=_.width/i.width*T.sx,L=_.height/i.height*T.sy;t.preserveAspectRatio!==!1&&(D=L=Math.min(D,L));const B=t.scaleGrid;if(B&&(D=B*Math.floor(D/B),L=B*Math.floor(L/B)),D=Or(D,y,x),L=Or(L,E,S),this.scale(D,L),e){const j=this.options,V=_.x-l.x*D-j.x,G=_.y-l.y*L-j.y;this.translate(V,G)}}getContentArea(t={}){return t.useCellGeometry!==!1?this.model.getAllCellsBBox()||new Gt:qe.getBBox(this.stage)}getContentBBox(t={}){return this.graph.localToGraph(this.getContentArea(t))}getGraphArea(){const t=Gt.fromSize(this.getComputedSize());return this.graph.graphToLocal(t)}zoomToRect(t,e={}){const i=Gt.create(t),l=this.graph;e.contentArea=i,e.viewportArea==null&&(e.viewportArea={x:l.options.x,y:l.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(e,!1);const h=i.getCenter();return this.centerPoint(h.x,h.y),this}zoomToFit(t={}){return this.zoomToRect(this.getContentArea(t),t)}centerPoint(t,e){const i=this.getComputedSize(),l=this.getScale(),h=this.getTranslation(),f=i.width/2,v=i.height/2;t=typeof t=="number"?t:f,e=typeof e=="number"?e:v,t=f-t*l.sx,e=v-e*l.sy,(h.tx!==t||h.ty!==e)&&this.translate(t,e)}centerContent(t){const i=this.graph.getContentArea(t).getCenter();this.centerPoint(i.x,i.y)}centerCell(t){return this.positionCell(t,"center")}positionPoint(t,e,i){const l=this.getComputedSize();e=ur(e,Math.max(0,l.width)),e<0&&(e=l.width+e),i=ur(i,Math.max(0,l.height)),i<0&&(i=l.height+i);const h=this.getTranslation(),f=this.getScale(),v=e-t.x*f.sx,y=i-t.y*f.sy;(h.tx!==v||h.ty!==y)&&this.translate(v,y)}positionRect(t,e){const i=Gt.create(t);switch(e){case"center":return this.positionPoint(i.getCenter(),"50%","50%");case"top":return this.positionPoint(i.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(i.getTopRight(),"100%",0);case"right":return this.positionPoint(i.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(i.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(i.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(i.getBottomLeft(),0,"100%");case"left":return this.positionPoint(i.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(i.getTopLeft(),0,0);default:return this}}positionCell(t,e){const i=t.getBBox();return this.positionRect(i,e)}positionContent(t,e){const i=this.graph.getContentArea(e);return this.positionRect(i,t)}}var Vo=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class Ci extends ae{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(t={}){let e=t.size||"auto auto",i=t.position||"center";const l=this.graph.transform.getScale(),h=this.graph.translate();if(typeof i=="object"){const f=h.tx+l.sx*(i.x||0),v=h.ty+l.sy*(i.y||0);i=`${f}px ${v}px`}typeof e=="object"&&(e=Gt.fromSize(e).scale(l.sx,l.sy),e=`${e.width}px ${e.height}px`),this.elem.style.backgroundSize=e,this.elem.style.backgroundPosition=i}drawBackgroundImage(t,e={}){if(!(t instanceof HTMLImageElement)){this.elem.style.backgroundImage="";return}const i=this.optionsCache;if(i&&i.image!==e.image)return;let l;const h=e.opacity,f=e.size;let v=e.repeat||"no-repeat";const y=Hi.registry.get(v);if(typeof y=="function"){const E=e.quality||1;t.width*=E,t.height*=E;const S=y(t,e);if(!(S instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");l=S.toDataURL("image/png"),e.repeat&&v!==e.repeat?v=e.repeat:v="repeat",typeof f=="object"?(f.width*=S.width/t.width,f.height*=S.height/t.height):f===void 0&&(e.size={width:S.width/E,height:S.height/E})}else l=t.src,f===void 0&&(e.size={width:t.width,height:t.height});i!=null&&typeof e.size=="object"&&e.image===i.image&&e.repeat===i.repeat&&e.quality===i.quality&&(i.size=Jc(e.size));const x=this.elem.style;x.backgroundImage=`url(${l})`,x.backgroundRepeat=v,x.opacity=h==null||h>=1?"":`${h}`,this.updateBackgroundImage(e)}updateBackgroundColor(t){this.elem.style.backgroundColor=t||""}updateBackgroundOptions(t){this.graph.options.background=t}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(t){const e=t||{};if(this.updateBackgroundOptions(t),this.updateBackgroundColor(e.color),e.image){this.optionsCache=Jc(e);const i=document.createElement("img");i.onload=()=>this.drawBackgroundImage(i,t),i.setAttribute("crossorigin","anonymous"),i.src=e.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}Vo([ae.dispose()],Ci.prototype,"dispose",null);var ks=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class ei extends ae{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&this.widgetOptions.enabled===!0}init(){this.onRightMouseDown=this.onRightMouseDown.bind(this),this.startListening(),this.updateClassName()}startListening(){this.graph.on("blank:mousedown",this.onMouseDown,this),this.graph.on("node:unhandled:mousedown",this.onMouseDown,this),this.graph.on("edge:unhandled:mousedown",this.onMouseDown,this),kn.on(this.graph.container,"mousedown",this.onRightMouseDown),this.mousewheelHandle=new Qh(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()}stopListening(){this.graph.off("blank:mousedown",this.onMouseDown,this),this.graph.off("node:unhandled:mousedown",this.onMouseDown,this),this.graph.off("edge:unhandled:mousedown",this.onMouseDown,this),kn.off(this.graph.container,"mousedown",this.onRightMouseDown),this.mousewheelHandle&&this.mousewheelHandle.disable()}allowPanning(t,e){return this.pannable&&Po.isMatch(t,this.widgetOptions.modifiers,e)}startPanning(t){const e=this.view.normalizeEvent(t);this.clientX=e.clientX,this.clientY=e.clientY,this.panning=!0,this.updateClassName(),kn.on(document.body,{"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),kn.on(window,"mouseup.panning",this.stopPanning.bind(this))}pan(t){const e=this.view.normalizeEvent(t),i=e.clientX-this.clientX,l=e.clientY-this.clientY;this.clientX=e.clientX,this.clientY=e.clientY,this.graph.translateBy(i,l)}stopPanning(t){this.panning=!1,this.updateClassName(),kn.off(document.body,".panning"),kn.off(window,".panning")}updateClassName(){const t=this.view.container,e=this.view.prefixClassName("graph-panning"),i=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(He(t,e),vr(t,i)):(vr(t,e),He(t,i)):(vr(t,e),vr(t,i))}onMouseDown({e:t}){if(!this.allowBlankMouseDown(t))return;const e=this.graph.getPlugin("selection"),i=e&&e.allowRubberband(t,!0);(this.allowPanning(t,!0)||this.allowPanning(t)&&!i)&&this.startPanning(t)}onRightMouseDown(t){const e=this.widgetOptions.eventTypes;e!=null&&e.includes("rightMouseDown")&&t.button===2&&this.allowPanning(t,!0)&&this.startPanning(t)}onMouseWheel(t,e,i){this.graph.translateBy(-e,-i)}allowBlankMouseDown(t){const e=this.widgetOptions.eventTypes;return(e==null?void 0:e.includes("leftMouseDown"))&&t.button===0||(e==null?void 0:e.includes("mouseWheelDown"))&&t.button===1}allowMouseWheel(t){var e;return this.pannable&&!t.ctrlKey&&((e=this.widgetOptions.eventTypes)===null||e===void 0?void 0:e.includes("mouseWheel"))}autoPanning(t,e){const l=this.graph.getGraphArea();let h=0,f=0;t<=l.left+10&&(h=-10),e<=l.top+10&&(f=-10),t>=l.right-10&&(h=10),e>=l.bottom-10&&(f=10),(h!==0||f!==0)&&this.graph.translateBy(-h,-f)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}ks([ae.dispose()],ei.prototype,"dispose",null);var Fd=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class iu extends ae{constructor(){super(...arguments),this.cumulatedFactor=1}get widgetOptions(){return this.options.mousewheel}init(){this.container=this.graph.container,this.target=this.widgetOptions.global?document:this.container,this.mousewheelHandle=new Qh(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.widgetOptions.enabled&&this.enable(!0)}get disabled(){return this.widgetOptions.enabled!==!0}enable(t){(this.disabled||t)&&(this.widgetOptions.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.widgetOptions.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(t){const e=this.widgetOptions.guard;return(e==null||e(t))&&Po.isMatch(t,this.widgetOptions.modifiers)}onMouseWheel(t){const e=this.widgetOptions.guard;if((e==null||e(t))&&Po.isMatch(t,this.widgetOptions.modifiers)){const i=this.widgetOptions.factor||1.2;this.currentScale==null&&(this.startPos={x:t.clientX,y:t.clientY},this.currentScale=this.graph.transform.getScale().sx),t.deltaY<0?this.currentScale<.15?this.cumulatedFactor=(this.currentScale+.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*i*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=1.05)):this.currentScale<=.15?this.cumulatedFactor=(this.currentScale-.01)/this.currentScale:(this.cumulatedFactor=Math.round(this.currentScale*(1/i)*20)/20/this.currentScale,this.cumulatedFactor===1&&(this.cumulatedFactor=.95)),this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const h=this.currentScale;let f=this.graph.transform.clampScale(h*this.cumulatedFactor);const v=this.widgetOptions.minScale||Number.MIN_SAFE_INTEGER,y=this.widgetOptions.maxScale||Number.MAX_SAFE_INTEGER;if(f=Or(f,v,y),f!==h)if(this.widgetOptions.zoomAtMousePosition){const E=!!this.graph.getPlugin("scroller")?this.graph.clientToLocal(this.startPos):this.graph.clientToGraph(this.startPos);this.graph.zoom(f,{absolute:!0,center:E.clone()})}else this.graph.zoom(f,{absolute:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}Fd([de.dispose()],iu.prototype,"dispose",null);var Gd=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class jd extends ae{init(){this.resetRenderArea=Si(this.resetRenderArea,200,{leading:!0}),this.resetRenderArea(),this.startListening()}startListening(){this.graph.on("translate",this.resetRenderArea,this),this.graph.on("scale",this.resetRenderArea,this),this.graph.on("resize",this.resetRenderArea,this)}stopListening(){this.graph.off("translate",this.resetRenderArea,this),this.graph.off("scale",this.resetRenderArea,this),this.graph.off("resize",this.resetRenderArea,this)}enableVirtualRender(){this.options.virtual=!0,this.resetRenderArea()}disableVirtualRender(){this.options.virtual=!1,this.graph.renderer.setRenderArea(void 0)}resetRenderArea(){if(this.options.virtual){const t=this.graph.getGraphArea();this.graph.renderer.setRenderArea(t)}}dispose(){this.stopListening()}}Gd([ae.dispose()],jd.prototype,"dispose",null);class pe{constructor(){this.isFlushing=!1,this.isFlushPending=!1,this.scheduleId=0,this.queue=[],this.frameInterval=33,this.initialTime=Date.now()}queueJob(t){if(t.priority&xr.PRIOR)t.cb();else{const e=this.findInsertionIndex(t);e>=0&&this.queue.splice(e,0,t)}}queueFlush(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.scheduleJob())}queueFlushSync(){!this.isFlushing&&!this.isFlushPending&&(this.isFlushPending=!0,this.flushJobsSync())}clearJobs(){this.queue.length=0,this.isFlushing=!1,this.isFlushPending=!1,this.cancelScheduleJob()}flushJobs(){this.isFlushPending=!1,this.isFlushing=!0;const t=this.getCurrentTime();let e;for(;(e=this.queue.shift())&&(e.cb(),!(this.getCurrentTime()-t>=this.frameInterval)););this.isFlushing=!1,this.queue.length&&this.queueFlush()}flushJobsSync(){this.isFlushPending=!1,this.isFlushing=!0;let t;for(;t=this.queue.shift();)try{t.cb()}catch(e){console.log(e)}this.isFlushing=!1}findInsertionIndex(t){let e=0,i=this.queue.length,l=i-1;const h=t.priority;for(;e<=l;){const f=(l-e>>1)+e;h<=this.queue[f].priority?e=f+1:(i=f,l=f-1)}return i}scheduleJob(){"requestIdleCallback"in window?(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.requestIdleCallback(this.flushJobs.bind(this),{timeout:100})):(this.scheduleId&&this.cancelScheduleJob(),this.scheduleId=window.setTimeout(this.flushJobs.bind(this)))}cancelScheduleJob(){"cancelIdleCallback"in window?(this.scheduleId&&window.cancelIdleCallback(this.scheduleId),this.scheduleId=0):(this.scheduleId&&clearTimeout(this.scheduleId),this.scheduleId=0)}getCurrentTime(){return typeof performance=="object"&&typeof performance.now=="function"?performance.now():Date.now()-this.initialTime}}var xr;(function(c){c[c.Update=2]="Update",c[c.RenderEdge=4]="RenderEdge",c[c.RenderNode=8]="RenderNode",c[c.PRIOR=1048576]="PRIOR"})(xr||(xr={}));var bC=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class Ze extends de{get model(){return this.graph.model}get container(){return this.graph.view.stage}constructor(t){super(),this.views={},this.willRemoveViews={},this.queue=new pe,this.graph=t,this.init()}init(){this.startListening(),this.renderViews(this.model.getCells())}startListening(){this.model.on("reseted",this.onModelReseted,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("reseted",this.onModelReseted,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}onModelReseted({options:t}){this.queue.clearJobs(),this.removeZPivots(),this.resetViews();const e=this.model.getCells();this.renderViews(e,Object.assign(Object.assign({},t),{queue:e.map(i=>i.id)}))}onCellAdded({cell:t,options:e}){this.renderViews([t],e)}onCellRemoved({cell:t}){this.removeViews([t])}onCellZIndexChanged({cell:t,options:e}){const i=this.views[t.id];i&&this.requestViewUpdate(i.view,Ze.FLAG_INSERT,e,xr.Update,!0)}onCellVisibleChanged({cell:t,current:e}){this.toggleVisible(t,!!e)}requestViewUpdate(t,e,i={},l=xr.Update,h=!0){const f=t.cell.id,v=this.views[f];if(!v)return;v.flag=e,v.options=i,(t.hasAction(e,["translate","resize","rotate"])||i.async===!1)&&(l=xr.PRIOR,h=!1),this.queue.queueJob({id:f,priority:l,cb:()=>{this.renderViewInArea(t,e,i);const E=i.queue;if(E){const S=E.indexOf(t.cell.id);S>=0&&E.splice(S,1),E.length===0&&this.graph.trigger("render:done")}}}),this.getEffectedEdges(t).forEach(E=>{this.requestViewUpdate(E.view,E.flag,i,l,!1)}),h&&this.flush()}setRenderArea(t){this.renderArea=t,this.flushWaitingViews()}isViewMounted(t){if(t==null)return!1;const e=this.views[t.cell.id];return e?e.state===Ze.ViewState.MOUNTED:!1}renderViews(t,e={}){t.sort((i,l)=>i.isNode()&&l.isEdge()?-1:0),t.forEach(i=>{const l=i.id,h=this.views;let f=0,v=h[l];if(v)f=Ze.FLAG_INSERT;else{const y=this.createCellView(i);y&&(y.graph=this.graph,f=Ze.FLAG_INSERT|y.getBootstrapFlag(),v={view:y,flag:f,options:e,state:Ze.ViewState.CREATED},this.views[l]=v)}v&&this.requestViewUpdate(v.view,f,e,this.getRenderPriority(v.view),!1)}),this.flush()}renderViewInArea(t,e,i={}){const l=t.cell,h=l.id,f=this.views[h];if(!f)return;let v=0;this.isUpdatable(t)?(v=this.updateView(t,e,i),f.flag=v):f.state===Ze.ViewState.MOUNTED?(v=this.updateView(t,e,i),f.flag=v):f.state=Ze.ViewState.WAITING,v&&l.isEdge()&&!(v&t.getFlag(["source","target"]))&&this.queue.queueJob({id:h,priority:xr.RenderEdge,cb:()=>{this.updateView(t,e,i)}})}removeViews(t){t.forEach(e=>{const i=e.id,l=this.views[i];l&&(this.willRemoveViews[i]=l,delete this.views[i],this.queue.queueJob({id:i,priority:this.getRenderPriority(l.view),cb:()=>{this.removeView(l.view)}}))}),this.flush()}flush(){this.graph.options.async?this.queue.queueFlush():this.queue.queueFlushSync()}flushWaitingViews(){Object.values(this.views).forEach(t=>{if(t&&t.state===Ze.ViewState.WAITING){const{view:e,flag:i,options:l}=t;this.requestViewUpdate(e,i,l,this.getRenderPriority(e),!1)}}),this.flush()}updateView(t,e,i={}){if(t==null)return 0;if(In.isCellView(t)){if(e&Ze.FLAG_REMOVE)return this.removeView(t.cell),0;e&Ze.FLAG_INSERT&&(this.insertView(t),e^=Ze.FLAG_INSERT)}return e?t.confirmUpdate(e,i):0}insertView(t){const e=this.views[t.cell.id];if(e){const i=t.cell.getZIndex(),l=this.addZPivot(i);this.container.insertBefore(t.container,l),t.cell.isVisible()||this.toggleVisible(t.cell,!1),e.state=Ze.ViewState.MOUNTED,this.graph.trigger("view:mounted",{view:t})}}resetViews(){this.willRemoveViews=Object.assign(Object.assign({},this.views),this.willRemoveViews),Object.values(this.willRemoveViews).forEach(t=>{t&&this.removeView(t.view)}),this.views={},this.willRemoveViews={}}removeView(t){const e=t.cell,i=this.willRemoveViews[e.id];i&&t&&(i.view.remove(),delete this.willRemoveViews[e.id],this.graph.trigger("view:unmounted",{view:t}))}toggleVisible(t,e){const i=this.model.getConnectedEdges(t);for(let h=0,f=i.length;h<f;h+=1){const v=i[h];if(e){const y=v.getSourceCell(),x=v.getTargetCell();if(y&&!y.isVisible()||x&&!x.isVisible())continue;this.toggleVisible(v,!0)}else this.toggleVisible(v,!1)}const l=this.views[t.id];l&&xs(l.view.container,{display:e?"unset":"none"})}addZPivot(t=0){this.zPivots==null&&(this.zPivots={});const e=this.zPivots;let i=e[t];if(i)return i;i=e[t]=document.createComment(`z-index:${t+1}`);let l=-1/0;for(const f in e){const v=+f;v<t&&v>l&&(l=v,t-1)}const h=this.container;if(l!==-1/0){const f=e[l];h.insertBefore(i,f.nextSibling)}else h.insertBefore(i,h.firstChild);return i}removeZPivots(){this.zPivots&&Object.values(this.zPivots).forEach(t=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}createCellView(t){const e={graph:this.graph},i=this.graph.options.createCellView;if(i){const h=ue(i,this.graph,t);if(h)return new h(t,e);if(h===null)return null}const l=t.view;if(l!=null&&typeof l=="string"){const h=In.registry.get(l);return h?new h(t,e):In.registry.onNotFound(l)}return t.isNode()?new ve(t,e):t.isEdge()?new Oe(t,e):null}getEffectedEdges(t){const e=[],i=t.cell,l=this.model.getConnectedEdges(i);for(let h=0,f=l.length;h<f;h+=1){const v=l[h],y=this.views[v.id];if(!y)continue;const x=y.view;if(!this.isViewMounted(x))continue;const E=["update"];v.getTargetCell()===i&&E.push("target"),v.getSourceCell()===i&&E.push("source"),e.push({id:v.id,view:x,flag:x.getFlag(E)})}return e}isUpdatable(t){if(t.isNodeView())return this.renderArea?this.renderArea.isIntersectWithRect(t.cell.getBBox()):!0;if(t.isEdgeView()){const e=t.cell,i=e.getSourceCell(),l=e.getTargetCell();if(this.renderArea&&i&&l)return this.renderArea.isIntersectWithRect(i.getBBox())||this.renderArea.isIntersectWithRect(l.getBBox())}return!0}getRenderPriority(t){return t.cell.isNode()?xr.RenderNode:xr.RenderEdge}dispose(){this.stopListening(),Object.keys(this.views).forEach(t=>{this.views[t].view.dispose()}),this.views={}}}bC([de.dispose()],Ze.prototype,"dispose",null),function(c){c.FLAG_INSERT=1<<30,c.FLAG_REMOVE=1<<29,c.FLAG_RENDER=(1<<26)-1}(Ze||(Ze={})),function(c){let t;(function(e){e[e.CREATED=0]="CREATED",e[e.MOUNTED=1]="MOUNTED",e[e.WAITING=2]="WAITING"})(t=c.ViewState||(c.ViewState={}))}(Ze||(Ze={}));var xC=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class ic extends ae{constructor(){super(...arguments),this.schedule=new Ze(this.graph)}requestViewUpdate(t,e,i={}){this.schedule.requestViewUpdate(t,e,i)}isViewMounted(t){return this.schedule.isViewMounted(t)}setRenderArea(t){this.schedule.setRenderArea(t)}findViewByElem(t){if(t==null)return null;const e=this.options.container,i=typeof t=="string"?e.querySelector(t):t instanceof Element?t:t[0];if(i){const l=this.graph.view.findAttr("data-cell-id",i);if(l){const h=this.schedule.views;if(h[l])return h[l].view}}return null}findViewByCell(t){if(t==null)return null;const e=O.isCell(t)?t.id:t,i=this.schedule.views;return i[e]?i[e].view:null}findViewsFromPoint(t){const e={x:t.x,y:t.y};return this.model.getCells().map(i=>this.findViewByCell(i)).filter(i=>i!=null?qe.getBBox(i.container,{target:this.view.stage}).containsPoint(e):!1)}findEdgeViewsFromPoint(t,e=5){return this.model.getEdges().map(i=>this.findViewByCell(i)).filter(i=>{if(i!=null){const l=i.getClosestPoint(t);if(l)return l.distance(t)<=e}return!1})}findViewsInArea(t,e={}){const i=Gt.create(t);return this.model.getCells().map(l=>this.findViewByCell(l)).filter(l=>{if(l){if(e.nodeOnly&&!l.isNodeView())return!1;const h=qe.getBBox(l.container,{target:this.view.stage});return h.width===0?h.inflate(1,0):h.height===0&&h.inflate(0,1),e.strict?i.containsRect(h):i.isIntersectWithRect(h)}return!1})}dispose(){this.schedule.dispose()}}xC([ae.dispose()],ic.prototype,"dispose",null);var wr=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class Bs extends ae{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(t){return this.svg.getElementById(t)!=null}filter(t){let e=t.id;const i=t.name;if(e||(e=`filter-${i}-${this.cid}-${zh(JSON.stringify(t))}`),!this.isDefined(e)){const l=Ts.registry.get(i);if(l==null)return Ts.registry.onNotFound(i);const h=l(t.args||{}),f=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},t.attrs),{id:e});Ee.create(on.sanitize(h),f).appendTo(this.defs)}return e}gradient(t){let e=t.id;const i=t.type;if(e||(e=`gradient-${i}-${this.cid}-${zh(JSON.stringify(t))}`),!this.isDefined(e)){const h=t.stops.map(y=>{const x=y.opacity!=null&&Number.isFinite(y.opacity)?y.opacity:1;return`<stop offset="${y.offset}" stop-color="${y.color}" stop-opacity="${x}"/>`}),f=`<${i}>${h.join("")}</${i}>`,v=Object.assign({id:e},t.attrs);Ee.create(f,v).appendTo(this.defs)}return e}marker(t){const{id:e,refX:i,refY:l,markerUnits:h,markerOrient:f,tagName:v,children:y}=t,x=wr(t,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let E=e;if(E||(E=`marker-${this.cid}-${zh(JSON.stringify(t))}`),!this.isDefined(E)){v!=="path"&&delete x.d;const S=Ee.create("marker",{refX:i,refY:l,id:E,overflow:"visible",orient:f!=null?f:"auto",markerUnits:h||"userSpaceOnUse"},y?y.map(_=>{var{tagName:T}=_,D=wr(_,["tagName"]);return Ee.create(`${T}`||"path",Ao(Object.assign(Object.assign({},x),D)))}):[Ee.create(v||"path",Ao(x))]);this.defs.appendChild(S.node)}return E}remove(t){const e=this.svg.getElementById(t);e&&e.parentNode&&e.parentNode.removeChild(e)}}class ou extends ae{getClientMatrix(){return _n(this.view.stage.getScreenCTM())}getClientOffset(){const t=this.view.svg.getBoundingClientRect();return new W(t.left,t.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(t,e){return(typeof t=="number"?this.clientToLocalPoint(t,e):this.clientToLocalPoint(t.x,t.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(t,e){const i=W.create(t,e);return qe.transformPoint(i,this.graph.matrix())}localToClientPoint(t,e){const i=W.create(t,e);return qe.transformPoint(i,this.getClientMatrix())}localToPagePoint(t,e){return(typeof t=="number"?this.localToGraphPoint(t,e):this.localToGraphPoint(t)).translate(this.getPageOffset())}localToGraphRect(t,e,i,l){const h=Gt.create(t,e,i,l);return qe.transformRectangle(h,this.graph.matrix())}localToClientRect(t,e,i,l){const h=Gt.create(t,e,i,l);return qe.transformRectangle(h,this.getClientMatrix())}localToPageRect(t,e,i,l){return(typeof t=="number"?this.localToGraphRect(t,e,i,l):this.localToGraphRect(t)).translate(this.getPageOffset())}graphToLocalPoint(t,e){const i=W.create(t,e);return qe.transformPoint(i,this.graph.matrix().inverse())}clientToLocalPoint(t,e){const i=W.create(t,e);return qe.transformPoint(i,this.getClientMatrix().inverse())}clientToGraphPoint(t,e){const i=W.create(t,e);return qe.transformPoint(i,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(t,e){const l=W.create(t,e).diff(this.getPageOffset());return this.graphToLocalPoint(l)}graphToLocalRect(t,e,i,l){const h=Gt.create(t,e,i,l);return qe.transformRectangle(h,this.graph.matrix().inverse())}clientToLocalRect(t,e,i,l){const h=Gt.create(t,e,i,l);return qe.transformRectangle(h,this.getClientMatrix().inverse())}clientToGraphRect(t,e,i,l){const h=Gt.create(t,e,i,l);return qe.transformRectangle(h,this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(t,e,i,l){const h=Gt.create(t,e,i,l),f=this.getPageOffset();return h.x-=f.x,h.y-=f.y,this.graphToLocalRect(h)}}var Vd=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class Ur extends ae{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:t,magnet:e,options:i={}}){const l=this.resolveHighlighter(i);if(!l)return;const h=this.getHighlighterId(e,l);if(!this.highlights[h]){const f=l.highlighter;f.highlight(t,e,Object.assign({},l.args)),this.highlights[h]={cellView:t,magnet:e,highlighter:f,args:l.args}}}onCellUnhighlight({magnet:t,options:e={}}){const i=this.resolveHighlighter(e);if(!i)return;const l=this.getHighlighterId(t,i);this.unhighlight(l)}resolveHighlighter(t){const e=this.options;let i=t.highlighter;if(i==null){const v=t.type;i=v&&e.highlighting[v]||e.highlighting.default}if(i==null)return null;const l=typeof i=="string"?{name:i}:i,h=l.name,f=wi.registry.get(h);return f==null?wi.registry.onNotFound(h):(wi.check(h,f),{name:h,highlighter:f,args:l.args||{}})}getHighlighterId(t,e){return Aa(t),e.name+t.id+JSON.stringify(e.args)}unhighlight(t){const e=this.highlights[t];e&&(e.highlighter.unhighlight(e.cellView,e.magnet,e.args),delete this.highlights[t])}dispose(){Object.keys(this.highlights).forEach(t=>this.unhighlight(t)),this.stopListening()}}Vd([Ur.dispose()],Ur.prototype,"dispose",null);var Ud=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class Rr extends ae{getScroller(){const t=this.graph.getPlugin("scroller");return t&&t.options.enabled?t:null}getContainer(){const t=this.getScroller();return t?t.container.parentElement:this.graph.container.parentElement}getSensorTarget(){const t=this.options.autoResize;if(t)return typeof t=="boolean"?this.getContainer():t}init(){if(this.options.autoResize){const e=this.getSensorTarget();e&&Ga.bind(e,()=>{const i=e.offsetWidth,l=e.offsetHeight;this.resize(i,l)})}}resize(t,e){const i=this.getScroller();i?i.resize(t,e):this.graph.transform.resize(t,e)}dispose(){Ga.clear(this.graph.container)}}Ud([ae.dispose()],Rr.prototype,"dispose",null);var oc=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h};class Qn extends lr{get container(){return this.options.container}get[Symbol.toStringTag](){return Qn.toStringTag}constructor(t){super(),this.installedPlugins=new Set,this.options=tn.get(t),this.css=new Se(this),this.view=new Qt(this),this.defs=new Bs(this),this.coord=new ou(this),this.transform=new $n(this),this.highlight=new Ur(this),this.grid=new jo(this),this.background=new Ci(this),this.options.model?this.model=this.options.model:(this.model=new ot,this.model.graph=this),this.renderer=new ic(this),this.panning=new ei(this),this.mousewheel=new iu(this),this.virtualRender=new jd(this),this.size=new Rr(this)}isNode(t){return t.isNode()}isEdge(t){return t.isEdge()}resetCells(t,e={}){return this.model.resetCells(t,e),this}clearCells(t={}){return this.model.clear(t),this}toJSON(t={}){return this.model.toJSON(t)}parseJSON(t){return this.model.parseJSON(t)}fromJSON(t,e={}){return this.model.fromJSON(t,e),this}getCellById(t){return this.model.getCell(t)}addNode(t,e={}){return this.model.addNode(t,e)}addNodes(t,e={}){return this.addCell(t.map(i=>I.isNode(i)?i:this.createNode(i)),e)}createNode(t){return this.model.createNode(t)}removeNode(t,e={}){return this.model.removeCell(t,e)}addEdge(t,e={}){return this.model.addEdge(t,e)}addEdges(t,e={}){return this.addCell(t.map(i=>R.isEdge(i)?i:this.createEdge(i)),e)}removeEdge(t,e={}){return this.model.removeCell(t,e)}createEdge(t){return this.model.createEdge(t)}addCell(t,e={}){return this.model.addCell(t,e),this}removeCell(t,e={}){return this.model.removeCell(t,e)}removeCells(t,e={}){return this.model.removeCells(t,e)}removeConnectedEdges(t,e={}){return this.model.removeConnectedEdges(t,e)}disconnectConnectedEdges(t,e={}){return this.model.disconnectConnectedEdges(t,e),this}hasCell(t){return this.model.has(t)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(t){return this.model.getOutgoingEdges(t)}getIncomingEdges(t){return this.model.getIncomingEdges(t)}getConnectedEdges(t,e={}){return this.model.getConnectedEdges(t,e)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(t){return this.model.isRoot(t)}isLeafNode(t){return this.model.isLeaf(t)}getNeighbors(t,e={}){return this.model.getNeighbors(t,e)}isNeighbor(t,e,i={}){return this.model.isNeighbor(t,e,i)}getSuccessors(t,e={}){return this.model.getSuccessors(t,e)}isSuccessor(t,e,i={}){return this.model.isSuccessor(t,e,i)}getPredecessors(t,e={}){return this.model.getPredecessors(t,e)}isPredecessor(t,e,i={}){return this.model.isPredecessor(t,e,i)}getCommonAncestor(...t){return this.model.getCommonAncestor(...t)}getSubGraph(t,e={}){return this.model.getSubGraph(t,e)}cloneSubGraph(t,e={}){return this.model.cloneSubGraph(t,e)}cloneCells(t){return this.model.cloneCells(t)}getNodesFromPoint(t,e){return this.model.getNodesFromPoint(t,e)}getNodesInArea(t,e,i,l,h){return this.model.getNodesInArea(t,e,i,l,h)}getNodesUnderNode(t,e={}){return this.model.getNodesUnderNode(t,e)}searchCell(t,e,i={}){return this.model.search(t,e,i),this}getShortestPath(t,e,i={}){return this.model.getShortestPath(t,e,i)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(t,e={}){return this.model.getCellsBBox(t,e)}startBatch(t,e={}){this.model.startBatch(t,e)}stopBatch(t,e={}){this.model.stopBatch(t,e)}batchUpdate(t,e,i){const l=typeof t=="string"?t:"update",h=typeof t=="string"?e:t,f=typeof e=="function"?i:e;this.startBatch(l,f);const v=h();return this.stopBatch(l,f),v}updateCellId(t,e){return this.model.updateCellId(t,e)}findView(t){return O.isCell(t)?this.findViewByCell(t):this.findViewByElem(t)}findViews(t){return Gt.isRectangleLike(t)?this.findViewsInArea(t):W.isPointLike(t)?this.findViewsFromPoint(t):[]}findViewByCell(t){return this.renderer.findViewByCell(t)}findViewByElem(t){return this.renderer.findViewByElem(t)}findViewsFromPoint(t,e){const i=typeof t=="number"?{x:t,y:e}:t;return this.renderer.findViewsFromPoint(i)}findViewsInArea(t,e,i,l,h){const f=typeof t=="number"?{x:t,y:e,width:i,height:l}:t,v=typeof t=="number"?h:e;return this.renderer.findViewsInArea(f,v)}matrix(t){return typeof t=="undefined"?this.transform.getMatrix():(this.transform.setMatrix(t),this)}resize(t,e){const i=this.getPlugin("scroller");return i?i.resize(t,e):this.transform.resize(t,e),this}scale(t,e=t,i=0,l=0){return typeof t=="undefined"?this.transform.getScale():(this.transform.scale(t,e,i,l),this)}zoom(t,e){const i=this.getPlugin("scroller");if(i){if(typeof t=="undefined")return i.zoom();i.zoom(t,e)}else{if(typeof t=="undefined")return this.transform.getZoom();this.transform.zoom(t,e)}return this}zoomTo(t,e={}){const i=this.getPlugin("scroller");return i?i.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})):this.transform.zoom(t,Object.assign(Object.assign({},e),{absolute:!0})),this}zoomToRect(t,e={}){const i=this.getPlugin("scroller");return i?i.zoomToRect(t,e):this.transform.zoomToRect(t,e),this}zoomToFit(t={}){const e=this.getPlugin("scroller");return e?e.zoomToFit(t):this.transform.zoomToFit(t),this}rotate(t,e,i){return typeof t=="undefined"?this.transform.getRotation():(this.transform.rotate(t,e,i),this)}translate(t,e){return typeof t=="undefined"?this.transform.getTranslation():(this.transform.translate(t,e),this)}translateBy(t,e){const i=this.translate(),l=i.tx+t,h=i.ty+e;return this.translate(l,h)}getGraphArea(){return this.transform.getGraphArea()}getContentArea(t={}){return this.transform.getContentArea(t)}getContentBBox(t={}){return this.transform.getContentBBox(t)}fitToContent(t,e,i,l){return this.transform.fitToContent(t,e,i,l)}scaleContentToFit(t={}){return this.transform.scaleContentToFit(t),this}center(t){return this.centerPoint(t)}centerPoint(t,e,i){const l=this.getPlugin("scroller");return l?l.centerPoint(t,e,i):this.transform.centerPoint(t,e),this}centerContent(t){const e=this.getPlugin("scroller");return e?e.centerContent(t):this.transform.centerContent(t),this}centerCell(t,e){const i=this.getPlugin("scroller");return i?i.centerCell(t,e):this.transform.centerCell(t),this}positionPoint(t,e,i,l={}){const h=this.getPlugin("scroller");return h?h.positionPoint(t,e,i,l):this.transform.positionPoint(t,e,i),this}positionRect(t,e,i){const l=this.getPlugin("scroller");return l?l.positionRect(t,e,i):this.transform.positionRect(t,e),this}positionCell(t,e,i){const l=this.getPlugin("scroller");return l?l.positionCell(t,e,i):this.transform.positionCell(t,e),this}positionContent(t,e){const i=this.getPlugin("scroller");return i?i.positionContent(t,e):this.transform.positionContent(t,e),this}snapToGrid(t,e){return this.coord.snapToGrid(t,e)}pageToLocal(t,e,i,l){return Gt.isRectangleLike(t)?this.coord.pageToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof l=="number"?this.coord.pageToLocalRect(t,e,i,l):this.coord.pageToLocalPoint(t,e)}localToPage(t,e,i,l){return Gt.isRectangleLike(t)?this.coord.localToPageRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof l=="number"?this.coord.localToPageRect(t,e,i,l):this.coord.localToPagePoint(t,e)}clientToLocal(t,e,i,l){return Gt.isRectangleLike(t)?this.coord.clientToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof l=="number"?this.coord.clientToLocalRect(t,e,i,l):this.coord.clientToLocalPoint(t,e)}localToClient(t,e,i,l){return Gt.isRectangleLike(t)?this.coord.localToClientRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof l=="number"?this.coord.localToClientRect(t,e,i,l):this.coord.localToClientPoint(t,e)}localToGraph(t,e,i,l){return Gt.isRectangleLike(t)?this.coord.localToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof l=="number"?this.coord.localToGraphRect(t,e,i,l):this.coord.localToGraphPoint(t,e)}graphToLocal(t,e,i,l){return Gt.isRectangleLike(t)?this.coord.graphToLocalRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof l=="number"?this.coord.graphToLocalRect(t,e,i,l):this.coord.graphToLocalPoint(t,e)}clientToGraph(t,e,i,l){return Gt.isRectangleLike(t)?this.coord.clientToGraphRect(t):typeof t=="number"&&typeof e=="number"&&typeof i=="number"&&typeof l=="number"?this.coord.clientToGraphRect(t,e,i,l):this.coord.clientToGraphPoint(t,e)}defineFilter(t){return this.defs.filter(t)}defineGradient(t){return this.defs.gradient(t)}defineMarker(t){return this.defs.marker(t)}getGridSize(){return this.grid.getGridSize()}setGridSize(t){return this.grid.setGridSize(t),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(t){return this.grid.draw(t),this}updateBackground(){return this.background.update(),this}drawBackground(t,e){const i=this.getPlugin("scroller");return i!=null&&(this.options.background==null||!e)?i.drawBackground(t,e):this.background.draw(t),this}clearBackground(t){const e=this.getPlugin("scroller");return e!=null&&(this.options.background==null||!t)?e.clearBackground(t):this.background.clear(),this}enableVirtualRender(){return this.virtualRender.enableVirtualRender(),this}disableVirtualRender(){return this.virtualRender.disableVirtualRender(),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(t){return t==null?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():t?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){const t=this.getPlugin("scroller");return t?t.isPannable():this.panning.pannable}enablePanning(){const t=this.getPlugin("scroller");return t?t.enablePanning():this.panning.enablePanning(),this}disablePanning(){const t=this.getPlugin("scroller");return t?t.disablePanning():this.panning.disablePanning(),this}togglePanning(t){return t==null?this.isPannable()?this.disablePanning():this.enablePanning():t!==this.isPannable()&&(t?this.enablePanning():this.disablePanning()),this}use(t,...e){return this.installedPlugins.has(t)||(this.installedPlugins.add(t),t.init(this,...e)),this}getPlugin(t){return Array.from(this.installedPlugins).find(e=>e.name===t)}getPlugins(t){return Array.from(this.installedPlugins).filter(e=>t.includes(e.name))}enablePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i==null||i.forEach(l=>{var h;(h=l==null?void 0:l.enable)===null||h===void 0||h.call(l)}),this}disablePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i==null||i.forEach(l=>{var h;(h=l==null?void 0:l.disable)===null||h===void 0||h.call(l)}),this}isPluginEnabled(t){var e;const i=this.getPlugin(t);return(e=i==null?void 0:i.isEnabled)===null||e===void 0?void 0:e.call(i)}disposePlugins(t){let e=t;Array.isArray(e)||(e=[e]);const i=this.getPlugins(e);return i==null||i.forEach(l=>{l.dispose(),this.installedPlugins.delete(l)}),this}dispose(t=!0){t&&this.model.dispose(),this.css.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.highlight.dispose(),this.background.dispose(),this.mousewheel.dispose(),this.panning.dispose(),this.view.dispose(),this.renderer.dispose(),this.installedPlugins.forEach(e=>{e.dispose()})}}oc([lr.dispose()],Qn.prototype,"dispose",null),function(c){c.View=Qt,c.Renderer=ic,c.MouseWheel=iu,c.DefsManager=Bs,c.GridManager=jo,c.CoordManager=ou,c.TransformManager=$n,c.HighlightManager=Ur,c.BackgroundManager=Ci,c.PanningManager=ei}(Qn||(Qn={})),function(c){c.toStringTag=`X6.${c.name}`;function t(e){if(e==null)return!1;if(e instanceof c)return!0;const i=e[Symbol.toStringTag];return i==null||i===c.toStringTag}c.isGraph=t}(Qn||(Qn={})),function(c){function t(e,i){const l=e instanceof HTMLElement?new c({container:e}):new c(e);return i!=null&&l.fromJSON(i),l}c.render=t}(Qn||(Qn={})),function(c){c.registerNode=I.registry.register,c.registerEdge=R.registry.register,c.registerView=In.registry.register,c.registerAttr=Qr.registry.register,c.registerGrid=sr.registry.register,c.registerFilter=Ts.registry.register,c.registerNodeTool=Ds.registry.register,c.registerEdgeTool=Rs.registry.register,c.registerBackground=Hi.registry.register,c.registerHighlighter=wi.registry.register,c.registerPortLayout=Yi.registry.register,c.registerPortLabelLayout=Ns.registry.register,c.registerMarker=Xi.registry.register,c.registerRouter=ti.registry.register,c.registerConnector=g.registry.register,c.registerAnchor=Ls.registry.register,c.registerEdgeAnchor=Bo.registry.register,c.registerConnectionPoint=zo.registry.register}(Qn||(Qn={})),function(c){c.unregisterNode=I.registry.unregister,c.unregisterEdge=R.registry.unregister,c.unregisterView=In.registry.unregister,c.unregisterAttr=Qr.registry.unregister,c.unregisterGrid=sr.registry.unregister,c.unregisterFilter=Ts.registry.unregister,c.unregisterNodeTool=Ds.registry.unregister,c.unregisterEdgeTool=Rs.registry.unregister,c.unregisterBackground=Hi.registry.unregister,c.unregisterHighlighter=wi.registry.unregister,c.unregisterPortLayout=Yi.registry.unregister,c.unregisterPortLabelLayout=Ns.registry.unregister,c.unregisterMarker=Xi.registry.unregister,c.unregisterRouter=ti.registry.unregister,c.unregisterConnector=g.registry.unregister,c.unregisterAnchor=Ls.registry.unregister,c.unregisterEdgeAnchor=Bo.registry.unregister,c.unregisterConnectionPoint=zo.registry.unregister}(Qn||(Qn={}));var Hd=function(c,t,e,i){var l=arguments.length,h=l<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,e):i,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(c,t,e,i);else for(var v=c.length-1;v>=0;v--)(f=c[v])&&(h=(l<3?f(h):l>3?f(t,e,h):f(t,e))||h);return l>3&&h&&Object.defineProperty(t,e,h),h},eo=function(c,t){var e={};for(var i in c)Object.prototype.hasOwnProperty.call(c,i)&&t.indexOf(i)<0&&(e[i]=c[i]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(c);l<i.length;l++)t.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(c,i[l])&&(e[i[l]]=c[i[l]]);return e};class ni extends I{}(function(c){class t extends ve{init(){super.init(),this.cell.on("change:*",this.onCellChangeAny,this)}onCellChangeAny({key:i}){const l=c.shapeMaps[this.cell.shape];if(l){const{effect:h}=l;(!h||h.includes(i))&&this.renderHTMLComponent()}}confirmUpdate(i){const l=super.confirmUpdate(i);return this.handleAction(l,t.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const i=this.selectors&&this.selectors.foContent;if(i){ps(i);const l=c.shapeMaps[this.cell.shape];if(!l)return;let{html:h}=l;typeof h=="function"&&(h=h(this.cell)),h&&(typeof h=="string"?i.innerHTML=h:Tn(i,h))}}dispose(){this.cell.off("change:*",this.onCellChangeAny,this)}}Hd([t.dispose()],t.prototype,"dispose",null),c.View=t,function(e){e.action="html",e.config({bootstrap:[e.action],actions:{html:e.action}}),ve.registry.register("html-view",e,!0)}(t=c.View||(c.View={}))})(ni||(ni={})),function(c){c.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},on.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),I.registry.register("html",c,!0)}(ni||(ni={})),function(c){c.shapeMaps={};function t(e){const{shape:i,html:l,effect:h,inherit:f}=e,v=eo(e,["shape","html","effect","inherit"]);if(!i)throw new Error("should specify shape in config");c.shapeMaps[i]={html:l,effect:h},Qn.registerNode(i,Object.assign({inherit:f||"html"},v),!0)}c.register=t}(ni||(ni={}))},4513:function(wt,yt,k){"use strict";k.d(yt,{v:function(){return De}});var rt=k(73193),dt=k.n(rt),H=k(86222),Pt=k.n(H),xt=k(78796),Ct=k.n(xt),St=k(4977),Bt=k.n(St),Zt=k(41553),Ut=k.n(Zt),Ft=k(49488),J=k.n(Ft),Ot=k(84047),Rt=k.n(Ot),Mt=k(10154),Nt=k.n(Mt),zt=k(90634),De=function(Fe){J()(Ne,Fe);var de=Rt()(Ne);function Ne(){var xe;Ct()(this,Ne);for(var Lt=arguments.length,Q=new Array(Lt),bt=0;bt<Lt;bt++)Q[bt]=arguments[bt];return xe=de.call.apply(de,[this].concat(Q)),Nt()(Ut()(xe),"root",{TEE:{name:"ROOT",children:[]},MPC:{name:"ROOT",children:[]}}),xe}return Bt()(Ne,[{key:"registerConfigNode",value:function(Lt,Q){if(!this.hasConfigNode(Lt,Q)){var bt=Lt.name,Ht=Lt.domain,le=Lt.version,qt=Lt.attrs,oe=qt===void 0?[]:qt,Re=Lt.inputs,ye={name:"".concat(Ht,"/").concat(bt),domain:Ht,version:le,children:[]};if(Re){var Ve=this.createInputConfigNode(Re);Ve&&ye.children.push(Ve)}if(oe){var Ue=Pt()(oe),ke;try{for(Ue.s();!(ke=Ue.n()).done;){var Et=ke.value,ht=Et.prefixes;ht?this.getNodeByPath(ht,ye,Et,0):ye.children.push(this.createNode(Et))}}catch(Y){Ue.e(Y)}finally{Ue.f()}}this.root[Q].children.push(ye)}}},{key:"hasConfigNode",value:function(Lt,Q){return this.root[Q].children.find(function(bt){return bt.name===Lt.name})}},{key:"getNodeByPath",value:function(Lt,Q,bt,Ht){if(Lt.length!==0){var le=Lt[Ht],qt=Q.children.find(function(oe){var Re=oe.name;return Re===le});if(!qt){Q.children.push(this.createNode(bt));return}return this.getNodeByPath(Lt,qt,bt,Ht+1)}}},{key:"createInputConfigNode",value:function(Lt){var Q={name:"input",children:[]};return Lt.map(function(bt,Ht){if(bt.attrs){var le=bt.name,qt=bt.attrs;qt.map(function(oe){var Re=!0,ye=oe.name,Ve=oe.desc,Ue=oe.col_max_cnt_inclusive,ke=oe.col_min_cnt_inclusive,Et=ke===void 0?0:ke;Et===0&&(Re=!1);var ht={name:ye,docString:Ve,type:"AT_SF_TABLE_COL",prefixes:["input",le],fromInputIndex:Ht,col_max_cnt_inclusive:Ue,col_min_cnt_inclusive:Et,isRequired:Re};Q.children.push(ht)})}}),Q.children.length?Q:void 0}},{key:"createNode",value:function(Lt){var Q,bt,Ht=!0,le=Lt.type,qt=Lt.name,oe=Lt.desc,Re=Lt.prefixes,ye=Lt.custom_protobuf_cls;switch(le){case"AT_UNION_GROUP":return{name:qt,prefixes:Re,children:[],docString:oe,isRequired:!0,selectedName:Lt==null||(Q=Lt.union)===null||Q===void 0?void 0:Q.default_selection,type:"AT_UNION_GROUP"};case"AT_STRUCT_GROUP":return{name:qt,prefixes:Re,children:[],docString:oe,isRequired:!1,type:"AT_STRUCT_GROUP"};case"AT_CUSTOM_PROTOBUF":return{name:qt,prefixes:Re,type:le,custom_protobuf_cls:ye,isRequired:!0,docString:oe};default:return Ht=((bt=Lt.atomic)===null||bt===void 0?void 0:bt.is_optional)!==!0,dt()({type:le,prefixes:Re,name:qt,docString:oe,isRequired:Ht},Lt.atomic)}}},{key:"getComponentConfig",value:function(Lt,Q){return this.root[Q].children.find(function(bt){var Ht=bt.name;return Ht===Lt})}}]),Ne}(zt.Hn)},10080:function(wt,yt,k){"use strict";k.d(yt,{k:function(){return Fe}});var rt=k(86222),dt=k.n(rt),H=k(78796),Pt=k.n(H),xt=k(4977),Ct=k.n(xt),St=k(41553),Bt=k.n(St),Zt=k(49488),Ut=k.n(Zt),Ft=k(84047),J=k.n(Ft),Ot=k(10154),Rt=k.n(Ot),Mt=k(14258),Nt=k(90634),zt=k(4513),De=k(9518),Fe=function(de){Ut()(xe,de);var Ne=J()(xe);function xe(){var Lt;Pt()(this,xe);for(var Q=arguments.length,bt=new Array(Q),Ht=0;Ht<Q;Ht++)bt[Ht]=arguments[Ht];return Lt=Ne.call.apply(Ne,[this].concat(bt)),Rt()(Bt()(Lt),"componentConfigSavedEmitter",new Mt.Q5),Rt()(Bt()(Lt),"onConfigChanged",Lt.componentConfigSavedEmitter.on),Rt()(Bt()(Lt),"quickConfigSavedEmitter",new Mt.Q5),Rt()(Bt()(Lt),"onQuickConfigSaved",Lt.quickConfigSavedEmitter.on),Rt()(Bt()(Lt),"componentConfigRegistry",(0,Nt.PD)(zt.v)),Lt}return Ct()(xe,[{key:"getComponentConfig",value:function(Q,bt){var Ht=Q.name,le=this.componentConfigRegistry.getComponentConfig(Ht,bt),qt=[];return le&&(le==null?void 0:le.children.length)>0&&this.getLeavesInTree(le,qt),qt}},{key:"isConfigNeeded",value:function(Q,bt){var Ht=this.getComponentConfig({name:Q},bt);if(Ht.length===0)return!1;var le=dt()(Ht),qt;try{for(le.s();!(qt=le.n()).done;){var oe=qt.value;if((0,De.VN)(oe,"isRequired")&&!oe.default_value)return!0}}catch(Re){le.e(Re)}finally{le.f()}return!1}},{key:"getLeavesInTree",value:function(Q){var bt=this,Ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];if((0,De.Vd)(Q)&&Q.children.length>0){var le=Q.children;(Q.type==="AT_STRUCT_GROUP"||Q.type==="AT_UNION_GROUP")&&Ht.push(Q),le.map(function(qt){return bt.getLeavesInTree(qt,Ht)});return}Ht.push(Q)}},{key:"saveComponentConfig",value:function(Q){this.componentConfigSavedEmitter.fire(Q)}},{key:"saveQuickConfig",value:function(Q){this.quickConfigSavedEmitter.fire(Q)}}]),xe}(Nt.Hn)},9518:function(wt,yt,k){"use strict";k.d(yt,{Fs:function(){return Ct},Ln:function(){return Pt},VN:function(){return dt},Vd:function(){return rt},oG:function(){return H},yu:function(){return xt}});function rt(St){return!!St.children}function dt(St,Bt){return!!St[Bt]}var H=function(Bt){if(dt(Bt,"type")){var Zt=Bt.type,Ut=Pt[Zt];if(!Ut)return{};var Ft=Bt.value&&Bt.value[Ut]||Bt.default_value&&Bt.default_value[Ut];return Ft}else return null},Pt={AT_BOOL:"b",AT_INT:"i64",AT_FLOAT:"f",AT_STRING:"s",AT_BOOLS:"bs",AT_FLOATS:"fs",AT_INTS:"i64s",AT_STRINGS:"ss",AT_PARTY:"ss",AT_SF_TABLE_COL:"ss",AT_UNION_GROUP:"s"},xt={AT_BOOL:"bs",AT_INT:"i64s",AT_FLOAT:"fs",AT_STRING:"ss",AT_BOOLS:"bs",AT_FLOATS:"fs",AT_INTS:"i64s",AT_STRINGS:"ss",AT_SF_TABLE_COL:"ss"};function Ct(St){var Bt=St.type,Zt=Pt[Bt];if(!Zt)return{};var Ut;if(St.upper_bound_enabled){var Ft;Ut=(Ft=St.upper_bound)===null||Ft===void 0?void 0:Ft[Zt]}var J;if(St.lower_bound_enabled){var Ot;J=((Ot=St.lower_bound)===null||Ot===void 0?void 0:Ot[Zt])||0}return{maxVal:Ut,minVal:J,maxInclusive:St.upper_bound_inclusive,minInclusive:St.lower_bound_inclusive}}},57721:function(wt,yt,k){"use strict";k.d(yt,{N:function(){return bt}});var rt=k(90819),dt=k.n(rt),H=k(89933),Pt=k.n(H),xt=k(78796),Ct=k.n(xt),St=k(4977),Bt=k.n(St),Zt=k(41553),Ut=k.n(Zt),Ft=k(49488),J=k.n(Ft),Ot=k(84047),Rt=k.n(Ot),Mt=k(10154),Nt=k.n(Mt),zt=k(98713),De=k(14258),Fe=k(97627),de=k(11023),Ne=k(90634),xe=k(4513),Lt=k(10080),Q=k(98221),bt=function(Ht){J()(qt,Ht);var le=Rt()(qt);function qt(){var oe;return Ct()(this,qt),oe=le.call(this),Nt()(Ut()(oe),"onComponentDraggedEmitter",new De.Q5),Nt()(Ut()(oe),"onComponentDragged",oe.onComponentDraggedEmitter.on),Nt()(Ut()(oe),"componentList",{TEE:[],MPC:[]}),Nt()(Ut()(oe),"componentConfigMap",{TEE:{},MPC:{}}),Nt()(Ut()(oe),"componentConfigRegistry",(0,Ne.PD)(xe.v)),Nt()(Ut()(oe),"componentInterpreter",(0,Ne.PD)(Q.m)),Nt()(Ut()(oe),"componentConfigService",(0,Ne.PD)(Lt.k)),Nt()(Ut()(oe),"isLoaded",!1),oe.getComponentList(),oe}return Bt()(qt,[{key:"getComponentList",value:function(){var oe=Pt()(dt()().mark(function ye(){var Ve,Ue,ke=this,Et,ht,Y,tt,ft,ut,gt,Jt,se;return dt()().wrap(function(ge){for(;;)switch(ge.prev=ge.next){case 0:return ge.next=2,(0,de.listComponents)();case 2:if(Et=ge.sent,ht=Et.data,Y=Et.status,!(!ht||(Y==null?void 0:Y.code)!==0)){ge.next=8;break}return Fe.ZP.error((Y==null?void 0:Y.msg)||"\u83B7\u53D6\u7EC4\u4EF6\u5931\u8D25"),ge.abrupt("return");case 8:return this.componentList={TEE:((Ve=ht.trustedflow)===null||Ve===void 0?void 0:Ve.comps)||[],MPC:((Ue=ht.secretflow)===null||Ue===void 0?void 0:Ue.comps)||[]},ge.next=11,(0,de.batchGetComponent)(this.componentList.MPC.map(function(me){return{app:"secretflow",name:me.name,domain:me.domain}}));case 11:return tt=ge.sent,ft=tt.data,ut=tt.status,ge.next=16,(0,de.batchGetComponent)(this.componentList.TEE.map(function(me){return{app:"trustedflow",name:me.name,domain:me.domain}}));case 16:gt=ge.sent,Jt=gt.data,se=gt.status,ft&&ft.forEach(function(me){ke.componentConfigMap.MPC["".concat(me.domain,"/").concat(me.name)]=me,ke.componentConfigRegistry.registerConfigNode(me,"MPC")}),Jt&&Jt.forEach(function(me){ke.componentConfigMap.TEE["".concat(me.domain,"/").concat(me.name)]=me,ke.componentConfigRegistry.registerConfigNode(me,"TEE")}),this.isLoaded=!0;case 22:case"end":return ge.stop()}},ye,this)}));function Re(){return oe.apply(this,arguments)}return Re}()},{key:"getComponentConfig",value:function(){var oe=Pt()(dt()().mark(function ye(Ve,Ue){var ke;return dt()().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(ke=this.componentConfigMap[Ue]["".concat(Ve.domain,"/").concat(Ve.name)],!ke){ht.next=3;break}return ht.abrupt("return",ke);case 3:case"end":return ht.stop()}},ye,this)}));function Re(ye,Ve){return oe.apply(this,arguments)}return Re}()},{key:"dragComponent",value:function(){var oe=Pt()(dt()().mark(function ye(Ve,Ue,ke){var Et,ht;return dt()().wrap(function(tt){for(;;)switch(tt.prev=tt.next){case 0:return tt.next=2,this.getComponentConfig({name:Ve.title,domain:Ve.category},Ue);case 2:Et=tt.sent,ht=this.componentConfigService.isConfigNeeded("".concat(Ve.category,"/").concat(Ve.title),Ue),Et&&this.onComponentDraggedEmitter.fire({component:Et,status:ht?zt.e4.unfinished:zt.e4.default,e:ke});case 5:case"end":return tt.stop()}},ye,this)}));function Re(ye,Ve,Ue){return oe.apply(this,arguments)}return Re}()},{key:"convertToTree",value:function(Re){var ye={feature:"\u7279\u5F81\u5904\u7406",preprocessing:"\u7279\u5F81\u5904\u7406",postprocessing:"\u7279\u5F81\u5904\u7406",read_data:"\u6570\u636E\u51C6\u5907",data_prep:"\u6570\u636E\u51C6\u5907"},Ve=this.componentList[Re].reduce(function(Et,ht){var Y=ht.domain,tt=ht.name,ft=ht.desc,ut=ht.version,gt={category:Y,title:{val:tt},docString:ft,isLeaf:!0,key:tt,version:ut};if(Y){var Jt=Et.find(function(se){var fe=se.key;return ye[Y]?ye[Y]===fe:Y===fe});Jt?(Jt.children||(Jt.children=[]),Jt.children.push(gt)):Et.push({category:"",title:{val:ye[Y]?ye[Y]:Y},key:ye[Y]?ye[Y]:Y,isLeaf:!1,docString:"",children:[gt]})}else Et.push(gt);return Et},[]),Ue=["\u6570\u636E\u51C6\u5907","data_filter","\u7279\u5F81\u5904\u7406","stats","ml.train","ml.predict","ml.eval"],ke={\u6570\u636E\u51C6\u5907:["datatable","psi","train_test_split"],\u7279\u5F81\u5904\u7406:["binary_op","case_when","feature_calculate","fillna","onehot_encode","substitution","vert_binning","vert_woe_binning","vert_bin_substitution","binning_modifications"]};return Ve.map(function(Et){if(ke[Et.key]&&Et.children){var ht=ke[Et.key];Et.children.sort(function(Y,tt){return ht.indexOf(Y.title.val)-ht.indexOf(tt.title.val)})}}),Ve.sort(function(Et,ht){return Ue.indexOf(Et.title.val)-Ue.indexOf(ht.title.val)}),Ve}}]),qt}(Ne.Hn)},9088:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return rt}});const rt=dt=>dt?typeof dt=="function"?dt():dt:null},29116:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return ht}});var rt=k(58757),dt=k(51865),H=k.n(dt),Pt=k(59078),xt=k(25061),Ct=k(53153),St=k(60279),Bt=k(8505),Zt=k(665),Ut=k(35919),Ft=k(74594),J=k(37544);const Ot=new Bt.Keyframes("antStatusProcessing",{"0%":{transform:"scale(0.8)",opacity:.5},"100%":{transform:"scale(2.4)",opacity:0}}),Rt=new Bt.Keyframes("antZoomBadgeIn",{"0%":{transform:"scale(0) translate(50%, -50%)",opacity:0},"100%":{transform:"scale(1) translate(50%, -50%)"}}),Mt=new Bt.Keyframes("antZoomBadgeOut",{"0%":{transform:"scale(1) translate(50%, -50%)"},"100%":{transform:"scale(0) translate(50%, -50%)",opacity:0}}),Nt=new Bt.Keyframes("antNoWrapperZoomBadgeIn",{"0%":{transform:"scale(0)",opacity:0},"100%":{transform:"scale(1)"}}),zt=new Bt.Keyframes("antNoWrapperZoomBadgeOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0)",opacity:0}}),De=new Bt.Keyframes("antBadgeLoadingCircle",{"0%":{transformOrigin:"50%"},"100%":{transform:"translate(50%, -50%) rotate(360deg)",transformOrigin:"50%"}}),Fe=Y=>{const{componentCls:tt,iconCls:ft,antCls:ut,badgeShadowSize:gt,motionDurationSlow:Jt,textFontSize:se,textFontSizeSM:fe,statusSize:ge,dotSize:me,textFontWeight:Ye,indicatorHeight:we,indicatorHeightSM:en,marginXS:Ln,calc:Wn}=Y,vn=`${ut}-scroll-number`,Xn=(0,Ut.Z)(Y,(sn,Zn)=>{let{darkColor:mn}=Zn;return{[`&${tt} ${tt}-color-${sn}`]:{background:mn,[`&:not(${tt}-count)`]:{color:mn}}}});return{[tt]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,Zt.Wf)(Y)),{position:"relative",display:"inline-block",width:"fit-content",lineHeight:1,[`${tt}-count`]:{zIndex:Y.indicatorZIndex,minWidth:we,height:we,color:Y.badgeTextColor,fontWeight:Ye,fontSize:se,lineHeight:(0,Bt.unit)(we),whiteSpace:"nowrap",textAlign:"center",background:Y.badgeColor,borderRadius:Wn(we).div(2).equal(),boxShadow:`0 0 0 ${(0,Bt.unit)(gt)} ${Y.badgeShadowColor}`,transition:`background ${Y.motionDurationMid}`,a:{color:Y.badgeTextColor},"a:hover":{color:Y.badgeTextColor},"a:hover &":{background:Y.badgeColorHover}},[`${tt}-count-sm`]:{minWidth:en,height:en,fontSize:fe,lineHeight:(0,Bt.unit)(en),borderRadius:Wn(en).div(2).equal()},[`${tt}-multiple-words`]:{padding:`0 ${(0,Bt.unit)(Y.paddingXS)}`,bdi:{unicodeBidi:"plaintext"}},[`${tt}-dot`]:{zIndex:Y.indicatorZIndex,width:me,minWidth:me,height:me,background:Y.badgeColor,borderRadius:"100%",boxShadow:`0 0 0 ${(0,Bt.unit)(gt)} ${Y.badgeShadowColor}`},[`${tt}-dot${vn}`]:{transition:`background ${Jt}`},[`${tt}-count, ${tt}-dot, ${vn}-custom-component`]:{position:"absolute",top:0,insetInlineEnd:0,transform:"translate(50%, -50%)",transformOrigin:"100% 0%",[`&${ft}-spin`]:{animationName:De,animationDuration:"1s",animationIterationCount:"infinite",animationTimingFunction:"linear"}},[`&${tt}-status`]:{lineHeight:"inherit",verticalAlign:"baseline",[`${tt}-status-dot`]:{position:"relative",top:-1,display:"inline-block",width:ge,height:ge,verticalAlign:"middle",borderRadius:"50%"},[`${tt}-status-success`]:{backgroundColor:Y.colorSuccess},[`${tt}-status-processing`]:{overflow:"visible",color:Y.colorPrimary,backgroundColor:Y.colorPrimary,"&::after":{position:"absolute",top:0,insetInlineStart:0,width:"100%",height:"100%",borderWidth:gt,borderStyle:"solid",borderColor:"inherit",borderRadius:"50%",animationName:Ot,animationDuration:Y.badgeProcessingDuration,animationIterationCount:"infinite",animationTimingFunction:"ease-in-out",content:'""'}},[`${tt}-status-default`]:{backgroundColor:Y.colorTextPlaceholder},[`${tt}-status-error`]:{backgroundColor:Y.colorError},[`${tt}-status-warning`]:{backgroundColor:Y.colorWarning},[`${tt}-status-text`]:{marginInlineStart:Ln,color:Y.colorText,fontSize:Y.fontSize}}}),Xn),{[`${tt}-zoom-appear, ${tt}-zoom-enter`]:{animationName:Rt,animationDuration:Y.motionDurationSlow,animationTimingFunction:Y.motionEaseOutBack,animationFillMode:"both"},[`${tt}-zoom-leave`]:{animationName:Mt,animationDuration:Y.motionDurationSlow,animationTimingFunction:Y.motionEaseOutBack,animationFillMode:"both"},[`&${tt}-not-a-wrapper`]:{[`${tt}-zoom-appear, ${tt}-zoom-enter`]:{animationName:Nt,animationDuration:Y.motionDurationSlow,animationTimingFunction:Y.motionEaseOutBack},[`${tt}-zoom-leave`]:{animationName:zt,animationDuration:Y.motionDurationSlow,animationTimingFunction:Y.motionEaseOutBack},[`&:not(${tt}-status)`]:{verticalAlign:"middle"},[`${vn}-custom-component, ${tt}-count`]:{transform:"none"},[`${vn}-custom-component, ${vn}`]:{position:"relative",top:"auto",display:"block",transformOrigin:"50% 50%"}},[`${vn}`]:{overflow:"hidden",[`${vn}-only`]:{position:"relative",display:"inline-block",height:we,transition:`all ${Y.motionDurationSlow} ${Y.motionEaseOutBack}`,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden",[`> p${vn}-only-unit`]:{height:we,margin:0,WebkitTransformStyle:"preserve-3d",WebkitBackfaceVisibility:"hidden"}},[`${vn}-symbol`]:{verticalAlign:"top"}},"&-rtl":{direction:"rtl",[`${tt}-count, ${tt}-dot, ${vn}-custom-component`]:{transform:"translate(-50%, -50%)"}}})}},de=Y=>{const{fontHeight:tt,lineWidth:ft,marginXS:ut,colorBorderBg:gt}=Y,Jt=tt,se=ft,fe=Y.colorBgContainer,ge=Y.colorError,me=Y.colorErrorHover;return(0,Ft.TS)(Y,{badgeFontHeight:Jt,badgeShadowSize:se,badgeTextColor:fe,badgeColor:ge,badgeColorHover:me,badgeShadowColor:gt,badgeProcessingDuration:"1.2s",badgeRibbonOffset:ut,badgeRibbonCornerTransform:"scaleY(0.75)",badgeRibbonCornerFilter:"brightness(75%)"})},Ne=Y=>{const{fontSize:tt,lineHeight:ft,fontSizeSM:ut,lineWidth:gt}=Y;return{indicatorZIndex:"auto",indicatorHeight:Math.round(tt*ft)-2*gt,indicatorHeightSM:tt,dotSize:ut/2,textFontSize:ut,textFontSizeSM:ut,textFontWeight:"normal",statusSize:ut/2}};var xe=(0,J.I$)("Badge",Y=>{const tt=de(Y);return Fe(tt)},Ne);const Lt=Y=>{const{antCls:tt,badgeFontHeight:ft,marginXS:ut,badgeRibbonOffset:gt,calc:Jt}=Y,se=`${tt}-ribbon`,fe=`${tt}-ribbon-wrapper`,ge=(0,Ut.Z)(Y,(me,Ye)=>{let{darkColor:we}=Ye;return{[`&${se}-color-${me}`]:{background:we,color:we}}});return{[`${fe}`]:{position:"relative"},[`${se}`]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,Zt.Wf)(Y)),{position:"absolute",top:ut,padding:`0 ${(0,Bt.unit)(Y.paddingXS)}`,color:Y.colorPrimary,lineHeight:(0,Bt.unit)(ft),whiteSpace:"nowrap",backgroundColor:Y.colorPrimary,borderRadius:Y.borderRadiusSM,[`${se}-text`]:{color:Y.colorTextLightSolid},[`${se}-corner`]:{position:"absolute",top:"100%",width:gt,height:gt,color:"currentcolor",border:`${(0,Bt.unit)(Jt(gt).div(2).equal())} solid`,transform:Y.badgeRibbonCornerTransform,transformOrigin:"top",filter:Y.badgeRibbonCornerFilter}}),ge),{[`&${se}-placement-end`]:{insetInlineEnd:Jt(gt).mul(-1).equal(),borderEndEndRadius:0,[`${se}-corner`]:{insetInlineEnd:0,borderInlineEndColor:"transparent",borderBlockEndColor:"transparent"}},[`&${se}-placement-start`]:{insetInlineStart:Jt(gt).mul(-1).equal(),borderEndStartRadius:0,[`${se}-corner`]:{insetInlineStart:0,borderBlockEndColor:"transparent",borderInlineStartColor:"transparent"}},"&-rtl":{direction:"rtl"}})}};var Q=(0,J.I$)(["Badge","Ribbon"],Y=>{const tt=de(Y);return Lt(tt)},Ne),Ht=Y=>{const{className:tt,prefixCls:ft,style:ut,color:gt,children:Jt,text:se,placement:fe="end",rootClassName:ge}=Y,{getPrefixCls:me,direction:Ye}=rt.useContext(St.E_),we=me("ribbon",ft),en=`${we}-wrapper`,[Ln,Wn,vn]=Q(we,en),Xn=(0,xt.o2)(gt,!1),sn=H()(we,`${we}-placement-${fe}`,{[`${we}-rtl`]:Ye==="rtl",[`${we}-color-${gt}`]:Xn},tt),Zn={},mn={};return gt&&!Xn&&(Zn.background=gt,mn.color=gt),Ln(rt.createElement("div",{className:H()(en,ge,Wn,vn)},Jt,rt.createElement("div",{className:H()(sn,Wn),style:Object.assign(Object.assign({},Zn),ut)},rt.createElement("span",{className:`${we}-text`},se),rt.createElement("div",{className:`${we}-corner`,style:mn}))))};function le(Y){let{prefixCls:tt,value:ft,current:ut,offset:gt=0}=Y,Jt;return gt&&(Jt={position:"absolute",top:`${gt}00%`,left:0}),rt.createElement("span",{style:Jt,className:H()(`${tt}-only-unit`,{current:ut})},ft)}function qt(Y,tt,ft){let ut=Y,gt=0;for(;(ut+10)%10!==tt;)ut+=ft,gt+=ft;return gt}function oe(Y){const{prefixCls:tt,count:ft,value:ut}=Y,gt=Number(ut),Jt=Math.abs(ft),[se,fe]=rt.useState(gt),[ge,me]=rt.useState(Jt),Ye=()=>{fe(gt),me(Jt)};rt.useEffect(()=>{const Ln=setTimeout(()=>{Ye()},1e3);return()=>{clearTimeout(Ln)}},[gt]);let we,en;if(se===gt||Number.isNaN(gt)||Number.isNaN(se))we=[rt.createElement(le,Object.assign({},Y,{key:gt,current:!0}))],en={transition:"none"};else{we=[];const Ln=gt+10,Wn=[];for(let sn=gt;sn<=Ln;sn+=1)Wn.push(sn);const vn=Wn.findIndex(sn=>sn%10===se);we=Wn.map((sn,Zn)=>{const mn=sn%10;return rt.createElement(le,Object.assign({},Y,{key:sn,value:mn,offset:Zn-vn,current:Zn===vn}))});const Xn=ge<Jt?1:-1;en={transform:`translateY(${-qt(se,gt,Xn)}00%)`}}return rt.createElement("span",{className:`${tt}-only`,style:en,onTransitionEnd:Ye},we)}var Re=function(Y,tt){var ft={};for(var ut in Y)Object.prototype.hasOwnProperty.call(Y,ut)&&tt.indexOf(ut)<0&&(ft[ut]=Y[ut]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var gt=0,ut=Object.getOwnPropertySymbols(Y);gt<ut.length;gt++)tt.indexOf(ut[gt])<0&&Object.prototype.propertyIsEnumerable.call(Y,ut[gt])&&(ft[ut[gt]]=Y[ut[gt]]);return ft},Ve=rt.forwardRef((Y,tt)=>{const{prefixCls:ft,count:ut,className:gt,motionClassName:Jt,style:se,title:fe,show:ge,component:me="sup",children:Ye}=Y,we=Re(Y,["prefixCls","count","className","motionClassName","style","title","show","component","children"]),{getPrefixCls:en}=rt.useContext(St.E_),Ln=en("scroll-number",ft),Wn=Object.assign(Object.assign({},we),{"data-show":ge,style:se,className:H()(Ln,gt,Jt),title:fe});let vn=ut;if(ut&&Number(ut)%1===0){const Xn=String(ut).split("");vn=rt.createElement("bdi",null,Xn.map((sn,Zn)=>rt.createElement(oe,{prefixCls:Ln,count:Number(ut),value:sn,key:Xn.length-Zn})))}return se&&se.borderColor&&(Wn.style=Object.assign(Object.assign({},se),{boxShadow:`0 0 0 1px ${se.borderColor} inset`})),Ye?(0,Ct.Tm)(Ye,Xn=>({className:H()(`${Ln}-custom-component`,Xn==null?void 0:Xn.className,Jt)})):rt.createElement(me,Object.assign({},Wn,{ref:tt}),vn)}),Ue=function(Y,tt){var ft={};for(var ut in Y)Object.prototype.hasOwnProperty.call(Y,ut)&&tt.indexOf(ut)<0&&(ft[ut]=Y[ut]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var gt=0,ut=Object.getOwnPropertySymbols(Y);gt<ut.length;gt++)tt.indexOf(ut[gt])<0&&Object.prototype.propertyIsEnumerable.call(Y,ut[gt])&&(ft[ut[gt]]=Y[ut[gt]]);return ft};const ke=(Y,tt)=>{var ft,ut,gt,Jt,se;const{prefixCls:fe,scrollNumberPrefixCls:ge,children:me,status:Ye,text:we,color:en,count:Ln=null,overflowCount:Wn=99,dot:vn=!1,size:Xn="default",title:sn,offset:Zn,style:mn,className:au,rootClassName:cu,classNames:Nn,styles:zn,showZero:no=!1}=Y,Gs=Ue(Y,["prefixCls","scrollNumberPrefixCls","children","status","text","color","count","overflowCount","dot","size","title","offset","style","className","rootClassName","classNames","styles","showZero"]),{getPrefixCls:Fn,direction:js,badge:ze}=rt.useContext(St.E_),yn=Fn("badge",fe),[sc,lu,uu]=xe(yn),ro=Ln>Wn?`${Wn}+`:Ln,io=ro==="0"||ro===0,Yn=Ln===null||io&&!no,Er=(Ye!=null||en!=null)&&Yn,Si=vn&&!io,Lr=Si?"":ro,ue=(0,rt.useMemo)(()=>(Lr==null||Lr===""||io&&!no)&&!Si,[Lr,io,no,Si]),Vs=(0,rt.useRef)(Ln);ue||(Vs.current=Ln);const Hr=Vs.current,Oi=(0,rt.useRef)(Lr);ue||(Oi.current=Lr);const Us=Oi.current,kr=(0,rt.useRef)(Si);ue||(kr.current=Si);const $r=(0,rt.useMemo)(()=>{if(!Zn)return Object.assign(Object.assign({},ze==null?void 0:ze.style),mn);const er={marginTop:Zn[1]};return js==="rtl"?er.left=parseInt(Zn[0],10):er.right=-parseInt(Zn[0],10),Object.assign(Object.assign(Object.assign({},er),ze==null?void 0:ze.style),mn)},[js,Zn,mn,ze==null?void 0:ze.style]),oo=sn!=null?sn:typeof Hr=="string"||typeof Hr=="number"?Hr:void 0,ac=ue||!we?null:rt.createElement("span",{className:`${yn}-status-text`},we),$o=!Hr||typeof Hr!="object"?void 0:(0,Ct.Tm)(Hr,er=>({style:Object.assign(Object.assign({},$r),er.style)})),Wr=(0,xt.o2)(en,!1),Wo=H()(Nn==null?void 0:Nn.indicator,(ft=ze==null?void 0:ze.classNames)===null||ft===void 0?void 0:ft.indicator,{[`${yn}-status-dot`]:Er,[`${yn}-status-${Ye}`]:!!Ye,[`${yn}-color-${en}`]:Wr}),cn={};en&&!Wr&&(cn.color=en,cn.background=en);const so=H()(yn,{[`${yn}-status`]:Er,[`${yn}-not-a-wrapper`]:!me,[`${yn}-rtl`]:js==="rtl"},au,cu,ze==null?void 0:ze.className,(ut=ze==null?void 0:ze.classNames)===null||ut===void 0?void 0:ut.root,Nn==null?void 0:Nn.root,lu,uu);if(!me&&Er){const er=$r.color;return sc(rt.createElement("span",Object.assign({},Gs,{className:so,style:Object.assign(Object.assign(Object.assign({},zn==null?void 0:zn.root),(gt=ze==null?void 0:ze.styles)===null||gt===void 0?void 0:gt.root),$r)}),rt.createElement("span",{className:Wo,style:Object.assign(Object.assign(Object.assign({},zn==null?void 0:zn.indicator),(Jt=ze==null?void 0:ze.styles)===null||Jt===void 0?void 0:Jt.indicator),cn)}),we&&rt.createElement("span",{style:{color:er},className:`${yn}-status-text`},we)))}return sc(rt.createElement("span",Object.assign({ref:tt},Gs,{className:so,style:Object.assign(Object.assign({},(se=ze==null?void 0:ze.styles)===null||se===void 0?void 0:se.root),zn==null?void 0:zn.root)}),me,rt.createElement(Pt.default,{visible:!ue,motionName:`${yn}-zoom`,motionAppear:!1,motionDeadline:1e3},er=>{let{className:cc,ref:Xo}=er;var Hs,ao;const lc=Fn("scroll-number",ge),$s=kr.current,uc=H()(Nn==null?void 0:Nn.indicator,(Hs=ze==null?void 0:ze.classNames)===null||Hs===void 0?void 0:Hs.indicator,{[`${yn}-dot`]:$s,[`${yn}-count`]:!$s,[`${yn}-count-sm`]:Xn==="small",[`${yn}-multiple-words`]:!$s&&Us&&Us.toString().length>1,[`${yn}-status-${Ye}`]:!!Ye,[`${yn}-color-${en}`]:Wr});let Ai=Object.assign(Object.assign(Object.assign({},zn==null?void 0:zn.indicator),(ao=ze==null?void 0:ze.styles)===null||ao===void 0?void 0:ao.indicator),$r);return en&&!Wr&&(Ai=Ai||{},Ai.background=en),rt.createElement(Ve,{prefixCls:lc,show:!ue,motionClassName:cc,className:uc,count:Us,title:oo,style:Ai,key:"scrollNumber",ref:Xo},$o)}),ac))},Et=rt.forwardRef(ke);Et.Ribbon=Ht;var ht=Et},93023:function(wt,yt,k){"use strict";k.d(yt,{t5:function(){return Ut}});var rt=k(58757),dt=k(51865),H=k.n(dt),Pt=k(74862),xt=k(9088),Ct=k(60279),St=k(89959),Bt=function(J,Ot){var Rt={};for(var Mt in J)Object.prototype.hasOwnProperty.call(J,Mt)&&Ot.indexOf(Mt)<0&&(Rt[Mt]=J[Mt]);if(J!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Nt=0,Mt=Object.getOwnPropertySymbols(J);Nt<Mt.length;Nt++)Ot.indexOf(Mt[Nt])<0&&Object.prototype.propertyIsEnumerable.call(J,Mt[Nt])&&(Rt[Mt[Nt]]=J[Mt[Nt]]);return Rt};const Zt=(J,Ot,Rt)=>!Ot&&!Rt?null:rt.createElement(rt.Fragment,null,Ot&&rt.createElement("div",{className:`${J}-title`},(0,xt.Z)(Ot)),rt.createElement("div",{className:`${J}-inner-content`},(0,xt.Z)(Rt))),Ut=J=>{const{hashId:Ot,prefixCls:Rt,className:Mt,style:Nt,placement:zt="top",title:De,content:Fe,children:de}=J;return rt.createElement("div",{className:H()(Ot,Rt,`${Rt}-pure`,`${Rt}-placement-${zt}`,Mt),style:Nt},rt.createElement("div",{className:`${Rt}-arrow`}),rt.createElement(Pt.Popup,Object.assign({},J,{className:Ot,prefixCls:Rt}),de||Zt(Rt,De,Fe)))},Ft=J=>{const{prefixCls:Ot,className:Rt}=J,Mt=Bt(J,["prefixCls","className"]),{getPrefixCls:Nt}=rt.useContext(Ct.E_),zt=Nt("popover",Ot),[De,Fe,de]=(0,St.Z)(zt);return De(rt.createElement(Ut,Object.assign({},Mt,{prefixCls:zt,hashId:Fe,className:H()(Rt,de)})))};yt.ZP=Ft},62808:function(wt,yt,k){"use strict";var rt=k(58757),dt=k(51865),H=k.n(dt),Pt=k(9088),xt=k(97248),Ct=k(60279),St=k(94310),Bt=k(93023),Zt=k(89959),Ut=function(Ot,Rt){var Mt={};for(var Nt in Ot)Object.prototype.hasOwnProperty.call(Ot,Nt)&&Rt.indexOf(Nt)<0&&(Mt[Nt]=Ot[Nt]);if(Ot!=null&&typeof Object.getOwnPropertySymbols=="function")for(var zt=0,Nt=Object.getOwnPropertySymbols(Ot);zt<Nt.length;zt++)Rt.indexOf(Nt[zt])<0&&Object.prototype.propertyIsEnumerable.call(Ot,Nt[zt])&&(Mt[Nt[zt]]=Ot[Nt[zt]]);return Mt};const Ft=Ot=>{let{title:Rt,content:Mt,prefixCls:Nt}=Ot;return rt.createElement(rt.Fragment,null,Rt&&rt.createElement("div",{className:`${Nt}-title`},(0,Pt.Z)(Rt)),rt.createElement("div",{className:`${Nt}-inner-content`},(0,Pt.Z)(Mt)))},J=rt.forwardRef((Ot,Rt)=>{const{prefixCls:Mt,title:Nt,content:zt,overlayClassName:De,placement:Fe="top",trigger:de="hover",mouseEnterDelay:Ne=.1,mouseLeaveDelay:xe=.1,overlayStyle:Lt={}}=Ot,Q=Ut(Ot,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle"]),{getPrefixCls:bt}=rt.useContext(Ct.E_),Ht=bt("popover",Mt),[le,qt,oe]=(0,Zt.Z)(Ht),Re=bt(),ye=H()(De,qt,oe);return le(rt.createElement(St.Z,Object.assign({placement:Fe,trigger:de,mouseEnterDelay:Ne,mouseLeaveDelay:xe,overlayStyle:Lt},Q,{prefixCls:Ht,overlayClassName:ye,ref:Rt,overlay:Nt||zt?rt.createElement(Ft,{prefixCls:Ht,title:Nt,content:zt}):null,transitionName:(0,xt.m)(Re,"zoom-big",Q.transitionName),"data-popover-inject":!0})))});J._InternalPanelDoNotUseOrYouWillBeFired=Bt.ZP,yt.Z=J},89959:function(wt,yt,k){"use strict";var rt=k(665),dt=k(18646),H=k(37070),Pt=k(69565),xt=k(37544),Ct=k(74594),St=k(18132);const Bt=Ft=>{const{componentCls:J,popoverColor:Ot,titleMinWidth:Rt,fontWeightStrong:Mt,innerPadding:Nt,boxShadowSecondary:zt,colorTextHeading:De,borderRadiusLG:Fe,zIndexPopup:de,titleMarginBottom:Ne,colorBgElevated:xe,popoverBg:Lt,titleBorderBottom:Q,innerContentPadding:bt,titlePadding:Ht}=Ft;return[{[J]:Object.assign(Object.assign({},(0,rt.Wf)(Ft)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:de,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":xe,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${J}-content`]:{position:"relative"},[`${J}-inner`]:{backgroundColor:Lt,backgroundClip:"padding-box",borderRadius:Fe,boxShadow:zt,padding:Nt},[`${J}-title`]:{minWidth:Rt,marginBottom:Ne,color:De,fontWeight:Mt,borderBottom:Q,padding:Ht},[`${J}-inner-content`]:{color:Ot,padding:bt}})},(0,H.ZP)(Ft,"var(--antd-arrow-background-color)"),{[`${J}-pure`]:{position:"relative",maxWidth:"none",margin:Ft.sizePopupArrow,display:"inline-block",[`${J}-content`]:{display:"inline-block"}}}]},Zt=Ft=>{const{componentCls:J}=Ft;return{[J]:Pt.i.map(Ot=>{const Rt=Ft[`${Ot}6`];return{[`&${J}-${Ot}`]:{"--antd-arrow-background-color":Rt,[`${J}-inner`]:{backgroundColor:Rt},[`${J}-arrow`]:{background:"transparent"}}}})}},Ut=Ft=>{const{lineWidth:J,controlHeight:Ot,fontHeight:Rt,padding:Mt,wireframe:Nt,zIndexPopupBase:zt,borderRadiusLG:De,marginXS:Fe,lineType:de,colorSplit:Ne,paddingSM:xe}=Ft,Lt=Ot-Rt,Q=Lt/2,bt=Lt/2-J,Ht=Mt;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:zt+30},(0,St.w)(Ft)),(0,H.wZ)({contentRadius:De,limitVerticalRadius:!0})),{innerPadding:Nt?0:12,titleMarginBottom:Nt?0:Fe,titlePadding:Nt?`${Q}px ${Ht}px ${bt}px`:0,titleBorderBottom:Nt?`${J}px ${de} ${Ne}`:"none",innerContentPadding:Nt?`${xe}px ${Ht}px`:0})};yt.Z=(0,xt.I$)("Popover",Ft=>{const{colorBgElevated:J,colorText:Ot}=Ft,Rt=(0,Ct.TS)(Ft,{popoverBg:J,popoverColor:Ot});return[Bt(Rt),Zt(Rt),(0,dt._y)(Rt,"zoom-big")]},Ut,{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]})},70861:function(wt,yt,k){var rt=k(83250),dt=rt.Symbol;wt.exports=dt},69823:function(wt,yt,k){var rt=k(70861),dt=k(91339),H=k(25151),Pt="[object Null]",xt="[object Undefined]",Ct=rt?rt.toStringTag:void 0;function St(Bt){return Bt==null?Bt===void 0?xt:Pt:Ct&&Ct in Object(Bt)?dt(Bt):H(Bt)}wt.exports=St},42448:function(wt,yt,k){var rt=k(69823),dt=k(66052),H=k(50440),Pt="[object Arguments]",xt="[object Array]",Ct="[object Boolean]",St="[object Date]",Bt="[object Error]",Zt="[object Function]",Ut="[object Map]",Ft="[object Number]",J="[object Object]",Ot="[object RegExp]",Rt="[object Set]",Mt="[object String]",Nt="[object WeakMap]",zt="[object ArrayBuffer]",De="[object DataView]",Fe="[object Float32Array]",de="[object Float64Array]",Ne="[object Int8Array]",xe="[object Int16Array]",Lt="[object Int32Array]",Q="[object Uint8Array]",bt="[object Uint8ClampedArray]",Ht="[object Uint16Array]",le="[object Uint32Array]",qt={};qt[Fe]=qt[de]=qt[Ne]=qt[xe]=qt[Lt]=qt[Q]=qt[bt]=qt[Ht]=qt[le]=!0,qt[Pt]=qt[xt]=qt[zt]=qt[Ct]=qt[De]=qt[St]=qt[Bt]=qt[Zt]=qt[Ut]=qt[Ft]=qt[J]=qt[Ot]=qt[Rt]=qt[Mt]=qt[Nt]=!1;function oe(Re){return H(Re)&&dt(Re.length)&&!!qt[rt(Re)]}wt.exports=oe},31525:function(wt){function yt(k){return function(rt){return k(rt)}}wt.exports=yt},20302:function(wt,yt,k){var rt=typeof k.g=="object"&&k.g&&k.g.Object===Object&&k.g;wt.exports=rt},18490:function(wt,yt,k){var rt=k(33540),dt=rt(Object.getPrototypeOf,Object);wt.exports=dt},91339:function(wt,yt,k){var rt=k(70861),dt=Object.prototype,H=dt.hasOwnProperty,Pt=dt.toString,xt=rt?rt.toStringTag:void 0;function Ct(St){var Bt=H.call(St,xt),Zt=St[xt];try{St[xt]=void 0;var Ut=!0}catch(J){}var Ft=Pt.call(St);return Ut&&(Bt?St[xt]=Zt:delete St[xt]),Ft}wt.exports=Ct},8690:function(wt,yt,k){wt=k.nmd(wt);var rt=k(20302),dt=yt&&!yt.nodeType&&yt,H=dt&&!0&&wt&&!wt.nodeType&&wt,Pt=H&&H.exports===dt,xt=Pt&&rt.process,Ct=function(){try{var St=H&&H.require&&H.require("util").types;return St||xt&&xt.binding&&xt.binding("util")}catch(Bt){}}();wt.exports=Ct},25151:function(wt){var yt=Object.prototype,k=yt.toString;function rt(dt){return k.call(dt)}wt.exports=rt},33540:function(wt){function yt(k,rt){return function(dt){return k(rt(dt))}}wt.exports=yt},83250:function(wt,yt,k){var rt=k(20302),dt=typeof self=="object"&&self&&self.Object===Object&&self,H=rt||dt||Function("return this")();wt.exports=H},55589:function(wt){var yt=Array.isArray;wt.exports=yt},66052:function(wt){var yt=9007199254740991;function k(rt){return typeof rt=="number"&&rt>-1&&rt%1==0&&rt<=yt}wt.exports=k},3224:function(wt,yt,k){var rt=k(69823),dt=k(50440),H="[object Number]";function Pt(xt){return typeof xt=="number"||dt(xt)&&rt(xt)==H}wt.exports=Pt},50440:function(wt){function yt(k){return k!=null&&typeof k=="object"}wt.exports=yt},54256:function(wt,yt,k){var rt=k(69823),dt=k(18490),H=k(50440),Pt="[object Object]",xt=Function.prototype,Ct=Object.prototype,St=xt.toString,Bt=Ct.hasOwnProperty,Zt=St.call(Object);function Ut(Ft){if(!H(Ft)||rt(Ft)!=Pt)return!1;var J=dt(Ft);if(J===null)return!0;var Ot=Bt.call(J,"constructor")&&J.constructor;return typeof Ot=="function"&&Ot instanceof Ot&&St.call(Ot)==Zt}wt.exports=Ut},50922:function(wt,yt,k){var rt=k(42448),dt=k(31525),H=k(8690),Pt=H&&H.isTypedArray,xt=Pt?dt(Pt):rt;wt.exports=xt},87057:function(wt,yt,k){var rt;(function(dt,H,Pt){if(!dt)return;for(var xt={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},Ct={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},St={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},Bt={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},Zt,Ut=1;Ut<20;++Ut)xt[111+Ut]="f"+Ut;for(Ut=0;Ut<=9;++Ut)xt[Ut+96]=Ut.toString();function Ft(Q,bt,Ht){if(Q.addEventListener){Q.addEventListener(bt,Ht,!1);return}Q.attachEvent("on"+bt,Ht)}function J(Q){if(Q.type=="keypress"){var bt=String.fromCharCode(Q.which);return Q.shiftKey||(bt=bt.toLowerCase()),bt}return xt[Q.which]?xt[Q.which]:Ct[Q.which]?Ct[Q.which]:String.fromCharCode(Q.which).toLowerCase()}function Ot(Q,bt){return Q.sort().join(",")===bt.sort().join(",")}function Rt(Q){var bt=[];return Q.shiftKey&&bt.push("shift"),Q.altKey&&bt.push("alt"),Q.ctrlKey&&bt.push("ctrl"),Q.metaKey&&bt.push("meta"),bt}function Mt(Q){if(Q.preventDefault){Q.preventDefault();return}Q.returnValue=!1}function Nt(Q){if(Q.stopPropagation){Q.stopPropagation();return}Q.cancelBubble=!0}function zt(Q){return Q=="shift"||Q=="ctrl"||Q=="alt"||Q=="meta"}function De(){if(!Zt){Zt={};for(var Q in xt)Q>95&&Q<112||xt.hasOwnProperty(Q)&&(Zt[xt[Q]]=Q)}return Zt}function Fe(Q,bt,Ht){return Ht||(Ht=De()[Q]?"keydown":"keypress"),Ht=="keypress"&&bt.length&&(Ht="keydown"),Ht}function de(Q){return Q==="+"?["+"]:(Q=Q.replace(/\+{2}/g,"+plus"),Q.split("+"))}function Ne(Q,bt){var Ht,le,qt,oe=[];for(Ht=de(Q),qt=0;qt<Ht.length;++qt)le=Ht[qt],Bt[le]&&(le=Bt[le]),bt&&bt!="keypress"&&St[le]&&(le=St[le],oe.push("shift")),zt(le)&&oe.push(le);return bt=Fe(le,oe,bt),{key:le,modifiers:oe,action:bt}}function xe(Q,bt){return Q===null||Q===H?!1:Q===bt?!0:xe(Q.parentNode,bt)}function Lt(Q){var bt=this;if(Q=Q||H,!(bt instanceof Lt))return new Lt(Q);bt.target=Q,bt._callbacks={},bt._directMap={};var Ht={},le,qt=!1,oe=!1,Re=!1;function ye(tt){tt=tt||{};var ft=!1,ut;for(ut in Ht){if(tt[ut]){ft=!0;continue}Ht[ut]=0}ft||(Re=!1)}function Ve(tt,ft,ut,gt,Jt,se){var fe,ge,me=[],Ye=ut.type;if(!bt._callbacks[tt])return[];for(Ye=="keyup"&&zt(tt)&&(ft=[tt]),fe=0;fe<bt._callbacks[tt].length;++fe)if(ge=bt._callbacks[tt][fe],!(!gt&&ge.seq&&Ht[ge.seq]!=ge.level)&&Ye==ge.action&&(Ye=="keypress"&&!ut.metaKey&&!ut.ctrlKey||Ot(ft,ge.modifiers))){var we=!gt&&ge.combo==Jt,en=gt&&ge.seq==gt&&ge.level==se;(we||en)&&bt._callbacks[tt].splice(fe,1),me.push(ge)}return me}function Ue(tt,ft,ut,gt){bt.stopCallback(ft,ft.target||ft.srcElement,ut,gt)||tt(ft,ut)===!1&&(Mt(ft),Nt(ft))}bt._handleKey=function(tt,ft,ut){var gt=Ve(tt,ft,ut),Jt,se={},fe=0,ge=!1;for(Jt=0;Jt<gt.length;++Jt)gt[Jt].seq&&(fe=Math.max(fe,gt[Jt].level));for(Jt=0;Jt<gt.length;++Jt){if(gt[Jt].seq){if(gt[Jt].level!=fe)continue;ge=!0,se[gt[Jt].seq]=1,Ue(gt[Jt].callback,ut,gt[Jt].combo,gt[Jt].seq);continue}ge||Ue(gt[Jt].callback,ut,gt[Jt].combo)}var me=ut.type=="keypress"&&oe;ut.type==Re&&!zt(tt)&&!me&&ye(se),oe=ge&&ut.type=="keydown"};function ke(tt){typeof tt.which!="number"&&(tt.which=tt.keyCode);var ft=J(tt);if(ft){if(tt.type=="keyup"&&qt===ft){qt=!1;return}bt.handleKey(ft,Rt(tt),tt)}}function Et(){clearTimeout(le),le=setTimeout(ye,1e3)}function ht(tt,ft,ut,gt){Ht[tt]=0;function Jt(Ye){return function(){Re=Ye,++Ht[tt],Et()}}function se(Ye){Ue(ut,Ye,tt),gt!=="keyup"&&(qt=J(Ye)),setTimeout(ye,10)}for(var fe=0;fe<ft.length;++fe){var ge=fe+1===ft.length,me=ge?se:Jt(gt||Ne(ft[fe+1]).action);Y(ft[fe],me,gt,tt,fe)}}function Y(tt,ft,ut,gt,Jt){bt._directMap[tt+":"+ut]=ft,tt=tt.replace(/\s+/g," ");var se=tt.split(" "),fe;if(se.length>1){ht(tt,se,ft,ut);return}fe=Ne(tt,ut),bt._callbacks[fe.key]=bt._callbacks[fe.key]||[],Ve(fe.key,fe.modifiers,{type:fe.action},gt,tt,Jt),bt._callbacks[fe.key][gt?"unshift":"push"]({callback:ft,modifiers:fe.modifiers,action:fe.action,seq:gt,level:Jt,combo:tt})}bt._bindMultiple=function(tt,ft,ut){for(var gt=0;gt<tt.length;++gt)Y(tt[gt],ft,ut)},Ft(Q,"keypress",ke),Ft(Q,"keydown",ke),Ft(Q,"keyup",ke)}Lt.prototype.bind=function(Q,bt,Ht){var le=this;return Q=Q instanceof Array?Q:[Q],le._bindMultiple.call(le,Q,bt,Ht),le},Lt.prototype.unbind=function(Q,bt){var Ht=this;return Ht.bind.call(Ht,Q,function(){},bt)},Lt.prototype.trigger=function(Q,bt){var Ht=this;return Ht._directMap[Q+":"+bt]&&Ht._directMap[Q+":"+bt]({},Q),Ht},Lt.prototype.reset=function(){var Q=this;return Q._callbacks={},Q._directMap={},Q},Lt.prototype.stopCallback=function(Q,bt){var Ht=this;if((" "+bt.className+" ").indexOf(" mousetrap ")>-1||xe(bt,Ht.target))return!1;if("composedPath"in Q&&typeof Q.composedPath=="function"){var le=Q.composedPath()[0];le!==Q.target&&(bt=le)}return bt.tagName=="INPUT"||bt.tagName=="SELECT"||bt.tagName=="TEXTAREA"||bt.isContentEditable},Lt.prototype.handleKey=function(){var Q=this;return Q._handleKey.apply(Q,arguments)},Lt.addKeycodes=function(Q){for(var bt in Q)Q.hasOwnProperty(bt)&&(xt[bt]=Q[bt]);Zt=null},Lt.init=function(){var Q=Lt(H);for(var bt in Q)bt.charAt(0)!=="_"&&(Lt[bt]=function(Ht){return function(){return Q[Ht].apply(Q,arguments)}}(bt))},Lt.init(),dt.Mousetrap=Lt,wt.exports&&(wt.exports=Lt),rt=function(){return Lt}.call(yt,k,yt,wt),rt!==Pt&&(wt.exports=rt)})(typeof window!="undefined"?window:null,typeof window!="undefined"?document:null)},36137:function(wt,yt,k){"use strict";k.d(yt,{Z:function(){return dt}});var rt=k(26736);function dt(H,Pt,xt,Ct){var St=rt.unstable_batchedUpdates?function(Zt){rt.unstable_batchedUpdates(xt,Zt)}:xt;return H!=null&&H.addEventListener&&H.addEventListener(Pt,St,Ct),{remove:function(){H!=null&&H.removeEventListener&&H.removeEventListener(Pt,St,Ct)}}}},98713:function(wt,yt,k){var f0;"use strict";k.d(yt,{Us:function(){return Ka},fI:function(){return zd},EJ:function(){return l0},m6:function(){return s0},Js:function(){return c0},Bp:function(){return a0},e4:function(){return Id},h_:function(){return on.h_},me:function(){return on.z2},QX:function(){return rc},EI:function(){return i0},Fz:function(){return o0}});var rt={};k.r(rt),k.d(rt,{postorder:function(){return K0},preorder:function(){return gc}});var dt=k(97627),H=k(74458);const Pt=`.x6-widget-dnd {
  position: absolute;
  top: -10000px;
  left: -10000px;
  z-index: 999999;
  display: none;
  cursor: move;
  opacity: 0.7;
  pointer-events: 'cursor';
}
.x6-widget-dnd.dragging {
  display: inline-block;
}
.x6-widget-dnd.dragging * {
  pointer-events: none !important;
}
.x6-widget-dnd .x6-graph {
  background: transparent;
  box-shadow: none;
}
`;var xt=function(n,r,o,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,o):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,o,s);else for(var g=n.length-1;g>=0;g--)(d=n[g])&&(u=(a<3?d(u):a>3?d(r,o,u):d(r,o))||u);return a>3&&u&&Object.defineProperty(r,o,u),u};class Ct extends H.G7{get targetScroller(){return this.options.target.getPlugin("scroller")}get targetGraph(){return this.options.target}get targetModel(){return this.targetGraph.model}get snapline(){return this.options.target.getPlugin("snapline")}constructor(r){super(),this.name="dnd",this.options=Object.assign(Object.assign({},Ct.defaults),r),this.init()}init(){H.mf.ensure(this.name,Pt),this.container=document.createElement("div"),H.is.addClass(this.container,this.prefixClassName("widget-dnd")),this.draggingGraph=new H.kJ(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1,async:!1})),H.is.append(this.container,this.draggingGraph.container)}start(r,o){const s=o;s.preventDefault(),this.targetModel.startBatch("dnd"),H.is.addClass(this.container,"dragging"),H.is.appendTo(this.container,this.options.draggingContainer||document.body),this.sourceNode=r,this.prepareDragging(r,s.clientX,s.clientY);const a=this.updateNodePosition(s.clientX,s.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:s,node:r,cell:r,view:this.draggingView,x:a.x,y:a.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(Ct.documentEvents,s.data)}isSnaplineEnabled(){return this.snapline&&this.snapline.isEnabled()}prepareDragging(r,o,s){const a=this.draggingGraph,u=a.model,d=this.options.getDragNode(r,{sourceNode:r,draggingGraph:a,targetGraph:this.targetGraph});d.position(0,0);let g=5;if(this.isSnaplineEnabled()&&(g+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const b=this.targetGraph.transform.getScale();a.scale(b.sx,b.sy),g*=Math.max(b.sx,b.sy)}else a.scale(1,1);this.clearDragging(),u.resetCells([d]);const p=a.findViewByCell(d);p.undelegateEvents(),p.cell.off("changed"),a.fitToContent({padding:g,allowNewOrigin:"any",useCellGeometry:!1});const m=p.getBBox();this.geometryBBox=p.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(m.getTopLeft()),this.draggingNode=d,this.draggingView=p,this.draggingBBox=d.getBBox(),this.padding=g,this.originOffset=this.updateGraphPosition(o,s)}updateGraphPosition(r,o){const s=document.body.scrollTop||document.documentElement.scrollTop,a=document.body.scrollLeft||document.documentElement.scrollLeft,u=this.delta,d=this.geometryBBox,g=this.padding||5,p={left:r-u.x-d.width/2-g+a,top:o-u.y-d.height/2-g+s};return this.draggingGraph&&H.is.css(this.container,{left:`${p.left}px`,top:`${p.top}px`}),p}updateNodePosition(r,o){const s=this.targetGraph.clientToLocal(r,o),a=this.draggingBBox;return s.x-=a.width/2,s.y-=a.height/2,this.draggingNode.position(s.x,s.y),s}snap({cell:r,current:o,options:s}){const a=r;if(s.snapped){const u=this.draggingBBox;a.position(u.x+s.tx,u.y+s.ty,{silent:!0}),this.draggingView.translate(),a.position(o.x,o.y,{silent:!0}),this.snapOffset={x:s.tx,y:s.ty}}else this.snapOffset=null}onDragging(r){const o=this.draggingView;if(o){r.preventDefault();const s=this.normalizeEvent(r),a=s.clientX,u=s.clientY;this.updateGraphPosition(a,u);const d=this.updateNodePosition(a,u),g=this.targetGraph.options.embedding.enabled,p=(g||this.isSnaplineEnabled())&&this.isInsideValidArea({x:a,y:u});if(g){o.setEventData(s,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const m=o.getEventData(s);p?o.processEmbedding(s,m):o.clearEmbedding(m),this.candidateEmbedView=m.candidateEmbedView}this.isSnaplineEnabled()&&(p?this.snapline.snapOnMoving({e:s,view:o,x:d.x,y:d.y}):this.snapline.hide())}}onDragEnd(r){const o=this.draggingNode;if(o){const s=this.normalizeEvent(r),a=this.draggingView,u=this.draggingBBox,d=this.snapOffset;let g=u.x,p=u.y;d&&(g+=d.x,p+=d.y),o.position(g,p,{silent:!0});const m=this.drop(o,{x:s.clientX,y:s.clientY}),b=w=>{w?(this.onDropped(o),this.targetGraph.options.embedding.enabled&&a&&(a.setEventData(s,{cell:w,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),a.finalizeEmbedding(s,a.getEventData(s)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};H.Iw.isAsync(m)?(this.undelegateDocumentEvents(),m.then(b)):b(m)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(r){this.draggingNode===r&&(this.clearDragging(),H.is.removeClass(this.container,"dragging"),H.is.remove(this.container))}onDropInvalid(){const r=this.draggingNode;r&&this.onDropped(r)}isInsideValidArea(r){let o,s=null;const a=this.targetGraph,u=this.targetScroller;this.options.dndContainer&&(s=this.getDropArea(this.options.dndContainer));const d=s&&s.containsPoint(r);if(u)if(u.options.autoResize)o=this.getDropArea(u.container);else{const g=this.getDropArea(u.container);o=this.getDropArea(a.container).intersectsWithRect(g)}else o=this.getDropArea(a.container);return!d&&o&&o.containsPoint(r)}getDropArea(r){const o=H.is.offset(r),s=document.body.scrollTop||document.documentElement.scrollTop,a=document.body.scrollLeft||document.documentElement.scrollLeft;return H.Ae.create({x:o.left+parseInt(H.is.css(r,"border-left-width"),10)-a,y:o.top+parseInt(H.is.css(r,"border-top-width"),10)-s,width:r.clientWidth,height:r.clientHeight})}drop(r,o){if(this.isInsideValidArea(o)){const s=this.targetGraph,a=s.model,u=s.clientToLocal(o),d=this.sourceNode,g=this.options.getDropNode(r,{sourceNode:d,draggingNode:r,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),p=g.getBBox();u.x+=p.x-p.width/2,u.y+=p.y-p.height/2;const m=this.snapOffset?1:s.getGridSize();g.position(H.Z4.snapToGrid(u.x,m),H.Z4.snapToGrid(u.y,m)),g.removeZIndex();const b=this.options.validateNode,w=b?b(g,{sourceNode:d,draggingNode:r,droppingNode:g,targetGraph:s,draggingGraph:this.draggingGraph}):!0;return typeof w=="boolean"?w?(a.addCell(g,{stencil:this.cid}),g):null:H.Iw.toDeferredBoolean(w).then(C=>C?(a.addCell(g,{stencil:this.cid}),g):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove(),H.mf.clean(this.name)}}xt([H.G7.dispose()],Ct.prototype,"dispose",null),function(n){n.defaults={getDragNode:r=>r.clone(),getDropNode:r=>r.clone()},n.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(Ct||(Ct={}));const St=n=>typeof n=="string",Bt=n=>{const r=Object.create(null);return o=>r[o]||(r[o]=n(o))},Zt=/-(\w)/g,Ut=Bt(n=>n.replace(Zt,(r,o)=>o?o.toUpperCase():"")),Ft=Array.isArray,J=n=>typeof n=="number",Ot=n=>Number.isNaN(Number(n)),Rt=n=>{const r=parseFloat(n);return Ot(r)?n:r},Mt=n=>n!==null&&typeof n=="object",Nt=n=>{if(n===null)return n;if(n instanceof Date)return new Date(n.getTime());if(n instanceof Array){const r=[];return n.forEach(o=>{r.push(o)}),r.map(o=>Nt(o))}if(typeof n=="object"&&Object.keys(n).length){const r=Object.assign({},n);return Object.keys(r).forEach(o=>{r[o]=Nt(r[o])}),r}return n},zt=(n,r)=>{const o=n[r];return Mt(o)?o.cell:o},De=(n,r,o)=>{const s=[];for(let a=0;a<n;a++)s[a]={in:0,out:0,all:0};return o&&o.forEach(a=>{const u=zt(a,"source"),d=zt(a,"target");u&&s[r[u]]&&(s[r[u]].out+=1,s[r[u]].all+=1),d&&s[r[d]]&&(s[r[d]].in+=1,s[r[d]].all+=1)}),s},Fe=(n,r)=>{const o={};return n.forEach(s=>{o[s.id]={in:0,out:0,all:0}}),r&&r.forEach(s=>{const a=zt(s,"source"),u=zt(s,"target");a&&(o[a].out+=1,o[a].all+=1),u&&(o[u].in+=1,o[u].all+=1)}),o},de=n=>{const r=[],o=n.length;for(let s=0;s<o;s+=1){r[s]=[];for(let a=0;a<o;a+=1)s===a?r[s][a]=0:n[s][a]===0||!n[s][a]?r[s][a]=1/0:r[s][a]=n[s][a]}for(let s=0;s<o;s+=1)for(let a=0;a<o;a+=1)for(let u=0;u<o;u+=1)r[a][u]>r[a][s]+r[s][u]&&(r[a][u]=r[a][s]+r[s][u]);return r},Ne=(n,r)=>{const{nodes:o,edges:s}=n,a=[],u={};if(!o)throw new Error("invalid nodes data!");return o&&o.forEach((d,g)=>{u[d.id]=g;const p=[];a.push(p)}),s==null||s.forEach(d=>{const g=zt(d,"source"),p=zt(d,"target"),m=u[g],b=u[p];m===void 0||b===void 0||(a[m][b]=1,r||(a[b][m]=1))}),a},xe=(n,r)=>{const o=[];return n.forEach(s=>{const a=[];s.forEach(u=>{a.push(u*r)}),o.push(a)}),o},Lt=(n,r)=>{if(n&&n.children){for(let o=n.children.length-1;o>=0;o--)if(!Lt(n.children[o],r))return}return!!r(n)},Q=(n,r)=>{typeof r=="function"&&Lt(n,r)},bt=n=>{let r=1/0,o=1/0,s=-1/0,a=-1/0;return n.forEach(u=>{let d=u.size;Ft(d)?d.length===1&&(d=[d[0],d[0]]):J(d)?d=[d,d]:(d===void 0||isNaN(d))&&(d=[30,30]);const g=[d[0]/2,d[1]/2],p=u.x-g[0],m=u.x+g[0],b=u.y-g[1],w=u.y+g[1];r>p&&(r=p),o>b&&(o=b),s<m&&(s=m),a<w&&(a=w)}),{minX:r,minY:o,maxX:s,maxY:a}},Ht=n=>{const r={x:0,y:0};n.forEach(s=>{r.x+=s.x||0,r.y+=s.y||0});const o=n.length||1;return{x:r.x/o,y:r.y/o}},le=(n,r,o)=>{var s,a;return n==="source"?((s=o==null?void 0:o.find(u=>u.target===r.id))===null||s===void 0?void 0:s.source)||{}:((a=o==null?void 0:o.find(u=>u.source===r.id))===null||a===void 0?void 0:a.target)||{}},qt=(n,r,o)=>{let s=[];switch(n){case"source":s=o==null?void 0:o.filter(u=>u.source===r.id).map(u=>u.target);break;case"target":s=o==null?void 0:o.filter(u=>u.target===r.id).map(u=>u.source);break;case"both":s=o==null?void 0:o.filter(u=>u.source===r.id).map(u=>u.target).concat(o==null?void 0:o.filter(u=>u.target===r.id).map(u=>u.source));break;default:break}const a=new Set(s);return Array.from(a)},oe=(n,r,o,s,a)=>{const u=o[r]||"";let d=(s==null?void 0:s.filter(g=>g[r]===u))||[];return n==="leaf"&&(d=d.filter(g=>{var p,m;return((p=a[g.id])===null||p===void 0?void 0:p.in)===0||((m=a[g.id])===null||m===void 0?void 0:m.out)===0})),d},Re=(n,r,o,s,a,u)=>{const{in:d,out:g}=a[r.id];let p=r,m=[];d===0?(p=le("source",r,o),m=qt("both",p,o).map(w=>u[w])):g===0&&(p=le("target",r,o),m=qt("both",p,o).map(w=>u[w])),m=m.filter(w=>a[w.id]&&(a[w.id].in===0||a[w.id].out===0));const b=oe(n,s,r,m,a);return{coreNode:p,relativeLeafNodes:m,sameTypeLeafNodes:b}},ye=n=>typeof n=="function",Ve=(n,r,o)=>{let s;return o?s=o:J(n)?s=()=>n:s=()=>r,s},Ue=(n,r,o=!0)=>!r&&r!==0?s=>s.size?Ft(s.size)?s.size[0]>s.size[1]?s.size[0]:s.size[1]:Mt(s.size)?s.size.width>s.size.height?s.size.width:s.size.height:s.size:n:ye(r)?r:J(r)?()=>r:Ft(r)?()=>{if(o){const s=Math.max(...r);return isNaN(s)?n:s}return r}:Mt(r)?()=>{if(o){const s=Math.max(r.width,r.height);return isNaN(s)?n:s}return[r.width,r.height]}:()=>n,ke=new Map,Et=(n,r)=>{if(ke.get(n)&&console.warn(`The layout with the name ${n} exists already, it will be overridden`),isObject(r)){class o extends Base{constructor(a){var u;super();const d=this,g={},p=Object.assign({},d.getDefaultCfg(),((u=r.getDefaultCfg)===null||u===void 0?void 0:u.call(r))||{});Object.assign(g,p,r,a),Object.keys(g).forEach(m=>{const b=g[m];d[m]=b})}}ke.set(n,o)}else ke.set(n,r);return ke.get(n)},ht=n=>{ke.has(n)&&ke.delete(n)},Y=n=>ke.has(n)?ke.get(n):null;class tt{constructor(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=()=>{}}layout(r){return this.init(r),this.execute(!0)}init(r){this.nodes=r.nodes||[],this.edges=r.edges||[],this.combos=r.combos||[],this.comboEdges=r.comboEdges||[],this.hiddenNodes=r.hiddenNodes||[],this.hiddenEdges=r.hiddenEdges||[],this.hiddenCombos=r.hiddenCombos||[],this.vedges=r.vedges||[]}execute(r){}executeWithWorker(){}getDefaultCfg(){return{}}updateCfg(r){r&&Object.assign(this,r)}getType(){return"base"}destroy(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0}}class ft extends tt{constructor(r){super(),this.begin=[0,0],this.preventOverlap=!0,this.preventOverlapPadding=10,this.condense=!1,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.row=0,this.col=0,this.cellWidth=0,this.cellHeight=0,this.cellUsed={},this.id2manPos={},this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}}execute(){const r=this,{nodes:o,edges:s,begin:a}=r,u=o.length;if(u===0)return r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:s};if(u===1)return o[0].x=a[0],o[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:s};let{sortBy:d,width:g,height:p}=r;const{condense:m,preventOverlapPadding:b,preventOverlap:w,nodeSpacing:C,nodeSize:O}=r,A=[];o.forEach(N=>{A.push(N)});const M={};if(A.forEach((N,R)=>{M[N.id]=R}),(d==="degree"||!St(d)||A[0][d]===void 0)&&(d="degree",Ot(o[0].degree))){const N=De(A.length,M,s);A.forEach((R,z)=>{R.degree=N[z].all})}A.sort((N,R)=>R[d]-N[d]),!g&&typeof window!="undefined"&&(g=window.innerWidth),!p&&typeof window!="undefined"&&(p=window.innerHeight);const P=r.rows,I=r.cols!=null?r.cols:r.columns;if(r.cells=u,P!=null&&I!=null?(r.rows=P,r.cols=I):P!=null&&I==null?(r.rows=P,r.cols=Math.ceil(r.cells/r.rows)):P==null&&I!=null?(r.cols=I,r.rows=Math.ceil(r.cells/r.cols)):(r.splits=Math.sqrt(r.cells*r.height/r.width),r.rows=Math.round(r.splits),r.cols=Math.round(r.width/r.height*r.splits)),r.rows=Math.max(r.rows,1),r.cols=Math.max(r.cols,1),r.cols*r.rows>r.cells){const N=r.small(),R=r.large();(N-1)*R>=r.cells?r.small(N-1):(R-1)*N>=r.cells&&r.large(R-1)}else for(;r.cols*r.rows<r.cells;){const N=r.small(),R=r.large();(R+1)*N>=r.cells?r.large(R+1):r.small(N+1)}if(r.cellWidth=g/r.cols,r.cellHeight=p/r.rows,m&&(r.cellWidth=0,r.cellHeight=0),w||C){const N=Ue(10,C),R=Ue(30,O,!1);A.forEach(z=>{(!z.x||!z.y)&&(z.x=0,z.y=0);const F=R(z)||30;let Z,ot;Ft(F)?(Z=F[0],ot=F[1]):(Z=F,ot=F);const nt=N!==void 0?N(z):b,q=Z+nt,et=ot+nt;r.cellWidth=Math.max(r.cellWidth,q),r.cellHeight=Math.max(r.cellHeight,et)})}r.cellUsed={},r.row=0,r.col=0,r.id2manPos={};for(let N=0;N<A.length;N++){const R=A[N];let z;if(r.position&&(z=r.position(R)),z&&(z.row!==void 0||z.col!==void 0)){const F={row:z.row,col:z.col};if(F.col===void 0)for(F.col=0;r.used(F.row,F.col);)F.col++;else if(F.row===void 0)for(F.row=0;r.used(F.row,F.col);)F.row++;r.id2manPos[R.id]=F,r.use(F.row,F.col)}r.getPos(R)}return r.onLayoutEnd&&r.onLayoutEnd(),{edges:s,nodes:A}}small(r){const o=this;let s;const a=o.rows||5,u=o.cols||5;return r==null?s=Math.min(a,u):Math.min(a,u)===o.rows?o.rows=r:o.cols=r,s}large(r){const o=this;let s;const a=o.rows||5,u=o.cols||5;return r==null?s=Math.max(a,u):Math.max(a,u)===o.rows?o.rows=r:o.cols=r,s}used(r,o){return this.cellUsed[`c-${r}-${o}`]||!1}use(r,o){const s=this;s.cellUsed[`c-${r}-${o}`]=!0}moveToNextCell(){const r=this,o=r.cols||5;r.col++,r.col>=o&&(r.col=0,r.row++)}getPos(r){const o=this,{begin:s,cellWidth:a,cellHeight:u}=o;let d,g;const p=o.id2manPos[r.id];if(p)d=p.col*a+a/2+s[0],g=p.row*u+u/2+s[1];else{for(;o.used(o.row,o.col);)o.moveToNextCell();d=o.col*a+a/2+s[0],g=o.row*u+u/2+s[1],o.use(o.row,o.col),o.moveToNextCell()}r.x=d,r.y=g}getType(){return"grid"}}const ut=(n,r)=>{let o;return n?J(n)?o=s=>n:o=n:o=s=>r||1,o};class gt extends tt{constructor(r){super(),this.maxIteration=500,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.preventOverlap=!0,this.collideStrength=1,this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.animate=!0,this.updateCfg(r)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){var r,o;const s=this,a=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!a||a.length===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const u=s.center;if(a.length===1){a[0].x=u[0],a[0].y=u[1],(o=s.onLayoutEnd)===null||o===void 0||o.call(s);return}const d={},g={};a.forEach((w,C)=>{J(w.x)||(w.x=Math.random()*s.width),J(w.y)||(w.y=Math.random()*s.height),d[w.id]=w,g[w.id]=C}),s.nodeMap=d,s.nodeIdxMap=g,s.linkDistance=ut(s.linkDistance,1),s.nodeStrength=ut(s.nodeStrength,1),s.edgeStrength=ut(s.edgeStrength,1);const p=s.nodeSize;let m;if(s.preventOverlap){const w=s.nodeSpacing;let C;J(w)?C=()=>w:ye(w)?C=w:C=()=>0,p?Ft(p)?m=O=>Math.max(p[0],p[1])+C(O):m=O=>p+C(O):m=O=>O.size?Ft(O.size)?Math.max(O.size[0],O.size[1])+C(O):Mt(O.size)?Math.max(O.size.width,O.size.height)+C(O):O.size+C(O):10+C(O)}s.nodeSize=m;const b=s.edges;s.degrees=De(a.length,s.nodeIdxMap,b),s.getMass||(s.getMass=w=>w.mass||s.degrees[s.nodeIdxMap[w.id]].all||1),s.run()}run(){var r;const o=this,{maxIteration:s,nodes:a,workerEnabled:u,minMovement:d,animate:g}=o;if(a)if(u||!g){for(let p=0;p<s;p++){const m=o.runOneStep(p);if(o.reachMoveThreshold(a,m,d))break}(r=o.onLayoutEnd)===null||r===void 0||r.call(o)}else{if(typeof window=="undefined")return;let p=0;this.timeInterval=window.setInterval(()=>{var m,b;if(!a)return;const w=o.runOneStep(p)||[];o.reachMoveThreshold(a,w,d)&&((m=o.onLayoutEnd)===null||m===void 0||m.call(o),window.clearInterval(o.timeInterval)),p++,p>=s&&((b=o.onLayoutEnd)===null||b===void 0||b.call(o),window.clearInterval(o.timeInterval))},0)}}reachMoveThreshold(r,o,s){let a=0;return r.forEach((u,d)=>{const g=u.x-o[d].x,p=u.y-o[d].y;a+=Math.sqrt(g*g+p*p)}),a/=r.length,a<s}runOneStep(r){var o;const s=this,{nodes:a,edges:u}=s,d=[],g=[];if(!a)return;a.forEach((b,w)=>{d[2*w]=0,d[2*w+1]=0,g[2*w]=0,g[2*w+1]=0}),s.calRepulsive(d,a),u&&s.calAttractive(d,u),s.calGravity(d,a);const p=Math.max(.02,s.interval-r*.002);s.updateVelocity(d,g,p,a);const m=[];return a.forEach(b=>{m.push({x:b.x,y:b.y})}),s.updatePosition(g,p,a),(o=s.tick)===null||o===void 0||o.call(s),m}calRepulsive(r,o){const s=this,{getMass:a,factor:u,coulombDisScale:d,preventOverlap:g,collideStrength:p=1}=s,m=s.nodeStrength,b=s.nodeSize;o.forEach((w,C)=>{const O=a?a(w):1;o.forEach((A,M)=>{if(C>=M)return;let P=w.x-A.x,I=w.y-A.y;P===0&&I===0&&(P=Math.random()*.01,I=Math.random()*.01);const N=P*P+I*I,R=Math.sqrt(N),z=(R+.1)*d,F=P/R,Z=I/R,ot=(m(w)+m(A))*.5*u/(z*z),nt=a?a(A):1;if(r[2*C]+=F*ot,r[2*C+1]+=Z*ot,r[2*M]-=F*ot,r[2*M+1]-=Z*ot,g&&(b(w)+b(A))/2>R){const q=p*(m(w)+m(A))*.5/N;r[2*C]+=F*q/O,r[2*C+1]+=Z*q/O,r[2*M]-=F*q/nt,r[2*M+1]-=Z*q/nt}})})}calAttractive(r,o){const s=this,{nodeMap:a,nodeIdxMap:u,linkDistance:d,edgeStrength:g}=s,p=s.nodeSize,m=s.getMass;o.forEach((b,w)=>{const C=zt(b,"source"),O=zt(b,"target"),A=a[C],M=a[O];let P=M.x-A.x,I=M.y-A.y;P===0&&I===0&&(P=Math.random()*.01,I=Math.random()*.01);const N=Math.sqrt(P*P+I*I),R=P/N,z=I/N,ot=((d(b,A,M)||1+(p(A)+p(M)||0)/2)-N)*g(b),nt=u[C],q=u[O],et=m?m(A):1,st=m?m(M):1;r[2*nt]-=R*ot/et,r[2*nt+1]-=z*ot/et,r[2*q]+=R*ot/st,r[2*q+1]+=z*ot/st})}calGravity(r,o){const s=this,a=s.center,u=s.gravity,d=s.degrees,g=o.length;for(let p=0;p<g;p++){const m=o[p];let b=m.x-a[0],w=m.y-a[1],C=u;if(s.getCenter){const O=s.getCenter(m,d[p].all);O&&J(O[0])&&J(O[1])&&J(O[2])&&(b=m.x-O[0],w=m.y-O[1],C=O[2])}C&&(r[2*p]-=C*b,r[2*p+1]-=C*w)}}updateVelocity(r,o,s,a){const u=this,d=s*u.damping;a.forEach((g,p)=>{let m=r[2*p]*d||.01,b=r[2*p+1]*d||.01;const w=Math.sqrt(m*m+b*b);if(w>u.maxSpeed){const C=u.maxSpeed/w;m=C*m,b=C*b}o[2*p]=m,o[2*p+1]=b})}updatePosition(r,o,s){s.forEach((a,u)=>{if(J(a.fx)&&J(a.fy)){a.x=a.fx,a.y=a.fy;return}const d=r[2*u]*o,g=r[2*u+1]*o;a.x+=d,a.y+=g})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"gForce"}}function Jt(n){const r=+this._x.call(null,n),o=+this._y.call(null,n);return se(this.cover(r,o),r,o,n)}function se(n,r,o,s){if(isNaN(r)||isNaN(o))return n;var a,u=n._root,d={data:s},g=n._x0,p=n._y0,m=n._x1,b=n._y1,w,C,O,A,M,P,I,N;if(!u)return n._root=d,n;for(;u.length;)if((M=r>=(w=(g+m)/2))?g=w:m=w,(P=o>=(C=(p+b)/2))?p=C:b=C,a=u,!(u=u[I=P<<1|M]))return a[I]=d,n;if(O=+n._x.call(null,u.data),A=+n._y.call(null,u.data),r===O&&o===A)return d.next=u,a?a[I]=d:n._root=d,n;do a=a?a[I]=new Array(4):n._root=new Array(4),(M=r>=(w=(g+m)/2))?g=w:m=w,(P=o>=(C=(p+b)/2))?p=C:b=C;while((I=P<<1|M)===(N=(A>=C)<<1|O>=w));return a[N]=u,a[I]=d,n}function fe(n){var r,o,s=n.length,a,u,d=new Array(s),g=new Array(s),p=1/0,m=1/0,b=-1/0,w=-1/0;for(o=0;o<s;++o)isNaN(a=+this._x.call(null,r=n[o]))||isNaN(u=+this._y.call(null,r))||(d[o]=a,g[o]=u,a<p&&(p=a),a>b&&(b=a),u<m&&(m=u),u>w&&(w=u));if(p>b||m>w)return this;for(this.cover(p,m).cover(b,w),o=0;o<s;++o)se(this,d[o],g[o],n[o]);return this}function ge(n,r){if(isNaN(n=+n)||isNaN(r=+r))return this;var o=this._x0,s=this._y0,a=this._x1,u=this._y1;if(isNaN(o))a=(o=Math.floor(n))+1,u=(s=Math.floor(r))+1;else{for(var d=a-o||1,g=this._root,p,m;o>n||n>=a||s>r||r>=u;)switch(m=(r<s)<<1|n<o,p=new Array(4),p[m]=g,g=p,d*=2,m){case 0:a=o+d,u=s+d;break;case 1:o=a-d,u=s+d;break;case 2:a=o+d,s=u-d;break;case 3:o=a-d,s=u-d;break}this._root&&this._root.length&&(this._root=g)}return this._x0=o,this._y0=s,this._x1=a,this._y1=u,this}function me(){var n=[];return this.visit(function(r){if(!r.length)do n.push(r.data);while(r=r.next)}),n}function Ye(n){return arguments.length?this.cover(+n[0][0],+n[0][1]).cover(+n[1][0],+n[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function we(n,r,o,s,a){this.node=n,this.x0=r,this.y0=o,this.x1=s,this.y1=a}function en(n,r,o){var s,a=this._x0,u=this._y0,d,g,p,m,b=this._x1,w=this._y1,C=[],O=this._root,A,M;for(O&&C.push(new we(O,a,u,b,w)),o==null?o=1/0:(a=n-o,u=r-o,b=n+o,w=r+o,o*=o);A=C.pop();)if(!(!(O=A.node)||(d=A.x0)>b||(g=A.y0)>w||(p=A.x1)<a||(m=A.y1)<u))if(O.length){var P=(d+p)/2,I=(g+m)/2;C.push(new we(O[3],P,I,p,m),new we(O[2],d,I,P,m),new we(O[1],P,g,p,I),new we(O[0],d,g,P,I)),(M=(r>=I)<<1|n>=P)&&(A=C[C.length-1],C[C.length-1]=C[C.length-1-M],C[C.length-1-M]=A)}else{var N=n-+this._x.call(null,O.data),R=r-+this._y.call(null,O.data),z=N*N+R*R;if(z<o){var F=Math.sqrt(o=z);a=n-F,u=r-F,b=n+F,w=r+F,s=O.data}}return s}function Ln(n){if(isNaN(b=+this._x.call(null,n))||isNaN(w=+this._y.call(null,n)))return this;var r,o=this._root,s,a,u,d=this._x0,g=this._y0,p=this._x1,m=this._y1,b,w,C,O,A,M,P,I;if(!o)return this;if(o.length)for(;;){if((A=b>=(C=(d+p)/2))?d=C:p=C,(M=w>=(O=(g+m)/2))?g=O:m=O,r=o,!(o=o[P=M<<1|A]))return this;if(!o.length)break;(r[P+1&3]||r[P+2&3]||r[P+3&3])&&(s=r,I=P)}for(;o.data!==n;)if(a=o,!(o=o.next))return this;return(u=o.next)&&delete o.next,a?(u?a.next=u:delete a.next,this):r?(u?r[P]=u:delete r[P],(o=r[0]||r[1]||r[2]||r[3])&&o===(r[3]||r[2]||r[1]||r[0])&&!o.length&&(s?s[I]=o:this._root=o),this):(this._root=u,this)}function Wn(n){for(var r=0,o=n.length;r<o;++r)this.remove(n[r]);return this}function vn(){return this._root}function Xn(){var n=0;return this.visit(function(r){if(!r.length)do++n;while(r=r.next)}),n}function sn(n){var r=[],o,s=this._root,a,u,d,g,p;for(s&&r.push(new we(s,this._x0,this._y0,this._x1,this._y1));o=r.pop();)if(!n(s=o.node,u=o.x0,d=o.y0,g=o.x1,p=o.y1)&&s.length){var m=(u+g)/2,b=(d+p)/2;(a=s[3])&&r.push(new we(a,m,b,g,p)),(a=s[2])&&r.push(new we(a,u,b,m,p)),(a=s[1])&&r.push(new we(a,m,d,g,b)),(a=s[0])&&r.push(new we(a,u,d,m,b))}return this}function Zn(n){var r=[],o=[],s;for(this._root&&r.push(new we(this._root,this._x0,this._y0,this._x1,this._y1));s=r.pop();){var a=s.node;if(a.length){var u,d=s.x0,g=s.y0,p=s.x1,m=s.y1,b=(d+p)/2,w=(g+m)/2;(u=a[0])&&r.push(new we(u,d,g,b,w)),(u=a[1])&&r.push(new we(u,b,g,p,w)),(u=a[2])&&r.push(new we(u,d,w,b,m)),(u=a[3])&&r.push(new we(u,b,w,p,m))}o.push(s)}for(;s=o.pop();)n(s.node,s.x0,s.y0,s.x1,s.y1);return this}function mn(n){return n[0]}function au(n){return arguments.length?(this._x=n,this):this._x}function cu(n){return n[1]}function Nn(n){return arguments.length?(this._y=n,this):this._y}function zn(n,r,o){var s=new no(r==null?mn:r,o==null?cu:o,NaN,NaN,NaN,NaN);return n==null?s:s.addAll(n)}function no(n,r,o,s,a,u){this._x=n,this._y=r,this._x0=o,this._y0=s,this._x1=a,this._y1=u,this._root=void 0}function Gs(n){for(var r={data:n.data},o=r;n=n.next;)o=o.next={data:n.data};return r}var Fn=zn.prototype=no.prototype;Fn.copy=function(){var n=new no(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root,o,s;if(!r)return n;if(!r.length)return n._root=Gs(r),n;for(o=[{source:r,target:n._root=new Array(4)}];r=o.pop();)for(var a=0;a<4;++a)(s=r.source[a])&&(s.length?o.push({source:s,target:r.target[a]=new Array(4)}):r.target[a]=Gs(s));return n},Fn.add=Jt,Fn.addAll=fe,Fn.cover=ge,Fn.data=me,Fn.extent=Ye,Fn.find=en,Fn.remove=Ln,Fn.removeAll=Wn,Fn.root=vn,Fn.size=Xn,Fn.visit=sn,Fn.visitAfter=Zn,Fn.x=au,Fn.y=Nn;const js=.81,ze=.1;function yn(n,r,o,s,a){const u=o/s,d=n.map((p,m)=>{const b=r[p.id],{data:w,x:C,y:O,size:A}=b,{nodeStrength:M}=w.layout.force;return{x:C,y:O,size:A,index:m,vx:0,vy:0,weight:u*M}}),g=zn(d,p=>p.x,p=>p.y).visitAfter(sc);return d.forEach(p=>{uu(p,g)}),d.map((p,m)=>{const b=r[n[m].id],{mass:w=1}=b.data.layout.force;a[2*m]=p.vx/w,a[2*m+1]=p.vy/w}),a}function sc(n){let r=0,o=0,s=0;if(n.length){for(let a=0;a<4;a++){const u=n[a];u&&u.weight&&(r+=u.weight,o+=u.x*u.weight,s+=u.y*u.weight)}n.x=o/r,n.y=s/r,n.weight=r}else{const a=n;n.x=a.data.x,n.y=a.data.y,n.weight=a.data.weight}}const lu=(n,r,o,s,a,u)=>{const d=u.x-n.x||ze,g=u.y-n.y||ze,p=s-r,m=d*d+g*g,b=Math.sqrt(m)*m;if(p*p*js<m){const w=n.weight/b;return u.vx+=d*w,u.vy+=g*w,!0}if(n.length)return!1;if(n.data!==u){const w=n.data.weight/b;u.vx+=d*w,u.vy+=g*w}};function uu(n,r){r.visit((o,s,a,u,d)=>lu(o,s,a,u,d,n))}const ro=(n,r)=>{let o;return n?J(n)?o=s=>n:o=n:o=s=>r||1,o};class io extends tt{constructor(r){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=500,this.minMovement=.4,this.interval=.02,this.factor=1,this.linkDistance=200,this.gravity=0,this.clusterNodeStrength=20,this.preventOverlap=!0,this.distanceThresholdMode="mean",this.tick=()=>{},this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.judgingDistance=0,this.centripetalOptions={leaf:2,single:2,others:1,center:s=>({x:this.width/2,y:this.height/2})};const{getMass:o}=r;this.propsGetMass=o,this.updateCfg(r)}getCentripetalOptions(){const{leafCluster:r,clustering:o,nodeClusterBy:s,nodes:a,nodeMap:u,clusterNodeStrength:d}=this,g=O=>typeof d=="function"?d(O):d;let p={},m;if(r){m=this.getSameTypeLeafMap()||{};const O=Array.from(new Set(a==null?void 0:a.map(A=>A[s])))||[];p={single:100,leaf:(A,M,P)=>{const{relativeLeafNodes:I,sameTypeLeafNodes:N}=m[A.id]||{};return(N==null?void 0:N.length)===(I==null?void 0:I.length)||(O==null?void 0:O.length)===1?1:g(A)},others:1,center:(A,M,P)=>{var I;const{degree:N}=((I=A.data)===null||I===void 0?void 0:I.layout)||{};if(!N)return{x:100,y:100};let R;if(N===1){const{sameTypeLeafNodes:z=[]}=m[A.id]||{};z.length===1?R=void 0:z.length>1&&(R=Ht(z))}else R=void 0;return{x:R==null?void 0:R.x,y:R==null?void 0:R.y}}}}if(o){m||(m=this.getSameTypeLeafMap());const O=Array.from(new Set(a.map((M,P)=>M[s]))).filter(M=>M!==void 0),A={};O.forEach(M=>{const P=a.filter(I=>I[s]===M).map(I=>u[I.id]);A[M]=Ht(P)}),p={single:M=>g(M),leaf:M=>g(M),others:M=>g(M),center:(M,P,I)=>{const N=A[M[s]];return{x:N==null?void 0:N.x,y:N==null?void 0:N.y}}}}this.centripetalOptions=Object.assign(Object.assign({},this.centripetalOptions),p);const{leaf:b,single:w,others:C}=this.centripetalOptions;b&&typeof b!="function"&&(this.centripetalOptions.leaf=()=>b),w&&typeof w!="function"&&(this.centripetalOptions.single=()=>w),C&&typeof C!="function"&&(this.centripetalOptions.others=()=>C)}updateCfg(r){r&&Object.assign(this,r)}getDefaultCfg(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}}execute(){const r=this;r.stop();const{nodes:o,edges:s,defSpringLen:a}=r;if(r.judgingDistance=0,!o||o.length===0){r.onLayoutEnd([]);return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const u=r.center;if(o.length===1){o[0].x=u[0],o[0].y=u[1],r.onLayoutEnd([Object.assign({},o[0])]);return}r.degreesMap=Fe(o,s),r.propsGetMass?r.getMass=r.propsGetMass:r.getMass=b=>{let w=1;J(b.mass)&&(w=b.mass);const C=r.degreesMap[b.id].all;return!C||C<5?w:C*5*w};const d=r.nodeSize;let g;if(r.preventOverlap){const b=r.nodeSpacing;let w;J(b)?w=()=>b:ye(b)?w=b:w=()=>0,d?Ft(d)?g=C=>Math.max(d[0],d[1])+w(C):g=C=>d+w(C):g=C=>C.size?Ft(C.size)?Math.max(C.size[0],C.size[1])+w(C):Mt(C.size)?Math.max(C.size.width,C.size.height)+w(C):C.size+w(C):10+w(C)}r.nodeSize=g,r.linkDistance=ro(r.linkDistance,1),r.nodeStrength=ro(r.nodeStrength,1),r.edgeStrength=ro(r.edgeStrength,1);const p={},m={};o.forEach((b,w)=>{J(b.x)||(b.x=Math.random()*r.width),J(b.y)||(b.y=Math.random()*r.height);const C=r.degreesMap[b.id];p[b.id]=Object.assign(Object.assign({},b),{data:Object.assign(Object.assign({},b.data),{size:r.nodeSize(b)||30,layout:{inDegree:C.in,outDegree:C.out,degree:C.all,tDegree:C.in,sDegree:C.out,force:{mass:r.getMass(b),nodeStrength:r.nodeStrength(b,s)}}})}),m[b.id]=w}),r.nodeMap=p,r.nodeIdxMap=m,r.edgeInfos=[],s==null||s.forEach(b=>{const w=p[b.source],C=p[b.target];!w||!C?elf.edgeInfos.push({}):r.edgeInfos.push({edgeStrength:r.edgeStrength(b),linkDistance:a?a(Object.assign(Object.assign({},b),{source:w,target:C}),w,C):r.linkDistance(b,w,C)||1+(d(w)+d(w)||0)/2})}),this.getCentripetalOptions(),r.onLayoutEnd=r.onLayoutEnd||(()=>{}),r.run()}run(){const r=this,{maxIteration:o,nodes:s,edges:a,workerEnabled:u,minMovement:d,animate:g,nodeMap:p,height:m}=r;if(r.currentMinY=0,r.currentMaxY=m,!s)return;const b=[];if(s.forEach((O,A)=>{b[2*A]=0,b[2*A+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){const O={};a.forEach(A=>{const{source:M,target:P}=A;O[M]=O[M]||[],O[M].push(A),O[P]=O[P]||[],O[P].push(A)}),this.relatedEdges=O}const w=o;if(u||!g){let O=0;for(let A=0;(r.judgingDistance>d||A<1)&&A<w;A++)O=A,r.runOneStep(A,b);r.onLayoutEnd(Object.values(p))}else{if(typeof window=="undefined")return;let O=0;this.timeInterval=window.setInterval(()=>{s&&(r.runOneStep(O,b),O++,(O>=w||r.judgingDistance<d)&&(r.onLayoutEnd(Object.values(p)),window.clearInterval(r.timeInterval)))},0)}}runOneStep(r,o){var s;const a=this,{nodes:u,edges:d,nodeMap:g,monitor:p}=a,m=[];if(!(u!=null&&u.length))return;a.calRepulsive(m),d&&a.calAttractive(m),a.calGravity(m),a.attractToSide(m);const b=a.interval;if(a.updateVelocity(m,o,b),a.updatePosition(o,b),(s=a.tick)===null||s===void 0||s.call(a),p){const w=this.calTotalEnergy(m);p({energy:w,nodes:u,edges:d,iterations:r})}}calTotalEnergy(r){const{nodes:o,nodeMap:s}=this;if(!(o!=null&&o.length))return 0;let a=0;return o.forEach((u,d)=>{const g=r[2*d],p=r[2*d+1],m=g*g+p*p,{mass:b=1}=s[u.id].data.layout.force;a+=b*m*.5}),a}calRepulsive(r){const o=this,{nodes:s,nodeMap:a,factor:u,coulombDisScale:d}=o,g=o.nodeSize;yn(s,a,u,d*d,r)}calAttractive(r){const o=this,{edges:s,nodeMap:a,nodeIdxMap:u,edgeInfos:d}=o,g=o.nodeSize;s.forEach((p,m)=>{const b=zt(p,"source"),w=zt(p,"target"),C=a[b],O=a[w];if(!C||!O)return;let A=O.x-C.x,M=O.y-C.y;!A&&!M&&(A=Math.random()*.01,M=Math.random()*.01);const P=Math.sqrt(A*A+M*M),I=A/P,N=M/P,{linkDistance:R=200,edgeStrength:z=200}=d[m]||{},Z=(R-P)*z,ot=C.data.layout.force.mass||1,nt=O.data.layout.force.mass||1,q=1/ot,et=1/nt,st=I*Z,U=N*Z,ct=2*u[b],_t=2*u[w];r[ct]-=st*q,r[ct+1]-=U*q,r[_t]+=st*et,r[_t+1]+=U*et})}calGravity(r){var o;const s=this,{nodes:a,edges:u=[],nodeMap:d,width:g,height:p,center:m,gravity:b,degreesMap:w,centripetalOptions:C}=s;if(!a)return;const O=a.length;for(let A=0;A<O;A++){const M=2*A,P=d[a[A].id],{mass:I=1}=P.data.layout.force;let N=0,R=0,z=b;const{in:F,out:Z,all:ot}=w[P.id],nt=(o=s.getCenter)===null||o===void 0?void 0:o.call(s,P,ot);if(nt){const[q,et,st]=nt;N=P.x-q,R=P.y-et,z=st}else N=P.x-m[0],R=P.y-m[1];if(z&&(r[M]-=z*N/I,r[M+1]-=z*R/I),C){const{leaf:q,single:et,others:st,center:U}=C,{x:ct,y:_t,centerStrength:Tt}=(U==null?void 0:U(P,a,u,g,p))||{x:0,y:0,centerStrength:0};if(!J(ct)||!J(_t))continue;const te=(P.x-ct)/I,$t=(P.y-_t)/I;if(Tt&&(r[M]-=Tt*te,r[M+1]-=Tt*$t),ot===0){const ne=et(P);if(!ne)continue;r[M]-=ne*te,r[M+1]-=ne*$t;continue}if(F===0||Z===0){const ne=q(P,a,u);if(!ne)continue;r[M]-=ne*te,r[M+1]-=ne*$t;continue}const Xt=st(P);if(!Xt)continue;r[M]-=Xt*te,r[M+1]-=Xt*$t}}}attractToSide(r){const{defSideCoe:o,height:s,nodes:a,relatedEdges:u,currentMinY:d=0,currentMaxY:g=this.height}=this;!o||typeof o!="function"||!(a!=null&&a.length)||a.forEach((p,m)=>{const b=o(p,u[p.id]||[]);if(b===0)return;const w=b<0?d:g,C=Math.abs(b);r[2*m+1]-=C*(p.y-w)})}updateVelocity(r,o,s){const a=this,{nodes:u,damping:d,maxSpeed:g}=a;u!=null&&u.length&&u.forEach((p,m)=>{let b=(o[2*m]+r[2*m]*s)*d||.01,w=(o[2*m+1]+r[2*m+1]*s)*d||.01;const C=Math.sqrt(b*b+w*w);if(C>g){const O=g/C;b=O*b,w=O*w}o[2*m]=b,o[2*m+1]=w})}updatePosition(r,o){const s=this,{nodes:a,distanceThresholdMode:u,nodeMap:d}=s;if(!(a!=null&&a.length)){this.judgingDistance=0;return}let g=0;u==="max"?s.judgingDistance=-1/0:u==="min"&&(s.judgingDistance=1/0);let p=1/0,m=-1/0;a.forEach((b,w)=>{const C=d[b.id];if(J(b.fx)&&J(b.fy)){b.x=b.fx,b.y=b.fy,C.x=b.x,C.y=b.y;return}const O=r[2*w]*o,A=r[2*w+1]*o;b.x+=O,b.y+=A,C.x=b.x,C.y=b.y,b.y<p&&(p=b.y),b.y>m&&(m=b.y);const M=Math.sqrt(O*O+A*A);switch(u){case"max":s.judgingDistance<M&&(s.judgingDistance=M);break;case"min":s.judgingDistance>M&&(s.judgingDistance=M);break;default:g=g+M;break}}),this.currentMinY=p,this.currentMaxY=m,(!u||u==="mean")&&(s.judgingDistance=g/a.length)}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"force2"}getSameTypeLeafMap(){const{nodeClusterBy:r,nodes:o,edges:s,nodeMap:a,degreesMap:u}=this;if(!(o!=null&&o.length))return;const d={};return o.forEach((g,p)=>{u[g.id].all===1&&(d[g.id]=Re("leaf",g,s,r,u,a))}),d}}function Yn(n){return function(){return n}}function Er(n){return(n()-.5)*1e-6}var Si={value:function(){}};function Lr(){for(var n=0,r=arguments.length,o={},s;n<r;++n){if(!(s=arguments[n]+"")||s in o||/[\s.]/.test(s))throw new Error("illegal type: "+s);o[s]=[]}return new ue(o)}function ue(n){this._=n}function Vs(n,r){return n.trim().split(/^|\s+/).map(function(o){var s="",a=o.indexOf(".");if(a>=0&&(s=o.slice(a+1),o=o.slice(0,a)),o&&!r.hasOwnProperty(o))throw new Error("unknown type: "+o);return{type:o,name:s}})}ue.prototype=Lr.prototype={constructor:ue,on:function(r,o){var s=this._,a=Vs(r+"",s),u,d=-1,g=a.length;if(arguments.length<2){for(;++d<g;)if((u=(r=a[d]).type)&&(u=Hr(s[u],r.name)))return u;return}if(o!=null&&typeof o!="function")throw new Error("invalid callback: "+o);for(;++d<g;)if(u=(r=a[d]).type)s[u]=Oi(s[u],r.name,o);else if(o==null)for(u in s)s[u]=Oi(s[u],r.name,null);return this},copy:function(){var r={},o=this._;for(var s in o)r[s]=o[s].slice();return new ue(r)},call:function(r,o){if((u=arguments.length-2)>0)for(var s=new Array(u),a=0,u,d;a<u;++a)s[a]=arguments[a+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(d=this._[r],a=0,u=d.length;a<u;++a)d[a].value.apply(o,s)},apply:function(r,o,s){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var a=this._[r],u=0,d=a.length;u<d;++u)a[u].value.apply(o,s)}};function Hr(n,r){for(var o=0,s=n.length,a;o<s;++o)if((a=n[o]).name===r)return a.value}function Oi(n,r,o){for(var s=0,a=n.length;s<a;++s)if(n[s].name===r){n[s]=Si,n=n.slice(0,s).concat(n.slice(s+1));break}return o!=null&&n.push({name:r,value:o}),n}var Us=Lr,kr=0,$r=0,oo=0,ac=1e3,$o,Wr,Wo=0,cn=0,so=0,er=typeof performance=="object"&&performance.now?performance:Date,cc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Xo(){return cn||(cc(Hs),cn=er.now()+so)}function Hs(){cn=0}function ao(){this._call=this._time=this._next=null}ao.prototype=lc.prototype={constructor:ao,restart:function(n,r,o){if(typeof n!="function")throw new TypeError("callback is not a function");o=(o==null?Xo():+o)+(r==null?0:+r),!this._next&&Wr!==this&&(Wr?Wr._next=this:$o=this,Wr=this),this._call=n,this._time=o,Ws()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ws())}};function lc(n,r,o){var s=new ao;return s.restart(n,r,o),s}function $s(){Xo(),++kr;for(var n=$o,r;n;)(r=cn-n._time)>=0&&n._call.call(null,r),n=n._next;--kr}function uc(){cn=(Wo=er.now())+so,kr=$r=0;try{$s()}finally{kr=0,v0(),cn=0}}function Ai(){var n=er.now(),r=n-Wo;r>ac&&(so-=r,Wo=n)}function v0(){for(var n,r=$o,o,s=1/0;r;)r._call?(s>r._time&&(s=r._time),n=r,r=r._next):(o=r._next,r._next=null,r=n?n._next=o:$o=o);Wr=n,Ws(s)}function Ws(n){if(!kr){$r&&($r=clearTimeout($r));var r=n-cn;r>24?(n<1/0&&($r=setTimeout(uc,n-er.now()-so)),oo&&(oo=clearInterval(oo))):(oo||(Wo=er.now(),oo=setInterval(Ai,ac)),kr=1,cc(uc))}}var Wd=1664525,m0=1013904223,Xd=4294967296;function y0(){var n=1;return function(){return(n=(Wd*n+m0)%Xd)/Xd}}function b0(n){return n.x}function x0(n){return n.y}var co=10,w0=Math.PI*(3-Math.sqrt(5));function hu(n){var r,o=1,s=.001,a=1-Math.pow(s,1/300),u=0,d=.6,g=new Map,p=lc(w),m=Us("tick","end"),b=y0();n==null&&(n=[]);function w(){C(),m.call("tick",r),o<s&&(p.stop(),m.call("end",r))}function C(M){var P,I=n.length,N;M===void 0&&(M=1);for(var R=0;R<M;++R)for(o+=(u-o)*a,g.forEach(function(z){z(o)}),P=0;P<I;++P)N=n[P],N.fx==null?N.x+=N.vx*=d:(N.x=N.fx,N.vx=0),N.fy==null?N.y+=N.vy*=d:(N.y=N.fy,N.vy=0);return r}function O(){for(var M=0,P=n.length,I;M<P;++M){if(I=n[M],I.index=M,I.fx!=null&&(I.x=I.fx),I.fy!=null&&(I.y=I.fy),isNaN(I.x)||isNaN(I.y)){var N=co*Math.sqrt(.5+M),R=M*w0;I.x=N*Math.cos(R),I.y=N*Math.sin(R)}(isNaN(I.vx)||isNaN(I.vy))&&(I.vx=I.vy=0)}}function A(M){return M.initialize&&M.initialize(n,b),M}return O(),r={tick:C,restart:function(){return p.restart(w),r},stop:function(){return p.stop(),r},nodes:function(P){return arguments.length?(n=P,O(),g.forEach(A),r):n},alpha:function(P){return arguments.length?(o=+P,r):o},alphaMin:function(P){return arguments.length?(s=+P,r):s},alphaDecay:function(P){return arguments.length?(a=+P,r):+a},alphaTarget:function(P){return arguments.length?(u=+P,r):u},velocityDecay:function(P){return arguments.length?(d=1-P,r):1-d},randomSource:function(P){return arguments.length?(b=P,g.forEach(A),r):b},force:function(P,I){return arguments.length>1?(I==null?g.delete(P):g.set(P,A(I)),r):g.get(P)},find:function(P,I,N){var R=0,z=n.length,F,Z,ot,nt,q;for(N==null?N=1/0:N*=N,R=0;R<z;++R)nt=n[R],F=P-nt.x,Z=I-nt.y,ot=F*F+Z*Z,ot<N&&(q=nt,N=ot);return q},on:function(P,I){return arguments.length>1?(m.on(P,I),r):m.on(P)}}}function du(){var n,r,o,s,a=Yn(-30),u,d=1,g=1/0,p=.81;function m(O){var A,M=n.length,P=zn(n,b0,x0).visitAfter(w);for(s=O,A=0;A<M;++A)r=n[A],P.visit(C)}function b(){if(n){var O,A=n.length,M;for(u=new Array(A),O=0;O<A;++O)M=n[O],u[M.index]=+a(M,O,n)}}function w(O){var A=0,M,P,I=0,N,R,z;if(O.length){for(N=R=z=0;z<4;++z)(M=O[z])&&(P=Math.abs(M.value))&&(A+=M.value,I+=P,N+=P*M.x,R+=P*M.y);O.x=N/I,O.y=R/I}else{M=O,M.x=M.data.x,M.y=M.data.y;do A+=u[M.data.index];while(M=M.next)}O.value=A}function C(O,A,M,P){if(!O.value)return!0;var I=O.x-r.x,N=O.y-r.y,R=P-A,z=I*I+N*N;if(R*R/p<z)return z<g&&(I===0&&(I=Er(o),z+=I*I),N===0&&(N=Er(o),z+=N*N),z<d&&(z=Math.sqrt(d*z)),r.vx+=I*O.value*s/z,r.vy+=N*O.value*s/z),!0;if(O.length||z>=g)return;(O.data!==r||O.next)&&(I===0&&(I=Er(o),z+=I*I),N===0&&(N=Er(o),z+=N*N),z<d&&(z=Math.sqrt(d*z)));do O.data!==r&&(R=u[O.data.index]*s/z,r.vx+=I*R,r.vy+=N*R);while(O=O.next)}return m.initialize=function(O,A){n=O,o=A,b()},m.strength=function(O){return arguments.length?(a=typeof O=="function"?O:Yn(+O),b(),m):a},m.distanceMin=function(O){return arguments.length?(d=O*O,m):Math.sqrt(d)},m.distanceMax=function(O){return arguments.length?(g=O*O,m):Math.sqrt(g)},m.theta=function(O){return arguments.length?(p=O*O,m):Math.sqrt(p)},m}function Zd(n,r){var o,s=1;n==null&&(n=0),r==null&&(r=0);function a(){var u,d=o.length,g,p=0,m=0;for(u=0;u<d;++u)g=o[u],p+=g.x,m+=g.y;for(p=(p/d-n)*s,m=(m/d-r)*s,u=0;u<d;++u)g=o[u],g.x-=p,g.y-=m}return a.initialize=function(u){o=u},a.x=function(u){return arguments.length?(n=+u,a):n},a.y=function(u){return arguments.length?(r=+u,a):r},a.strength=function(u){return arguments.length?(s=+u,a):s},a}var E0=k(89957),nr=k.n(E0);function _0(n){return n.index}function Yd(n,r){var o=n.get(r);if(!o)throw new Error("node not found: "+r);return o}function hc(n){var r=_0,o=w,s,a=Yn(30),u,d,g,p,m,b=1;n==null&&(n=[]);function w(P){return 1/Math.min(g[P.source.index],g[P.target.index])}function C(P){for(var I=0,N=n.length;I<b;++I)for(var R=0,z,F,Z,ot,nt,q,et;R<N;++R)z=n[R],F=z.source,Z=z.target,ot=Z.x+Z.vx-F.x-F.vx||Er(m),nt=Z.y+Z.vy-F.y-F.vy||Er(m),q=Math.sqrt(ot*ot+nt*nt),q=(q-u[R])/q*P*s[R],ot*=q,nt*=q,Z.vx-=ot*(et=p[R]),Z.vy-=nt*et,F.vx+=ot*(et=1-et),F.vy+=nt*et}function O(){if(d){var P,I=d.length,N=n.length,R=new Map(d.map(function(F,Z){return[r(F,Z,d),F]})),z;for(P=0,g=new Array(I);P<N;++P)z=n[P],z.index=P,nr()(z.source)!=="object"&&(z.source=Yd(R,z.source)),nr()(z.target)!=="object"&&(z.target=Yd(R,z.target)),g[z.source.index]=(g[z.source.index]||0)+1,g[z.target.index]=(g[z.target.index]||0)+1;for(P=0,p=new Array(N);P<N;++P)z=n[P],p[P]=g[z.source.index]/(g[z.source.index]+g[z.target.index]);s=new Array(N),A(),u=new Array(N),M()}}function A(){if(d)for(var P=0,I=n.length;P<I;++P)s[P]=+o(n[P],P,n)}function M(){if(d)for(var P=0,I=n.length;P<I;++P)u[P]=+a(n[P],P,n)}return C.initialize=function(P,I){d=P,m=I,O()},C.links=function(P){return arguments.length?(n=P,O(),C):n},C.id=function(P){return arguments.length?(r=P,C):r},C.iterations=function(P){return arguments.length?(b=+P,C):b},C.strength=function(P){return arguments.length?(o=typeof P=="function"?P:Yn(+P),A(),C):o},C.distance=function(P){return arguments.length?(a=typeof P=="function"?P:Yn(+P),M(),C):a},C}function C0(n){return n.x+n.vx}function S0(n){return n.y+n.vy}function Kd(n){var r,o,s,a=1,u=1;typeof n!="function"&&(n=Yn(n==null?1:+n));function d(){for(var m,b=r.length,w,C,O,A,M,P,I=0;I<u;++I)for(w=zn(r,C0,S0).visitAfter(g),m=0;m<b;++m)C=r[m],M=o[C.index],P=M*M,O=C.x+C.vx,A=C.y+C.vy,w.visit(N);function N(R,z,F,Z,ot){var nt=R.data,q=R.r,et=M+q;if(nt){if(nt.index>C.index){var st=O-nt.x-nt.vx,U=A-nt.y-nt.vy,ct=st*st+U*U;ct<et*et&&(st===0&&(st=Er(s),ct+=st*st),U===0&&(U=Er(s),ct+=U*U),ct=(et-(ct=Math.sqrt(ct)))/ct*a,C.vx+=(st*=ct)*(et=(q*=q)/(P+q)),C.vy+=(U*=ct)*et,nt.vx-=st*(et=1-et),nt.vy-=U*et)}return}return z>O+et||Z<O-et||F>A+et||ot<A-et}}function g(m){if(m.data)return m.r=o[m.data.index];for(var b=m.r=0;b<4;++b)m[b]&&m[b].r>m.r&&(m.r=m[b].r)}function p(){if(r){var m,b=r.length,w;for(o=new Array(b),m=0;m<b;++m)w=r[m],o[w.index]=+n(w,m,r)}}return d.initialize=function(m,b){r=m,s=b,p()},d.iterations=function(m){return arguments.length?(u=+m,d):u},d.strength=function(m){return arguments.length?(a=+m,d):a},d.radius=function(m){return arguments.length?(n=typeof m=="function"?m:Yn(+m),p(),d):n},d}function Ti(n){var r=Yn(.1),o,s,a;typeof n!="function"&&(n=Yn(n==null?0:+n));function u(g){for(var p=0,m=o.length,b;p<m;++p)b=o[p],b.vx+=(a[p]-b.x)*s[p]*g}function d(){if(o){var g,p=o.length;for(s=new Array(p),a=new Array(p),g=0;g<p;++g)s[g]=isNaN(a[g]=+n(o[g],g,o))?0:+r(o[g],g,o)}}return u.initialize=function(g){o=g,d()},u.strength=function(g){return arguments.length?(r=typeof g=="function"?g:Yn(+g),d(),u):r},u.x=function(g){return arguments.length?(n=typeof g=="function"?g:Yn(+g),d(),u):n},u}function Jd(n){var r=Yn(.1),o,s,a;typeof n!="function"&&(n=Yn(n==null?0:+n));function u(g){for(var p=0,m=o.length,b;p<m;++p)b=o[p],b.vy+=(a[p]-b.y)*s[p]*g}function d(){if(o){var g,p=o.length;for(s=new Array(p),a=new Array(p),g=0;g<p;++g)s[g]=isNaN(a[g]=+n(o[g],g,o))?0:+r(o[g],g,o)}}return u.initialize=function(g){o=g,d()},u.strength=function(g){return arguments.length?(r=typeof g=="function"?g:Yn(+g),d(),u):r},u.y=function(g){return arguments.length?(n=typeof g=="function"?g:Yn(+g),d(),u):n},u}function Xs(){function n(Dt){return()=>Dt}let r=Dt=>Dt.cluster,o=n(1),s=n(-1),a=n(100),u=n(.1),d=[0,0],g=[],p={},m=[],b=100,w=100,C={none:{x:0,y:0}},O=[],A,M="force",P=!0,I=.1;function N(Dt){if(!P)return N;A.tick(),nt();for(let re=0,Me=g.length,ve,Oe=Dt*I;re<Me;++re)ve=g[re],ve.vx+=(C[r(ve)].x-ve.x)*Oe,ve.vy+=(C[r(ve)].y-ve.y)*Oe}function R(){g&&z()}function z(){if(!g||!g.length)return;if(r(g[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");const Dt=F();A=hu(Dt.nodes).force("x",Ti(b).strength(.1)).force("y",Jd(w).strength(.1)).force("collide",Kd(re=>re.r).iterations(4)).force("charge",du().strength(s)).force("links",hc(Dt.nodes.length?Dt.links:[]).distance(a).strength(u)),O=A.nodes(),nt()}function F(){const Dt=[],re=[],Me={};let ve=[],Oe={},kt=[];return Oe=Z(g),kt=ot(m),ve=Object.keys(Oe),ve.forEach((Qt,Xe)=>{const ae=Oe[Qt];Dt.push({id:Qt,size:ae.count,r:Math.sqrt(ae.sumforceNodeSize/Math.PI)}),Me[Qt]=Xe}),kt.forEach(Qt=>{const Xe=zt(Qt,"source"),ae=zt(Qt,"target"),Ae=Me[Xe],Se=Me[ae];Ae!==void 0&&Se!==void 0&&re.push({source:Ae,target:Se,count:Qt.count})}),{nodes:Dt,links:re}}function Z(Dt){const re={};return Dt.forEach(Me=>{const ve=r(Me);re[ve]||(re[ve]={count:0,sumforceNodeSize:0})}),Dt.forEach(Me=>{const ve=r(Me),Oe=o(Me),kt=re[ve];kt.count=kt.count+1,kt.sumforceNodeSize=kt.sumforceNodeSize+Math.PI*(Oe*Oe)*1.3,re[ve]=kt}),re}function ot(Dt){const re={},Me=[];return Dt.forEach(Oe=>{const kt=q(Oe);let Qt=0;re[kt]!==void 0&&(Qt=re[kt]),Qt+=1,re[kt]=Qt}),Object.entries(re).forEach(([Oe,kt])=>{const Qt=Oe.split("~")[0],Xe=Oe.split("~")[1];Qt!==void 0&&Xe!==void 0&&Me.push({source:Qt,target:Xe,count:kt})}),Me}function nt(){return C={none:{x:0,y:0}},O.forEach(Dt=>{C[Dt.id]={x:Dt.x-d[0],y:Dt.y-d[1]}}),C}function q(Dt){const re=zt(Dt,"source"),Me=zt(Dt,"target"),ve=r(p[re]),Oe=r(p[Me]);return ve<=Oe?`${ve}~${Oe}`:`${Oe}~${ve}`}function et(Dt){p={},Dt.forEach(re=>{p[re.id]=re})}function st(Dt){return arguments.length?(M=Dt,R(),N):M}function U(Dt){return arguments.length?typeof Dt=="string"?(r=re=>re[Dt],N):(r=Dt,N):r}function ct(Dt){return arguments.length?(P=Dt,N):P}function _t(Dt){return arguments.length?(I=Dt,N):I}function Tt(Dt){return arguments.length?(b=Dt,N):b}function te(Dt){return arguments.length?(w=Dt,N):w}function $t(Dt){return arguments.length?(et(Dt||[]),g=Dt||[],N):g}function Xt(Dt){return arguments.length?(m=Dt||[],R(),N):m}function ne(Dt){return arguments.length?(typeof Dt=="function"?o=Dt:o=n(+Dt),R(),N):o}function Ce(Dt){return arguments.length?(typeof Dt=="function"?s=Dt:s=n(+Dt),R(),N):s}function Pe(Dt){return arguments.length?(typeof Dt=="function"?a=Dt:a=n(+Dt),R(),N):a}function Qe(Dt){return arguments.length?(typeof Dt=="function"?u=Dt:u=n(+Dt),R(),N):u}function We(Dt){return arguments.length?(d=Dt,N):d}return N.initialize=Dt=>{g=Dt,R()},N.template=st,N.groupBy=U,N.enableGrouping=ct,N.strength=_t,N.centerX=Tt,N.centerY=te,N.nodes=$t,N.links=Xt,N.forceNodeSize=ne,N.nodeSize=N.forceNodeSize,N.forceCharge=Ce,N.forceLinkDistance=Pe,N.forceLinkStrength=Qe,N.offset=We,N.getFocis=nt,N}const fu={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},O0={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0};class A0 extends tt{constructor(r){super(),this.center=[0,0],this.nodeStrength=null,this.edgeStrength=null,this.preventOverlap=!1,this.clusterNodeStrength=null,this.clusterEdgeStrength=null,this.clusterEdgeDistance=null,this.clusterNodeSize=null,this.clusterFociStrength=null,this.linkDistance=50,this.alphaDecay=.028,this.alphaMin=.001,this.alpha=.3,this.collideStrength=1,this.workerEnabled=!1,this.tick=()=>{},this.onLayoutEnd=()=>{},this.ticking=void 0,r&&this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick(){},onLayoutEnd(){},workerEnabled:!1}}init(r){const o=this;o.nodes=r.nodes||[];const s=r.edges||[];o.edges=s.map(a=>{const u={},d=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(a).forEach(g=>{d.indexOf(g)>-1||(u[g]=a[g])}),u}),o.ticking=!1}execute(r){const o=this,s=o.nodes,a=o.edges;if(o.ticking)return;let u=o.forceSimulation;const d=o.alphaMin,g=o.alphaDecay,p=o.alpha;if(u){if(r){if(o.clustering&&o.clusterForce&&(o.clusterForce.nodes(s),o.clusterForce.links(a)),u.nodes(s),a&&o.edgeForce)o.edgeForce.links(a);else if(a&&!o.edgeForce){const m=hc().id(b=>b.id).links(a);o.edgeStrength&&m.strength(o.edgeStrength),o.linkDistance&&m.distance(o.linkDistance),o.edgeForce=m,u.force("link",m)}}o.preventOverlap&&o.overlapProcess(u),u.alpha(p).restart(),this.ticking=!0}else try{const m=du();if(o.nodeStrength&&m.strength(o.nodeStrength),u=hu().nodes(s),o.clustering){const b=Xs();b.centerX(o.center[0]).centerY(o.center[1]).template("force").strength(o.clusterFociStrength),a&&b.links(a),s&&b.nodes(s),b.forceLinkDistance(o.clusterEdgeDistance).forceLinkStrength(o.clusterEdgeStrength).forceCharge(o.clusterNodeStrength).forceNodeSize(o.clusterNodeSize),o.clusterForce=b,u.force("group",b)}if(u.force("center",Zd(o.center[0],o.center[1])).force("charge",m).alpha(p).alphaDecay(g).alphaMin(d),o.preventOverlap&&o.overlapProcess(u),a){const b=hc().id(w=>w.id).links(a);o.edgeStrength&&b.strength(o.edgeStrength),o.linkDistance&&b.distance(o.linkDistance),o.edgeForce=b,u.force("link",b)}if(o.workerEnabled&&!M0()&&(o.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!o.workerEnabled)u.on("tick",()=>{o.tick()}).on("end",()=>{o.ticking=!1,o.onLayoutEnd&&o.onLayoutEnd()}),o.ticking=!0;else{u.stop();const b=T0(u);for(let w=1;w<=b;w++)u.tick(),postMessage({nodes:s,currentTick:w,totalTicks:b,type:fu.TICK},void 0);o.ticking=!1}o.forceSimulation=u,o.ticking=!0}catch(m){o.ticking=!1,console.warn(m)}}overlapProcess(r){const o=this,s=o.nodeSize,a=o.nodeSpacing;let u,d;const g=o.collideStrength;if(J(a)?d=()=>a:ye(a)?d=a:d=()=>0,!s)u=p=>p.size?Ft(p.size)?(p.size[0]>p.size[1]?p.size[0]:p.size[1])/2+d(p):Mt(p.size)?(p.size.width>p.size.height?p.size.width:p.size.height)/2+d(p):p.size/2+d(p):10+d(p);else if(ye(s))u=p=>s(p)+d(p);else if(Ft(s)){const m=(s[0]>s[1]?s[0]:s[1])/2;u=b=>m+d(b)}else if(J(s)){const p=s/2;u=m=>p+d(m)}else u=()=>10;r.force("collisionForce",Kd(u).strength(g))}updateCfg(r){const o=this;o.ticking&&(o.forceSimulation.stop(),o.ticking=!1),o.forceSimulation=null,Object.assign(o,r)}destroy(){const r=this;r.ticking&&(r.forceSimulation.stop(),r.ticking=!1),r.nodes=null,r.edges=null,r.destroyed=!0}}function T0(n){const r=n.alphaMin(),o=n.alphaTarget(),s=n.alpha(),a=Math.log((r-o)/(s-o))/Math.log(1-n.alphaDecay());return Math.ceil(a)}function M0(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}function I0(n,r,o,s){n.forEach((a,u)=>{n[u].children=[],n[u].parent=[]}),s?r.forEach(a=>{const u=zt(a,"source"),d=zt(a,"target");let g=0;u&&(g=o[u]);let p=0;d&&(p=o[d]);const m=n[g].children,b=n[p].parent;m.push(n[p].id),b.push(n[g].id)}):r.forEach(a=>{const u=zt(a,"source"),d=zt(a,"target");let g=0;u&&(g=o[u]);let p=0;d&&(p=o[d]);const m=n[g].children,b=n[p].children;m.push(n[p].id),b.push(n[g].id)})}function P0(n,r,o){const s=o.length;for(let a=0;a<s;a++){const u=zt(o[a],"source"),d=zt(o[a],"target");if(n.id===u&&r.id===d||r.id===u&&n.id===d)return!0}return!1}function N0(n,r){const o=n.degree,s=r.degree;return o<s?-1:o>s?1:0}class D0 extends tt{constructor(r){super(),this.radius=null,this.nodeSize=void 0,this.startRadius=null,this.endRadius=null,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.divisions=1,this.ordering=null,this.angleRatio=1,this.nodes=[],this.edges=[],this.nodeMap={},this.degrees=[],this.width=300,this.height=300,this.updateCfg(r)}getDefaultCfg(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}}execute(){var r;const o=this,s=o.nodes,a=o.edges,u=s.length;if(u===0){o.onLayoutEnd&&o.onLayoutEnd();return}!o.width&&typeof window!="undefined"&&(o.width=window.innerWidth),!o.height&&typeof window!="undefined"&&(o.height=window.innerHeight),o.center||(o.center=[o.width/2,o.height/2]);const d=o.center;if(u===1){s[0].x=d[0],s[0].y=d[1],o.onLayoutEnd&&o.onLayoutEnd();return}let{radius:g,startRadius:p,endRadius:m}=o;const{divisions:b,startAngle:w,endAngle:C,angleRatio:O,ordering:A,clockwise:M,nodeSpacing:P,nodeSize:I}=o,N=(C-w)/u,R={};s.forEach((nt,q)=>{R[nt.id]=q}),o.nodeMap=R;const z=De(s.length,R,a);if(o.degrees=z,P){const nt=Ue(10,P),q=Ue(10,I);let et=-1/0;s.forEach(U=>{const ct=q(U);et<ct&&(et=ct)});let st=0;s.forEach((U,ct)=>{ct===0?st+=et||10:st+=(nt(U)||0)+(et||10)}),g=st/(2*Math.PI)}else!g&&!p&&!m?g=o.height>o.width?o.width/2:o.height/2:!p&&m?p=m:p&&!m&&(m=p);const F=N*O;let Z=[];A==="topology"?Z=o.topologyOrdering():A==="topology-directed"?Z=o.topologyOrdering(!0):A==="degree"?Z=o.degreeOrdering():Z=s;const ot=Math.ceil(u/b);for(let nt=0;nt<u;++nt){let q=g;!q&&p!==null&&m!==null&&(q=p+nt*(m-p)/(u-1)),q||(q=10+nt*100/(u-1));let et=w+nt%ot*F+2*Math.PI/b*Math.floor(nt/ot);M||(et=C-nt%ot*F-2*Math.PI/b*Math.floor(nt/ot)),Z[nt].x=d[0]+Math.cos(et)*q,Z[nt].y=d[1]+Math.sin(et)*q,Z[nt].weight=z[nt].all}return(r=o.onLayoutEnd)===null||r===void 0||r.call(o),{nodes:Z,edges:this.edges}}topologyOrdering(r=!1){const o=this,s=o.degrees,a=o.edges,u=o.nodes,d=Nt(u),g=o.nodeMap,p=[d[0]],m=[u[0]],b=[],w=u.length;b[0]=!0,I0(d,a,g,r);let C=0;return d.forEach((O,A)=>{if(A!==0)if((A===w-1||s[A].all!==s[A+1].all||P0(p[C],O,a))&&!b[A])p.push(O),m.push(u[g[O.id]]),b[A]=!0,C++;else{const M=p[C].children;let P=!1;for(let N=0;N<M.length;N++){const R=g[M[N]];if(s[R].all===s[A].all&&!b[R]){p.push(d[R]),m.push(u[g[d[R].id]]),b[R]=!0,P=!0;break}}let I=0;for(;!P&&(b[I]||(p.push(d[I]),m.push(u[g[d[I].id]]),b[I]=!0,P=!0),I++,I!==w););}}),m}degreeOrdering(){const r=this,o=r.nodes,s=[],a=r.degrees;return o.forEach((u,d)=>{u.degree=a[d].all,s.push(u)}),s.sort(N0),s}getType(){return"circular"}}const R0=(n,r)=>{if(n!=="next"&&n!=="prev")return r},qd=n=>{n.prev.next=n.next,n.next.prev=n.prev,delete n.next,delete n.prev};class L0{constructor(){const r={};r.prev=r,r.next=r.prev,this.shortcut=r}dequeue(){const r=this.shortcut,o=r.prev;if(o&&o!==r)return qd(o),o}enqueue(r){const o=this.shortcut;r.prev&&r.next&&qd(r),r.next=o.next,o.next.prev=r,o.next=r,r.prev=o}toString(){const r=[],o=this.shortcut;let s=o.prev;for(;s!==o;)r.push(JSON.stringify(s,R0)),s=s==null?void 0:s.prev;return`[${r.join(", ")}]`}}var Zo;(function(n){n.DEFAULT_EDGE_NAME="\0",n.GRAPH_NODE="\0",n.EDGE_KEY_DELIM=""})(Zo||(Zo={}));function Qd(n,r){var o=n.get(r)||0;n.set(r,o+1)}function tf(n,r){var o=n.get(r);o!==void 0&&(o=o-1,o>0?n.set(r,o):n.delete(r))}function ef(n,r,o,s){var a=String(r),u=String(o);if(!n&&a>u){var d=a;a=u,u=d}return a+Zo.EDGE_KEY_DELIM+u+Zo.EDGE_KEY_DELIM+(s===void 0?Zo.DEFAULT_EDGE_NAME:s)}function lo(n,r,o,s){var a=String(r),u=String(o),d={v:r,w:o};if(!n&&a>u){var g=d.v;d.v=d.w,d.w=g}return s!==void 0&&(d.name=s),d}function dc(n,r){return ef(n,r.v,r.w,r.name)}function nf(n){return typeof n=="function"}var k0=function(r){return r.nodes().map(function(o){var s=r.node(o),a=r.parent(o),u={id:o,value:s,parent:a};return u.value===void 0&&delete u.value,u.parent===void 0&&delete u.parent,u})},B0=function(r){return r.edges().map(function(o){var s=r.edge(o),a={v:o.v,w:o.w,value:s,name:o.name};return a.name===void 0&&delete a.name,a.value===void 0&&delete a.value,a})},Yo=function(r){var o={options:{directed:r.isDirected(),multigraph:r.isMultigraph(),compound:r.isCompound()},nodes:k0(r),edges:B0(r),value:r.graph()};return o.value===void 0&&delete o.value,o},z0=function(r){var o=new Ys(r.options);return r.value!==void 0&&o.setGraph(r.value),r.nodes.forEach(function(s){o.setNode(s.id,s.value),s.parent&&o.setParent(s.id,s.parent)}),r.edges.forEach(function(s){o.setEdge(s.v,s.w,s.value,s.name)}),o};function Zs(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),o.push.apply(o,s)}return o}function rf(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Zs(Object(o),!0).forEach(function(s){F0(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Zs(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function F0(n,r,o){return r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n}function G0(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function of(n,r){for(var o=0;o<r.length;o++){var s=r[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function j0(n,r,o){return r&&of(n.prototype,r),o&&of(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}var V0={compound:!1,multigraph:!1,directed:!0},Ys=function(){function n(){var r=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};G0(this,n),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=Zo.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return r.directed},this.isMultigraph=function(){return r.multigraph},this.isCompound=function(){return r.compound},this.setGraph=function(a){return r.label=a,r},this.graph=function(){return r.label},this.setDefaultNodeLabel=function(a){return nf(a)?r.defaultNodeLabelFn=a:r.defaultNodeLabelFn=function(){return a},r},this.nodeCount=function(){return r.nodeCountNum},this.node=function(a){return r.nodesLabelMap.get(a)},this.nodes=function(){return Array.from(r.nodesLabelMap.keys())},this.sources=function(){return r.nodes().filter(function(a){var u;return!(!((u=r.inEdgesMap.get(a))===null||u===void 0)&&u.size)})},this.sinks=function(){return r.nodes().filter(function(a){var u;return!(!((u=r.outEdgesMap.get(a))===null||u===void 0)&&u.size)})},this.setNodes=function(a,u){return a.map(function(d){return r.setNode(d,u)}),r},this.hasNode=function(a){return r.nodesLabelMap.has(a)},this.checkCompound=function(){if(!r.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(a){if(r.isCompound()){var u,d=(u=r.parentMap)===null||u===void 0?void 0:u.get(a);if(d!==r.GRAPH_NODE)return d}},this.removeFromParentsChildList=function(a){var u=r.parentMap.get(a);r.childrenMap.get(u).delete(a)},this.setParent=function(a,u){var d,g;r.checkCompound();for(var p=u===void 0?r.GRAPH_NODE:u,m=r.parent(p);m;){if(a===m)throw new Error("Setting "+u+" as parent of "+a+" would create a cycle");m=r.parent(m)}u&&r.setNode(u),r.setNode(a),r.removeFromParentsChildList(a),(d=r.parentMap)===null||d===void 0||d.set(a,p);var b=r.childrenMap.get(p);return b.set(a,!0),(g=r.childrenMap)===null||g===void 0||g.set(p,b),r},this.children=function(a){var u=a===void 0?r.GRAPH_NODE:a;if(r.isCompound()){var d,g=(d=r.childrenMap)===null||d===void 0?void 0:d.get(u);return g?Array.from(g.keys()):void 0}if(u===r.GRAPH_NODE)return r.nodes();if(a&&r.hasNode(a))return[]},this.predecessors=function(a){var u=r.predecessorsMap.get(a);return u?Array.from(u.keys()):void 0},this.successors=function(a){var u=r.successorsMap.get(a);return u?Array.from(u.keys()):void 0},this.neighbors=function(a){var u;if(r.hasNode(a))return Array.from(new Set((u=r.predecessors(a))===null||u===void 0?void 0:u.concat(r.successors(a))))},this.isLeaf=function(a){var u;if(r.isDirected()){var d;return!(!((d=r.successors(a))===null||d===void 0)&&d.length)}return!(!((u=r.neighbors(a))===null||u===void 0)&&u.length)},this.filterNodes=function(a){var u=r.directed,d=r.multigraph,g=r.compound,p=new n({directed:u,multigraph:d,compound:g});if(p.setGraph(r.graph()),r.nodes().forEach(function(b){a(b)&&p.setNode(b,r.node(b))}),r.edges().forEach(function(b){p.hasNode(b.v)&&p.hasNode(b.w)&&p.setEdgeObj(b,r.edge(b))}),g){var m=function(w){for(var C=r.parent(w);C!==void 0&&!p.hasNode(C);)C=r.parent(C);return C};p.nodes().forEach(function(b){p.setParent(b,m(b))})}return p},this.setDefaultEdgeLabel=function(a){return nf(a)?r.defaultEdgeLabelFn=a:r.defaultEdgeLabelFn=function(){return a},r},this.edgeCount=function(){return r.edgeCountNum},this.setEdgeObj=function(a,u){return r.setEdge(a.v,a.w,u,a.name)},this.setPath=function(a,u){return a.reduce(function(d,g){return r.setEdge(d,g,u),g}),r},this.edgeFromArgs=function(a,u,d){return r.edge({v:a,w:u,name:d})},this.edge=function(a){return r.edgesLabelsMap.get(dc(r.isDirected(),a))},this.hasEdge=function(a,u,d){return r.edgesLabelsMap.has(dc(r.isDirected(),{v:a,w:u,name:d}))},this.removeEdgeObj=function(a){var u=a.v,d=a.w,g=a.name;return r.removeEdge(u,d,g)},this.edges=function(){return Array.from(r.edgesMap.values())},this.inEdges=function(a,u){var d=r.inEdgesMap.get(a);if(d)return Array.from(d.values()).filter(function(g){return!u||g.v===u})},this.outEdges=function(a,u){var d=r.outEdgesMap.get(a);if(d)return Array.from(d.values()).filter(function(g){return!u||g.w===u})},this.nodeEdges=function(a,u){var d;if(r.hasNode(a))return(d=r.inEdges(a,u))===null||d===void 0?void 0:d.concat(r.outEdges(a,u))},this.toJSON=function(){return Yo(r)},this.nodeInDegree=function(a){var u=r.inEdgesMap.get(a);return u?u.size:0},this.nodeOutDegree=function(a){var u=r.outEdgesMap.get(a);return u?u.size:0},this.nodeDegree=function(a){return r.nodeInDegree(a)+r.nodeOutDegree(a)},this.source=function(a){return a.v},this.target=function(a){return a.w};var s=rf(rf({},V0),o);this.compound=s.compound,this.directed=s.directed,this.multigraph=s.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return j0(n,[{key:"setNode",value:function(o,s){var a=this.nodesLabelMap,u=this.defaultNodeLabelFn,d=this.isCompound,g=this.parentMap,p=this.childrenMap,m=this.inEdgesMap,b=this.outEdgesMap,w=this.predecessorsMap,C=this.successorsMap;if(a.has(o))return s!==void 0&&a.set(o,s),this;if(a.set(o,s||u(o)),d()){var O;g==null||g.set(o,this.GRAPH_NODE),p==null||p.set(o,new Map),p!=null&&p.has(this.GRAPH_NODE)||p==null||p.set(this.GRAPH_NODE,new Map),p==null||(O=p.get(this.GRAPH_NODE))===null||O===void 0||O.set(o,!0)}return[m,b,w,C].forEach(function(A){return A.set(o,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(o){var s=this;if(this.hasNode(o)){var a=function(P){s.removeEdge(P.v,P.w,P.name)},u=this.inEdgesMap,d=this.outEdgesMap,g=this.predecessorsMap,p=this.successorsMap,m=this.nodesLabelMap;if(this.isCompound()){var b,w,C;this.removeFromParentsChildList(o),(b=this.parentMap)===null||b===void 0||b.delete(o),(w=this.children(o))===null||w===void 0||w.forEach(function(M){return s.setParent(M)}),(C=this.childrenMap)===null||C===void 0||C.delete(o)}var O=u.get(o),A=d.get(o);Array.from(O.values()).forEach(function(M){return a(M)}),Array.from(A.values()).forEach(function(M){return a(M)}),m.delete(o),u.delete(o),d.delete(o),g.delete(o),p.delete(o),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(o,s,a,u){var d,g,p=lo(this.isDirected(),o,s,u),m=dc(this.isDirected(),p),b=p.v,w=p.w;if(this.edgesLabelsMap.has(m))return this.edgesLabelsMap.set(m,a),this;if(u!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(b),this.setNode(w),this.edgesLabelsMap.set(m,a||this.defaultEdgeLabelFn(b,w,u)),Object.freeze(p),this.edgesMap.set(m,p);var C=this.predecessorsMap.get(w),O=this.successorsMap.get(b);return Qd(C,b),Qd(O,w),(d=this.inEdgesMap.get(w))===null||d===void 0||d.set(m,p),(g=this.outEdgesMap.get(b))===null||g===void 0||g.set(m,p),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(o,s,a){var u=ef(this.isDirected(),o,s,a),d=this.edgesMap.get(u);if(d){var g=lo(this.isDirected(),o,s,a),p=g.v,m=g.w;this.edgesLabelsMap.delete(u),this.edgesMap.delete(u);var b=this.predecessorsMap.get(m),w=this.successorsMap.get(p);tf(b,p),tf(w,m),this.inEdgesMap.get(m).delete(u),this.outEdgesMap.get(p).delete(u),this.edgeCountNum-=1}return this}}]),n}();Ys.fromJSON=z0;function gu(n){"@babel/helpers - typeof";return gu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},gu(n)}function EC(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}function sf(n,r){for(var o=0;o<r.length;o++){var s=r[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(n,s.key,s)}}function Ks(n,r,o){return r&&sf(n.prototype,r),o&&sf(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n}function Ko(){return typeof Reflect!="undefined"&&Reflect.get?Ko=Reflect.get:Ko=function(r,o,s){var a=U0(r,o);if(a){var u=Object.getOwnPropertyDescriptor(a,o);return u.get?u.get.call(arguments.length<3?r:s):u.value}},Ko.apply(this,arguments)}function U0(n,r){for(;!Object.prototype.hasOwnProperty.call(n,r)&&(n=Mi(n),n!==null););return n}function fc(n,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(r&&r.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),r&&pu(n,r)}function pu(n,r){return pu=Object.setPrototypeOf||function(s,a){return s.__proto__=a,s},pu(n,r)}function _C(n){var r=W0();return function(){var s=Mi(n),a;if(r){var u=Mi(this).constructor;a=Reflect.construct(s,arguments,u)}else a=s.apply(this,arguments);return H0(this,a)}}function H0(n,r){if(r&&(gu(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $0(n)}function $0(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function W0(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(n){return!1}}function Mi(n){return Mi=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},Mi(n)}var CC=null,SC=function(r,o){var s=new Graph,a=new Map,u=new PriorityQueue,d;function g(b){var w=b.v===d?b.w:b.v,C=u.priority(w);if(C!==void 0){var O=o(b);O<C&&(a.set(w,d),u.decrease(w,O))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(b){u.add(b,Number.POSITIVE_INFINITY),s.setNode(b)}),u.decrease(r.nodes()[0],0);for(var p=!1;u.size()>0;){var m;if(d=u.removeMin(),a.has(d))s.setEdge(d,a.get(d));else{if(p)throw new Error("Input graph is not connected: "+r.graph());p=!0}(m=r.nodeEdges(d))===null||m===void 0||m.forEach(g)}return s},OC=null,X0=function n(r,o,s,a,u,d){a.includes(o)||(a.push(o),s||d.push(o),u(o).forEach(function(g){return n(r,g,s,a,u,d)}),s&&d.push(o))},Z0=function(r,o,s){var a=Array.isArray(o)?o:[o],u=function(m){return r.isDirected()?r.successors(m):r.neighbors(m)},d=[],g=[];return a.forEach(function(p){if(r.hasNode(p))X0(r,p,s==="post",g,u,d);else throw new Error("Graph does not have node: "+p)}),d},af=Z0,Y0=function(r,o){return af(r,o,"post")},K0=Y0,Jo=function(r,o){return af(r,o,"pre")},gc=Jo;function J0(n,r){return ty(n)||Q0(n,r)||q0(n,r)||vu()}function vu(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q0(n,r){if(n){if(typeof n=="string")return cf(n,r);var o=Object.prototype.toString.call(n).slice(8,-1);if(o==="Object"&&n.constructor&&(o=n.constructor.name),o==="Map"||o==="Set")return Array.from(n);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return cf(n,r)}}function cf(n,r){(r==null||r>n.length)&&(r=n.length);for(var o=0,s=new Array(r);o<r;o++)s[o]=n[o];return s}function Q0(n,r){var o=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(o!=null){var s=[],a=!0,u=!1,d,g;try{for(o=o.call(n);!(a=(d=o.next()).done)&&(s.push(d.value),!(r&&s.length===r));a=!0);}catch(p){u=!0,g=p}finally{try{!a&&o.return!=null&&o.return()}finally{if(u)throw g}}return s}}function ty(n){if(Array.isArray(n))return n}function AC(n){return n instanceof Graph}function TC(n){if(n.isMultigraph())return!1;for(var r=n.edges(),o=new Map,s=0;s<r.length;s++){var a=r[s];if(a.v===a.w)return!1;var u=[a.v,a.w].sort(),d=J0(u,2),g=d[0],p=d[1],m="".concat(g,"-").concat(p);if(o.has(m))return!1;o.set(m,!0)}return!0}function MC(n){return n.nodes().length===0}function IC(n){for(var r=n.edges(),o=0;o<r.length;o++){var s=r[o];if(s.v===s.w)return!0}return!1}var PC=function(r,o){if(!isSimpleGraph(r)||!isSimpleGraph(o)||!containAllSameNodes(r,o)||containSameEdges(r,o))return!1;var s=r.nodeCount();return r.edgeCount()+o.edgeCount()===s*(s-1)/2},pc=function(r){if(!isSimpleGraph(r))return null;for(var o=r.nodeCount(),s=new Graph({compound:r.isCompound(),directed:r.isDirected(),multigraph:r.isMultigraph()}),a=r.nodes(),u=0;u<o;u++){var d=a[u];s.setNode(d,r.node(d));for(var g=u+1;g<o;g++){var p=a[g];r.hasEdge(d,p)||s.setEdge(d,p)}}return s};class ey extends L0{}class lf extends Ys{}const uf=()=>1,hf=(n,r)=>{var o;if(n.nodeCount()<=1)return[];const s=qo(n,r||uf);return(o=ny(s.graph,s.buckets,s.zeroIdx).map(u=>n.outEdges(u.v,u.w)))===null||o===void 0?void 0:o.flat()},ny=(n,r,o)=>{let s=[];const a=r[r.length-1],u=r[0];let d;for(;n.nodeCount();){for(;d=u.dequeue();)mu(n,r,o,d);for(;d=a.dequeue();)mu(n,r,o,d);if(n.nodeCount()){for(let g=r.length-2;g>0;--g)if(d=r[g].dequeue(),d){s=s.concat(mu(n,r,o,d,!0));break}}}return s},mu=(n,r,o,s,a)=>{var u,d;const g=[];return(u=n.inEdges(s.v))===null||u===void 0||u.forEach(p=>{const m=n.edge(p),b=n.node(p.v);a&&g.push({v:p.v,w:p.w,in:0,out:0}),b.out===void 0&&(b.out=0),b.out-=m,yu(r,o,b)}),(d=n.outEdges(s.v))===null||d===void 0||d.forEach(p=>{const m=n.edge(p),b=p.w,w=n.node(b);w.in===void 0&&(w.in=0),w.in-=m,yu(r,o,w)}),n.removeNode(s.v),a?g:void 0},qo=(n,r)=>{const o=new lf;let s=0,a=0;n.nodes().forEach(p=>{o.setNode(p,{v:p,in:0,out:0})}),n.edges().forEach(p=>{const m=o.edge(p)||0,b=(r==null?void 0:r(p))||1,w=m+b;o.setEdge(p.v,p.w,w),a=Math.max(a,o.node(p.v).out+=b),s=Math.max(s,o.node(p.w).in+=b)});const u=[],d=a+s+3;for(let p=0;p<d;p++)u.push(new ey);const g=s+1;return o.nodes().forEach(p=>{yu(u,g,o.node(p))}),{buckets:u,zeroIdx:g,graph:o}},yu=(n,r,o)=>{o.out?o.in?n[o.out-o.in+r].enqueue(o):n[n.length-1].enqueue(o):n[0].enqueue(o)};var vc=hf;const ry=n=>{const r=s=>a=>{var u;return((u=s.edge(a))===null||u===void 0?void 0:u.weight)||1},o=n.graph().acyclicer==="greedy"?vc(n,r(n)):iy(n);o==null||o.forEach(s=>{const a=n.edge(s);n.removeEdgeObj(s),a.forwardName=s.name,a.reversed=!0,n.setEdge(s.w,s.v,a,`rev-${Math.random()}`)})},iy=n=>{const r=[],o={},s={},a=u=>{var d;s[u]||(s[u]=!0,o[u]=!0,(d=n.outEdges(u))===null||d===void 0||d.forEach(g=>{o[g.w]?r.push(g):a(g.w)}),delete o[u])};return n.nodes().forEach(a),r};var bu={run:ry,undo:n=>{n.edges().forEach(r=>{const o=n.edge(r);if(o.reversed){n.removeEdgeObj(r);const s=o.forwardName;delete o.reversed,delete o.forwardName,n.setEdge(r.w,r.v,o,s)}})}};class ii extends Ys{}const sy=(n,r)=>Number(n)-Number(r),Qo=(n,r,o,s)=>{let a;do a=`${s}${Math.random()}`;while(n.hasNode(a));return o.dummy=r,n.setNode(a,o),a},ts=n=>{const r=new ii().setGraph(n.graph());return n.nodes().forEach(o=>{r.setNode(o,n.node(o))}),n.edges().forEach(o=>{const s=r.edgeFromArgs(o.v,o.w)||{weight:0,minlen:1},a=n.edge(o);r.setEdge(o.v,o.w,{weight:s.weight+a.weight,minlen:Math.max(s.minlen,a.minlen)})}),r},df=n=>{const r=new ii({multigraph:n.isMultigraph()}).setGraph(n.graph());return n.nodes().forEach(o=>{var s;!((s=n.children(o))===null||s===void 0)&&s.length||r.setNode(o,n.node(o))}),n.edges().forEach(o=>{r.setEdgeObj(o,n.edge(o))}),r},ff=(n,r)=>n==null?void 0:n.reduce((o,s,a)=>(o[s]=r[a],o),{}),NC=n=>{const r={};return n.nodes().forEach(o=>{var s;const a={};(s=n.outEdges(o))===null||s===void 0||s.forEach(u=>{var d;a[u.w]=(a[u.w]||0)+(((d=n.edge(u))===null||d===void 0?void 0:d.weight)||0)}),r[o]=a}),r},xu=n=>{const r=n.nodes(),o=r.map(s=>{var a;const u={};return(a=n.inEdges(s))===null||a===void 0||a.forEach(d=>{u[d.v]=(u[d.v]||0)+n.edge(d).weight}),u});return ff(r,o)},gf=(n,r)=>{const o=Number(n.x),s=Number(n.y),a=Number(r.x)-o,u=Number(r.y)-s;let d=Number(n.width)/2,g=Number(n.height)/2;if(!a&&!u)return{x:0,y:0};let p,m;return Math.abs(u)*d>Math.abs(a)*g?(u<0&&(g=-g),p=g*a/u,m=g):(a<0&&(d=-d),p=d,m=d*u/a),{x:o+p,y:s+m}},Js=n=>{const r=[],o=es(n)+1;for(let s=0;s<o;s++)r.push([]);n.nodes().forEach(s=>{const a=n.node(s);if(!a)return;const u=a.rank;u!==void 0&&r[u]&&r[u].push(s)});for(let s=0;s<o;s++)r[s]=r[s].sort((a,u)=>{var d,g;return sy((d=n.node(a))===null||d===void 0?void 0:d.order,(g=n.node(u))===null||g===void 0?void 0:g.order)});return r},wu=n=>{const r=n.nodes().filter(s=>{var a;return((a=n.node(s))===null||a===void 0?void 0:a.rank)!==void 0}).map(s=>n.node(s).rank),o=Math.min(...r);n.nodes().forEach(s=>{const a=n.node(s);a.hasOwnProperty("rank")&&o!==1/0&&(a.rank-=o)})},ay=n=>{const r=n.nodes(),o=r.filter(g=>{var p;return((p=n.node(g))===null||p===void 0?void 0:p.rank)!==void 0}).map(g=>n.node(g).rank),s=Math.min(...o),a=[];r.forEach(g=>{var p;const m=(((p=n.node(g))===null||p===void 0?void 0:p.rank)||0)-s;a[m]||(a[m]=[]),a[m].push(g)});let u=0;const d=n.graph().nodeRankFactor||0;for(let g=0;g<a.length;g++){const p=a[g];p===void 0?g%d!==0&&(u-=1):u&&(p==null||p.forEach(m=>{const b=n.node(m);b&&(b.rank=b.rank||0,b.rank+=u)}))}},pf=(n,r,o,s)=>{const a={width:0,height:0};return J(o)&&J(s)&&(a.rank=o,a.order=s),Qo(n,"border",a,r)},es=n=>{let r;return n.nodes().forEach(o=>{var s;const a=(s=n.node(o))===null||s===void 0?void 0:s.rank;a!==void 0&&(r===void 0||a>r)&&(r=a)}),r||(r=0),r},cy=(n,r)=>{const o={lhs:[],rhs:[]};return n==null||n.forEach(s=>{r(s)?o.lhs.push(s):o.rhs.push(s)}),o},Eu=(n,r)=>{const o=Date.now();try{return r()}finally{console.log(`${n} time: ${Date.now()-o}ms`)}},vf=(n,r)=>r(),uo=(n,r)=>n.reduce((o,s)=>{const a=r(o),u=r(s);return a>u?s:o}),ly=n=>{n.graph().dummyChains=[],n.edges().forEach(r=>mc(n,r))},mc=(n,r)=>{let o=r.v,s=n.node(o).rank;const a=r.w,u=n.node(a).rank,d=r.name,g=n.edge(r),p=g.labelRank;if(u===s+1)return;n.removeEdgeObj(r);const m=n.graph();let b,w,C;for(C=0,++s;s<u;++C,++s)g.points=[],w={edgeLabel:g,width:0,height:0,edgeObj:r,rank:s},b=Qo(n,"edge",w,"_d"),s===p&&(w.width=g.width,w.height=g.height,w.dummy="edge-label",w.labelpos=g.labelpos),n.setEdge(o,b,{weight:g.weight},d),C===0&&(m.dummyChains||(m.dummyChains=[]),m.dummyChains.push(b)),o=b;n.setEdge(o,a,{weight:g.weight},d)};var qs={run:ly,undo:n=>{var r;(r=n.graph().dummyChains)===null||r===void 0||r.forEach(o=>{let s=n.node(o);const a=s.edgeLabel;let u;s.edgeObj&&n.setEdgeObj(s.edgeObj,a);let d=o;for(;s.dummy;)u=n.successors(d)[0],n.removeNode(d),a.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(a.x=s.x,a.y=s.y,a.width=s.width,a.height=s.height),d=u,s=n.node(d)})}};const _u=n=>{var r;const o={},s=a=>{var u;const d=n.node(a);if(!d)return 0;if(o[a])return d.rank;o[a]=!0;let g;return(u=n.outEdges(a))===null||u===void 0||u.forEach(p=>{const m=s(p.w),b=n.edge(p).minlen,w=m-b;w&&(g===void 0||w<g)&&(g=w)}),g||(g=0),d.rank=g,g};(r=n.sources())===null||r===void 0||r.forEach(a=>s(a))},Qs=n=>{var r;const o={};let s;const a=g=>{var p;const m=n.node(g);if(!m)return 0;if(o[g])return m.rank;o[g]=!0;let b;return(p=n.outEdges(g))===null||p===void 0||p.forEach(w=>{const C=a(w.w),O=n.edge(w).minlen,A=C-O;A&&(b===void 0||A<b)&&(b=A)}),b||(b=0),(s===void 0||b<s)&&(s=b),m.rank=b,b};(r=n.sources())===null||r===void 0||r.forEach(g=>{n.node(g)&&a(g)}),s===void 0&&(s=0);const u={},d=(g,p)=>{var m;const b=n.node(g),w=isNaN(b.layer)?p:b.layer;(b.rank===void 0||b.rank<w)&&(b.rank=w),!u[g]&&(u[g]=!0,(m=n.outEdges(g))===null||m===void 0||m.map(C=>{d(C.w,w+n.edge(C).minlen)}))};n.nodes().forEach(g=>{const p=n.node(g);p&&(isNaN(p.layer)?p.rank-=s:d(g,p.layer))})},oi=(n,r)=>n.node(r.w).rank-n.node(r.v).rank-n.edge(r).minlen;var RC={longestPath:_u,longestPathWithLayer:Qs,slack:oi};const mf=n=>{const r=new ii({directed:!1}),o=n.nodes()[0],s=n.nodeCount();r.setNode(o,{});let a,u;for(;Cu(r,n)<s;)a=bf(r,n),u=r.hasNode(a.v)?oi(n,a):-oi(n,a),xf(r,n,u);return r},Cu=(n,r)=>{const o=s=>{r.nodeEdges(s).forEach(a=>{const u=a.v,d=s===u?a.w:u;!n.hasNode(d)&&!oi(r,a)&&(n.setNode(d,{}),n.setEdge(s,d,{}),o(d))})};return n.nodes().forEach(o),n.nodeCount()},yf=n=>{const r=new ii({directed:!1}),o=n.nodes()[0],s=n.nodes().filter(d=>!!n.node(d)).length;r.setNode(o,{});let a,u;for(;uy(r,n)<s;)a=bf(r,n),u=r.hasNode(a.v)?oi(n,a):-oi(n,a),xf(r,n,u);return r},uy=(n,r)=>{const o=s=>{var a;(a=r.nodeEdges(s))===null||a===void 0||a.forEach(u=>{const d=u.v,g=s===d?u.w:d;!n.hasNode(g)&&(r.node(g).layer!==void 0||!oi(r,u))&&(n.setNode(g,{}),n.setEdge(s,g,{}),o(g))})};return n.nodes().forEach(o),n.nodeCount()},bf=(n,r)=>uo(r.edges(),o=>n.hasNode(o.v)!==n.hasNode(o.w)?oi(r,o):1/0),xf=(n,r,o)=>{n.nodes().forEach(s=>{r.node(s).rank||(r.node(s).rank=0),r.node(s).rank+=o})};var LC={feasibleTree:mf,feasibleTreeWithLayer:yf};const{preorder:hy,postorder:dy}=rt,wf=n=>{const r=ts(n);_u(r);const o=mf(r);yc(o),Ef(o,r);let s,a;for(;s=py(o);)a=vy(o,r,s),_f(o,r,s,a)},Ef=(n,r)=>{let o=dy(n,n.nodes());o=o==null?void 0:o.slice(0,(o==null?void 0:o.length)-1),o==null||o.forEach(s=>{fy(n,r,s)})},fy=(n,r,o)=>{const a=n.node(o).parent;n.edgeFromArgs(o,a).cutvalue=gy(n,r,o)},gy=(n,r,o)=>{var s;const u=n.node(o).parent;let d=!0,g=r.edgeFromArgs(o,u),p=0;return g||(d=!1,g=r.edgeFromArgs(u,o)),p=g.weight,(s=r.nodeEdges(o))===null||s===void 0||s.forEach(m=>{const b=m.v===o,w=b?m.w:m.v;if(w!==u){const C=b===d,O=r.edge(m).weight;if(p+=C?O:-O,my(n,o,w)){const A=n.edgeFromArgs(o,w).cutvalue;p+=C?-A:A}}}),p},yc=(n,r=n.nodes()[0])=>{Su(n,{},1,r)},Su=(n,r,o,s,a)=>{var u;const d=o;let g=o;const p=n.node(s);return r[s]=!0,(u=n.neighbors(s))===null||u===void 0||u.forEach(m=>{r[m]||(g=Su(n,r,g,m,s))}),p.low=d,p.lim=g++,a?p.parent=a:delete p.parent,g},py=n=>n.edges().find(r=>n.edge(r).cutvalue<0),vy=(n,r,o)=>{let s=o.v,a=o.w;r.hasEdge(s,a)||(s=o.w,a=o.v);const u=n.node(s),d=n.node(a);let g=u,p=!1;u.lim>d.lim&&(g=d,p=!0);const m=r.edges().filter(b=>p===Cf(n,n.node(b.v),g)&&p!==Cf(n,n.node(b.w),g));return uo(m,b=>oi(r,b))},_f=(n,r,o,s)=>{const a=o.v,u=o.w;n.removeEdge(a,u),n.setEdge(s.v,s.w,{}),yc(n),Ef(n,r),bc(n,r)},bc=(n,r)=>{const o=n.nodes().find(a=>{var u;return!(!((u=r.node(a))===null||u===void 0)&&u.parent)});let s=hy(n,o);s=s==null?void 0:s.slice(1),s==null||s.forEach(a=>{const u=n.node(a).parent;let d=r.edgeFromArgs(a,u),g=!1;d||(d=r.edgeFromArgs(u,a),g=!0),r.node(a).rank=r.node(u).rank+(g?d.minlen:-d.minlen)})},my=(n,r,o)=>n.hasEdge(r,o),Cf=(n,r,o)=>o.low<=r.lim&&r.lim<=o.lim;var yy=wf;const Sf=n=>{switch(n.graph().ranker){case"network-simplex":Tf(n);break;case"tight-tree":Af(n);break;case"longest-path":Of(n);break;default:Af(n)}},Of=_u,Af=n=>{Qs(n),yf(n)},Tf=n=>{yy(n)};var by=Sf;const xy=n=>{var r;const o={};let s=0;const a=u=>{var d;const g=s;(d=n.children(u))===null||d===void 0||d.forEach(a),o[u]={low:g,lim:s++}};return(r=n.children())===null||r===void 0||r.forEach(a),o},wy=(n,r,o,s)=>{const a=[],u=[],d=Math.min(r[o].low,r[s].low),g=Math.max(r[o].lim,r[s].lim);let p,m;p=o;do p=n.parent(p),a.push(p);while(p&&(r[p].low>d||g>r[p].lim));for(m=p,p=s;p&&p!==m;)u.push(p),p=n.parent(p);return{lca:m,path:a.concat(u.reverse())}};var Ey=n=>{var r;const o=xy(n);(r=n.graph().dummyChains)===null||r===void 0||r.forEach(s=>{var a,u;let d=s,g=n.node(d);const p=g.edgeObj;if(!p)return;const m=wy(n,o,p.v,p.w),b=m.path,w=m.lca;let C=0,O=b[C],A=!0;for(;d!==p.w;){if(g=n.node(d),A){for(;O!==w&&((a=n.node(O))===null||a===void 0?void 0:a.maxRank)<g.rank;)C++,O=b[C];O===w&&(A=!1)}if(!A){for(;C<b.length-1&&((u=n.node(b[C+1]))===null||u===void 0?void 0:u.minRank)<=g.rank;)C++;O=b[C]}n.setParent(d,O),d=n.successors(d)[0]}})};const _y=n=>{var r;const o=Qo(n,"root",{},"_root"),s=Cy(n);let a=Math.max(...Object.values(s));Math.abs(a)===1/0&&(a=1);const u=a-1,d=2*u+1;n.graph().nestingRoot=o,n.edges().forEach(p=>{n.edge(p).minlen*=d});const g=Sy(n)+1;(r=n.children())===null||r===void 0||r.forEach(p=>{Mf(n,o,d,g,u,s,p)}),n.graph().nodeRankFactor=d},Mf=(n,r,o,s,a,u,d)=>{const g=n.children(d);if(!(g!=null&&g.length)){d!==r&&n.setEdge(r,d,{weight:0,minlen:o});return}const p=pf(n,"_bt"),m=pf(n,"_bb"),b=n.node(d);n.setParent(p,d),b.borderTop=p,n.setParent(m,d),b.borderBottom=m,g==null||g.forEach(w=>{Mf(n,r,o,s,a,u,w);const C=n.node(w),O=C.borderTop?C.borderTop:w,A=C.borderBottom?C.borderBottom:w,M=C.borderTop?s:2*s,P=O!==A?1:a-u[d]+1;n.setEdge(p,O,{minlen:P,weight:M,nestingEdge:!0}),n.setEdge(A,m,{minlen:P,weight:M,nestingEdge:!0})}),n.parent(d)||n.setEdge(r,p,{weight:0,minlen:a+u[d]})},Cy=n=>{var r;const o={},s=(a,u)=>{const d=n.children(a);d==null||d.forEach(g=>s(g,u+1)),o[a]=u};return(r=n.children())===null||r===void 0||r.forEach(a=>s(a,1)),o},Sy=n=>{let r=0;return n.edges().forEach(o=>{r+=n.edge(o).weight}),r};var If={run:_y,cleanup:n=>{const r=n.graph();r.nestingRoot&&n.removeNode(r.nestingRoot),delete r.nestingRoot,n.edges().forEach(o=>{n.edge(o).nestingEdge&&n.removeEdgeObj(o)})}};const Oy=n=>{var r;const o=s=>{const a=n.children(s),u=n.node(s);if(a!=null&&a.length&&a.forEach(d=>o(d)),u.hasOwnProperty("minRank")){u.borderLeft=[],u.borderRight=[];for(let d=u.minRank,g=u.maxRank+1;d<g;d+=1)Ou(n,"borderLeft","_bl",s,u,d),Ou(n,"borderRight","_br",s,u,d)}};(r=n.children())===null||r===void 0||r.forEach(s=>o(s))},Ou=(n,r,o,s,a,u)=>{const d={rank:u,borderType:r,width:0,height:0},g=a[r][u-1],p=Qo(n,"border",d,o);a[r][u]=p,n.setParent(p,s),g&&n.setEdge(g,p,{weight:1})};var Ay=Oy;const Ty=n=>{var r;const o=(r=n.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(o==="lr"||o==="rl")&&Pf(n)},My=n=>{var r;const o=(r=n.graph().rankdir)===null||r===void 0?void 0:r.toLowerCase();(o==="bt"||o==="rl")&&Iy(n),(o==="lr"||o==="rl")&&(Py(n),Pf(n))},Pf=n=>{n.nodes().forEach(r=>{Nf(n.node(r))}),n.edges().forEach(r=>{Nf(n.edge(r))})},Nf=n=>{const r=n.width;n.width=n.height,n.height=r},Iy=n=>{n.nodes().forEach(r=>{Au(n.node(r))}),n.edges().forEach(r=>{var o;const s=n.edge(r);(o=s.points)===null||o===void 0||o.forEach(a=>Au(a)),s.hasOwnProperty("y")&&Au(s)})},Au=n=>{n!=null&&n.y&&(n.y=-n.y)},Py=n=>{n.nodes().forEach(r=>{Tu(n.node(r))}),n.edges().forEach(r=>{var o;const s=n.edge(r);(o=s.points)===null||o===void 0||o.forEach(a=>Tu(a)),s.hasOwnProperty("x")&&Tu(s)})},Tu=n=>{const r=n.x;n.x=n.y,n.y=r};var Df={adjust:Ty,undo:My},Ny={}.toString,Dy=function(n,r){return Ny.call(n)==="[object "+r+"]"},Ry=Dy,Rf=function(n){return Array.isArray?Array.isArray(n):Ry(n,"Array")},Mu=function(n){if(Rf(n))return n.reduce(function(r,o){return Math.max(r,o)},n[0])},ho=n=>{const r={},o=n.nodes().filter(b=>{var w;return!(!((w=n.children(b))===null||w===void 0)&&w.length)}),s=o.map(b=>n.node(b).rank),a=Mu(s),u=[];for(let b=0;b<a+1;b++)u.push([]);const d=b=>{var w;if(r.hasOwnProperty(b))return;r[b]=!0;const C=n.node(b);isNaN(C.rank)||u[C.rank].push(b),(w=n.successors(b))===null||w===void 0||w.forEach(O=>d(O))},g=o.sort((b,w)=>n.node(b).rank-n.node(w).rank),m=g.filter(b=>n.node(b).fixorder!==void 0).sort((b,w)=>n.node(b).fixorder-n.node(w).fixorder);return m==null||m.forEach(b=>{isNaN(n.node(b).rank)||u[n.node(b).rank].push(b),r[b]=!0}),g==null||g.forEach(d),u};const Ly=(n,r,o)=>{const s=ff(o,o.map((b,w)=>w)),u=r.map(b=>{var w;const C=(w=n.outEdges(b))===null||w===void 0?void 0:w.map(O=>({pos:s[O.w]||0,weight:n.edge(O).weight}));return C==null?void 0:C.sort((O,A)=>O.pos-A.pos)}).flat().filter(b=>b!==void 0);let d=1;for(;d<o.length;)d<<=1;const g=2*d-1;d-=1;const p=Array(g).fill(0,0,g);let m=0;return u==null||u.forEach(b=>{if(b){let w=b.pos+d;p[w]+=b.weight;let C=0;for(;w>0;)w%2&&(C+=p[w+1]),w=w-1>>1,p[w]+=b.weight;m+=b.weight*C}}),m};var kf=(n,r)=>{let o=0;for(let s=1;s<(r==null?void 0:r.length);s+=1)o+=Ly(n,r[s-1],r[s]);return o};const ky=(n,r,o)=>{const s=By(n),a=new ii({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(u=>n.node(u));return n.nodes().forEach(u=>{var d;const g=n.node(u),p=n.parent(u);(g.rank===r||g.minRank<=r&&r<=g.maxRank)&&(a.setNode(u),a.setParent(u,p||s),(d=n[o](u))===null||d===void 0||d.forEach(m=>{const b=m.v===u?m.w:m.v,w=a.edgeFromArgs(b,u),C=w!==void 0?w.weight:0;a.setEdge(b,u,{weight:n.edge(m).weight+C})}),g.hasOwnProperty("minRank")&&a.setNode(u,{borderLeft:g.borderLeft[r],borderRight:g.borderRight[r]}))}),a},By=n=>{let r;for(;n.hasNode(r=`_root${Math.random()}`););return r};var Bf=ky,zf=(n,r,o)=>{const s={};let a;o==null||o.forEach(u=>{let d=n.parent(u),g,p;for(;d;){if(g=n.parent(d),g?(p=s[g],s[g]=d):(p=a,a=d),p&&p!==d){r.setEdge(p,d);return}d=g}})},Ff=(n,r)=>r.map(o=>{const s=n.inEdges(o);if(!(s!=null&&s.length))return{v:o};{const a={sum:0,weight:0};return s==null||s.forEach(u=>{const d=n.edge(u),g=n.node(u.v);a.sum+=d.weight*g.order,a.weight+=d.weight}),{v:o,barycenter:a.sum/a.weight,weight:a.weight}}});const Gf=(n,r)=>{var o,s,a;const u={};n==null||n.forEach((g,p)=>{u[g.v]={i:p,indegree:0,in:[],out:[],vs:[g.v]};const m=u[g.v];g.barycenter!==void 0&&(m.barycenter=g.barycenter,m.weight=g.weight)}),(o=r.edges())===null||o===void 0||o.forEach(g=>{const p=u[g.v],m=u[g.w];p!==void 0&&m!==void 0&&(m.indegree++,p.out.push(u[g.w]))});const d=(a=(s=Object.values(u)).filter)===null||a===void 0?void 0:a.call(s,g=>!g.indegree);return Fy(d)},Fy=n=>{var r,o;const s=[],a=p=>m=>{m.merged||(m.barycenter===void 0||p.barycenter===void 0||m.barycenter>=p.barycenter)&&jf(p,m)},u=p=>m=>{m.in.push(p),--m.indegree===0&&n.push(m)};for(;n!=null&&n.length;){const p=n.pop();s.push(p),(r=p.in.reverse())===null||r===void 0||r.forEach(m=>a(p)(m)),(o=p.out)===null||o===void 0||o.forEach(m=>u(p)(m))}const d=s.filter(p=>!p.merged),g=["vs","i","barycenter","weight"];return d.map(p=>{const m={};return g==null||g.forEach(b=>{p[b]!==void 0&&(m[b]=p[b])}),m})},jf=(n,r)=>{var o;let s=0,a=0;n.weight&&(s+=n.barycenter*n.weight,a+=n.weight),r.weight&&(s+=r.barycenter*r.weight,a+=r.weight),n.vs=(o=r.vs)===null||o===void 0?void 0:o.concat(n.vs),n.barycenter=s/a,n.weight=a,n.i=Math.min(r.i,n.i),r.merged=!0};var Gy=Gf;const xc=(n,r,o,s)=>{const a=cy(n,C=>{const O=C.hasOwnProperty("fixorder")&&!isNaN(C.fixorder);return s?!O&&C.hasOwnProperty("barycenter"):O||C.hasOwnProperty("barycenter")}),u=a.lhs,d=a.rhs.sort((C,O)=>-C.i- -O.i),g=[];let p=0,m=0,b=0;u==null||u.sort(Iu(!!r,!!o)),b=Vf(g,d,b),u==null||u.forEach(C=>{var O;b+=(O=C.vs)===null||O===void 0?void 0:O.length,g.push(C.vs),p+=C.barycenter*C.weight,m+=C.weight,b=Vf(g,d,b)});const w={vs:g.flat()};return m&&(w.barycenter=p/m,w.weight=m),w},Vf=(n,r,o)=>{let s=o,a;for(;r.length&&(a=r[r.length-1]).i<=s;)r.pop(),n==null||n.push(a.vs),s++;return s},Iu=(n,r)=>(o,s)=>{if(o.fixorder!==void 0&&s.fixorder!==void 0)return o.fixorder-s.fixorder;if(o.barycenter<s.barycenter)return-1;if(o.barycenter>s.barycenter)return 1;if(r&&o.order!==void 0&&s.order!==void 0){if(o.order<s.order)return-1;if(o.order>s.order)return 1}return n?s.i-o.i:o.i-s.i};var jy=xc;const Pu=(n,r,o,s,a,u)=>{var d,g,p,m;let b=n.children(r);const w=n.node(r),C=w?w.borderLeft:void 0,O=w?w.borderRight:void 0,A={};C&&(b=b==null?void 0:b.filter(N=>N!==C&&N!==O));const M=Ff(n,b||[]);M==null||M.forEach(N=>{var R;if(!((R=n.children(N.v))===null||R===void 0)&&R.length){const z=Pu(n,N.v,o,s,u);A[N.v]=z,z.hasOwnProperty("barycenter")&&Uf(N,z)}});const P=Gy(M,o);Vy(P,A),(d=P.filter(N=>N.vs.length>0))===null||d===void 0||d.forEach(N=>{const R=n.node(N.vs[0]);R&&(N.fixorder=R.fixorder,N.order=R.order)});const I=jy(P,s,a,u);if(C&&(I.vs=[C,I.vs,O].flat(),!((g=n.predecessors(C))===null||g===void 0)&&g.length)){const N=n.node(((p=n.predecessors(C))===null||p===void 0?void 0:p[0])||""),R=n.node(((m=n.predecessors(O))===null||m===void 0?void 0:m[0])||"");I.hasOwnProperty("barycenter")||(I.barycenter=0,I.weight=0),I.barycenter=(I.barycenter*I.weight+N.order+R.order)/(I.weight+2),I.weight+=2}return I},Vy=(n,r)=>{n==null||n.forEach(o=>{var s;const a=(s=o.vs)===null||s===void 0?void 0:s.map(u=>r[u]?r[u].vs:u);o.vs=a.flat()})},Uf=(n,r)=>{n.barycenter!==void 0?(n.barycenter=(n.barycenter*n.weight+r.barycenter*r.weight)/(n.weight+r.weight),n.weight+=r.weight):(n.barycenter=r.barycenter,n.weight=r.weight)};var Hf=Pu;const Uy=(n,r)=>{const o=es(n),s=[],a=[];for(let b=1;b<o+1;b++)s.push(b);for(let b=o-1;b>-1;b--)a.push(b);const u=$f(n,s,"inEdges"),d=$f(n,a,"outEdges");let g=ho(n);wc(n,g);let p=Number.POSITIVE_INFINITY,m;for(let b=0,w=0;w<4;++b,++w){Wf(b%2?u:d,b%4>=2,!1,r),g=Js(n);const C=kf(n,g);C<p&&(w=0,m=Nt(g),p=C)}g=ho(n),wc(n,g);for(let b=0,w=0;w<4;++b,++w){Wf(b%2?u:d,b%4>=2,!0,r),g=Js(n);const C=kf(n,g);C<p&&(w=0,m=Nt(g),p=C)}wc(n,m)},$f=(n,r,o)=>r.map(s=>Bf(n,s,o)),Wf=(n,r,o,s)=>{const a=new ii;n==null||n.forEach(u=>{var d;const g=u.graph().root,p=Hf(u,g,a,r,o,s);for(let m=0;m<((d=p.vs)===null||d===void 0?void 0:d.length);m++){const b=u.node(p.vs[m]);b&&(b.order=m)}zf(u,a,p.vs)})},wc=(n,r)=>{r==null||r.forEach(o=>{o==null||o.forEach((s,a)=>{n.node(s).order=a})})};var Hy=Uy,Ec=function(n){if(Rf(n))return n.reduce(function(r,o){return Math.min(r,o)},n[0])};class $y extends Ys{}const Xf=(n,r)=>{const o={},s=(a,u)=>{let d=0,g=0;const p=a.length,m=u==null?void 0:u[(u==null?void 0:u.length)-1];return u==null||u.forEach((b,w)=>{var C;const O=Wy(n,b),A=O?n.node(O).order:p;(O||b===m)&&((C=u.slice(g,w+1))===null||C===void 0||C.forEach(M=>{var P;(P=n.predecessors(M))===null||P===void 0||P.forEach(I=>{var N;const R=n.node(I),z=R.order;(z<d||A<z)&&!(R.dummy&&(!((N=n.node(M))===null||N===void 0)&&N.dummy))&&Nu(o,I,M)})}),g=w+1,d=A)}),u};return r!=null&&r.length&&r.reduce(s),o},na=(n,r)=>{const o={};function s(g,p,m,b,w){var C,O;let A;for(let M=p;M<m;M++)A=g[M],!((C=n.node(A))===null||C===void 0)&&C.dummy&&((O=n.predecessors(A))===null||O===void 0||O.forEach(P=>{const I=n.node(P);I.dummy&&(I.order<b||I.order>w)&&Nu(o,P,A)}))}function a(g){return JSON.stringify(g.slice(1))}function u(g,p){const m=a(g);p.get(m)||(s(...g),p.set(m,!0))}const d=(g,p)=>{let m=-1,b,w=0;const C=new Map;return p==null||p.forEach((O,A)=>{var M;if(((M=n.node(O))===null||M===void 0?void 0:M.dummy)==="border"){const P=n.predecessors(O)||[];P.length&&(b=n.node(P[0]).order,u([p,w,A,m,b],C),w=A,m=b)}u([p,w,p.length,b,g.length],C)}),p};return r!=null&&r.length&&r.reduce(d),o},Wy=(n,r)=>{var o,s;if(!((o=n.node(r))===null||o===void 0)&&o.dummy)return(s=n.predecessors(r))===null||s===void 0?void 0:s.find(a=>n.node(a).dummy)},Nu=(n,r,o)=>{let s=r,a=o;if(s>a){const d=s;s=a,a=d}let u=n[s];u||(n[s]=u={}),u[a]=!0},Xy=(n,r,o)=>{let s=r,a=o;if(s>a){const u=r;s=a,a=u}return!!n[s]},Ii=(n,r,o,s)=>{const a={},u={},d={};return r==null||r.forEach(g=>{g==null||g.forEach((p,m)=>{a[p]=p,u[p]=p,d[p]=m})}),r==null||r.forEach(g=>{let p=-1;g==null||g.forEach(m=>{let b=s(m);if(b.length){b=b.sort((C,O)=>d[C]-d[O]);const w=(b.length-1)/2;for(let C=Math.floor(w),O=Math.ceil(w);C<=O;++C){const A=b[C];u[m]===m&&p<d[A]&&!Xy(o,m,A)&&(u[A]=m,u[m]=a[m]=a[A],p=d[A])}}})}),{root:a,align:u}},Zf=(n,r,o,s,a)=>{var u;const d={},g=_c(n,r,o,a),p=a?"borderLeft":"borderRight",m=(C,O)=>{let A=g.nodes(),M=A.pop();const P={};for(;M;)P[M]?C(M):(P[M]=!0,A.push(M),A=A.concat(O(M))),M=A.pop()},b=C=>{d[C]=(g.inEdges(C)||[]).reduce((O,A)=>Math.max(O,(d[A.v]||0)+g.edge(A)),0)},w=C=>{const O=(g.outEdges(C)||[]).reduce((M,P)=>Math.min(M,(d[P.w]||0)-g.edge(P)),Number.POSITIVE_INFINITY),A=n.node(C);O!==Number.POSITIVE_INFINITY&&A.borderType!==p&&(d[C]=Math.max(d[C],O))};return m(b,g.predecessors.bind(g)),m(w,g.successors.bind(g)),(u=Object.values(s))===null||u===void 0||u.forEach(C=>{d[C]=d[o[C]]}),d},_c=(n,r,o,s)=>{const a=new $y,u=n.graph(),d=Yy(u.nodesep,u.edgesep,s);return r==null||r.forEach(g=>{let p;g==null||g.forEach(m=>{const b=o[m];if(a.setNode(b),p){const w=o[p],C=a.edgeFromArgs(w,b);a.setEdge(w,b,Math.max(d(n,m,p),C||0))}p=m})}),a},Yf=(n,r)=>uo(Object.values(r),o=>{var s;let a=Number.NEGATIVE_INFINITY,u=Number.POSITIVE_INFINITY;return(s=Object.keys(o))===null||s===void 0||s.forEach(d=>{const g=o[d],p=Jf(n,d)/2;a=Math.max(g+p,a),u=Math.min(g-p,u)}),a-u});function Kf(n,r){const o=Object.values(r),s=Ec(o),a=Mu(o);["u","d"].forEach(u=>{["l","r"].forEach(d=>{const g=u+d,p=n[g];let m;if(p===r)return;const b=Object.values(p);m=d==="l"?s-Ec(b):a-Mu(b),m&&(n[g]={},Object.keys(p).forEach(w=>{n[g][w]=p[w]+m}))})})}const Du=(n,r)=>{const o={};return Object.keys(n.ul).forEach(s=>{if(r)o[s]=n[r.toLowerCase()][s];else{const a=Object.values(n).map(u=>u[s]);o[s]=(a[0]+a[1])/2}}),o},Zy=n=>{const r=buildLayerMatrix(n),o=Object.assign(Xf(n,r),na(n,r)),s={};let a;["u","d"].forEach(d=>{a=d==="u"?r:Object.values(r).reverse(),["l","r"].forEach(g=>{g==="r"&&(a=a.map(w=>Object.values(w).reverse()));const p=(d==="u"?n.predecessors:n.successors).bind(n),m=Ii(n,a,o,p),b=Zf(n,a,m.root,m.align,g==="r");g==="r"&&Object.keys(b).forEach(w=>{b[w]=-b[w]}),s[d+g]=b})});const u=Yf(n,s);return Kf(s,u),Du(s,n.graph().align)},Yy=(n,r,o)=>(s,a,u)=>{const d=s.node(a),g=s.node(u);let p=0,m;if(p+=d.width/2,d.hasOwnProperty("labelpos"))switch((d.labelpos||"").toLowerCase()){case"l":m=-d.width/2;break;case"r":m=d.width/2;break}if(m&&(p+=o?m:-m),m=0,p+=(d.dummy?r:n)/2,p+=(g.dummy?r:n)/2,p+=g.width/2,g.labelpos)switch((g.labelpos||"").toLowerCase()){case"l":m=g.width/2;break;case"r":m=-g.width/2;break}return m&&(p+=o?m:-m),m=0,p},Jf=(n,r)=>n.node(r).width||0,Ky=n=>{const r=Js(n),o=n.graph().ranksep;let s=0;r==null||r.forEach(a=>{const u=a.map(g=>n.node(g).height),d=Math.max(...u,0);a==null||a.forEach(g=>{n.node(g).y=s+d/2}),s+=d+o})},Jy=n=>{const r=Js(n),o=Object.assign(Xf(n,r),na(n,r)),s={};let a=[];["u","d"].forEach(d=>{a=d==="u"?r:Object.values(r).reverse(),["l","r"].forEach(g=>{g==="r"&&(a=a.map(w=>Object.values(w).reverse()));const p=(d==="u"?n.predecessors:n.successors).bind(n),m=Ii(n,a,o,p),b=Zf(n,a,m.root,m.align,g==="r");g==="r"&&Object.keys(b).forEach(w=>b[w]=-b[w]),s[d+g]=b})});const u=Yf(n,s);return u&&Kf(s,u),Du(s,n.graph().align)};var qy=n=>{var r;const o=df(n);Ky(o);const s=Jy(o);(r=Object.keys(s))===null||r===void 0||r.forEach(a=>{o.node(a).x=s[a]})},Qy=(n,r)=>{const s=n.nodes().filter(d=>{var g;return!(!((g=n.children(d))===null||g===void 0)&&g.length)}).map(d=>n.node(d).rank),a=Math.max(...s),u=[];for(let d=0;d<a+1;d++)u[d]=[];r==null||r.forEach(d=>{const g=n.node(d);!g||g!=null&&g.dummy||isNaN(g.rank)||(g.fixorder=u[g.rank].length,u[g.rank].push(d))})};const qf=(n,r)=>{const o=r&&r.debugTiming?Eu:vf;o("layout",()=>{r&&!r.keepNodeOrder&&r.prevGraph&&o("  inheritOrder",()=>{eb(n,r.prevGraph)});const s=o("  buildLayoutGraph",()=>cb(n));r&&r.edgeLabelSpace===!1||o("  makeSpaceForEdgeLabels",()=>{lb(s)});try{o("  runLayout",()=>{tb(s,o,r)})}catch(a){if(a.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,a);return}throw a}o("  updateInputGraph",()=>{nb(n,s)})})},tb=(n,r,o)=>{r("    removeSelfEdges",()=>{yb(n)}),r("    acyclic",()=>{bu.run(n)}),r("    nestingGraph.run",()=>{If.run(n)}),r("    rank",()=>{by(df(n))}),r("    injectEdgeLabelProxies",()=>{ub(n)}),r("    removeEmptyRanks",()=>{ay(n)}),r("    nestingGraph.cleanup",()=>{If.cleanup(n)}),r("    normalizeRanks",()=>{wu(n)}),r("    assignRankMinMax",()=>{hb(n)}),r("    removeEdgeLabelProxies",()=>{db(n)}),r("    normalize.run",()=>{qs.run(n)}),r("    parentDummyChains",()=>{Ey(n)}),r("    addBorderSegments",()=>{Ay(n)}),o&&o.keepNodeOrder&&r("    initDataOrder",()=>{Qy(n,o.nodeOrder)}),r("    order",()=>{Hy(n,o==null?void 0:o.keepNodeOrder)}),r("    insertSelfEdges",()=>{bb(n)}),r("    adjustCoordinateSystem",()=>{Df.adjust(n)}),r("    position",()=>{qy(n)}),r("    positionSelfEdges",()=>{xb(n)}),r("    removeBorderNodes",()=>{mb(n)}),r("    normalize.undo",()=>{qs.undo(n)}),r("    fixupEdgeLabelCoords",()=>{pb(n)}),r("    undoCoordinateSystem",()=>{Df.undo(n)}),r("    translateGraph",()=>{fb(n)}),r("    assignNodeIntersects",()=>{gb(n)}),r("    reversePoints",()=>{vb(n)}),r("    acyclic.undo",()=>{bu.undo(n)})},eb=(n,r)=>{n.nodes().forEach(o=>{const s=n.node(o),a=r.node(o);a!==void 0?(s.fixorder=a._order,delete a._order):delete s.fixorder})},nb=(n,r)=>{n.nodes().forEach(o=>{var s;const a=n.node(o);if(a){const u=r.node(o);a.x=u.x,a.y=u.y,a._order=u.order,a._rank=u.rank,!((s=r.children(o))===null||s===void 0)&&s.length&&(a.width=u.width,a.height=u.height)}}),n.edges().forEach(o=>{const s=n.edge(o),a=r.edge(o);s.points=a?a.points:[],a&&a.hasOwnProperty("x")&&(s.x=a.x,s.y=a.y)}),n.graph().width=r.graph().width,n.graph().height=r.graph().height},Br=["nodesep","edgesep","ranksep","marginx","marginy"],rb={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Ru=["acyclicer","ranker","rankdir","align"],ib=["width","height","layer","fixorder"],ob={width:0,height:0},sb=["minlen","weight","width","height","labeloffset"],ab={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Lu=["labelpos"],cb=n=>{const r=new ii({multigraph:!0,compound:!0}),o=Bu(n.graph()),s={};return Ru==null||Ru.forEach(a=>{o[a]!==void 0&&(s[a]=o[a])}),r.setGraph(Object.assign({},rb,ku(o,Br),s)),n.nodes().forEach(a=>{const u=Bu(n.node(a)),d=Object.assign(Object.assign({},ob),u),g=ku(d,ib);r.setNode(a,g),r.setParent(a,n.parent(a))}),n.edges().forEach(a=>{const u=Bu(n.edge(a)),d={};Lu==null||Lu.forEach(g=>{u[g]!==void 0&&(d[g]=u[g])}),r.setEdgeObj(a,Object.assign({},ab,ku(u,sb),d))}),r},lb=n=>{const r=n.graph();r.ranksep||(r.ranksep=0),r.ranksep/=2,n.nodes().forEach(o=>{const s=n.node(o);isNaN(s.layer)||s.layer||(s.layer=0)}),n.edges().forEach(o=>{var s;const a=n.edge(o);a.minlen*=2,((s=a.labelpos)===null||s===void 0?void 0:s.toLowerCase())!=="c"&&(r.rankdir==="TB"||r.rankdir==="BT"?a.width+=a.labeloffset:a.height+=a.labeloffset)})},ub=n=>{n.edges().forEach(r=>{const o=n.edge(r);if(o.width&&o.height){const s=n.node(r.v),a=n.node(r.w),u={e:r,rank:(a.rank-s.rank)/2+s.rank};Qo(n,"edge-proxy",u,"_ep")}})},hb=n=>{let r=0;n.nodes().forEach(o=>{var s,a;const u=n.node(o);u.borderTop&&(u.minRank=(s=n.node(u.borderTop))===null||s===void 0?void 0:s.rank,u.maxRank=(a=n.node(u.borderBottom))===null||a===void 0?void 0:a.rank,r=Math.max(r,u.maxRank||-1/0))}),n.graph().maxRank=r},db=n=>{n.nodes().forEach(r=>{const o=n.node(r);o.dummy==="edge-proxy"&&(n.edge(o.e).labelRank=o.rank,n.removeNode(r))})},fb=n=>{let r,o=0,s,a=0;const u=n.graph(),d=u.marginx||0,g=u.marginy||0,p=m=>{if(!m)return;const b=m.x,w=m.y,C=m.width,O=m.height;!isNaN(b)&&!isNaN(C)&&(r===void 0&&(r=b-C/2),r=Math.min(r,b-C/2),o=Math.max(o,b+C/2)),!isNaN(w)&&!isNaN(O)&&(s===void 0&&(s=w-O/2),s=Math.min(s,w-O/2),a=Math.max(a,w+O/2))};n.nodes().forEach(m=>{p(n.node(m))}),n.edges().forEach(m=>{const b=n.edge(m);b!=null&&b.hasOwnProperty("x")&&p(b)}),r-=d,s-=g,n.nodes().forEach(m=>{const b=n.node(m);b&&(b.x-=r,b.y-=s)}),n.edges().forEach(m=>{var b;const w=n.edge(m);(b=w.points)===null||b===void 0||b.forEach(C=>{C.x-=r,C.y-=s}),w.hasOwnProperty("x")&&(w.x-=r),w.hasOwnProperty("y")&&(w.y-=s)}),u.width=o-r+d,u.height=a-s+g},gb=n=>{n.edges().forEach(r=>{const o=n.edge(r),s=n.node(r.v),a=n.node(r.w);let u,d;o.points?(u=o.points[0],d=o.points[o.points.length-1]):(o.points=[],u=a,d=s),o.points.unshift(gf(s,u)),o.points.push(gf(a,d))})},pb=n=>{n.edges().forEach(r=>{const o=n.edge(r);if(o!=null&&o.hasOwnProperty("x"))switch((o.labelpos==="l"||o.labelpos==="r")&&(o.width-=o.labeloffset),o.labelpos){case"l":o.x-=o.width/2+o.labeloffset;break;case"r":o.x+=o.width/2+o.labeloffset;break}})},vb=n=>{n.edges().forEach(r=>{var o;const s=n.edge(r);s.reversed&&((o=s.points)===null||o===void 0||o.reverse())})},mb=n=>{n.nodes().forEach(r=>{var o,s,a;if(!((o=n.children(r))===null||o===void 0)&&o.length){const u=n.node(r),d=n.node(u.borderTop),g=n.node(u.borderBottom),p=n.node(u.borderLeft[((s=u.borderLeft)===null||s===void 0?void 0:s.length)-1]),m=n.node(u.borderRight[((a=u.borderRight)===null||a===void 0?void 0:a.length)-1]);u.width=Math.abs((m==null?void 0:m.x)-(p==null?void 0:p.x))||10,u.height=Math.abs((g==null?void 0:g.y)-(d==null?void 0:d.y))||10,u.x=((p==null?void 0:p.x)||0)+u.width/2,u.y=((d==null?void 0:d.y)||0)+u.height/2}}),n.nodes().forEach(r=>{var o;((o=n.node(r))===null||o===void 0?void 0:o.dummy)==="border"&&n.removeNode(r)})},yb=n=>{n.edges().forEach(r=>{if(r.v===r.w){const o=n.node(r.v);o.selfEdges||(o.selfEdges=[]),o.selfEdges.push({e:r,label:n.edge(r)}),n.removeEdgeObj(r)}})},bb=n=>{const r=Js(n);r==null||r.forEach(o=>{let s=0;o==null||o.forEach((a,u)=>{var d;const g=n.node(a);g.order=u+s,(d=g.selfEdges)===null||d===void 0||d.forEach(p=>{Qo(n,"selfedge",{width:p.label.width,height:p.label.height,rank:g.rank,order:u+ ++s,e:p.e,label:p.label},"_se")}),delete g.selfEdges})})},xb=n=>{n.nodes().forEach(r=>{const o=n.node(r);if(o.dummy==="selfedge"){const s=n.node(o.e.v),a=s.x+s.width/2,u=s.y,d=o.x-a,g=s.height/2;n.setEdgeObj(o.e,o.label),n.removeNode(r),o.label.points=[{x:a+2*d/3,y:u-g},{x:a+5*d/6,y:u-g},{y:u,x:a+d},{x:a+5*d/6,y:u+g},{x:a+2*d/3,y:u+g}],o.label.x=o.x,o.label.y=o.y}})},ku=(n,r)=>{const o={};return r==null||r.forEach(s=>{n[s]!==void 0&&(o[s]=+n[s])}),o},Bu=(n={})=>{const r={};return Object.keys(n).forEach(o=>{r[o.toLowerCase()]=n[o]}),r};var wb=qf,Eb={layout:wb,util:{time:Eu,notime:vf}};class an extends tt{constructor(r){super(),this.rankdir="TB",this.nodesep=50,this.ranksep=50,this.controlPoints=!1,this.sortByCombo=!1,this.edgeLabelSpace=!0,this.radial=!1,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.layoutNode=o=>{const s=this,{nodes:a}=s,u=a.find(d=>d.id===o);return u?u.layout!==!1:!0},this.updateCfg(r)}getDefaultCfg(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}}execute(){var r,o,s,a;const u=this,{nodes:d,nodeSize:g,rankdir:p,combos:m,begin:b,radial:w,comboEdges:C=[],vedges:O=[]}=u;if(!d)return;const A=u.edges||[],M=new ii({multigraph:!0,compound:!0});u.nodeMap={};const P={};d.forEach(U=>{u.nodeMap[U.id]=U,U.comboId&&(P[U.comboId]=P[U.comboId]||[],P[U.comboId].push(U.id))});let I=[];const N={};!((r=u.nodeOrder)===null||r===void 0)&&r.length?(u.nodeOrder.forEach(U=>{N[U]=!0,I.push(u.nodeMap[U])}),d.forEach(U=>{N[U.id]||I.push(U)})):I=d;let R;g?Ft(g)?R=()=>g:R=()=>[g,g]:R=U=>U.size?Ft(U.size)?U.size:Mt(U.size)?[U.size.width||40,U.size.height||40]:[U.size,U.size]:[40,40];const z=Ve(u.ranksep,50,u.ranksepFunc),F=Ve(u.nodesep,50,u.nodesepFunc);let Z=F,ot=z;(p==="LR"||p==="RL")&&(Z=z,ot=F),M.setDefaultEdgeLabel(()=>({})),M.setGraph(u);const nt={};this.sortByCombo&&m&&m.forEach(U=>{if(nt[U.id]=U,U.collapsed){const ct=R(U),_t=ot(U),Tt=Z(U),te=ct[0]+2*Tt,$t=ct[1]+2*_t;M.setNode(U.id,{width:te,height:$t})}U.parentId&&(nt[U.parentId]||M.setNode(U.parentId,{}),M.setParent(U.id,U.parentId))}),I.filter(U=>U.layout!==!1).forEach(U=>{const ct=R(U),_t=ot(U),Tt=Z(U),te=ct[0]+2*Tt,$t=ct[1]+2*_t,Xt=U.layer;J(Xt)?M.setNode(U.id,{width:te,height:$t,layer:Xt}):M.setNode(U.id,{width:te,height:$t}),this.sortByCombo&&U.comboId&&(nt[U.comboId]||(nt[U.comboId]={id:U.comboId},M.setNode(U.comboId,{})),M.setParent(U.id,U.comboId))}),A.forEach(U=>{const ct=zt(U,"source"),_t=zt(U,"target");this.layoutNode(ct)&&this.layoutNode(_t)&&M.setEdge(ct,_t,{weight:U.weight||1})}),(o=C==null?void 0:C.concat(O||[]))===null||o===void 0||o.forEach(U=>{var ct,_t;const{source:Tt,target:te}=U,$t=!((ct=nt[Tt])===null||ct===void 0)&&ct.collapsed?[Tt]:P[Tt]||[Tt],Xt=!((_t=nt[te])===null||_t===void 0)&&_t.collapsed?[te]:P[te]||[te];$t.forEach(ne=>{Xt.forEach(Ce=>{M.setEdge(ne,Ce,{weight:U.weight||1})})})});let q;!((s=u.preset)===null||s===void 0)&&s.nodes&&(q=new ii({multigraph:!0,compound:!0}),u.preset.nodes.forEach(U=>{q==null||q.setNode(U.id,U)})),Eb.layout(M,{prevGraph:q,edgeLabelSpace:u.edgeLabelSpace,keepNodeOrder:!!u.nodeOrder,nodeOrder:u.nodeOrder});const et=[0,0];if(b){let U=1/0,ct=1/0;M.nodes().forEach(_t=>{const Tt=M.node(_t);U>Tt.x&&(U=Tt.x),ct>Tt.y&&(ct=Tt.y)}),M.edges().forEach(_t=>{var Tt;(Tt=M.edge(_t).points)===null||Tt===void 0||Tt.forEach($t=>{U>$t.x&&(U=$t.x),ct>$t.y&&(ct=$t.y)})}),et[0]=b[0]-U,et[1]=b[1]-ct}const st=p==="LR"||p==="RL";if(w){const{focusNode:U,ranksep:ct,getRadialPos:_t}=this,Tt=St(U)?U:U==null?void 0:U.id,te=Tt?(a=M.node(Tt))===null||a===void 0?void 0:a._rank:0,$t=[],Xt=st?"y":"x",ne=st?"height":"width";let Ce=1/0,Pe=-1/0;M.nodes().forEach(kt=>{const Qt=M.node(kt);if(!u.nodeMap[kt])return;const Xe=F(u.nodeMap[kt]);if(te===0)$t[Qt._rank]||($t[Qt._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),$t[Qt._rank].nodes.push(kt),$t[Qt._rank].totalWidth+=Xe*2+Qt[ne],$t[Qt._rank].maxSize<Math.max(Qt.width,Qt.height)&&($t[Qt._rank].maxSize=Math.max(Qt.width,Qt.height));else{const Se=Qt._rank-te;if(Se===0)$t[Se]||($t[Se]={nodes:[],totalWidth:0,maxSize:-1/0}),$t[Se].nodes.push(kt),$t[Se].totalWidth+=Xe*2+Qt[ne],$t[Se].maxSize<Math.max(Qt.width,Qt.height)&&($t[Se].maxSize=Math.max(Qt.width,Qt.height));else{const Ge=Math.abs(Se);$t[Ge]||($t[Ge]={left:[],right:[],totalWidth:0,maxSize:-1/0}),$t[Ge].totalWidth+=Xe*2+Qt[ne],$t[Ge].maxSize<Math.max(Qt.width,Qt.height)&&($t[Ge].maxSize=Math.max(Qt.width,Qt.height)),Se<0?$t[Ge].left.push(kt):$t[Ge].right.push(kt)}}const ae=Qt[Xt]-Qt[ne]/2-Xe,Ae=Qt[Xt]+Qt[ne]/2+Xe;ae<Ce&&(Ce=ae),Ae>Pe&&(Pe=Ae)});let Qe=ct||50;const We={},Dt=(Pe-Ce)/.9,re=[(Ce+Pe-Dt)*.5,(Ce+Pe+Dt)*.5],Me=(kt,Qt,Xe=-1/0,ae=[0,1])=>{let Ae=Xe;return kt.forEach(Se=>{const Ge=M.node(Se);We[Se]=Qt;const{x:tn,y:wn}=_t(Ge[Xt],re,Dt,Qt,ae);if(!u.nodeMap[Se])return;u.nodeMap[Se].x=tn+et[0],u.nodeMap[Se].y=wn+et[1],u.nodeMap[Se]._order=Ge._order;const qn=z(u.nodeMap[Se]);Ae<qn&&(Ae=qn)}),Ae};let ve=!0;const Oe=0;$t.forEach(kt=>{var Qt,Xe,ae,Ae,Se,Ge,tn;if(!(!((Qt=kt==null?void 0:kt.nodes)===null||Qt===void 0)&&Qt.length)&&!(!((Xe=kt==null?void 0:kt.left)===null||Xe===void 0)&&Xe.length)&&!(!((ae=kt==null?void 0:kt.right)===null||ae===void 0)&&ae.length))return;if(ve&&kt.nodes.length===1){const qn=kt.nodes[0];if(!u.nodeMap[qn])return;u.nodeMap[qn].x=et[0],u.nodeMap[qn].y=et[1],We[kt.nodes[0]]=0,Qe=z(u.nodeMap[qn]),ve=!1;return}Qe=Math.max(Qe,kt.totalWidth/(2*Math.PI));let wn=-1/0;if(te===0||!((Ae=kt.nodes)===null||Ae===void 0)&&Ae.length)wn=Me(kt.nodes,Qe,wn,[0,1]);else{const qn=((Se=kt.left)===null||Se===void 0?void 0:Se.length)/(((Ge=kt.left)===null||Ge===void 0?void 0:Ge.length)+((tn=kt.right)===null||tn===void 0?void 0:tn.length));wn=Me(kt.left,Qe,wn,[0,qn]),wn=Me(kt.right,Qe,wn,[qn+.05,1])}Qe+=wn,ve=!1,Oe-kt.maxSize}),M.edges().forEach(kt=>{var Qt,Xe,ae;const Ae=M.edge(kt),Se=A.findIndex(Ge=>{const tn=zt(Ge,"source"),wn=zt(Ge,"target");return tn===kt.v&&wn===kt.w});if(!(Se<=-1)&&u.edgeLabelSpace&&u.controlPoints&&A[Se].type!=="loop"){const Ge=Xt==="x"?"y":"x",tn=(Qt=Ae==null?void 0:Ae.points)===null||Qt===void 0?void 0:Qt.slice(1,Ae.points.length-1),wn=[],qn=(Xe=M.node(kt.v))===null||Xe===void 0?void 0:Xe[Ge],jo=qn-((ae=M.node(kt.w))===null||ae===void 0?void 0:ae[Ge]),$n=We[kt.v],Vo=$n-We[kt.w];tn==null||tn.forEach(Ci=>{const ks=(Ci[Ge]-qn)/jo*Vo+$n,ei=_t(Ci[Xt],re,Dt,ks);wn.push({x:ei.x+et[0],y:ei.y+et[1]})}),A[Se].controlPoints=wn}})}else{const U=new Set,_t=p==="BT"||p==="RL"?(Xt,ne)=>ne-Xt:(Xt,ne)=>Xt-ne;M.nodes().forEach(Xt=>{const ne=M.node(Xt);if(!ne)return;let Ce=this.nodeMap[Xt];Ce||(Ce=m==null?void 0:m.find(Pe=>Pe.id===Xt)),Ce&&(Ce.x=ne.x+et[0],Ce.y=ne.y+et[1],Ce._order=ne._order,U.add(st?Ce.x:Ce.y))});const Tt=Array.from(U).sort(_t),te=st?(Xt,ne)=>Xt.x!==ne.x:(Xt,ne)=>Xt.y!==ne.y,$t=st?(Xt,ne,Ce)=>{const Pe=Math.max(ne.y,Ce.y),Qe=Math.min(ne.y,Ce.y);return Xt.filter(We=>We.y<=Pe&&We.y>=Qe)}:(Xt,ne,Ce)=>{const Pe=Math.max(ne.x,Ce.x),Qe=Math.min(ne.x,Ce.x);return Xt.filter(We=>We.x<=Pe&&We.x>=Qe)};M.edges().forEach(Xt=>{var ne;const Ce=M.edge(Xt),Pe=A.findIndex(Qe=>{const We=zt(Qe,"source"),Dt=zt(Qe,"target");return We===Xt.v&&Dt===Xt.w});if(!(Pe<=-1)&&u.edgeLabelSpace&&u.controlPoints&&A[Pe].type!=="loop"){(ne=Ce==null?void 0:Ce.points)===null||ne===void 0||ne.forEach(Dt=>{Dt.x+=et[0],Dt.y+=et[1]});const Qe=u.nodeMap[Xt.v],We=u.nodeMap[Xt.w];A[Pe].controlPoints=_b(Ce==null?void 0:Ce.points,Qe,We,Tt,st,te,$t)}})}return u.onLayoutEnd&&u.onLayoutEnd(),{nodes:d,edges:A}}getRadialPos(r,o,s,a,u=[0,1]){let d=(r-o[0])/s;d=d*(u[1]-u[0])+u[0];const g=d*2*Math.PI;return{x:Math.cos(g)*a,y:Math.sin(g)*a}}getType(){return"dagre"}}const _b=(n,r,o,s,a,u,d)=>{let g=(n==null?void 0:n.slice(1,n.length-1))||[];if(r&&o){let{x:p,y:m}=r,{x:b,y:w}=o;if(a&&(p=r.y,m=r.x,b=o.y,w=o.x),w!==m&&p!==b){const C=s.indexOf(m),O=s[C+1];if(O){const P=g[0],I=a?{x:(m+O)/2,y:(P==null?void 0:P.y)||b}:{x:(P==null?void 0:P.x)||b,y:(m+O)/2};(!P||u(P,I))&&g.unshift(I)}const A=s.indexOf(w),M=Math.abs(A-C);if(M===1)g=d(g,r,o),g.length||g.push(a?{x:(m+w)/2,y:p}:{x:p,y:(m+w)/2});else if(M>1){const P=s[A-1];if(P){const I=g[g.length-1],N=a?{x:(w+P)/2,y:(I==null?void 0:I.y)||b}:{x:(I==null?void 0:I.x)||p,y:(w+P)/2};(!I||u(I,N))&&g.push(N)}}}}return g},Cc={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function Sc(n={},r=Cc){var o,s,a,u;const d=JSON.parse(JSON.stringify(r)),g=((o=n==null?void 0:n.graph)===null||o===void 0?void 0:o.meta)||{},p=((s=n==null?void 0:n.subScene)===null||s===void 0?void 0:s.meta)||{},m=((a=n==null?void 0:n.nodeSize)===null||a===void 0?void 0:a.meta)||{},b=((u=n==null?void 0:n.nodeSize)===null||u===void 0?void 0:u.node)||{},w=d.nodeSize.bridge;return{graph:{meta:Object.assign(d.graph.meta,g)},subScene:{meta:Object.assign(d.subScene.meta,p)},nodeSize:{meta:Object.assign(d.nodeSize.meta,m),node:Object.assign(d.nodeSize.node,b),bridge:w}}}function ns(n){return`\u25EC${n}\u25EC`}const fo=ns("ROOT"),ia=ns("BRIDGE_GRAPH");var or,Pi,oa,si;(function(n){n[n.META=0]="META",n[n.NODE=1]="NODE",n[n.BRIDGE=2]="BRIDGE"})(or||(or={})),function(n){n[n.INCLUDE=0]="INCLUDE",n[n.EXCLUDE=1]="EXCLUDE",n[n.UNSPECIFIED=2]="UNSPECIFIED"}(Pi||(Pi={})),function(n){n[n.META=0]="META",n[n.CORE=1]="CORE",n[n.BRIDGE=2]="BRIDGE"}(oa||(oa={})),function(n){n[n.META=0]="META",n[n.OP=1]="OP",n[n.SERIES=2]="SERIES"}(si||(si={}));var sa=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof k.g!="undefined"?k.g:typeof self!="undefined"?self:{};function zu(n,r){return n(r={exports:{}},r.exports),r.exports}var Oc=function(){this.__data__=[],this.size=0},rs=function(n,r){return n===r||n!=n&&r!=r},is=function(n,r){for(var o=n.length;o--;)if(rs(n[o][0],r))return o;return-1},Cb=Array.prototype.splice,aa=function(n){var r=this.__data__,o=is(r,n);return!(o<0)&&(o==r.length-1?r.pop():Cb.call(r,o,1),--this.size,!0)},Sb=function(n){var r=this.__data__,o=is(r,n);return o<0?void 0:r[o][1]},Ob=function(n){return is(this.__data__,n)>-1},Ab=function(n,r){var o=this.__data__,s=is(o,n);return s<0?(++this.size,o.push([n,r])):o[s][1]=r,this};function os(n){var r=-1,o=n==null?0:n.length;for(this.clear();++r<o;){var s=n[r];this.set(s[0],s[1])}}os.prototype.clear=Oc,os.prototype.delete=aa,os.prototype.get=Sb,os.prototype.has=Ob,os.prototype.set=Ab;var Ac=os,Qf=function(){this.__data__=new Ac,this.size=0},Tb=function(n){var r=this.__data__,o=r.delete(n);return this.size=r.size,o},Mb=function(n){return this.__data__.get(n)},Ib=function(n){return this.__data__.has(n)},tg=typeof sa=="object"&&sa&&sa.Object===Object&&sa,Pb=typeof self=="object"&&self&&self.Object===Object&&self,zr=tg||Pb||Function("return this")(),_r=zr.Symbol,go=Object.prototype,Nb=go.hasOwnProperty,Db=go.toString,ca=_r?_r.toStringTag:void 0,Rb=function(n){var r=Nb.call(n,ca),o=n[ca];try{n[ca]=void 0;var s=!0}catch(u){}var a=Db.call(n);return s&&(r?n[ca]=o:delete n[ca]),a},eg=Object.prototype.toString,Fu=function(n){return eg.call(n)},ng=_r?_r.toStringTag:void 0,gr=function(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":ng&&ng in Object(n)?Rb(n):Fu(n)},ar=function(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")},la,ua=function(n){if(!ar(n))return!1;var r=gr(n);return r=="[object Function]"||r=="[object GeneratorFunction]"||r=="[object AsyncFunction]"||r=="[object Proxy]"},Tc=zr["__core-js_shared__"],rg=(la=/[^.]+$/.exec(Tc&&Tc.keys&&Tc.keys.IE_PROTO||""))?"Symbol(src)_1."+la:"",An=function(n){return!!rg&&rg in n},Lb=Function.prototype.toString,po=function(n){if(n!=null){try{return Lb.call(n)}catch(r){}try{return n+""}catch(r){}}return""},kb=/^\[object .+?Constructor\]$/,Bb=Function.prototype,zb=Object.prototype,Mc=Bb.toString,Gu=zb.hasOwnProperty,Fb=RegExp("^"+Mc.call(Gu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gb=function(n){return!(!ar(n)||An(n))&&(ua(n)?Fb:kb).test(po(n))},jb=function(n,r){return n==null?void 0:n[r]},ai=function(n,r){var o=jb(n,r);return Gb(o)?o:void 0},ha=ai(zr,"Map"),da=ai(Object,"create"),Vb=function(){this.__data__=da?da(null):{},this.size=0},ig=function(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r},Ub=Object.prototype.hasOwnProperty,Hb=function(n){var r=this.__data__;if(da){var o=r[n];return o==="__lodash_hash_undefined__"?void 0:o}return Ub.call(r,n)?r[n]:void 0},$b=Object.prototype.hasOwnProperty,ju=function(n){var r=this.__data__;return da?r[n]!==void 0:$b.call(r,n)},Wb=function(n,r){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=da&&r===void 0?"__lodash_hash_undefined__":r,this};function ss(n){var r=-1,o=n==null?0:n.length;for(this.clear();++r<o;){var s=n[r];this.set(s[0],s[1])}}ss.prototype.clear=Vb,ss.prototype.delete=ig,ss.prototype.get=Hb,ss.prototype.has=ju,ss.prototype.set=Wb;var og=ss,Xb=function(){this.size=0,this.__data__={hash:new og,map:new(ha||Ac),string:new og}},Zb=function(n){var r=typeof n;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?n!=="__proto__":n===null},Ic=function(n,r){var o=n.__data__;return Zb(r)?o[typeof r=="string"?"string":"hash"]:o.map},Yb=function(n){var r=Ic(this,n).delete(n);return this.size-=r?1:0,r},Kb=function(n){return Ic(this,n).get(n)},Jb=function(n){return Ic(this,n).has(n)},qb=function(n,r){var o=Ic(this,n),s=o.size;return o.set(n,r),this.size+=o.size==s?0:1,this};function as(n){var r=-1,o=n==null?0:n.length;for(this.clear();++r<o;){var s=n[r];this.set(s[0],s[1])}}as.prototype.clear=Xb,as.prototype.delete=Yb,as.prototype.get=Kb,as.prototype.has=Jb,as.prototype.set=qb;var Pc=as,Qb=function(n,r){var o=this.__data__;if(o instanceof Ac){var s=o.__data__;if(!ha||s.length<199)return s.push([n,r]),this.size=++o.size,this;o=this.__data__=new Pc(s)}return o.set(n,r),this.size=o.size,this};function vo(n){var r=this.__data__=new Ac(n);this.size=r.size}vo.prototype.clear=Qf,vo.prototype.delete=Tb,vo.prototype.get=Mb,vo.prototype.has=Ib,vo.prototype.set=Qb;var Ni=vo,Vu=function(n,r){for(var o=-1,s=n==null?0:n.length;++o<s&&r(n[o],o,n)!==!1;);return n},Nc=function(){try{var n=ai(Object,"defineProperty");return n({},"",{}),n}catch(r){}}(),Dc=function(n,r,o){r=="__proto__"&&Nc?Nc(n,r,{configurable:!0,enumerable:!0,value:o,writable:!0}):n[r]=o},sg=Object.prototype.hasOwnProperty,Rc=function(n,r,o){var s=n[r];sg.call(n,r)&&rs(s,o)&&(o!==void 0||r in n)||Dc(n,r,o)},fa=function(n,r,o,s){var a=!o;o||(o={});for(var u=-1,d=r.length;++u<d;){var g=r[u],p=s?s(o[g],n[g],g,o,n):void 0;p===void 0&&(p=n[g]),a?Dc(o,g,p):Rc(o,g,p)}return o},tx=function(n,r){for(var o=-1,s=Array(n);++o<n;)s[o]=r(o);return s},Cr=function(n){return n!=null&&typeof n=="object"},ag=function(n){return Cr(n)&&gr(n)=="[object Arguments]"},cg=Object.prototype,lg=cg.hasOwnProperty,ex=cg.propertyIsEnumerable,Di=ag(function(){return arguments}())?ag:function(n){return Cr(n)&&lg.call(n,"callee")&&!ex.call(n,"callee")},En=Array.isArray,nx=function(){return!1},mo=zu(function(n,r){var o=r&&!r.nodeType&&r,s=o&&n&&!n.nodeType&&n,a=s&&s.exports===o?zr.Buffer:void 0,u=(a?a.isBuffer:void 0)||nx;n.exports=u}),rx=/^(?:0|[1-9]\d*)$/,Lc=function(n,r){var o=typeof n;return!!(r=r==null?9007199254740991:r)&&(o=="number"||o!="symbol"&&rx.test(n))&&n>-1&&n%1==0&&n<r},kc=function(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=9007199254740991},fn={};fn["[object Float32Array]"]=fn["[object Float64Array]"]=fn["[object Int8Array]"]=fn["[object Int16Array]"]=fn["[object Int32Array]"]=fn["[object Uint8Array]"]=fn["[object Uint8ClampedArray]"]=fn["[object Uint16Array]"]=fn["[object Uint32Array]"]=!0,fn["[object Arguments]"]=fn["[object Array]"]=fn["[object ArrayBuffer]"]=fn["[object Boolean]"]=fn["[object DataView]"]=fn["[object Date]"]=fn["[object Error]"]=fn["[object Function]"]=fn["[object Map]"]=fn["[object Number]"]=fn["[object Object]"]=fn["[object RegExp]"]=fn["[object Set]"]=fn["[object String]"]=fn["[object WeakMap]"]=!1;var ga=function(n){return Cr(n)&&kc(n.length)&&!!fn[gr(n)]},Bc=function(n){return function(r){return n(r)}},Ri=zu(function(n,r){var o=r&&!r.nodeType&&r,s=o&&n&&!n.nodeType&&n,a=s&&s.exports===o&&tg.process,u=function(){try{var d=s&&s.require&&s.require("util").types;return d||a&&a.binding&&a.binding("util")}catch(g){}}();n.exports=u}),ug=Ri&&Ri.isTypedArray,pa=ug?Bc(ug):ga,ix=Object.prototype.hasOwnProperty,hg=function(n,r){var o=En(n),s=!o&&Di(n),a=!o&&!s&&mo(n),u=!o&&!s&&!a&&pa(n),d=o||s||a||u,g=d?tx(n.length,String):[],p=g.length;for(var m in n)!r&&!ix.call(n,m)||d&&(m=="length"||a&&(m=="offset"||m=="parent")||u&&(m=="buffer"||m=="byteLength"||m=="byteOffset")||Lc(m,p))||g.push(m);return g},ox=Object.prototype,zc=function(n){var r=n&&n.constructor;return n===(typeof r=="function"&&r.prototype||ox)},Fc=function(n,r){return function(o){return n(r(o))}},sx=Fc(Object.keys,Object),Uu=Object.prototype.hasOwnProperty,Hu=function(n){if(!zc(n))return sx(n);var r=[];for(var o in Object(n))Uu.call(n,o)&&o!="constructor"&&r.push(o);return r},cr=function(n){return n!=null&&kc(n.length)&&!ua(n)},Li=function(n){return cr(n)?hg(n):Hu(n)},$u=function(n,r){return n&&fa(r,Li(r),n)},dg=function(n){var r=[];if(n!=null)for(var o in Object(n))r.push(o);return r},ax=Object.prototype.hasOwnProperty,fg=function(n){if(!ar(n))return dg(n);var r=zc(n),o=[];for(var s in n)(s!="constructor"||!r&&ax.call(n,s))&&o.push(s);return o},ki=function(n){return cr(n)?hg(n,!0):fg(n)},gg=function(n,r){return n&&fa(r,ki(r),n)},Wu=zu(function(n,r){var o=r&&!r.nodeType&&r,s=o&&n&&!n.nodeType&&n,a=s&&s.exports===o?zr.Buffer:void 0,u=a?a.allocUnsafe:void 0;n.exports=function(d,g){if(g)return d.slice();var p=d.length,m=u?u(p):new d.constructor(p);return d.copy(m),m}}),pg=function(n,r){var o=-1,s=n.length;for(r||(r=Array(s));++o<s;)r[o]=n[o];return r},vg=function(n,r){for(var o=-1,s=n==null?0:n.length,a=0,u=[];++o<s;){var d=n[o];r(d,o,n)&&(u[a++]=d)}return u},mg=function(){return[]},cx=Object.prototype.propertyIsEnumerable,yg=Object.getOwnPropertySymbols,ci=yg?function(n){return n==null?[]:(n=Object(n),vg(yg(n),function(r){return cx.call(n,r)}))}:mg,cs=function(n,r){return fa(n,ci(n),r)},Xu=function(n,r){for(var o=-1,s=r.length,a=n.length;++o<s;)n[a+o]=r[o];return n},va=Fc(Object.getPrototypeOf,Object),Zu=Object.getOwnPropertySymbols?function(n){for(var r=[];n;)Xu(r,ci(n)),n=va(n);return r}:mg,Gc=function(n,r){return fa(n,Zu(n),r)},bg=function(n,r,o){var s=r(n);return En(n)?s:Xu(s,o(n))},jc=function(n){return bg(n,Li,ci)},lx=function(n){return bg(n,ki,Zu)},Yu=ai(zr,"DataView"),Vc=ai(zr,"Promise"),Bi=ai(zr,"Set"),Ku=ai(zr,"WeakMap"),Xr=po(Yu),ux=po(ha),hx=po(Vc),dx=po(Bi),fx=po(Ku),yo=gr;(Yu&&yo(new Yu(new ArrayBuffer(1)))!="[object DataView]"||ha&&yo(new ha)!="[object Map]"||Vc&&yo(Vc.resolve())!="[object Promise]"||Bi&&yo(new Bi)!="[object Set]"||Ku&&yo(new Ku)!="[object WeakMap]")&&(yo=function(n){var r=gr(n),o=r=="[object Object]"?n.constructor:void 0,s=o?po(o):"";if(s)switch(s){case Xr:return"[object DataView]";case ux:return"[object Map]";case hx:return"[object Promise]";case dx:return"[object Set]";case fx:return"[object WeakMap]"}return r});var li=yo,gx=Object.prototype.hasOwnProperty,px=function(n){var r=n.length,o=new n.constructor(r);return r&&typeof n[0]=="string"&&gx.call(n,"index")&&(o.index=n.index,o.input=n.input),o},Uc=zr.Uint8Array,Ju=function(n){var r=new n.constructor(n.byteLength);return new Uc(r).set(new Uc(n)),r},vx=function(n,r){var o=r?Ju(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.byteLength)},mx=/\w*$/,yx=function(n){var r=new n.constructor(n.source,mx.exec(n));return r.lastIndex=n.lastIndex,r},xg=_r?_r.prototype:void 0,wg=xg?xg.valueOf:void 0,bx=function(n){return wg?Object(wg.call(n)):{}},qu=function(n,r){var o=r?Ju(n.buffer):n.buffer;return new n.constructor(o,n.byteOffset,n.length)},xx=function(n,r,o){var s=n.constructor;switch(r){case"[object ArrayBuffer]":return Ju(n);case"[object Boolean]":case"[object Date]":return new s(+n);case"[object DataView]":return vx(n,o);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return qu(n,o);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(n);case"[object RegExp]":return yx(n);case"[object Set]":return new s;case"[object Symbol]":return bx(n)}},Eg=Object.create,_g=function(){function n(){}return function(r){if(!ar(r))return{};if(Eg)return Eg(r);n.prototype=r;var o=new n;return n.prototype=void 0,o}}(),Cg=function(n){return typeof n.constructor!="function"||zc(n)?{}:_g(va(n))},wx=function(n){return Cr(n)&&li(n)=="[object Map]"},Sg=Ri&&Ri.isMap,Ex=Sg?Bc(Sg):wx,_x=function(n){return Cr(n)&&li(n)=="[object Set]"},Og=Ri&&Ri.isSet,Cx=Og?Bc(Og):_x,ln={};ln["[object Arguments]"]=ln["[object Array]"]=ln["[object ArrayBuffer]"]=ln["[object DataView]"]=ln["[object Boolean]"]=ln["[object Date]"]=ln["[object Float32Array]"]=ln["[object Float64Array]"]=ln["[object Int8Array]"]=ln["[object Int16Array]"]=ln["[object Int32Array]"]=ln["[object Map]"]=ln["[object Number]"]=ln["[object Object]"]=ln["[object RegExp]"]=ln["[object Set]"]=ln["[object String]"]=ln["[object Symbol]"]=ln["[object Uint8Array]"]=ln["[object Uint8ClampedArray]"]=ln["[object Uint16Array]"]=ln["[object Uint32Array]"]=!0,ln["[object Error]"]=ln["[object Function]"]=ln["[object WeakMap]"]=!1;var Ag=function n(r,o,s,a,u,d){var g,p=1&o,m=2&o,b=4&o;if(s&&(g=u?s(r,a,u,d):s(r)),g!==void 0)return g;if(!ar(r))return r;var w=En(r);if(w){if(g=px(r),!p)return pg(r,g)}else{var C=li(r),O=C=="[object Function]"||C=="[object GeneratorFunction]";if(mo(r))return Wu(r,p);if(C=="[object Object]"||C=="[object Arguments]"||O&&!u){if(g=m||O?{}:Cg(r),!p)return m?Gc(r,gg(g,r)):cs(r,$u(g,r))}else{if(!ln[C])return u?r:{};g=xx(r,C,p)}}d||(d=new Ni);var A=d.get(r);if(A)return A;d.set(r,g),Cx(r)?r.forEach(function(P){g.add(n(P,o,s,P,r,d))}):Ex(r)&&r.forEach(function(P,I){g.set(I,n(P,o,s,I,r,d))});var M=w?void 0:(b?m?lx:jc:m?ki:Li)(r);return Vu(M||r,function(P,I){M&&(P=r[I=P]),Rc(g,I,n(P,o,s,I,r,d))}),g},Sx=function(n){return Ag(n,4)},Hc=function(n){return function(){return n}},$c=function(n){return function(r,o,s){for(var a=-1,u=Object(r),d=s(r),g=d.length;g--;){var p=d[n?g:++a];if(o(u[p],p,u)===!1)break}return r}}(),Qu=function(n,r){return n&&$c(n,r,Li)},Wc=function(n,r){return function(o,s){if(o==null)return o;if(!cr(o))return n(o,s);for(var a=o.length,u=r?a:-1,d=Object(o);(r?u--:++u<a)&&s(d[u],u,d)!==!1;);return o}}(Qu),bo=function(n){return n},Tg=function(n){return typeof n=="function"?n:bo},Mg=function(n,r){return(En(n)?Vu:Wc)(n,Tg(r))},Ig=Mg,Ox=function(n,r){var o=[];return Wc(n,function(s,a,u){r(s,a,u)&&o.push(s)}),o},Ax=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Tx=function(n){return this.__data__.has(n)};function Xc(n){var r=-1,o=n==null?0:n.length;for(this.__data__=new Pc;++r<o;)this.add(n[r])}Xc.prototype.add=Xc.prototype.push=Ax,Xc.prototype.has=Tx;var Pg=Xc,Mx=function(n,r){for(var o=-1,s=n==null?0:n.length;++o<s;)if(r(n[o],o,n))return!0;return!1},Ng=function(n,r){return n.has(r)},Dg=function(n,r,o,s,a,u){var d=1&o,g=n.length,p=r.length;if(g!=p&&!(d&&p>g))return!1;var m=u.get(n),b=u.get(r);if(m&&b)return m==r&&b==n;var w=-1,C=!0,O=2&o?new Pg:void 0;for(u.set(n,r),u.set(r,n);++w<g;){var A=n[w],M=r[w];if(s)var P=d?s(M,A,w,r,n,u):s(A,M,w,n,r,u);if(P!==void 0){if(P)continue;C=!1;break}if(O){if(!Mx(r,function(I,N){if(!Ng(O,N)&&(A===I||a(A,I,o,s,u)))return O.push(N)})){C=!1;break}}else if(A!==M&&!a(A,M,o,s,u)){C=!1;break}}return u.delete(n),u.delete(r),C},Ix=function(n){var r=-1,o=Array(n.size);return n.forEach(function(s,a){o[++r]=[a,s]}),o},th=function(n){var r=-1,o=Array(n.size);return n.forEach(function(s){o[++r]=s}),o},Rg=_r?_r.prototype:void 0,eh=Rg?Rg.valueOf:void 0,Px=function(n,r,o,s,a,u,d){switch(o){case"[object DataView]":if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)return!1;n=n.buffer,r=r.buffer;case"[object ArrayBuffer]":return!(n.byteLength!=r.byteLength||!u(new Uc(n),new Uc(r)));case"[object Boolean]":case"[object Date]":case"[object Number]":return rs(+n,+r);case"[object Error]":return n.name==r.name&&n.message==r.message;case"[object RegExp]":case"[object String]":return n==r+"";case"[object Map]":var g=Ix;case"[object Set]":var p=1&s;if(g||(g=th),n.size!=r.size&&!p)return!1;var m=d.get(n);if(m)return m==r;s|=2,d.set(n,r);var b=Dg(g(n),g(r),s,a,u,d);return d.delete(n),b;case"[object Symbol]":if(eh)return eh.call(n)==eh.call(r)}return!1},Nx=Object.prototype.hasOwnProperty,Dx=function(n,r,o,s,a,u){var d=1&o,g=jc(n),p=g.length;if(p!=jc(r).length&&!d)return!1;for(var m=p;m--;){var b=g[m];if(!(d?b in r:Nx.call(r,b)))return!1}var w=u.get(n),C=u.get(r);if(w&&C)return w==r&&C==n;var O=!0;u.set(n,r),u.set(r,n);for(var A=d;++m<p;){var M=n[b=g[m]],P=r[b];if(s)var I=d?s(P,M,b,r,n,u):s(M,P,b,n,r,u);if(!(I===void 0?M===P||a(M,P,o,s,u):I)){O=!1;break}A||(A=b=="constructor")}if(O&&!A){var N=n.constructor,R=r.constructor;N==R||!("constructor"in n)||!("constructor"in r)||typeof N=="function"&&N instanceof N&&typeof R=="function"&&R instanceof R||(O=!1)}return u.delete(n),u.delete(r),O},Lg=Object.prototype.hasOwnProperty,Rx=function(n,r,o,s,a,u){var d=En(n),g=En(r),p=d?"[object Array]":li(n),m=g?"[object Array]":li(r),b=(p=p=="[object Arguments]"?"[object Object]":p)=="[object Object]",w=(m=m=="[object Arguments]"?"[object Object]":m)=="[object Object]",C=p==m;if(C&&mo(n)){if(!mo(r))return!1;d=!0,b=!1}if(C&&!b)return u||(u=new Ni),d||pa(n)?Dg(n,r,o,s,a,u):Px(n,r,p,o,s,a,u);if(!(1&o)){var O=b&&Lg.call(n,"__wrapped__"),A=w&&Lg.call(r,"__wrapped__");if(O||A){var M=O?n.value():n,P=A?r.value():r;return u||(u=new Ni),a(M,P,o,s,u)}}return!!C&&(u||(u=new Ni),Dx(n,r,o,s,a,u))},kg=function n(r,o,s,a,u){return r===o||(r==null||o==null||!Cr(r)&&!Cr(o)?r!=r&&o!=o:Rx(r,o,s,a,n,u))},Lx=function(n,r,o,s){var a=o.length,u=a,d=!s;if(n==null)return!u;for(n=Object(n);a--;){var g=o[a];if(d&&g[2]?g[1]!==n[g[0]]:!(g[0]in n))return!1}for(;++a<u;){var p=(g=o[a])[0],m=n[p],b=g[1];if(d&&g[2]){if(m===void 0&&!(p in n))return!1}else{var w=new Ni;if(s)var C=s(m,b,p,n,r,w);if(!(C===void 0?kg(b,m,3,s,w):C))return!1}}return!0},Bg=function(n){return n==n&&!ar(n)},zg=function(n){for(var r=Li(n),o=r.length;o--;){var s=r[o],a=n[s];r[o]=[s,a,Bg(a)]}return r},Fg=function(n,r){return function(o){return o!=null&&o[n]===r&&(r!==void 0||n in Object(o))}},kx=function(n){var r=zg(n);return r.length==1&&r[0][2]?Fg(r[0][0],r[0][1]):function(o){return o===n||Lx(o,n,r)}},xo=function(n){return typeof n=="symbol"||Cr(n)&&gr(n)=="[object Symbol]"},Bx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,zx=/^\w*$/,Zc=function(n,r){if(En(n))return!1;var o=typeof n;return!(o!="number"&&o!="symbol"&&o!="boolean"&&n!=null&&!xo(n))||zx.test(n)||!Bx.test(n)||r!=null&&n in Object(r)};function nh(n,r){if(typeof n!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");var o=function(){var s=arguments,a=r?r.apply(this,s):s[0],u=o.cache;if(u.has(a))return u.get(a);var d=n.apply(this,s);return o.cache=u.set(a,d)||u,d};return o.cache=new(nh.Cache||Pc),o}nh.Cache=Pc;var Fx=nh,Gx=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,jx=/\\(\\)?/g,Vx=function(n){var r=Fx(n,function(s){return o.size===500&&o.clear(),s}),o=r.cache;return r}(function(n){var r=[];return n.charCodeAt(0)===46&&r.push(""),n.replace(Gx,function(o,s,a,u){r.push(a?u.replace(jx,"$1"):s||o)}),r}),wo=function(n,r){for(var o=-1,s=n==null?0:n.length,a=Array(s);++o<s;)a[o]=r(n[o],o,n);return a},Gg=_r?_r.prototype:void 0,jg=Gg?Gg.toString:void 0,Ux=function n(r){if(typeof r=="string")return r;if(En(r))return wo(r,n)+"";if(xo(r))return jg?jg.call(r):"";var o=r+"";return o=="0"&&1/r==-1/0?"-0":o},Vg=function(n){return n==null?"":Ux(n)},ma=function(n,r){return En(n)?n:Zc(n,r)?[n]:Vx(Vg(n))},ya=function(n){if(typeof n=="string"||xo(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r},Yc=function(n,r){for(var o=0,s=(r=ma(r,n)).length;n!=null&&o<s;)n=n[ya(r[o++])];return o&&o==s?n:void 0},Hx=function(n,r,o){var s=n==null?void 0:Yc(n,r);return s===void 0?o:s},Ug=function(n,r){return n!=null&&r in Object(n)},Hg=function(n,r,o){for(var s=-1,a=(r=ma(r,n)).length,u=!1;++s<a;){var d=ya(r[s]);if(!(u=n!=null&&o(n,d)))break;n=n[d]}return u||++s!=a?u:!!(a=n==null?0:n.length)&&kc(a)&&Lc(d,a)&&(En(n)||Di(n))},$g=function(n,r){return n!=null&&Hg(n,r,Ug)},$x=function(n,r){return Zc(n)&&Bg(r)?Fg(ya(n),r):function(o){var s=Hx(o,n);return s===void 0&&s===r?$g(o,n):kg(r,s,3)}},Wg=function(n){return function(r){return r==null?void 0:r[n]}},Wx=function(n){return function(r){return Yc(r,n)}},Xx=function(n){return Zc(n)?Wg(ya(n)):Wx(n)},ui=function(n){return typeof n=="function"?n:n==null?bo:typeof n=="object"?En(n)?$x(n[0],n[1]):kx(n):Xx(n)},Xg=function(n,r){return(En(n)?vg:Ox)(n,ui(r))},Zx=Object.prototype.hasOwnProperty,Yx=function(n,r){return n!=null&&Zx.call(n,r)},Zg=function(n,r){return n!=null&&Hg(n,r,Yx)},Kx=Object.prototype.hasOwnProperty,Jx=function(n){if(n==null)return!0;if(cr(n)&&(En(n)||typeof n=="string"||typeof n.splice=="function"||mo(n)||pa(n)||Di(n)))return!n.length;var r=li(n);if(r=="[object Map]"||r=="[object Set]")return!n.size;if(zc(n))return!Hu(n).length;for(var o in n)if(Kx.call(n,o))return!1;return!0},Yg=function(n){return n===void 0},Kg=function(n,r){var o=-1,s=cr(n)?Array(n.length):[];return Wc(n,function(a,u,d){s[++o]=r(a,u,d)}),s},Jg=function(n,r){return(En(n)?wo:Kg)(n,ui(r))},un=function(n,r,o,s){var a=-1,u=n==null?0:n.length;for(s&&u&&(o=n[++a]);++a<u;)o=r(o,n[a],a,n);return o},Kc=function(n,r,o,s,a){return a(n,function(u,d,g){o=s?(s=!1,u):r(o,u,d,g)}),o},rh=function(n,r,o){var s=En(n)?un:Kc,a=arguments.length<3;return s(n,ui(r),o,a,Wc)},qx=function(n){return typeof n=="string"||!En(n)&&Cr(n)&&gr(n)=="[object String]"},Qx=Wg("length"),Jc=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),tw=function(n){return Jc.test(n)},ew="[\\ud800-\\udfff]",ih="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",gn="\\ud83c[\\udffb-\\udfff]",oh="[^\\ud800-\\udfff]",qg="(?:\\ud83c[\\udde6-\\uddff]){2}",Qg="[\\ud800-\\udbff][\\udc00-\\udfff]",sh="(?:"+ih+"|"+gn+")?",tp="[\\ufe0e\\ufe0f]?"+sh+("(?:\\u200d(?:"+[oh,qg,Qg].join("|")+")[\\ufe0e\\ufe0f]?"+sh+")*"),nw="(?:"+[oh+ih+"?",ih,qg,Qg,ew].join("|")+")",ep=RegExp(gn+"(?="+gn+")|"+nw+tp,"g"),rw=function(n){for(var r=ep.lastIndex=0;ep.test(n);)++r;return r},iw=function(n){return tw(n)?rw(n):Qx(n)},ah=function(n){if(n==null)return 0;if(cr(n))return qx(n)?iw(n):n.length;var r=li(n);return r=="[object Map]"||r=="[object Set]"?n.size:Hu(n).length},np=function(n,r,o){var s=En(n),a=s||mo(n)||pa(n);if(r=ui(r),o==null){var u=n&&n.constructor;o=a?s?new u:[]:ar(n)&&ua(u)?_g(va(n)):{}}return(a?Vu:Qu)(n,function(d,g,p){return r(o,d,g,p)}),o},rp=_r?_r.isConcatSpreadable:void 0,ip=function(n){return En(n)||Di(n)||!!(rp&&n&&n[rp])},ch=function n(r,o,s,a,u){var d=-1,g=r.length;for(s||(s=ip),u||(u=[]);++d<g;){var p=r[d];o>0&&s(p)?o>1?n(p,o-1,s,a,u):Xu(u,p):a||(u[u.length]=p)}return u},ow=function(n,r,o){switch(o.length){case 0:return n.call(r);case 1:return n.call(r,o[0]);case 2:return n.call(r,o[0],o[1]);case 3:return n.call(r,o[0],o[1],o[2])}return n.apply(r,o)},ba=Math.max,lh=function(n,r,o){return r=ba(r===void 0?n.length-1:r,0),function(){for(var s=arguments,a=-1,u=ba(s.length-r,0),d=Array(u);++a<u;)d[a]=s[r+a];a=-1;for(var g=Array(r+1);++a<r;)g[a]=s[a];return g[r]=o(d),ow(n,this,g)}},sw=Nc?function(n,r){return Nc(n,"toString",{configurable:!0,enumerable:!1,value:Hc(r),writable:!0})}:bo,aw=Date.now,op=function(n){var r=0,o=0;return function(){var s=aw(),a=16-(s-o);if(o=s,a>0){if(++r>=800)return arguments[0]}else r=0;return n.apply(void 0,arguments)}}(sw),ls=function(n,r){return op(lh(n,r,bo),n+"")},xa=function(n,r,o,s){for(var a=n.length,u=o+(s?1:-1);s?u--:++u<a;)if(r(n[u],u,n))return u;return-1},Eo=function(n){return n!=n},uh=function(n,r,o){for(var s=o-1,a=n.length;++s<a;)if(n[s]===r)return s;return-1},sp=function(n,r,o){return r==r?uh(n,r,o):xa(n,Eo,o)},cw=function(n,r){return!!(n!=null&&n.length)&&sp(n,r,0)>-1},lr=function(n,r,o){for(var s=-1,a=n==null?0:n.length;++s<a;)if(o(r,n[s]))return!0;return!1},FC=function(){},lw=Bi&&1/th(new Bi([,-0]))[1]==1/0?function(n){return new Bi(n)}:FC,uw=function(n,r,o){var s=-1,a=cw,u=n.length,d=!0,g=[],p=g;if(o)d=!1,a=lr;else if(u>=200){var m=r?null:lw(n);if(m)return th(m);d=!1,a=Ng,p=new Pg}else p=r?[]:g;t:for(;++s<u;){var b=n[s],w=r?r(b):b;if(b=o||b!==0?b:0,d&&w==w){for(var C=p.length;C--;)if(p[C]===w)continue t;r&&p.push(w),g.push(b)}else a(p,w,o)||(p!==g&&p.push(w),g.push(b))}return g},ap=function(n){return Cr(n)&&cr(n)},hw=ls(function(n){return uw(ch(n,1,ap,!0))}),dw=function(n,r){return wo(r,function(o){return n[o]})},qc,cp=function(n){return n==null?[]:dw(n,Li(n))};try{qc={clone:Sx,constant:Hc,each:Ig,filter:Xg,has:Zg,isArray:En,isEmpty:Jx,isFunction:ua,isUndefined:Yg,keys:Li,map:Jg,reduce:rh,size:ah,transform:np,union:hw,values:cp}}catch(n){}qc||(qc=window._);var Yt=qc,hh=Le;function Le(n){this._isDirected=!Yt.has(n,"directed")||n.directed,this._isMultigraph=!!Yt.has(n,"multigraph")&&n.multigraph,this._isCompound=!!Yt.has(n,"compound")&&n.compound,this._label=void 0,this._defaultNodeLabelFn=Yt.constant(void 0),this._defaultEdgeLabelFn=Yt.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function lp(n,r){n[r]?n[r]++:n[r]=1}function dh(n,r){--n[r]||delete n[r]}function wa(n,r,o,s){var a=""+r,u=""+o;if(!n&&a>u){var d=a;a=u,u=d}return a+""+u+""+(Yt.isUndefined(s)?"\0":s)}function fw(n,r,o,s){var a=""+r,u=""+o;if(!n&&a>u){var d=a;a=u,u=d}var g={v:a,w:u};return s&&(g.name=s),g}function fh(n,r){return wa(n,r.v,r.w,r.name)}Le.prototype._nodeCount=0,Le.prototype._edgeCount=0,Le.prototype.isDirected=function(){return this._isDirected},Le.prototype.isMultigraph=function(){return this._isMultigraph},Le.prototype.isCompound=function(){return this._isCompound},Le.prototype.setGraph=function(n){return this._label=n,this},Le.prototype.graph=function(){return this._label},Le.prototype.setDefaultNodeLabel=function(n){return Yt.isFunction(n)||(n=Yt.constant(n)),this._defaultNodeLabelFn=n,this},Le.prototype.nodeCount=function(){return this._nodeCount},Le.prototype.nodes=function(){return Yt.keys(this._nodes)},Le.prototype.sources=function(){var n=this;return Yt.filter(this.nodes(),function(r){return Yt.isEmpty(n._in[r])})},Le.prototype.sinks=function(){var n=this;return Yt.filter(this.nodes(),function(r){return Yt.isEmpty(n._out[r])})},Le.prototype.setNodes=function(n,r){var o=arguments,s=this;return Yt.each(n,function(a){o.length>1?s.setNode(a,r):s.setNode(a)}),this},Le.prototype.setNode=function(n,r){return Yt.has(this._nodes,n)?(arguments.length>1&&(this._nodes[n]=r),this):(this._nodes[n]=arguments.length>1?r:this._defaultNodeLabelFn(n),this._isCompound&&(this._parent[n]="\0",this._children[n]={},this._children["\0"][n]=!0),this._in[n]={},this._preds[n]={},this._out[n]={},this._sucs[n]={},++this._nodeCount,this)},Le.prototype.node=function(n){return this._nodes[n]},Le.prototype.hasNode=function(n){return Yt.has(this._nodes,n)},Le.prototype.removeNode=function(n){var r=this;if(Yt.has(this._nodes,n)){var o=function(s){r.removeEdge(r._edgeObjs[s])};delete this._nodes[n],this._isCompound&&(this._removeFromParentsChildList(n),delete this._parent[n],Yt.each(this.children(n),function(s){r.setParent(s)}),delete this._children[n]),Yt.each(Yt.keys(this._in[n]),o),delete this._in[n],delete this._preds[n],Yt.each(Yt.keys(this._out[n]),o),delete this._out[n],delete this._sucs[n],--this._nodeCount}return this},Le.prototype.setParent=function(n,r){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(Yt.isUndefined(r))r="\0";else{for(var o=r+="";!Yt.isUndefined(o);o=this.parent(o))if(o===n)throw new Error("Setting "+r+" as parent of "+n+" would create a cycle");this.setNode(r)}return this.setNode(n),this._removeFromParentsChildList(n),this._parent[n]=r,this._children[r][n]=!0,this},Le.prototype._removeFromParentsChildList=function(n){delete this._children[this._parent[n]][n]},Le.prototype.parent=function(n){if(this._isCompound){var r=this._parent[n];if(r!=="\0")return r}},Le.prototype.children=function(n){if(Yt.isUndefined(n)&&(n="\0"),this._isCompound){var r=this._children[n];if(r)return Yt.keys(r)}else{if(n==="\0")return this.nodes();if(this.hasNode(n))return[]}},Le.prototype.predecessors=function(n){var r=this._preds[n];if(r)return Yt.keys(r)},Le.prototype.successors=function(n){var r=this._sucs[n];if(r)return Yt.keys(r)},Le.prototype.neighbors=function(n){var r=this.predecessors(n);if(r)return Yt.union(r,this.successors(n))},Le.prototype.isLeaf=function(n){return(this.isDirected()?this.successors(n):this.neighbors(n)).length===0},Le.prototype.filterNodes=function(n){var r=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});r.setGraph(this.graph());var o=this;Yt.each(this._nodes,function(u,d){n(d)&&r.setNode(d,u)}),Yt.each(this._edgeObjs,function(u){r.hasNode(u.v)&&r.hasNode(u.w)&&r.setEdge(u,o.edge(u))});var s={};function a(u){var d=o.parent(u);return d===void 0||r.hasNode(d)?(s[u]=d,d):d in s?s[d]:a(d)}return this._isCompound&&Yt.each(r.nodes(),function(u){r.setParent(u,a(u))}),r},Le.prototype.setDefaultEdgeLabel=function(n){return Yt.isFunction(n)||(n=Yt.constant(n)),this._defaultEdgeLabelFn=n,this},Le.prototype.edgeCount=function(){return this._edgeCount},Le.prototype.edges=function(){return Yt.values(this._edgeObjs)},Le.prototype.setPath=function(n,r){var o=this,s=arguments;return Yt.reduce(n,function(a,u){return s.length>1?o.setEdge(a,u,r):o.setEdge(a,u),u}),this},Le.prototype.setEdge=function(){var n,r,o,s,a=!1,u=arguments[0];typeof u=="object"&&u!==null&&"v"in u?(n=u.v,r=u.w,o=u.name,arguments.length===2&&(s=arguments[1],a=!0)):(n=u,r=arguments[1],o=arguments[3],arguments.length>2&&(s=arguments[2],a=!0)),n=""+n,r=""+r,Yt.isUndefined(o)||(o=""+o);var d=wa(this._isDirected,n,r,o);if(Yt.has(this._edgeLabels,d))return a&&(this._edgeLabels[d]=s),this;if(!Yt.isUndefined(o)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(n),this.setNode(r),this._edgeLabels[d]=a?s:this._defaultEdgeLabelFn(n,r,o);var g=fw(this._isDirected,n,r,o);return n=g.v,r=g.w,Object.freeze(g),this._edgeObjs[d]=g,lp(this._preds[r],n),lp(this._sucs[n],r),this._in[r][d]=g,this._out[n][d]=g,this._edgeCount++,this},Le.prototype.edge=function(n,r,o){var s=arguments.length===1?fh(this._isDirected,arguments[0]):wa(this._isDirected,n,r,o);return this._edgeLabels[s]},Le.prototype.hasEdge=function(n,r,o){var s=arguments.length===1?fh(this._isDirected,arguments[0]):wa(this._isDirected,n,r,o);return Yt.has(this._edgeLabels,s)},Le.prototype.removeEdge=function(n,r,o){var s=arguments.length===1?fh(this._isDirected,arguments[0]):wa(this._isDirected,n,r,o),a=this._edgeObjs[s];return a&&(n=a.v,r=a.w,delete this._edgeLabels[s],delete this._edgeObjs[s],dh(this._preds[r],n),dh(this._sucs[n],r),delete this._in[r][s],delete this._out[n][s],this._edgeCount--),this},Le.prototype.inEdges=function(n,r){var o=this._in[n];if(o){var s=Yt.values(o);return r?Yt.filter(s,function(a){return a.v===r}):s}},Le.prototype.outEdges=function(n,r){var o=this._out[n];if(o){var s=Yt.values(o);return r?Yt.filter(s,function(a){return a.w===r}):s}},Le.prototype.nodeEdges=function(n,r){var o=this.inEdges(n,r);if(o)return o.concat(this.outEdges(n,r))};var up={Graph:hh,version:"2.1.8"},gw={write:function(n){var r={options:{directed:n.isDirected(),multigraph:n.isMultigraph(),compound:n.isCompound()},nodes:pw(n),edges:vw(n)};return Yt.isUndefined(n.graph())||(r.value=Yt.clone(n.graph())),r},read:function(n){var r=new hh(n.options).setGraph(n.value);return Yt.each(n.nodes,function(o){r.setNode(o.v,o.value),o.parent&&r.setParent(o.v,o.parent)}),Yt.each(n.edges,function(o){r.setEdge({v:o.v,w:o.w,name:o.name},o.value)}),r}};function pw(n){return Yt.map(n.nodes(),function(r){var o=n.node(r),s=n.parent(r),a={v:r};return Yt.isUndefined(o)||(a.value=o),Yt.isUndefined(s)||(a.parent=s),a})}function vw(n){return Yt.map(n.edges(),function(r){var o=n.edge(r),s={v:r.v,w:r.w};return Yt.isUndefined(r.name)||(s.name=r.name),Yt.isUndefined(o)||(s.value=o),s})}var hp=function(n){var r,o={},s=[];function a(u){Yt.has(o,u)||(o[u]=!0,r.push(u),Yt.each(n.successors(u),a),Yt.each(n.predecessors(u),a))}return Yt.each(n.nodes(),function(u){r=[],a(u),r.length&&s.push(r)}),s},dp=pr;function pr(){this._arr=[],this._keyIndices={}}pr.prototype.size=function(){return this._arr.length},pr.prototype.keys=function(){return this._arr.map(function(n){return n.key})},pr.prototype.has=function(n){return Yt.has(this._keyIndices,n)},pr.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},pr.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},pr.prototype.add=function(n,r){var o=this._keyIndices;if(n=String(n),!Yt.has(o,n)){var s=this._arr,a=s.length;return o[n]=a,s.push({key:n,priority:r}),this._decrease(a),!0}return!1},pr.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},pr.prototype.decrease=function(n,r){var o=this._keyIndices[n];if(r>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[o].priority+" New: "+r);this._arr[o].priority=r,this._decrease(o)},pr.prototype._heapify=function(n){var r=this._arr,o=2*n,s=o+1,a=n;o<r.length&&(a=r[o].priority<r[a].priority?o:a,s<r.length&&(a=r[s].priority<r[a].priority?s:a),a!==n&&(this._swap(n,a),this._heapify(a)))},pr.prototype._decrease=function(n){for(var r,o=this._arr,s=o[n].priority;n!==0&&!(o[r=n>>1].priority<s);)this._swap(n,r),n=r},pr.prototype._swap=function(n,r){var o=this._arr,s=this._keyIndices,a=o[n],u=o[r];o[n]=u,o[r]=a,s[u.key]=n,s[a.key]=r};var fp=function(n,r,o,s){return function(a,u,d,g){var p,m,b={},w=new dp,C=function(O){var A=O.v!==p?O.v:O.w,M=b[A],P=d(O),I=m.distance+P;if(P<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+O+" Weight: "+P);I<M.distance&&(M.distance=I,M.predecessor=p,w.decrease(A,I))};for(a.nodes().forEach(function(O){var A=O===u?0:Number.POSITIVE_INFINITY;b[O]={distance:A},w.add(O,A)});w.size()>0&&(p=w.removeMin(),(m=b[p]).distance!==Number.POSITIVE_INFINITY);)g(p).forEach(C);return b}(n,String(r),o||gp,s||function(a){return n.outEdges(a)})},gp=Yt.constant(1),mw=function(n,r,o){return Yt.transform(n.nodes(),function(s,a){s[a]=fp(n,a,r,o)},{})},pp=function(n){var r=0,o=[],s={},a=[];function u(d){var g=s[d]={onStack:!0,lowlink:r,index:r++};if(o.push(d),n.successors(d).forEach(function(b){Yt.has(s,b)?s[b].onStack&&(g.lowlink=Math.min(g.lowlink,s[b].index)):(u(b),g.lowlink=Math.min(g.lowlink,s[b].lowlink))}),g.lowlink===g.index){var p,m=[];do p=o.pop(),s[p].onStack=!1,m.push(p);while(d!==p);a.push(m)}}return n.nodes().forEach(function(d){Yt.has(s,d)||u(d)}),a},yw=function(n){return Yt.filter(pp(n),function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})},bw=function(n,r,o){return function(s,a,u){var d={},g=s.nodes();return g.forEach(function(p){d[p]={},d[p][p]={distance:0},g.forEach(function(m){p!==m&&(d[p][m]={distance:Number.POSITIVE_INFINITY})}),u(p).forEach(function(m){var b=m.v===p?m.w:m.v,w=a(m);d[p][b]={distance:w,predecessor:p}})}),g.forEach(function(p){var m=d[p];g.forEach(function(b){var w=d[b];g.forEach(function(C){var O=w[p],A=m[C],M=w[C],P=O.distance+A.distance;P<M.distance&&(M.distance=P,M.predecessor=A.predecessor)})})}),d}(n,r||xw,o||function(s){return n.outEdges(s)})},xw=Yt.constant(1),Qc=vp;function vp(n){var r={},o={},s=[];if(Yt.each(n.sinks(),function a(u){if(Yt.has(o,u))throw new tl;Yt.has(r,u)||(o[u]=!0,r[u]=!0,Yt.each(n.predecessors(u),a),delete o[u],s.push(u))}),Yt.size(r)!==n.nodeCount())throw new tl;return s}function tl(){}vp.CycleException=tl,tl.prototype=new Error;var mp=function(n,r,o){Yt.isArray(r)||(r=[r]);var s=(n.isDirected()?n.successors:n.neighbors).bind(n),a=[],u={};return Yt.each(r,function(d){if(!n.hasNode(d))throw new Error("Graph does not have node: "+d);yp(n,d,o==="post",u,s,a)}),a};function yp(n,r,o,s,a,u){Yt.has(s,r)||(s[r]=!0,o||u.push(r),Yt.each(a(r),function(d){yp(n,d,o,s,a,u)}),o&&u.push(r))}var el,ww={Graph:up.Graph,json:gw,alg:{components:hp,dijkstra:fp,dijkstraAll:mw,findCycles:yw,floydWarshall:bw,isAcyclic:function(n){try{Qc(n)}catch(r){if(r instanceof Qc.CycleException)return!1;throw r}return!0},postorder:function(n,r){return mp(n,r,"post")},preorder:function(n,r){return mp(n,r,"pre")},prim:function(n,r){var o,s=new hh,a={},u=new dp;function d(p){var m=p.v===o?p.w:p.v,b=u.priority(m);if(b!==void 0){var w=r(p);w<b&&(a[m]=o,u.decrease(m,w))}}if(n.nodeCount()===0)return s;Yt.each(n.nodes(),function(p){u.add(p,Number.POSITIVE_INFINITY),s.setNode(p)}),u.decrease(n.nodes()[0],0);for(var g=!1;u.size()>0;){if(o=u.removeMin(),Yt.has(a,o))s.setEdge(o,a[o]);else{if(g)throw new Error("Input graph is not connected: "+n);g=!0}n.nodeEdges(o).forEach(d)}return s},tarjan:pp,topsort:Qc},version:up.version};try{el=ww}catch(n){}el||(el=window.graphlib);var Fr=el,Ew=function(n){return Ag(n,5)},Ea=function(n,r,o){if(!ar(o))return!1;var s=typeof r;return!!(s=="number"?cr(o)&&Lc(r,o.length):s=="string"&&r in o)&&rs(o[r],n)},bp=Object.prototype,_w=bp.hasOwnProperty,xp=ls(function(n,r){n=Object(n);var o=-1,s=r.length,a=s>2?r[2]:void 0;for(a&&Ea(r[0],r[1],a)&&(s=1);++o<s;)for(var u=r[o],d=ki(u),g=-1,p=d.length;++g<p;){var m=d[g],b=n[m];(b===void 0||rs(b,bp[m])&&!_w.call(n,m))&&(n[m]=u[m])}return n}),Cw=function(n){return function(r,o,s){var a=Object(r);if(!cr(r)){var u=ui(o);r=Li(r),o=function(g){return u(a[g],g,a)}}var d=n(r,o,s);return d>-1?a[u?r[d]:d]:void 0}},Sw=/^\s+|\s+$/g,Ow=/^[-+]0x[0-9a-f]+$/i,wp=/^0b[01]+$/i,Aw=/^0o[0-7]+$/i,Tw=parseInt,Mw=function(n){if(typeof n=="number")return n;if(xo(n))return NaN;if(ar(n)){var r=typeof n.valueOf=="function"?n.valueOf():n;n=ar(r)?r+"":r}if(typeof n!="string")return n===0?n:+n;n=n.replace(Sw,"");var o=wp.test(n);return o||Aw.test(n)?Tw(n.slice(2),o?2:8):Ow.test(n)?NaN:+n},nl=function(n){return n?(n=Mw(n))===1/0||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:n===0?n:0},Iw=function(n){var r=nl(n),o=r%1;return r==r?o?r-o:r:0},Pw=Math.max,Nw=Cw(function(n,r,o){var s=n==null?0:n.length;if(!s)return-1;var a=o==null?0:Iw(o);return a<0&&(a=Pw(s+a,0)),xa(n,ui(r),a)}),Ep=function(n){return n!=null&&n.length?ch(n,1):[]},Dw=function(n,r){return n==null?n:$c(n,Tg(r),ki)},Rw=function(n){var r=n==null?0:n.length;return r?n[r-1]:void 0},Lw=function(n,r){var o={};return r=ui(r),Qu(n,function(s,a,u){Dc(o,a,r(s,a,u))}),o},gh=function(n,r,o){for(var s=-1,a=n.length;++s<a;){var u=n[s],d=r(u);if(d!=null&&(g===void 0?d==d&&!xo(d):o(d,g)))var g=d,p=u}return p},kw=function(n,r){return n>r},Bw=function(n){return n&&n.length?gh(n,bo,kw):void 0},ph=function(n,r,o){(o!==void 0&&!rs(n[r],o)||o===void 0&&!(r in n))&&Dc(n,r,o)},vh=Function.prototype,zw=Object.prototype,_p=vh.toString,Fw=zw.hasOwnProperty,Gw=_p.call(Object),jw=function(n){if(!Cr(n)||gr(n)!="[object Object]")return!1;var r=va(n);if(r===null)return!0;var o=Fw.call(r,"constructor")&&r.constructor;return typeof o=="function"&&o instanceof o&&_p.call(o)==Gw},mh=function(n,r){if((r!=="constructor"||typeof n[r]!="function")&&r!="__proto__")return n[r]},Vw=function(n){return fa(n,ki(n))},Cp=function(n,r,o,s,a,u,d){var g=mh(n,o),p=mh(r,o),m=d.get(p);if(m)ph(n,o,m);else{var b=u?u(g,p,o+"",n,r,d):void 0,w=b===void 0;if(w){var C=En(p),O=!C&&mo(p),A=!C&&!O&&pa(p);b=p,C||O||A?En(g)?b=g:ap(g)?b=pg(g):O?(w=!1,b=Wu(p,!0)):A?(w=!1,b=qu(p,!0)):b=[]:jw(p)||Di(p)?(b=g,Di(g)?b=Vw(g):ar(g)&&!ua(g)||(b=Cg(p))):w=!1}w&&(d.set(p,b),a(b,p,s,u,d),d.delete(p)),ph(n,o,b)}},Uw=function n(r,o,s,a,u){r!==o&&$c(o,function(d,g){if(u||(u=new Ni),ar(d))Cp(r,o,g,s,n,a,u);else{var p=a?a(mh(r,g),d,g+"",r,o,u):void 0;p===void 0&&(p=d),ph(r,g,p)}},ki)},Hw=function(n){return ls(function(r,o){var s=-1,a=o.length,u=a>1?o[a-1]:void 0,d=a>2?o[2]:void 0;for(u=n.length>3&&typeof u=="function"?(a--,u):void 0,d&&Ea(o[0],o[1],d)&&(u=a<3?void 0:u,a=1),r=Object(r);++s<a;){var g=o[s];g&&n(r,g,s,u)}return r})}(function(n,r,o){Uw(n,r,o)}),Sp=function(n,r){return n<r},$w=function(n){return n&&n.length?gh(n,bo,Sp):void 0},Ww=function(n,r){return n&&n.length?gh(n,ui(r),Sp):void 0},Xw=function(){return zr.Date.now()},Zw=function(n,r,o,s){if(!ar(n))return n;for(var a=-1,u=(r=ma(r,n)).length,d=u-1,g=n;g!=null&&++a<u;){var p=ya(r[a]),m=o;if(p==="__proto__"||p==="constructor"||p==="prototype")return n;if(a!=d){var b=g[p];(m=s?s(b,p,g):void 0)===void 0&&(m=ar(b)?b:Lc(r[a+1])?[]:{})}Rc(g,p,m),g=g[p]}return n},Yw=function(n,r,o){for(var s=-1,a=r.length,u={};++s<a;){var d=r[s],g=Yc(n,d);o(g,d)&&Zw(u,ma(d,n),g)}return u},Kw=function(n,r){return Yw(n,r,function(o,s){return $g(n,s)})},Jw=function(n){return op(lh(n,void 0,Ep),n+"")}(function(n,r){return n==null?{}:Kw(n,r)}),qw=Math.ceil,Qw=Math.max,t1=function(n,r,o,s){for(var a=-1,u=Qw(qw((r-n)/(o||1)),0),d=Array(u);u--;)d[s?u:++a]=n,n+=o;return d},e1=function(n){return function(r,o,s){return s&&typeof s!="number"&&Ea(r,o,s)&&(o=s=void 0),r=nl(r),o===void 0?(o=r,r=0):o=nl(o),s=s===void 0?r<o?1:-1:nl(s),t1(r,o,s,n)}}(),n1=function(n,r){var o=n.length;for(n.sort(r);o--;)n[o]=n[o].value;return n},r1=function(n,r){if(n!==r){var o=n!==void 0,s=n===null,a=n==n,u=xo(n),d=r!==void 0,g=r===null,p=r==r,m=xo(r);if(!g&&!m&&!u&&n>r||u&&d&&p&&!g&&!m||s&&d&&p||!o&&p||!a)return 1;if(!s&&!u&&!m&&n<r||m&&o&&a&&!s&&!u||g&&o&&a||!d&&a||!p)return-1}return 0},i1=function(n,r,o){for(var s=-1,a=n.criteria,u=r.criteria,d=a.length,g=o.length;++s<d;){var p=r1(a[s],u[s]);if(p)return s>=g?p:p*(o[s]=="desc"?-1:1)}return n.index-r.index},o1=function(n,r,o){r=r.length?wo(r,function(u){return En(u)?function(d){return Yc(d,u.length===1?u[0]:u)}:u}):[bo];var s=-1;r=wo(r,Bc(ui));var a=Kg(n,function(u,d,g){return{criteria:wo(r,function(p){return p(u)}),index:++s,value:u}});return n1(a,function(u,d){return i1(u,d,o)})},s1=ls(function(n,r){if(n==null)return[];var o=r.length;return o>1&&Ea(n,r[0],r[1])?r=[]:o>2&&Ea(r[0],r[1],r[2])&&(r=[r[0]]),o1(n,ch(r,1),[])}),a1=0,c1=function(n){var r=++a1;return Vg(n)+r},Op=function(n,r,o){for(var s=-1,a=n.length,u=r.length,d={};++s<a;){var g=s<u?r[s]:void 0;o(d,n[s],g)}return d},rl,l1=function(n,r){return Op(n||[],r||[],Rc)};try{rl={cloneDeep:Ew,constant:Hc,defaults:xp,each:Ig,filter:Xg,find:Nw,flatten:Ep,forEach:Mg,forIn:Dw,has:Zg,isUndefined:Yg,last:Rw,map:Jg,mapValues:Lw,max:Bw,merge:Hw,min:$w,minBy:Ww,now:Xw,pick:Jw,range:e1,reduce:rh,sortBy:s1,uniqueId:c1,values:cp,zipObject:l1}}catch(n){}rl||(rl=window._);var $=rl,u1=il;function il(){var n={};n._next=n._prev=n,this._sentinel=n}function Ap(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function h1(n,r){if(n!=="_next"&&n!=="_prev")return r}il.prototype.dequeue=function(){var n=this._sentinel,r=n._prev;if(r!==n)return Ap(r),r},il.prototype.enqueue=function(n){var r=this._sentinel;n._prev&&n._next&&Ap(n),n._next=r._next,r._next._prev=n,r._next=n,n._prev=r},il.prototype.toString=function(){for(var n=[],r=this._sentinel,o=r._prev;o!==r;)n.push(JSON.stringify(o,h1)),o=o._prev;return"["+n.join(", ")+"]"};var d1=Fr.Graph,f1=function(n,r){if(n.nodeCount()<=1)return[];var o=function(a,u){var d=new d1,g=0,p=0;$.forEach(a.nodes(),function(w){d.setNode(w,{v:w,in:0,out:0})}),$.forEach(a.edges(),function(w){var C=d.edge(w.v,w.w)||0,O=u(w),A=C+O;d.setEdge(w.v,w.w,A),p=Math.max(p,d.node(w.v).out+=O),g=Math.max(g,d.node(w.w).in+=O)});var m=$.range(p+g+3).map(function(){return new u1}),b=g+1;return $.forEach(d.nodes(),function(w){bh(m,b,d.node(w))}),{graph:d,buckets:m,zeroIdx:b}}(n,r||g1),s=function(a,u,d){for(var g,p=[],m=u[u.length-1],b=u[0];a.nodeCount();){for(;g=b.dequeue();)yh(a,u,d,g);for(;g=m.dequeue();)yh(a,u,d,g);if(a.nodeCount()){for(var w=u.length-2;w>0;--w)if(g=u[w].dequeue()){p=p.concat(yh(a,u,d,g,!0));break}}}return p}(o.graph,o.buckets,o.zeroIdx);return $.flatten($.map(s,function(a){return n.outEdges(a.v,a.w)}),!0)},g1=$.constant(1);function yh(n,r,o,s,a){var u=a?[]:void 0;return $.forEach(n.inEdges(s.v),function(d){var g=n.edge(d),p=n.node(d.v);a&&u.push({v:d.v,w:d.w}),p.out-=g,bh(r,o,p)}),$.forEach(n.outEdges(s.v),function(d){var g=n.edge(d),p=d.w,m=n.node(p);m.in-=g,bh(r,o,m)}),n.removeNode(s.v),u}function bh(n,r,o){o.out?o.in?n[o.out-o.in+r].enqueue(o):n[n.length-1].enqueue(o):n[0].enqueue(o)}var Tp={run:function(n){var r=n.graph().acyclicer==="greedy"?f1(n,function(o){return function(s){return o.edge(s).weight}}(n)):function(o){var s=[],a={},u={};function d(g){$.has(u,g)||(u[g]=!0,a[g]=!0,$.forEach(o.outEdges(g),function(p){$.has(a,p.w)?s.push(p):d(p.w)}),delete a[g])}return $.forEach(o.nodes(),d),s}(n);$.forEach(r,function(o){var s=n.edge(o);n.removeEdge(o),s.forwardName=o.name,s.reversed=!0,n.setEdge(o.w,o.v,s,$.uniqueId("rev"))})},undo:function(n){$.forEach(n.edges(),function(r){var o=n.edge(r);if(o.reversed){n.removeEdge(r);var s=o.forwardName;delete o.reversed,delete o.forwardName,n.setEdge(r.w,r.v,o,s)}})}},p1=Fr.Graph,Gn={addDummyNode:Mp,simplify:function(n){var r=new p1().setGraph(n.graph());return $.forEach(n.nodes(),function(o){r.setNode(o,n.node(o))}),$.forEach(n.edges(),function(o){var s=r.edge(o.v,o.w)||{weight:0,minlen:1},a=n.edge(o);r.setEdge(o.v,o.w,{weight:s.weight+a.weight,minlen:Math.max(s.minlen,a.minlen)})}),r},asNonCompoundGraph:function(n){var r=new p1({multigraph:n.isMultigraph()}).setGraph(n.graph());return $.forEach(n.nodes(),function(o){n.children(o).length||r.setNode(o,n.node(o))}),$.forEach(n.edges(),function(o){r.setEdge(o,n.edge(o))}),r},successorWeights:function(n){var r=$.map(n.nodes(),function(o){var s={};return $.forEach(n.outEdges(o),function(a){s[a.w]=(s[a.w]||0)+n.edge(a).weight}),s});return $.zipObject(n.nodes(),r)},predecessorWeights:function(n){var r=$.map(n.nodes(),function(o){var s={};return $.forEach(n.inEdges(o),function(a){s[a.v]=(s[a.v]||0)+n.edge(a).weight}),s});return $.zipObject(n.nodes(),r)},intersectRect:function(n,r){var o,s,a=n.x,u=n.y,d=r.x-a,g=r.y-u,p=n.width/2,m=n.height/2;if(!d&&!g)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(g)*p>Math.abs(d)*m?(g<0&&(m=-m),o=m*d/g,s=m):(d<0&&(p=-p),o=p,s=p*g/d),{x:a+o,y:u+s}},buildLayerMatrix:function(n){var r=$.map($.range(Ip(n)+1),function(){return[]});return $.forEach(n.nodes(),function(o){var s=n.node(o),a=s.rank;$.isUndefined(a)||(r[a][s.order]=o)}),r},normalizeRanks:function(n){var r=$.min($.map(n.nodes(),function(o){return n.node(o).rank}));$.forEach(n.nodes(),function(o){var s=n.node(o);$.has(s,"rank")&&(s.rank-=r)})},removeEmptyRanks:function(n){var r=$.min($.map(n.nodes(),function(u){return n.node(u).rank})),o=[];$.forEach(n.nodes(),function(u){var d=n.node(u).rank-r;o[d]||(o[d]=[]),o[d].push(u)});var s=0,a=n.graph().nodeRankFactor;$.forEach(o,function(u,d){$.isUndefined(u)&&d%a!=0?--s:s&&$.forEach(u,function(g){n.node(g).rank+=s})})},addBorderNode:function(n,r,o,s){var a={width:0,height:0};return arguments.length>=4&&(a.rank=o,a.order=s),Mp(n,"border",a,r)},maxRank:Ip,partition:function(n,r){var o={lhs:[],rhs:[]};return $.forEach(n,function(s){r(s)?o.lhs.push(s):o.rhs.push(s)}),o},time:function(n,r){var o=$.now();try{return r()}finally{console.log(n+" time: "+($.now()-o)+"ms")}},notime:function(n,r){return r()}};function Mp(n,r,o,s){var a;do a=$.uniqueId(s);while(n.hasNode(a));return o.dummy=r,n.setNode(a,o),a}function Ip(n){return $.max($.map(n.nodes(),function(r){var o=n.node(r).rank;if(!$.isUndefined(o))return o}))}var Pp={run:function(n){n.graph().dummyChains=[],$.forEach(n.edges(),function(r){(function(o,s){var a,u,d,g=s.v,p=o.node(g).rank,m=s.w,b=o.node(m).rank,w=s.name,C=o.edge(s),O=C.labelRank;if(b!==p+1){for(o.removeEdge(s),d=0,++p;p<b;++d,++p)C.points=[],u={width:0,height:0,edgeLabel:C,edgeObj:s,rank:p},a=Gn.addDummyNode(o,"edge",u,"_d"),p===O&&(u.width=C.width,u.height=C.height,u.dummy="edge-label",u.labelpos=C.labelpos),o.setEdge(g,a,{weight:C.weight},w),d===0&&o.graph().dummyChains.push(a),g=a;o.setEdge(g,m,{weight:C.weight},w)}})(n,r)})},undo:function(n){$.forEach(n.graph().dummyChains,function(r){var o,s=n.node(r),a=s.edgeLabel;for(n.setEdge(s.edgeObj,a);s.dummy;)o=n.successors(r)[0],n.removeNode(r),a.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(a.x=s.x,a.y=s.y,a.width=s.width,a.height=s.height),r=o,s=n.node(r)})}},Np=function(n){var r={};$.forEach(n.sources(),function o(s){var a=n.node(s);if($.has(r,s))return a.rank;r[s]=!0;var u=$.min($.map(n.outEdges(s),function(d){return o(d.w)-n.edge(d).minlen}));return u!==Number.POSITIVE_INFINITY&&u!=null||(u=0),a.rank=u})},Dp=function(n,r){return n.node(r.w).rank-n.node(r.v).rank-n.edge(r).minlen},v1=Fr.Graph,ol=Dp,Rp=function(n){var r,o,s=new v1({directed:!1}),a=n.nodes()[0],u=n.nodeCount();for(s.setNode(a,{});m1(s,n)<u;)r=y1(s,n),o=s.hasNode(r.v)?ol(n,r):-ol(n,r),b1(s,n,o);return s};function m1(n,r){return $.forEach(n.nodes(),function o(s){$.forEach(r.nodeEdges(s),function(a){var u=a.v,d=s===u?a.w:u;n.hasNode(d)||ol(r,a)||(n.setNode(d,{}),n.setEdge(s,d,{}),o(d))})}),n.nodeCount()}function y1(n,r){return $.minBy(r.edges(),function(o){if(n.hasNode(o.v)!==n.hasNode(o.w))return ol(r,o)})}function b1(n,r,o){$.forEach(n.nodes(),function(s){r.node(s).rank+=o})}var x1=Dp,w1=Np,E1=Fr.alg.preorder,_1=Fr.alg.postorder,C1=Gn.simplify,S1=_o;function _o(n){n=C1(n),w1(n);var r,o=Rp(n);for(wh(o),xh(o,n);r=kp(o);)zp(o,n,r,Bp(o,n,r))}function xh(n,r){var o=_1(n,n.nodes());o=o.slice(0,o.length-1),$.forEach(o,function(s){(function(a,u,d){var g=a.node(d).parent;a.edge(d,g).cutvalue=Lp(a,u,d)})(n,r,s)})}function Lp(n,r,o){var s=n.node(o).parent,a=!0,u=r.edge(o,s),d=0;return u||(a=!1,u=r.edge(s,o)),d=u.weight,$.forEach(r.nodeEdges(o),function(g){var p,m,b=g.v===o,w=b?g.w:g.v;if(w!==s){var C=b===a,O=r.edge(g).weight;if(d+=C?O:-O,p=o,m=w,n.hasEdge(p,m)){var A=n.edge(o,w).cutvalue;d+=C?-A:A}}}),d}function wh(n,r){arguments.length<2&&(r=n.nodes()[0]),Eh(n,{},1,r)}function Eh(n,r,o,s,a){var u=o,d=n.node(s);return r[s]=!0,$.forEach(n.neighbors(s),function(g){$.has(r,g)||(o=Eh(n,r,o,g,s))}),d.low=u,d.lim=o++,a?d.parent=a:delete d.parent,o}function kp(n){return $.find(n.edges(),function(r){return n.edge(r).cutvalue<0})}function Bp(n,r,o){var s=o.v,a=o.w;r.hasEdge(s,a)||(s=o.w,a=o.v);var u=n.node(s),d=n.node(a),g=u,p=!1;u.lim>d.lim&&(g=d,p=!0);var m=$.filter(r.edges(),function(b){return p===Fp(n,n.node(b.v),g)&&p!==Fp(n,n.node(b.w),g)});return $.minBy(m,function(b){return x1(r,b)})}function zp(n,r,o,s){var a=o.v,u=o.w;n.removeEdge(a,u),n.setEdge(s.v,s.w,{}),wh(n),xh(n,r),function(d,g){var p=$.find(d.nodes(),function(b){return!g.node(b).parent}),m=E1(d,p);m=m.slice(1),$.forEach(m,function(b){var w=d.node(b).parent,C=g.edge(b,w),O=!1;C||(C=g.edge(w,b),O=!0),g.node(b).rank=g.node(w).rank+(O?C.minlen:-C.minlen)})}(n,r)}function Fp(n,r,o){return o.low<=r.lim&&r.lim<=o.lim}_o.initLowLimValues=wh,_o.initCutValues=xh,_o.calcCutValue=Lp,_o.leaveEdge=kp,_o.enterEdge=Bp,_o.exchangeEdges=zp;var _h=Np,Gp=function(n){switch(n.graph().ranker){case"network-simplex":jp(n);break;case"tight-tree":(function(r){_h(r),Rp(r)})(n);break;case"longest-path":O1(n);break;default:jp(n)}},O1=_h;function jp(n){S1(n)}var A1=function(n){var r=function(o){var s={},a=0;function u(d){var g=a;$.forEach(o.children(d),u),s[d]={low:g,lim:a++}}return $.forEach(o.children(),u),s}(n);$.forEach(n.graph().dummyChains,function(o){for(var s=n.node(o),a=s.edgeObj,u=function(w,C,O,A){var M,P,I=[],N=[],R=Math.min(C[O].low,C[A].low),z=Math.max(C[O].lim,C[A].lim);M=O;do M=w.parent(M),I.push(M);while(M&&(C[M].low>R||z>C[M].lim));for(P=M,M=A;(M=w.parent(M))!==P;)N.push(M);return{path:I.concat(N.reverse()),lca:P}}(n,r,a.v,a.w),d=u.path,g=u.lca,p=0,m=d[p],b=!0;o!==a.w;){if(s=n.node(o),b){for(;(m=d[p])!==g&&n.node(m).maxRank<s.rank;)p++;m===g&&(b=!1)}if(!b){for(;p<d.length-1&&n.node(m=d[p+1]).minRank<=s.rank;)p++;m=d[p]}n.setParent(o,m),o=n.successors(o)[0]}})},Vp={run:function(n){var r=Gn.addDummyNode(n,"root",{},"_root"),o=function(d){var g={};function p(m,b){var w=d.children(m);w&&w.length&&$.forEach(w,function(C){p(C,b+1)}),g[m]=b}return $.forEach(d.children(),function(m){p(m,1)}),g}(n),s=$.max($.values(o))-1,a=2*s+1;n.graph().nestingRoot=r,$.forEach(n.edges(),function(d){n.edge(d).minlen*=a});var u=function(d){return $.reduce(d.edges(),function(g,p){return g+d.edge(p).weight},0)}(n)+1;$.forEach(n.children(),function(d){Ch(n,r,a,u,s,o,d)}),n.graph().nodeRankFactor=a},cleanup:function(n){var r=n.graph();n.removeNode(r.nestingRoot),delete r.nestingRoot,$.forEach(n.edges(),function(o){n.edge(o).nestingEdge&&n.removeEdge(o)})}};function Ch(n,r,o,s,a,u,d){var g=n.children(d);if(g.length){var p=Gn.addBorderNode(n,"_bt"),m=Gn.addBorderNode(n,"_bb"),b=n.node(d);n.setParent(p,d),b.borderTop=p,n.setParent(m,d),b.borderBottom=m,$.forEach(g,function(w){Ch(n,r,o,s,a,u,w);var C=n.node(w),O=C.borderTop?C.borderTop:w,A=C.borderBottom?C.borderBottom:w,M=C.borderTop?s:2*s,P=O!==A?1:a-u[d]+1;n.setEdge(p,O,{weight:M,minlen:P,nestingEdge:!0}),n.setEdge(A,m,{weight:M,minlen:P,nestingEdge:!0})}),n.parent(d)||n.setEdge(r,p,{weight:0,minlen:a+u[d]})}else d!==r&&n.setEdge(r,d,{weight:0,minlen:o})}var T1=function(n){$.forEach(n.children(),function r(o){var s=n.children(o),a=n.node(o);if(s.length&&$.forEach(s,r),$.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,d=a.maxRank+1;u<d;++u)Sh(n,"borderLeft","_bl",o,a,u),Sh(n,"borderRight","_br",o,a,u)}})};function Sh(n,r,o,s,a,u){var d={width:0,height:0,rank:u,borderType:r},g=a[r][u-1],p=Gn.addDummyNode(n,"border",d,o);a[r][u]=p,n.setParent(p,s),g&&n.setEdge(g,p,{weight:1})}var Oh={adjust:function(n){var r=n.graph().rankdir.toLowerCase();r!=="lr"&&r!=="rl"||Ah(n)},undo:function(n){var r=n.graph().rankdir.toLowerCase();r!=="bt"&&r!=="rl"||function(o){$.forEach(o.nodes(),function(s){sl(o.node(s))}),$.forEach(o.edges(),function(s){var a=o.edge(s);$.forEach(a.points,sl),$.has(a,"y")&&sl(a)})}(n),r!=="lr"&&r!=="rl"||(function(o){$.forEach(o.nodes(),function(s){Th(o.node(s))}),$.forEach(o.edges(),function(s){var a=o.edge(s);$.forEach(a.points,Th),$.has(a,"x")&&Th(a)})}(n),Ah(n))}};function Ah(n){$.forEach(n.nodes(),function(r){Up(n.node(r))}),$.forEach(n.edges(),function(r){Up(n.edge(r))})}function Up(n){var r=n.width;n.width=n.height,n.height=r}function sl(n){n.y=-n.y}function Th(n){var r=n.x;n.x=n.y,n.y=r}var Hp=function(n){var r={},o=$.filter(n.nodes(),function(g){return!n.children(g).length}),s=$.max($.map(o,function(g){return n.node(g).rank})),a=$.map($.range(s+1),function(){return[]});function u(g){if(!$.has(r,g)){r[g]=!0;var p=n.node(g);a[p.rank].push(g),$.forEach(n.successors(g),u)}}var d=$.sortBy(o,function(g){return n.node(g).rank});return $.forEach(d,u),a},$p=function(n,r){for(var o=0,s=1;s<r.length;++s)o+=M1(n,r[s-1],r[s]);return o};function M1(n,r,o){for(var s=$.zipObject(o,$.map(o,function(m,b){return b})),a=$.flatten($.map(r,function(m){return $.sortBy($.map(n.outEdges(m),function(b){return{pos:s[b.w],weight:n.edge(b).weight}}),"pos")}),!0),u=1;u<o.length;)u<<=1;var d=2*u-1;u-=1;var g=$.map(new Array(d),function(){return 0}),p=0;return $.forEach(a.forEach(function(m){var b=m.pos+u;g[b]+=m.weight;for(var w=0;b>0;)b%2&&(w+=g[b+1]),g[b=b-1>>1]+=m.weight;p+=m.weight*w})),p}var I1=function(n,r){return $.map(r,function(o){var s=n.inEdges(o);if(s.length){var a=$.reduce(s,function(u,d){var g=n.edge(d),p=n.node(d.v);return{sum:u.sum+g.weight*p.order,weight:u.weight+g.weight}},{sum:0,weight:0});return{v:o,barycenter:a.sum/a.weight,weight:a.weight}}return{v:o}})},P1=function(n,r){var o={};return $.forEach(n,function(s,a){var u=o[s.v]={indegree:0,in:[],out:[],vs:[s.v],i:a};$.isUndefined(s.barycenter)||(u.barycenter=s.barycenter,u.weight=s.weight)}),$.forEach(r.edges(),function(s){var a=o[s.v],u=o[s.w];$.isUndefined(a)||$.isUndefined(u)||(u.indegree++,a.out.push(o[s.w]))}),function(s){var a=[];function u(p){return function(m){m.merged||($.isUndefined(m.barycenter)||$.isUndefined(p.barycenter)||m.barycenter>=p.barycenter)&&function(b,w){var C=0,O=0;b.weight&&(C+=b.barycenter*b.weight,O+=b.weight),w.weight&&(C+=w.barycenter*w.weight,O+=w.weight),b.vs=w.vs.concat(b.vs),b.barycenter=C/O,b.weight=O,b.i=Math.min(w.i,b.i),w.merged=!0}(p,m)}}function d(p){return function(m){m.in.push(p),--m.indegree==0&&s.push(m)}}for(;s.length;){var g=s.pop();a.push(g),$.forEach(g.in.reverse(),u(g)),$.forEach(g.out,d(g))}return $.map($.filter(a,function(p){return!p.merged}),function(p){return $.pick(p,["vs","i","barycenter","weight"])})}($.filter(o,function(s){return!s.indegree}))},Wp=function(n,r){var o=Gn.partition(n,function(w){return $.has(w,"barycenter")}),s=o.lhs,a=$.sortBy(o.rhs,function(w){return-w.i}),u=[],d=0,g=0,p=0;s.sort((m=!!r,function(w,C){return w.barycenter<C.barycenter?-1:w.barycenter>C.barycenter?1:m?C.i-w.i:w.i-C.i})),p=Mh(u,a,p),$.forEach(s,function(w){p+=w.vs.length,u.push(w.vs),d+=w.barycenter*w.weight,g+=w.weight,p=Mh(u,a,p)});var m,b={vs:$.flatten(u,!0)};return g&&(b.barycenter=d/g,b.weight=g),b};function Mh(n,r,o){for(var s;r.length&&(s=$.last(r)).i<=o;)r.pop(),n.push(s.vs),o++;return o}var us=function n(r,o,s,a){var u=r.children(o),d=r.node(o),g=d?d.borderLeft:void 0,p=d?d.borderRight:void 0,m={};g&&(u=$.filter(u,function(M){return M!==g&&M!==p}));var b=I1(r,u);$.forEach(b,function(M){if(r.children(M.v).length){var P=n(r,M.v,s,a);m[M.v]=P,$.has(P,"barycenter")&&(I=M,N=P,$.isUndefined(I.barycenter)?(I.barycenter=N.barycenter,I.weight=N.weight):(I.barycenter=(I.barycenter*I.weight+N.barycenter*N.weight)/(I.weight+N.weight),I.weight+=N.weight))}var I,N});var w=P1(b,s);(function(M,P){$.forEach(M,function(I){I.vs=$.flatten(I.vs.map(function(N){return P[N]?P[N].vs:N}),!0)})})(w,m);var C=Wp(w,a);if(g&&(C.vs=$.flatten([g,C.vs,p],!0),r.predecessors(g).length)){var O=r.node(r.predecessors(g)[0]),A=r.node(r.predecessors(p)[0]);$.has(C,"barycenter")||(C.barycenter=0,C.weight=0),C.barycenter=(C.barycenter*C.weight+O.order+A.order)/(C.weight+2),C.weight+=2}return C},N1=Fr.Graph,Xp=function(n,r,o){var s=function(u){for(var d;u.hasNode(d=$.uniqueId("_root")););return d}(n),a=new N1({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(u){return n.node(u)});return $.forEach(n.nodes(),function(u){var d=n.node(u),g=n.parent(u);(d.rank===r||d.minRank<=r&&r<=d.maxRank)&&(a.setNode(u),a.setParent(u,g||s),$.forEach(n[o](u),function(p){var m=p.v===u?p.w:p.v,b=a.edge(m,u),w=$.isUndefined(b)?0:b.weight;a.setEdge(m,u,{weight:n.edge(p).weight+w})}),$.has(d,"minRank")&&a.setNode(u,{borderLeft:d.borderLeft[r],borderRight:d.borderRight[r]}))}),a},D1=function(n,r,o){var s,a={};$.forEach(o,function(u){for(var d,g,p=n.parent(u);p;){if((d=n.parent(p))?(g=a[d],a[d]=p):(g=s,s=p),g&&g!==p)return void r.setEdge(g,p);p=d}})},Zp=Fr.Graph,Yp=function(n){var r=Gn.maxRank(n),o=Ih(n,$.range(1,r+1),"inEdges"),s=Ih(n,$.range(r-1,-1,-1),"outEdges"),a=Hp(n);Jp(n,a);for(var u,d=Number.POSITIVE_INFINITY,g=0,p=0;p<4;++g,++p){Kp(g%2?o:s,g%4>=2),a=Gn.buildLayerMatrix(n);var m=$p(n,a);m<d&&(p=0,u=$.cloneDeep(a),d=m)}Jp(n,u)};function Ih(n,r,o){return $.map(r,function(s){return Xp(n,s,o)})}function Kp(n,r){var o=new Zp;$.forEach(n,function(s){var a=s.graph().root,u=us(s,a,o,r);$.forEach(u.vs,function(d,g){s.node(d).order=g}),D1(s,o,u.vs)})}function Jp(n,r){$.forEach(r,function(o){$.forEach(o,function(s,a){n.node(s).order=a})})}var R1=Fr.Graph,L1=function(n){var r,o=Gn.buildLayerMatrix(n),s=$.merge(k1(n,o),B1(n,o)),a={};$.forEach(["u","d"],function(d){r=d==="u"?o:$.values(o).reverse(),$.forEach(["l","r"],function(g){g==="r"&&(r=$.map(r,function(w){return $.values(w).reverse()}));var p=(d==="u"?n.predecessors:n.successors).bind(n),m=F1(n,r,s,p),b=G1(n,r,m.root,m.align,g==="r");g==="r"&&(b=$.mapValues(b,function(w){return-w})),a[d+g]=b})});var u=j1(n,a);return V1(a,u),U1(a,n.graph().align)};function k1(n,r){var o={};return $.reduce(r,function(s,a){var u=0,d=0,g=s.length,p=$.last(a);return $.forEach(a,function(m,b){var w=function(O,A){if(O.node(A).dummy)return $.find(O.predecessors(A),function(M){return O.node(M).dummy})}(n,m),C=w?n.node(w).order:g;(w||m===p)&&($.forEach(a.slice(d,b+1),function(O){$.forEach(n.predecessors(O),function(A){var M=n.node(A),P=M.order;!(P<u||C<P)||M.dummy&&n.node(O).dummy||qp(o,A,O)})}),d=b+1,u=C)}),a}),o}function B1(n,r){var o={};function s(a,u,d,g,p){var m;$.forEach($.range(u,d),function(b){m=a[b],n.node(m).dummy&&$.forEach(n.predecessors(m),function(w){var C=n.node(w);C.dummy&&(C.order<g||C.order>p)&&qp(o,w,m)})})}return $.reduce(r,function(a,u){var d,g=-1,p=0;return $.forEach(u,function(m,b){if(n.node(m).dummy==="border"){var w=n.predecessors(m);w.length&&(d=n.node(w[0]).order,s(u,p,b,g,d),p=b,g=d)}s(u,p,u.length,d,a.length)}),u}),o}function qp(n,r,o){if(r>o){var s=r;r=o,o=s}var a=n[r];a||(n[r]=a={}),a[o]=!0}function z1(n,r,o){if(r>o){var s=r;r=o,o=s}return $.has(n[r],o)}function F1(n,r,o,s){var a={},u={},d={};return $.forEach(r,function(g){$.forEach(g,function(p,m){a[p]=p,u[p]=p,d[p]=m})}),$.forEach(r,function(g){var p=-1;$.forEach(g,function(m){var b=s(m);if(b.length)for(var w=((b=$.sortBy(b,function(M){return d[M]})).length-1)/2,C=Math.floor(w),O=Math.ceil(w);C<=O;++C){var A=b[C];u[m]===m&&p<d[A]&&!z1(o,m,A)&&(u[A]=m,u[m]=a[m]=a[A],p=d[A])}})}),{root:a,align:u}}function G1(n,r,o,s,a){var u={},d=function(m,b,w,C){var O=new R1,A=m.graph(),M=function(P,I,N){return function(R,z,F){var Z,ot=R.node(z),nt=R.node(F),q=0;if(q+=ot.width/2,$.has(ot,"labelpos"))switch(ot.labelpos.toLowerCase()){case"l":Z=-ot.width/2;break;case"r":Z=ot.width/2}if(Z&&(q+=N?Z:-Z),Z=0,q+=(ot.dummy?I:P)/2,q+=(nt.dummy?I:P)/2,q+=nt.width/2,$.has(nt,"labelpos"))switch(nt.labelpos.toLowerCase()){case"l":Z=nt.width/2;break;case"r":Z=-nt.width/2}return Z&&(q+=N?Z:-Z),Z=0,q}}(A.nodesep,A.edgesep,C);return $.forEach(b,function(P){var I;$.forEach(P,function(N){var R=w[N];if(O.setNode(R),I){var z=w[I],F=O.edge(z,R);O.setEdge(z,R,Math.max(M(m,N,I),F||0))}I=N})}),O}(n,r,o,a),g=a?"borderLeft":"borderRight";function p(m,b){for(var w=d.nodes(),C=w.pop(),O={};C;)O[C]?m(C):(O[C]=!0,w.push(C),w=w.concat(b(C))),C=w.pop()}return p(function(m){u[m]=d.inEdges(m).reduce(function(b,w){return Math.max(b,u[w.v]+d.edge(w))},0)},d.predecessors.bind(d)),p(function(m){var b=d.outEdges(m).reduce(function(C,O){return Math.min(C,u[O.w]-d.edge(O))},Number.POSITIVE_INFINITY),w=n.node(m);b!==Number.POSITIVE_INFINITY&&w.borderType!==g&&(u[m]=Math.max(u[m],b))},d.successors.bind(d)),$.forEach(s,function(m){u[m]=u[o[m]]}),u}function j1(n,r){return $.minBy($.values(r),function(o){var s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY;return $.forIn(o,function(u,d){var g=function(p,m){return p.node(m).width}(n,d)/2;s=Math.max(u+g,s),a=Math.min(u-g,a)}),s-a})}function V1(n,r){var o=$.values(r),s=$.min(o),a=$.max(o);$.forEach(["u","d"],function(u){$.forEach(["l","r"],function(d){var g,p=u+d,m=n[p];if(m!==r){var b=$.values(m);(g=d==="l"?s-$.min(b):a-$.max(b))&&(n[p]=$.mapValues(m,function(w){return w+g}))}})})}function U1(n,r){return $.mapValues(n.ul,function(o,s){if(r)return n[r.toLowerCase()][s];var a=$.sortBy($.map(n,s));return(a[1]+a[2])/2})}var H1=L1,al=function(n){(function(r){var o=Gn.buildLayerMatrix(r),s=r.graph().ranksep,a=0;$.forEach(o,function(u){var d=$.max($.map(u,function(g){return r.node(g).height}));$.forEach(u,function(g){r.node(g).y=a+d/2}),a+=d+s})})(n=Gn.asNonCompoundGraph(n)),$.forEach(H1(n),function(r,o){n.node(o).x=r})},$1=Gn.normalizeRanks,W1=Gn.removeEmptyRanks,zi=Gn,X1=Fr.Graph,Z1=function(n,r){var o=r&&r.debugTiming?zi.time:zi.notime;o("layout",function(){var s=o("  buildLayoutGraph",function(){return function(a){var u=new X1({multigraph:!0,compound:!0}),d=Ph(a.graph());return u.setGraph($.merge({},K1,cl(d,Y1),$.pick(d,J1))),$.forEach(a.nodes(),function(g){var p=Ph(a.node(g));u.setNode(g,$.defaults(cl(p,q1),Q1)),u.setParent(g,a.parent(g))}),$.forEach(a.edges(),function(g){var p=Ph(a.edge(g));u.setEdge(g,$.merge({},eE,cl(p,tE),$.pick(p,nE)))}),u}(n)});o("  runLayout",function(){(function(a,u){u("    makeSpaceForEdgeLabels",function(){(function(d){var g=d.graph();g.ranksep/=2,$.forEach(d.edges(),function(p){var m=d.edge(p);m.minlen*=2,m.labelpos.toLowerCase()!=="c"&&(g.rankdir==="TB"||g.rankdir==="BT"?m.width+=m.labeloffset:m.height+=m.labeloffset)})})(a)}),u("    removeSelfEdges",function(){(function(d){$.forEach(d.edges(),function(g){if(g.v===g.w){var p=d.node(g.v);p.selfEdges||(p.selfEdges=[]),p.selfEdges.push({e:g,label:d.edge(g)}),d.removeEdge(g)}})})(a)}),u("    acyclic",function(){Tp.run(a)}),u("    nestingGraph.run",function(){Vp.run(a)}),u("    rank",function(){Gp(zi.asNonCompoundGraph(a))}),u("    injectEdgeLabelProxies",function(){(function(d){$.forEach(d.edges(),function(g){var p=d.edge(g);if(p.width&&p.height){var m=d.node(g.v),b={rank:(d.node(g.w).rank-m.rank)/2+m.rank,e:g};zi.addDummyNode(d,"edge-proxy",b,"_ep")}})})(a)}),u("    removeEmptyRanks",function(){W1(a)}),u("    nestingGraph.cleanup",function(){Vp.cleanup(a)}),u("    normalizeRanks",function(){$1(a)}),u("    assignRankMinMax",function(){(function(d){var g=0;$.forEach(d.nodes(),function(p){var m=d.node(p);m.borderTop&&(m.minRank=d.node(m.borderTop).rank,m.maxRank=d.node(m.borderBottom).rank,g=$.max(g,m.maxRank))}),d.graph().maxRank=g})(a)}),u("    removeEdgeLabelProxies",function(){(function(d){$.forEach(d.nodes(),function(g){var p=d.node(g);p.dummy==="edge-proxy"&&(d.edge(p.e).labelRank=p.rank,d.removeNode(g))})})(a)}),u("    normalize.run",function(){Pp.run(a)}),u("    parentDummyChains",function(){A1(a)}),u("    addBorderSegments",function(){T1(a)}),u("    order",function(){Yp(a)}),u("    insertSelfEdges",function(){(function(d){var g=zi.buildLayerMatrix(d);$.forEach(g,function(p){var m=0;$.forEach(p,function(b,w){var C=d.node(b);C.order=w+m,$.forEach(C.selfEdges,function(O){zi.addDummyNode(d,"selfedge",{width:O.label.width,height:O.label.height,rank:C.rank,order:w+ ++m,e:O.e,label:O.label},"_se")}),delete C.selfEdges})})})(a)}),u("    adjustCoordinateSystem",function(){Oh.adjust(a)}),u("    position",function(){al(a)}),u("    positionSelfEdges",function(){(function(d){$.forEach(d.nodes(),function(g){var p=d.node(g);if(p.dummy==="selfedge"){var m=d.node(p.e.v),b=m.x+m.width/2,w=m.y,C=p.x-b,O=m.height/2;d.setEdge(p.e,p.label),d.removeNode(g),p.label.points=[{x:b+2*C/3,y:w-O},{x:b+5*C/6,y:w-O},{x:b+C,y:w},{x:b+5*C/6,y:w+O},{x:b+2*C/3,y:w+O}],p.label.x=p.x,p.label.y=p.y}})})(a)}),u("    removeBorderNodes",function(){(function(d){$.forEach(d.nodes(),function(g){if(d.children(g).length){var p=d.node(g),m=d.node(p.borderTop),b=d.node(p.borderBottom),w=d.node($.last(p.borderLeft)),C=d.node($.last(p.borderRight));p.width=Math.abs(C.x-w.x),p.height=Math.abs(b.y-m.y),p.x=w.x+p.width/2,p.y=m.y+p.height/2}}),$.forEach(d.nodes(),function(g){d.node(g).dummy==="border"&&d.removeNode(g)})})(a)}),u("    normalize.undo",function(){Pp.undo(a)}),u("    fixupEdgeLabelCoords",function(){(function(d){$.forEach(d.edges(),function(g){var p=d.edge(g);if($.has(p,"x"))switch(p.labelpos!=="l"&&p.labelpos!=="r"||(p.width-=p.labeloffset),p.labelpos){case"l":p.x-=p.width/2+p.labeloffset;break;case"r":p.x+=p.width/2+p.labeloffset}})})(a)}),u("    undoCoordinateSystem",function(){Oh.undo(a)}),u("    translateGraph",function(){(function(d){var g=Number.POSITIVE_INFINITY,p=0,m=Number.POSITIVE_INFINITY,b=0,w=d.graph(),C=w.marginx||0,O=w.marginy||0;function A(M){var P=M.x,I=M.y,N=M.width,R=M.height;g=Math.min(g,P-N/2),p=Math.max(p,P+N/2),m=Math.min(m,I-R/2),b=Math.max(b,I+R/2)}$.forEach(d.nodes(),function(M){A(d.node(M))}),$.forEach(d.edges(),function(M){var P=d.edge(M);$.has(P,"x")&&A(P)}),g-=C,m-=O,$.forEach(d.nodes(),function(M){var P=d.node(M);P.x-=g,P.y-=m}),$.forEach(d.edges(),function(M){var P=d.edge(M);$.forEach(P.points,function(I){I.x-=g,I.y-=m}),$.has(P,"x")&&(P.x-=g),$.has(P,"y")&&(P.y-=m)}),w.width=p-g+C,w.height=b-m+O})(a)}),u("    assignNodeIntersects",function(){(function(d){$.forEach(d.edges(),function(g){var p,m,b=d.edge(g),w=d.node(g.v),C=d.node(g.w);b.points?(p=b.points[0],m=b.points[b.points.length-1]):(b.points=[],p=C,m=w),b.points.unshift(zi.intersectRect(w,p)),b.points.push(zi.intersectRect(C,m))})})(a)}),u("    reversePoints",function(){(function(d){$.forEach(d.edges(),function(g){var p=d.edge(g);p.reversed&&p.points.reverse()})})(a)}),u("    acyclic.undo",function(){Tp.undo(a)})})(s,o)}),o("  updateInputGraph",function(){(function(a,u){$.forEach(a.nodes(),function(d){var g=a.node(d),p=u.node(d);g&&(g.x=p.x,g.y=p.y,u.children(d).length&&(g.width=p.width,g.height=p.height))}),$.forEach(a.edges(),function(d){var g=a.edge(d),p=u.edge(d);g.points=p.points,$.has(p,"x")&&(g.x=p.x,g.y=p.y)}),a.graph().width=u.graph().width,a.graph().height=u.graph().height})(n,s)})})},Y1=["nodesep","edgesep","ranksep","marginx","marginy"],K1={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},J1=["acyclicer","ranker","rankdir","align"],q1=["width","height"],Q1={width:0,height:0},tE=["minlen","weight","width","height","labeloffset"],eE={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},nE=["labelpos"];function cl(n,r){return $.mapValues($.pick(n,r),Number)}function Ph(n){var r={};return $.forEach(n,function(o,s){r[s.toLowerCase()]=o}),r}var rE=Fr.Graph,Nh={graphlib:Fr,layout:Z1,debug:{debugOrdering:function(n){var r=Gn.buildLayerMatrix(n),o=new rE({compound:!0,multigraph:!0}).setGraph({});return $.forEach(n.nodes(),function(s){o.setNode(s,{label:s}),o.setParent(s,"layer"+n.node(s).rank)}),$.forEach(n.edges(),function(s){o.setEdge(s.v,s.w,{},s.name)}),$.forEach(r,function(s,a){var u="layer"+a;o.setNode(u,{rank:"same"}),$.reduce(s,function(d,g){return o.setEdge(d,g,{style:"invis"}),g})}),o}},util:{time:Gn.time,notime:Gn.notime},version:"0.8.5"},iE=Nh.graphlib,oE=Nh.layout;class sE{constructor(r){this.cardinality=1,this.include=Pi.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=or.NODE,this.name=r.name,this.attr=r.attr||{},this.inputs=r.inputs,this.path=r.path||[],this.width=r.width,this.height=r.height}}class aE{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function cE(n){const r=new aE;return n.nodes.map(o=>new sE(o)).forEach(o=>{r.nodes[o.name]=o,o.inputs.forEach(s=>{(function(a,u,d){d.name!==u.name&&a.edges.push(Object.assign(Object.assign({},d.attr),{v:d.name,w:u.name}))})(r,o,s)})}),r}class lE{constructor(r,o={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=Pi.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=or.META,this.path=[],this.name=r,this.metaGraph=ul(r,oa.META,o)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(r=>this.metaGraph.node(r))}leaves(){let r,o=[],s=[this];for(;s.length;){let a=s.shift();a.isGroupNode?(r=a.metaGraph,r.nodes().forEach(u=>s.push(r.node(u)))):o.push(a.name)}return o}}class Dh{constructor(r,o){this.v=r,this.w=o,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(r,o){this.baseEdgeList.push(r)}}function ll(n,r={}){return new lE(n,r)}function Qp(n,r){return new Dh(n,r)}function ul(n,r,o){const s=o||{},a=new iE.Graph(s);return a.setGraph({name:n,rankdir:s.rankdir,type:r,align:s.align}),a}class tv{constructor(r={}){this.graphOptions=r,this.index={},this.graphOptions.compound=!0,this.root=ll(fo,this.graphOptions),this.index[fo]=this.root}getNodeMap(){return this.index}node(r){return this.index[r]}setNode(r,o){this.index[r]=o}getBridgeGraph(r){const o=this.index[r];if(!o)throw Error("Could not find node in hierarchy: "+r);if(!("metaGraph"in o))return null;const s=o;if(s.bridgeGraph)return s.bridgeGraph;const a=ul(ia,oa.BRIDGE,this.graphOptions);if(s.bridgeGraph=a,!o.parentNode||!("metaGraph"in o.parentNode))return a;const u=o.parentNode;return[u.metaGraph,this.getBridgeGraph(u.name)].forEach(d=>{d.edges().filter(g=>g.v===r||g.w===r).forEach(g=>{const p=g.w===r;d.edge(g).baseEdgeList.forEach(m=>{const[b,w]=p?[m.w,g.v]:[m.v,g.w],C=this.getChildName(r,b),O={v:p?w:C,w:p?C:w};let A=a.edge(O);A||(A=Qp(O.v,O.w),A.inbound=p,a.setEdge(O.v,O.w,A)),A.addBaseEdge(m,this)})})}),a}getChildName(r,o){let s=this.index[o];for(;s;){if(s.parentNode&&s.parentNode.name===r)return s.name;s=s.parentNode}throw Error("Could not find immediate child for descendant: "+o)}getPredecessors(r){const o=this.index[r];if(!o)throw Error("Could not find node with name: "+r);return this.getOneWayEdges(o,!0)}getSuccessors(r){const o=this.index[r];if(!o)throw Error("Could not find node with name: "+r);return this.getOneWayEdges(o,!1)}getOneWayEdges(r,o){const s=[];if(!r.parentNode||!r.parentNode.isGroupNode)return s;const a=r.parentNode,u=a.metaGraph,d=this.getBridgeGraph(a.name);return nv(u,r,o,s),nv(d,r,o,s),s}}function ev(n,r){const{rankDirection:o,align:s}=r,a=new tv({rankdir:o,align:s});return function(u,d){Object.keys(d.nodes).forEach(g=>{const p=d.nodes[g],m=p.path;let b=u.root;b.depth=Math.max(m.length,b.depth);for(let w=0;w<m.length&&(b.depth=Math.max(b.depth,m.length-w),b.cardinality+=p.cardinality,w!==m.length-1);w++){const C=m[w];let O=u.node(C);O||(O=ll(C,u.graphOptions),O.path=p.path.slice(0,w+1),O.parentNode=b,u.setNode(C,O),b.metaGraph.setNode(C,O)),b=O}u.setNode(p.name,p),p.parentNode=b,b.metaGraph.setNode(p.name,p)})}(a,n),function(u,d){const g=u.getNodeMap();let p=[],m=[];const b=(w,C)=>{let O=0;for(;w;)C[O++]=w.name,w=w.parentNode;return O-1};d.edges.forEach(w=>{p=[],m=[];let C=b(d.nodes[w.v],p),O=b(d.nodes[w.w],m);for(;p[C]===m[O];)if(C--,O--,C<0||O<0)throw Error("No difference found between ancestor paths.");const A=g[p[C+1]],M=p[C],P=m[O];let I=A.metaGraph.edge(M,P);I||(I=Qp(M,P),A.metaGraph.setEdge(M,P,I)),I.addBaseEdge(w,u)})}(a,n),a}function nv(n,r,o,s){(o?n.inEdges(r.name):n.outEdges(r.name)).forEach(a=>{const u=n.edge(a);s.push(u)})}class rv{constructor(r){this.hierarchy=r,this.index={},this.hasSubHierarchy={},this.root=new ov(this.hierarchy.root,this.hierarchy.graphOptions),this.index[r.root.name]=this.root,this.buildSubHierarchy(r.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(r){if(r in this.hasSubHierarchy)return;this.hasSubHierarchy[r]=!0;const o=this.index[r];if(o.node.type!==or.META)return;const s=o,a=s.node.metaGraph,u=s.coreGraph;a.nodes().forEach(b=>{const w=this.getOrCreateRenderNodeByName(b);u.setNode(b,w)}),a.edges().forEach(b=>{const w=a.edge(b),C=new iv(w);u.setEdge(b.v,b.w,C)});const d=s.node.parentNode;if(!d)return;const g=this.getRenderNodeByName(d.name),p=(b,...w)=>w.concat([b?"IN":"OUT"]).join("~~"),m=this.hierarchy.getBridgeGraph(r);m.edges().forEach(b=>{const w=m.edge(b),C=!!a.node(b.w),[O,A]=C?[b.w,b.v]:[b.v,b.w],M=F=>{const Z=C?{v:F,w:r}:{v:r,w:F};return g.coreGraph.edge(Z)};let P=M(A);P||(P=M(p(C,A,d.name)));const I=p(C,r),N=p(C,A,r);let R=u.node(N);if(!R){let F=u.node(I);if(!F){const ot={name:I,type:or.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:Pi.UNSPECIFIED,inbound:C,attr:{}};F=new _a(ot),this.index[I]=F,u.setNode(I,F)}const Z={name:N,type:or.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:Pi.UNSPECIFIED,inbound:C,attr:{}};R=new _a(Z),this.index[N]=R,u.setNode(N,R),u.setParent(N,I),F.node.cardinality++}const z=new iv(w);z.adjoiningMetaEdge=P,C?u.setEdge(N,O,z):u.setEdge(O,N,z)})}getOrCreateRenderNodeByName(r){if(!r)return null;if(r in this.index)return this.index[r];const o=this.getNodeByName(r);return o?(this.index[r]=o.isGroupNode?new ov(o,this.hierarchy.graphOptions):new _a(o),this.index[r]):null}getRenderNodeByName(r){return this.index[r]}getNodeByName(r){return this.hierarchy.node(r)}}class _a{constructor(r){this.node=r,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=r.width||0,this.height=r.height||0,this.displayName=r.name,this.attr=r.attr}}class iv{constructor(r){this.metaEdge=r,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class ov extends _a{constructor(r,o){super(r);const s=r.metaGraph.graph();o.compound=!0,this.coreGraph=ul(s.name,oa.CORE,o)}}function sv(n,r){n.node.isGroupNode&&function(o,s){const a=Sc(s);o.coreGraph.nodes().map(u=>o.coreGraph.node(u)).forEach(u=>{var d,g,p,m,b,w;const{height:C,width:O}=u;switch(u.node.type){case or.NODE:Object.assign(u,a.nodeSize.node),u.height=C||a.nodeSize.node.height,u.width=O||a.nodeSize.node.width;break;case or.BRIDGE:Object.assign(u,a.nodeSize.bridge);break;case or.META:u.expanded?sv(u,s):(Object.assign(u,a.nodeSize.meta),u.height=a.nodeSize.meta.height,u.width=a.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+u.node.type)}if(!u.expanded){const A=u.attr;(function(M,P=!1){if(M.coreBox.width=M.width,M.coreBox.height=M.height,!P){const I=`${M.displayName}`.length,N=3;M.width=Math.max(M.coreBox.width,I*N)}})(u,s&&(u.node.type===0&&!!(!((g=(d=s==null?void 0:s.nodeSize)===null||d===void 0?void 0:d.meta)===null||g===void 0)&&g.width)||u.node.type===1&&(!!(!((m=(p=s==null?void 0:s.nodeSize)===null||p===void 0?void 0:p.node)===null||m===void 0)&&m.width)||!!A.width)||u.node.type===2&&!!(!((w=(b=s==null?void 0:s.nodeSize)===null||b===void 0?void 0:b.bridge)===null||w===void 0)&&w.width)))}})}(n,r),n.node.type===or.META&&function(o,s){const a=Sc(s),u=a.subScene.meta;Object.assign(o,u);const{nodeSep:d,rankSep:g,edgeSep:p,align:m}=a.graph.meta,b={nodesep:d,ranksep:g,edgesep:p,align:m};Object.assign(o.coreBox,function(O,A){const{ranksep:M,nodesep:P,edgesep:I,align:N}=A;Object.assign(O.graph(),{ranksep:M,nodesep:P,edgesep:I,align:N});const R=[];if(O.nodes().forEach(nt=>{O.node(nt).node.type!==or.BRIDGE&&R.push(nt)}),!R.length)return{width:0,height:0};oE(O);let z=1/0,F=1/0,Z=-1/0,ot=-1/0;return R.forEach(nt=>{const q=O.node(nt),et=.5*q.width,st=q.x-et,U=q.x+et;z=st<z?st:z,Z=U>Z?U:Z;const ct=.5*q.height,_t=q.y-ct,Tt=q.y+ct;F=_t<F?_t:F,ot=Tt>ot?Tt:ot}),O.edges().forEach(nt=>{const q=O.edge(nt),et=O.node(q.metaEdge.v),st=O.node(q.metaEdge.w);if(q.points.length===3&&function(_t){let Tt=av(_t[0],_t[1]);for(let te=1;te<_t.length-1;te++){const $t=av(_t[te],_t[te+1]);if(Math.abs($t-Tt)>1)return!1;Tt=$t}return!0}(q.points)){if(et!=null){const _t=et.expanded?et.x:Rh(et);q.points[0].x=_t}if(st!=null){const _t=st.expanded?st.x:Rh(st);q.points[2].x=_t}q.points=[q.points[0],q.points[1]]}const U=q.points[q.points.length-2];st!=null&&(q.points[q.points.length-1]=cv(U,st));const ct=q.points[1];et!=null&&(q.points[0]=cv(ct,et)),q.points.forEach(_t=>{z=_t.x<z?_t.x:z,Z=_t.x>Z?_t.x:Z,F=_t.y<F?_t.y:F,ot=_t.y>ot?_t.y:ot})}),O.nodes().forEach(nt=>{const q=O.node(nt);q.x-=z,q.y-=F}),O.edges().forEach(nt=>{O.edge(nt).points.forEach(q=>{q.x-=z,q.y-=F})}),{width:Z-z,height:ot-F}}(o.coreGraph,b));let w=0;o.coreGraph.nodeCount()>0&&w++;const C=w<=1?0:w;o.coreBox.width+=C+C,o.coreBox.height=u.labelHeight+o.coreBox.height,o.width=o.coreBox.width+u.paddingLeft+u.paddingRight,o.height=o.paddingTop+o.coreBox.height+o.paddingBottom}(n,r)}function av(n,r){const o=r.x-n.x,s=r.y-n.y;return 180*Math.atan(s/o)/Math.PI}function Rh(n){return n.expanded?n.x:n.x-n.width/2+0+n.coreBox.width/2}function cv(n,r){const o=r.expanded?r.x:Rh(r),s=r.y,a=n.x-o,u=n.y-s;let d,g,p=r.expanded?r.width:r.coreBox.width,m=r.expanded?r.height:r.coreBox.height;return Math.abs(u)*p/2>Math.abs(a)*m/2?(u<0&&(m=-m),d=u===0?0:m/2*a/u,g=m/2):(a<0&&(p=-p),d=p/2,g=a===0?0:p/2*u/a),{x:o+d,y:s+g}}function uE(n,r,o){var s,a,u,d;const g=n.nodes.filter((w,C,O)=>O.findIndex(A=>A.id===w.id)!==C).map(w=>w.id);if(g.length)throw new Error(`Duplicated ids found: ${g.join(", ")}`);const p=function(w){const C={nodes:[]},O=w.compound,A=Object.keys(O||{}),M=new Map,P=(N,R=[])=>{if(M.has(N))return M.get(N);for(let z=0;z<A.length;z++){let F=A[z];if(O&&O[F].indexOf(N)!==-1)return R.unshift(F),P(F,R)}return R.length===0&&M.set(N,R),R},I=N=>w.edges.filter(R=>R.w===N).map(R=>({name:R.v}));return w.nodes.forEach(N=>{const R=N.id,z=[...P(R),R];let F=I(R);C.nodes.push({name:R,path:z,inputs:F,width:N.width,height:N.height,attr:Object.assign({},N)})}),C}(n),m=function(w,C){const O=(M,P)=>{for(let I of P.values())if(I.includes(M))return!0;return!1},A=(M,P=[])=>{if(Object.keys(M).length===0)return[...new Set(P)];const I=new Map(Object.keys(M).map(R=>[R,M[R]])),N={};for(let[R,z]of I)O(R,I)?N[R]=z:P=P.concat(R,z);return A(N,P)};return A(w).filter(M=>C.includes(M))}(n.compound||{},(r==null?void 0:r.expanded)||[]),b=function(w,C){return function(O){return new rv(O)}(ev(cE(w),C))}(p,{rankDirection:((a=(s=o==null?void 0:o.graph)===null||s===void 0?void 0:s.meta)===null||a===void 0?void 0:a.rankDir)||(r==null?void 0:r.rankDirection)||Cc.graph.meta.rankDir,align:((d=(u=o==null?void 0:o.graph)===null||u===void 0?void 0:u.meta)===null||d===void 0?void 0:d.align)||Cc.graph.meta.align});return function(w,C){C.forEach(O=>{const A=w.getRenderInfoNodes().find(I=>I.displayName===O);let M=A&&A.node&&A.node.name||"";const P=w.getRenderNodeByName(M);if(!P)throw new Error(`No nodes found: ${M}`);P.expanded=!0,w.buildSubHierarchy(M)})}(b,m),sv(b.root,o),Lh(b.root)}function hE(n,r=!1){const o=JSON.parse(JSON.stringify(n)),s={nodes:[o],edges:[...o.edges]};return o.nodes.forEach(function a(u){(u.type===0||u.type===1)&&s.nodes.push(u),u.type===0&&(s.edges=s.edges.concat(u.edges)),Array.isArray(u.nodes)&&u.nodes.forEach(a)}),r&&s.nodes.forEach(a=>{const u=s.nodes.find(d=>d.id===a.parentNodeName);if(u){const d=u.x-u.width/2+u.paddingLeft,g=u.y-u.height/2+u.labelHeight+u.paddingTop;u.id!==fo&&(a.x+=d,a.y+=g),a.type===0&&a.edges.forEach(p=>{p.points.forEach(m=>{m.x+=a.x-a.width/2+a.paddingLeft,m.y+=a.y-a.height/2+a.labelHeight+a.paddingTop})})}}),s}function lv(n,r,o,s){var a,u;let d=[];const g=((a=o.find(w=>w.id===n))===null||a===void 0?void 0:a.path)||[],p=((u=o.find(w=>w.id===r))===null||u===void 0?void 0:u.path)||[],m=[fo,...g].slice(0,g.length).reverse(),b=[fo,...p].slice(0,p.length);return m.forEach(w=>{const C=o.find(O=>O.id===w);d=d.concat(C.edges.filter(O=>O.baseEdgeList.some(A=>A.v===((s==null?void 0:s.v)||n)&&A.w===((s==null?void 0:s.w)||r))))}),b.filter(w=>!m.includes(w)).forEach(w=>{const C=o.find(O=>O.id===w);d=d.concat(C.edges.filter(O=>O.baseEdgeList.some(A=>A.v===((s==null?void 0:s.v)||n)&&A.w===((s==null?void 0:s.w)||r))))}),d}function Lh(n){const r=n.coreGraph.nodes().map(s=>n.coreGraph.node(s));return Object.assign(Object.assign({},uv(n)),{expanded:n.expanded,nodes:n.expanded?(o=r,o.map(s=>s.node.type===or.META?Lh(s):uv(s))):[],edges:n.expanded?Ca(n):[]});var o}function uv(n){return{id:n.node.name,name:n.node.name,type:n.node.type,cardinality:n.node.cardinality,attr:n.attr,parentNodeName:n.node.parentNode?n.node.parentNode.name:null,coreBox:Object.assign({},n.coreBox),x:n.x,y:n.y,width:n.width,height:n.height,radius:n.radius,labelHeight:n.labelHeight,labelOffset:n.labelOffset,outboxWidth:n.outboxWidth,paddingLeft:n.paddingLeft,paddingTop:n.paddingTop,paddingRight:n.paddingRight,paddingBottom:n.paddingBottom,path:n.node.path}}function Ca(n){return n.coreGraph.edges().map(r=>({renderInfoEdge:n.coreGraph.edge(r),edge:r})).filter(({renderInfoEdge:r})=>r.metaEdge).map(({edge:r,renderInfoEdge:o})=>{const s=function(a,u){const d=u.points.map(g=>Object.assign({},g));if(u.adjoiningMetaEdge){const g=u.adjoiningMetaEdge.points,p=u.metaEdge.inbound,m=p?g[g.length-1]:g[0],b=d[p?0:d.length-1],w=a.x-a.width/2,C=a.y-a.height/2,O=m.x-w,A=m.y-C,M=-a.paddingLeft,P=-(a.paddingTop+a.labelHeight);b.x=O+M,b.y=A+P}return d}(n,o);return{adjoiningEdge:o.adjoiningMetaEdge?{w:o.adjoiningMetaEdge.metaEdge.w,v:o.adjoiningMetaEdge.metaEdge.v}:null,inbound:o.metaEdge.inbound,w:r.w,v:r.v,points:s,weight:o.weight,baseEdgeList:o.metaEdge.baseEdgeList,parentNodeName:n.node.name}})}class dE extends tt{constructor(r){super(),this.rankdir="TB",this.nodesep=50,this.edgesep=5,this.ranksep=50,this.controlPoints=!0,this.anchorPoint=!0,this.nodes=[],this.edges=[],this.combos=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}}init(r){const o=r.hiddenNodes||[],s=r.hiddenEdges||[],a=r.hiddenCombos||[];this.nodes=this.getDataByOrder((r.nodes||[]).concat(o)),this.edges=this.getDataByOrder((r.edges||[]).concat(s)),this.combos=(r.combos||[]).concat(a.map(u=>Object.assign(Object.assign({},u),{collapsed:!0})))}execute(){const r=this,{nodes:o,edges:s}=r;if(!o)return;const{graphDef:a,graphOption:u,graphSettings:d}=r.getLayoutConfig(),g=uE(a,u,d),p=hE(g,!0);return this.updatePosition(p),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:s}}getNodePath(r){const o=this,{nodes:s,combos:a}=o,u=s.find(g=>g.id===r),d=(g,p=[])=>{const m=a.find(b=>b.id===g);return m?(p.unshift(g),m.parentId?d(m.parentId,p):p):p};return u&&u.comboId?d(u.comboId,[r]):[r]}getLayoutConfig(){var r,o,s;const a=this,{nodes:u,edges:d,combos:g,nodeSize:p,rankdir:m,align:b,edgesep:w,nodesep:C,ranksep:O,settings:A}=a,M=(g||[]).reduce((ct,_t)=>{const Tt=u.filter($t=>$t.comboId===_t.id).map($t=>$t.id),te=(g||[]).filter($t=>$t.parentId===_t.id).map($t=>$t.id);return(Tt.length||te.length)&&(ct[_t.id]=[...Tt,...te]),ct},{});let P;p?Ft(p)?P=()=>p:P=()=>[p,p]:P=ct=>ct&&ct.size?Ft(ct.size)?ct.size:Mt(ct.size)?[ct.size.width||40,ct.size.height||40]:[ct.size,ct.size]:[40,40];const I=ct=>ct&&ct.size?Ft(ct.size)?ct.size:[ct.size,ct.size]:[80,40],[N,R]=I(g==null?void 0:g[0]),z=(o=(r=a.graphSettings)===null||r===void 0?void 0:r.subScene)===null||o===void 0?void 0:o.meta,[F,Z,ot,nt]=((s=g.find(ct=>!ct.collapsed))===null||s===void 0?void 0:s.padding)||[20,20,20,20],q={compound:M,nodes:[...(u||[]).map(ct=>{const _t=P(ct),Tt=_t[0],te=_t[1];return Object.assign(Object.assign({},ct),{width:Tt,height:te})})],edges:[...(d||[]).map(ct=>Object.assign(Object.assign({},ct),{v:ct.source,w:ct.target}))]},et={expanded:(g||[]).filter(ct=>!ct.collapsed).map(ct=>ct.id)},st={graph:{meta:{align:b,rankDir:m,nodeSep:C,edgeSep:w,rankSep:O}},subScene:{meta:{paddingTop:F||(z==null?void 0:z.paddingTop)||20,paddingRight:Z||(z==null?void 0:z.paddingRight)||20,paddingBottom:ot||(z==null?void 0:z.paddingBottom)||20,paddingLeft:nt||(z==null?void 0:z.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:N,height:R}}},U=Sc(A,Object.assign({},Sc(st,Cc)));return a.graphSettings=U,{graphDef:q,graphOption:et,graphSettings:U}}updatePosition(r){const{nodes:o,edges:s}=r;this.updateNodePosition(o,s),this.updateEdgePosition(o,s)}getBegin(r,o){const s=this,{begin:a}=s,u=[0,0];if(a){let d=1/0,g=1/0;r.forEach(p=>{d>p.x&&(d=p.x),g>p.y&&(g=p.y)}),o.forEach(p=>{p.points.forEach(m=>{d>m.x&&(d=m.x),g>m.y&&(g=m.y)})}),u[0]=a[0]-d,u[1]=a[1]-g}return u}updateNodePosition(r,o){const s=this,{combos:a,nodes:u,edges:d,anchorPoint:g,graphSettings:p}=s,m=this.getBegin(r,o);r.forEach(b=>{var w;const{x:C,y:O,id:A,type:M,coreBox:P}=b;if(M===si.META&&A!==fo){const I=a.findIndex(R=>R.id===A),N=(w=p==null?void 0:p.subScene)===null||w===void 0?void 0:w.meta;a[I].offsetX=C+m[0],a[I].offsetY=O+m[1],a[I].fixSize=[P.width,P.height],a[I].fixCollapseSize=[P.width,P.height],b.expanded?a[I].padding=[N==null?void 0:N.paddingTop,N==null?void 0:N.paddingRight,N==null?void 0:N.paddingBottom,N==null?void 0:N.paddingLeft]:a[I].padding=[0,0,0,0]}else if(M===si.OP){const I=u.findIndex(N=>N.id===A);if(u[I].x=C+m[0],u[I].y=O+m[1],g){const N=[],R=o.filter(F=>F.v===A),z=o.filter(F=>F.w===A);R.length>0&&R.forEach(F=>{const Z=F.points[0],ot=(Z.x-C)/b.width+.5,nt=(Z.y-O)/b.height+.5;N.push([ot,nt]),F.baseEdgeList.forEach(q=>{const et=d.find(st=>st.source===q.v&&st.target===q.w);et&&(et.sourceAnchor=N.length-1)})}),z.length>0&&z.forEach(F=>{const Z=F.points[F.points.length-1],ot=(Z.x-C)/b.width+.5,nt=(Z.y-O)/b.height+.5;N.push([ot,nt]),F.baseEdgeList.forEach(q=>{const et=d.find(st=>st.source===q.v&&st.target===q.w);et&&(et.targetAnchor=N.length-1)})}),u[I].anchorPoints=N.length>0?N:u[I].anchorPoints||[]}}})}updateEdgePosition(r,o){const s=this,{combos:a,edges:u,controlPoints:d}=s,g=this.getBegin(r,o);d&&(a.forEach(p=>{p.inEdges=[],p.outEdges=[]}),u.forEach(p=>{var m,b,w,C;let O=r.find(I=>I.id===p.source),A=r.find(I=>I.id===p.target),M=[],P=[];if(O&&A)P=lv(O==null?void 0:O.id,A==null?void 0:A.id,r);else if(!O||!A){const I=s.getNodePath(p.source),N=s.getNodePath(p.target),R=I.reverse().slice(O?0:1).find(F=>r.find(Z=>Z.id===F)),z=N.reverse().slice(A?0:1).find(F=>r.find(Z=>Z.id===F));O=r.find(F=>F.id===R),A=r.find(F=>F.id===z),P=lv(O==null?void 0:O.id,A==null?void 0:A.id,r,{v:p.source,w:p.target})}if(M=P.reduce((I,N)=>[...I,...N.points.map(R=>Object.assign(Object.assign({},R),{x:R.x+g[0],y:R.y+g[1]}))],[]),M=M.slice(1,-1),p.controlPoints=M,(A==null?void 0:A.type)===or.META){const I=a.findIndex(N=>N.id===(A==null?void 0:A.id));if(!a[I]||!((m=a[I].inEdges)===null||m===void 0)&&m.some(N=>N.source===O.id&&N.target===A.id))return;(b=a[I].inEdges)===null||b===void 0||b.push({source:O.id,target:A.id,controlPoints:M})}if((O==null?void 0:O.type)===or.META){const I=a.findIndex(N=>N.id===(O==null?void 0:O.id));if(!a[I]||!((w=a[I].outEdges)===null||w===void 0)&&w.some(N=>N.source===O.id&&N.target===A.id))return;(C=a[I].outEdges)===null||C===void 0||C.push({source:O.id,target:A.id,controlPoints:M})}}))}getType(){return"dagreCompound"}getDataByOrder(r){return r.every(o=>o.layoutOrder!==void 0)||r.forEach((o,s)=>{o.layoutOrder=s}),r.sort((o,s)=>o.layoutOrder-s.layoutOrder)}}var hv=k(50819),dv=k.n(hv),fE=k(41553),gE=k.n(fE),Sa=k(49488),fv=k.n(Sa),pE=k(84047),gv=k.n(pE),kh=k(78796),hl=k.n(kh),vE=k(4977),Zr=k.n(vE);const pv=Object.prototype.toString;function hs(n){const r=pv.call(n);return r.endsWith("Array]")&&!r.includes("Big")}function GC(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hs(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var o=r.fromIndex,s=o===void 0?0:o,a=r.toIndex,u=a===void 0?n.length:a;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=s||u>n.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var d=n[s],g=s+1;g<u;g++)n[g]>d&&(d=n[g]);return d}function jC(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!hs(n))throw new TypeError("input must be an array");if(n.length===0)throw new TypeError("input must not be empty");var o=r.fromIndex,s=o===void 0?0:o,a=r.toIndex,u=a===void 0?n.length:a;if(s<0||s>=n.length||!Number.isInteger(s))throw new Error("fromIndex must be a positive integer smaller than length");if(u<=s||u>n.length||!Number.isInteger(u))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var d=n[s],g=s+1;g<u;g++)n[g]<d&&(d=n[g]);return d}function mE(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(hs(n)){if(n.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var o;if(r.output!==void 0){if(!hs(r.output))throw new TypeError("output option must be an array if specified");o=r.output}else o=new Array(n.length);var s=jC(n),a=GC(n);if(s===a)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var u=r.min,d=u===void 0?r.autoMinMax?s:0:u,g=r.max,p=g===void 0?r.autoMinMax?a:1:g;if(d>=p)throw new RangeError("min option must be smaller than max option");for(var m=(p-d)/(a-s),b=0;b<n.length;b++)o[b]=(n[b]-s)*m+d;return o}var Bh=" ".repeat(2),yE=" ".repeat(4);function zh(){return Oa(this)}function Oa(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=r.maxRows,s=o===void 0?15:o,a=r.maxColumns,u=a===void 0?10:a,d=r.maxNumSize,g=d===void 0?8:d;return"".concat(n.constructor.name,` {
`).concat(Bh,`[
`).concat(yE).concat(bE(n,s,u,g),`
`).concat(Bh,`]
`).concat(Bh,"rows: ").concat(n.rows,`
`).concat(Bh,"columns: ").concat(n.columns,`
}`)}function bE(n,r,o,s){for(var a=n.rows,u=n.columns,d=Math.min(a,r),g=Math.min(u,o),p=[],m=0;m<d;m++){for(var b=[],w=0;w<g;w++)b.push(xE(n.get(m,w),s));p.push("".concat(b.join(" ")))}return g!==u&&(p[p.length-1]+=" ... ".concat(u-o," more columns")),d!==a&&p.push("... ".concat(a-r," more rows")),p.join(`
`.concat(yE))}function xE(n,r){var o=String(n);if(o.length<=r)return o.padEnd(r," ");var s=n.toPrecision(r-2);if(s.length<=r)return s;var a=n.toExponential(r-2),u=a.indexOf("e"),d=a.slice(u);return a.slice(0,r-d.length)+d}function wE(n,r){n.prototype.add=function(s){return typeof s=="number"?this.addS(s):this.addM(s)},n.prototype.addS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)+s);return this},n.prototype.addM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)+s.get(a,u));return this},n.add=function(s,a){var u=new r(s);return u.add(a)},n.prototype.sub=function(s){return typeof s=="number"?this.subS(s):this.subM(s)},n.prototype.subS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)-s);return this},n.prototype.subM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)-s.get(a,u));return this},n.sub=function(s,a){var u=new r(s);return u.sub(a)},n.prototype.subtract=n.prototype.sub,n.prototype.subtractS=n.prototype.subS,n.prototype.subtractM=n.prototype.subM,n.subtract=n.sub,n.prototype.mul=function(s){return typeof s=="number"?this.mulS(s):this.mulM(s)},n.prototype.mulS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)*s);return this},n.prototype.mulM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)*s.get(a,u));return this},n.mul=function(s,a){var u=new r(s);return u.mul(a)},n.prototype.multiply=n.prototype.mul,n.prototype.multiplyS=n.prototype.mulS,n.prototype.multiplyM=n.prototype.mulM,n.multiply=n.mul,n.prototype.div=function(s){return typeof s=="number"?this.divS(s):this.divM(s)},n.prototype.divS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)/s);return this},n.prototype.divM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)/s.get(a,u));return this},n.div=function(s,a){var u=new r(s);return u.div(a)},n.prototype.divide=n.prototype.div,n.prototype.divideS=n.prototype.divS,n.prototype.divideM=n.prototype.divM,n.divide=n.div,n.prototype.mod=function(s){return typeof s=="number"?this.modS(s):this.modM(s)},n.prototype.modS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)%s);return this},n.prototype.modM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)%s.get(a,u));return this},n.mod=function(s,a){var u=new r(s);return u.mod(a)},n.prototype.modulus=n.prototype.mod,n.prototype.modulusS=n.prototype.modS,n.prototype.modulusM=n.prototype.modM,n.modulus=n.mod,n.prototype.and=function(s){return typeof s=="number"?this.andS(s):this.andM(s)},n.prototype.andS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)&s);return this},n.prototype.andM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)&s.get(a,u));return this},n.and=function(s,a){var u=new r(s);return u.and(a)},n.prototype.or=function(s){return typeof s=="number"?this.orS(s):this.orM(s)},n.prototype.orS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)|s);return this},n.prototype.orM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)|s.get(a,u));return this},n.or=function(s,a){var u=new r(s);return u.or(a)},n.prototype.xor=function(s){return typeof s=="number"?this.xorS(s):this.xorM(s)},n.prototype.xorS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)^s);return this},n.prototype.xorM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)^s.get(a,u));return this},n.xor=function(s,a){var u=new r(s);return u.xor(a)},n.prototype.leftShift=function(s){return typeof s=="number"?this.leftShiftS(s):this.leftShiftM(s)},n.prototype.leftShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)<<s);return this},n.prototype.leftShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)<<s.get(a,u));return this},n.leftShift=function(s,a){var u=new r(s);return u.leftShift(a)},n.prototype.signPropagatingRightShift=function(s){return typeof s=="number"?this.signPropagatingRightShiftS(s):this.signPropagatingRightShiftM(s)},n.prototype.signPropagatingRightShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>s);return this},n.prototype.signPropagatingRightShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>s.get(a,u));return this},n.signPropagatingRightShift=function(s,a){var u=new r(s);return u.signPropagatingRightShift(a)},n.prototype.rightShift=function(s){return typeof s=="number"?this.rightShiftS(s):this.rightShiftM(s)},n.prototype.rightShiftS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>>s);return this},n.prototype.rightShiftM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,this.get(a,u)>>>s.get(a,u));return this},n.rightShift=function(s,a){var u=new r(s);return u.rightShift(a)},n.prototype.zeroFillRightShift=n.prototype.rightShift,n.prototype.zeroFillRightShiftS=n.prototype.rightShiftS,n.prototype.zeroFillRightShiftM=n.prototype.rightShiftM,n.zeroFillRightShift=n.rightShift,n.prototype.not=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,~this.get(s,a));return this},n.not=function(s){var a=new r(s);return a.not()},n.prototype.abs=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.abs(this.get(s,a)));return this},n.abs=function(s){var a=new r(s);return a.abs()},n.prototype.acos=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.acos(this.get(s,a)));return this},n.acos=function(s){var a=new r(s);return a.acos()},n.prototype.acosh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.acosh(this.get(s,a)));return this},n.acosh=function(s){var a=new r(s);return a.acosh()},n.prototype.asin=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.asin(this.get(s,a)));return this},n.asin=function(s){var a=new r(s);return a.asin()},n.prototype.asinh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.asinh(this.get(s,a)));return this},n.asinh=function(s){var a=new r(s);return a.asinh()},n.prototype.atan=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.atan(this.get(s,a)));return this},n.atan=function(s){var a=new r(s);return a.atan()},n.prototype.atanh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.atanh(this.get(s,a)));return this},n.atanh=function(s){var a=new r(s);return a.atanh()},n.prototype.cbrt=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cbrt(this.get(s,a)));return this},n.cbrt=function(s){var a=new r(s);return a.cbrt()},n.prototype.ceil=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.ceil(this.get(s,a)));return this},n.ceil=function(s){var a=new r(s);return a.ceil()},n.prototype.clz32=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.clz32(this.get(s,a)));return this},n.clz32=function(s){var a=new r(s);return a.clz32()},n.prototype.cos=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cos(this.get(s,a)));return this},n.cos=function(s){var a=new r(s);return a.cos()},n.prototype.cosh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.cosh(this.get(s,a)));return this},n.cosh=function(s){var a=new r(s);return a.cosh()},n.prototype.exp=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.exp(this.get(s,a)));return this},n.exp=function(s){var a=new r(s);return a.exp()},n.prototype.expm1=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.expm1(this.get(s,a)));return this},n.expm1=function(s){var a=new r(s);return a.expm1()},n.prototype.floor=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.floor(this.get(s,a)));return this},n.floor=function(s){var a=new r(s);return a.floor()},n.prototype.fround=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.fround(this.get(s,a)));return this},n.fround=function(s){var a=new r(s);return a.fround()},n.prototype.log=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log(this.get(s,a)));return this},n.log=function(s){var a=new r(s);return a.log()},n.prototype.log1p=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log1p(this.get(s,a)));return this},n.log1p=function(s){var a=new r(s);return a.log1p()},n.prototype.log10=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log10(this.get(s,a)));return this},n.log10=function(s){var a=new r(s);return a.log10()},n.prototype.log2=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.log2(this.get(s,a)));return this},n.log2=function(s){var a=new r(s);return a.log2()},n.prototype.round=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.round(this.get(s,a)));return this},n.round=function(s){var a=new r(s);return a.round()},n.prototype.sign=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sign(this.get(s,a)));return this},n.sign=function(s){var a=new r(s);return a.sign()},n.prototype.sin=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sin(this.get(s,a)));return this},n.sin=function(s){var a=new r(s);return a.sin()},n.prototype.sinh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sinh(this.get(s,a)));return this},n.sinh=function(s){var a=new r(s);return a.sinh()},n.prototype.sqrt=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.sqrt(this.get(s,a)));return this},n.sqrt=function(s){var a=new r(s);return a.sqrt()},n.prototype.tan=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.tan(this.get(s,a)));return this},n.tan=function(s){var a=new r(s);return a.tan()},n.prototype.tanh=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.tanh(this.get(s,a)));return this},n.tanh=function(s){var a=new r(s);return a.tanh()},n.prototype.trunc=function(){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,Math.trunc(this.get(s,a)));return this},n.trunc=function(s){var a=new r(s);return a.trunc()},n.pow=function(s,a){var u=new r(s);return u.pow(a)},n.prototype.pow=function(s){return typeof s=="number"?this.powS(s):this.powM(s)},n.prototype.powS=function(s){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,Math.pow(this.get(a,u),s));return this},n.prototype.powM=function(s){if(s=r.checkMatrix(s),this.rows!==s.rows||this.columns!==s.columns)throw new RangeError("Matrices dimensions must be equal");for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.set(a,u,Math.pow(this.get(a,u),s.get(a,u)));return this}}function Gr(n,r,o){var s=o?n.rows:n.rows-1;if(r<0||r>s)throw new RangeError("Row index out of range")}function Sr(n,r,o){var s=o?n.columns:n.columns-1;if(r<0||r>s)throw new RangeError("Column index out of range")}function ds(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.columns)throw new RangeError("vector size must be the same as the number of columns");return r}function fs(n,r){if(r.to1DArray&&(r=r.to1DArray()),r.length!==n.rows)throw new RangeError("vector size must be the same as the number of rows");return r}function EE(n,r,o){return{row:Or(n,r),column:VC(n,o)}}function Or(n,r){if(nr()(r)!=="object")throw new TypeError("unexpected type for row indices");var o=r.some(function(s){return s<0||s>=n.rows});if(o)throw new RangeError("row indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function VC(n,r){if(nr()(r)!=="object")throw new TypeError("unexpected type for column indices");var o=r.some(function(s){return s<0||s>=n.columns});if(o)throw new RangeError("column indices are out of range");return Array.isArray(r)||(r=Array.from(r)),r}function _E(n,r,o,s,a){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(ur("startRow",r),ur("endRow",o),ur("startColumn",s),ur("endColumn",a),r>o||s>a||r<0||r>=n.rows||o<0||o>=n.rows||s<0||s>=n.columns||a<0||a>=n.columns)throw new RangeError("Submatrix indices are out of range")}function Ar(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=[],s=0;s<n;s++)o.push(r);return o}function ur(n,r){if(typeof r!="number")throw new TypeError("".concat(n," must be a number"))}function UC(n){for(var r=Ar(n.rows),o=0;o<n.rows;++o)for(var s=0;s<n.columns;++s)r[o]+=n.get(o,s);return r}function Co(n){for(var r=Ar(n.columns),o=0;o<n.rows;++o)for(var s=0;s<n.columns;++s)r[s]+=n.get(o,s);return r}function Fh(n){for(var r=0,o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)r+=n.get(o,s);return r}function vv(n){for(var r=Ar(n.rows,1),o=0;o<n.rows;++o)for(var s=0;s<n.columns;++s)r[o]*=n.get(o,s);return r}function mv(n){for(var r=Ar(n.columns,1),o=0;o<n.rows;++o)for(var s=0;s<n.columns;++s)r[s]*=n.get(o,s);return r}function yv(n){for(var r=1,o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)r*=n.get(o,s);return r}function bv(n,r,o){for(var s=n.rows,a=n.columns,u=[],d=0;d<s;d++){for(var g=0,p=0,m=0,b=0;b<a;b++)m=n.get(d,b)-o[d],g+=m,p+=m*m;r?u.push((p-g*g/a)/(a-1)):u.push((p-g*g/a)/a)}return u}function xv(n,r,o){for(var s=n.rows,a=n.columns,u=[],d=0;d<a;d++){for(var g=0,p=0,m=0,b=0;b<s;b++)m=n.get(b,d)-o[d],g+=m,p+=m*m;r?u.push((p-g*g/s)/(s-1)):u.push((p-g*g/s)/s)}return u}function wv(n,r,o){for(var s=n.rows,a=n.columns,u=s*a,d=0,g=0,p=0,m=0;m<s;m++)for(var b=0;b<a;b++)p=n.get(m,b)-o,d+=p,g+=p*p;return r?(g-d*d/u)/(u-1):(g-d*d/u)/u}function Ev(n,r){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)-r[o])}function _v(n,r){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)-r[s])}function Cv(n,r){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)-r)}function Sv(n){for(var r=[],o=0;o<n.rows;o++){for(var s=0,a=0;a<n.columns;a++)s+=Math.pow(n.get(o,a),2)/(n.columns-1);r.push(Math.sqrt(s))}return r}function Ov(n,r){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)/r[o])}function Av(n){for(var r=[],o=0;o<n.columns;o++){for(var s=0,a=0;a<n.rows;a++)s+=Math.pow(n.get(a,o),2)/(n.rows-1);r.push(Math.sqrt(s))}return r}function Tv(n,r){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)/r[s])}function Mv(n){for(var r=n.size-1,o=0,s=0;s<n.columns;s++)for(var a=0;a<n.rows;a++)o+=Math.pow(n.get(a,s),2)/r;return Math.sqrt(o)}function Iv(n,r){for(var o=0;o<n.rows;o++)for(var s=0;s<n.columns;s++)n.set(o,s,n.get(o,s)/r)}var hn=function(){function n(){hl()(this,n)}return Zr()(n,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(o){if(typeof o!="function")throw new TypeError("callback must be a function");for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)o.call(this,s,a);return this}},{key:"to1DArray",value:function(){for(var o=[],s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)o.push(this.get(s,a));return o}},{key:"to2DArray",value:function(){for(var o=[],s=0;s<this.rows;s++){o.push([]);for(var a=0;a<this.columns;a++)o[s].push(this.get(s,a))}return o}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var o=0;o<this.rows;o++)for(var s=0;s<=o;s++)if(this.get(o,s)!==this.get(s,o))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var o=0,s=0,a=-1,u=!0,d=!1;o<this.rows&&u;){for(s=0,d=!1;s<this.columns&&d===!1;)this.get(o,s)===0?s++:this.get(o,s)===1&&s>a?(d=!0,a=s):(u=!1,d=!0);o++}return u}},{key:"isReducedEchelonForm",value:function(){for(var o=0,s=0,a=-1,u=!0,d=!1;o<this.rows&&u;){for(s=0,d=!1;s<this.columns&&d===!1;)this.get(o,s)===0?s++:this.get(o,s)===1&&s>a?(d=!0,a=s):(u=!1,d=!0);for(var g=s+1;g<this.rows;g++)this.get(o,g)!==0&&(u=!1);o++}return u}},{key:"echelonForm",value:function(){for(var o=this.clone(),s=0,a=0;s<o.rows&&a<o.columns;){for(var u=s,d=s;d<o.rows;d++)o.get(d,a)>o.get(u,a)&&(u=d);if(o.get(u,a)===0)a++;else{o.swapRows(s,u);for(var g=o.get(s,a),p=a;p<o.columns;p++)o.set(s,p,o.get(s,p)/g);for(var m=s+1;m<o.rows;m++){var b=o.get(m,a)/o.get(s,a);o.set(m,a,0);for(var w=a+1;w<o.columns;w++)o.set(m,w,o.get(m,w)-o.get(s,w)*b)}s++,a++}}return o}},{key:"reducedEchelonForm",value:function(){for(var o=this.echelonForm(),s=o.columns,a=o.rows,u=a-1;u>=0;)if(o.maxRow(u)===0)u--;else{for(var d=0,g=!1;d<a&&g===!1;)o.get(u,d)===1?g=!0:d++;for(var p=0;p<u;p++)for(var m=o.get(p,d),b=d;b<s;b++){var w=o.get(p,b)-m*o.get(u,b);o.set(p,b,w)}u--}return o}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(nr()(o)!=="object")throw new TypeError("options must be an object");var s=o.rows,a=s===void 0?1:s,u=o.columns,d=u===void 0?1:u;if(!Number.isInteger(a)||a<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(d)||d<=0)throw new TypeError("columns must be a positive integer");for(var g=new be(this.rows*a,this.columns*d),p=0;p<a;p++)for(var m=0;m<d;m++)g.setSubMatrix(this,this.rows*p,this.columns*m);return g}},{key:"fill",value:function(o){for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,o);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(o){Gr(this,o);for(var s=[],a=0;a<this.columns;a++)s.push(this.get(o,a));return s}},{key:"getRowVector",value:function(o){return be.rowVector(this.getRow(o))}},{key:"setRow",value:function(o,s){Gr(this,o),s=ds(this,s);for(var a=0;a<this.columns;a++)this.set(o,a,s[a]);return this}},{key:"swapRows",value:function(o,s){Gr(this,o),Gr(this,s);for(var a=0;a<this.columns;a++){var u=this.get(o,a);this.set(o,a,this.get(s,a)),this.set(s,a,u)}return this}},{key:"getColumn",value:function(o){Sr(this,o);for(var s=[],a=0;a<this.rows;a++)s.push(this.get(a,o));return s}},{key:"getColumnVector",value:function(o){return be.columnVector(this.getColumn(o))}},{key:"setColumn",value:function(o,s){Sr(this,o),s=fs(this,s);for(var a=0;a<this.rows;a++)this.set(a,o,s[a]);return this}},{key:"swapColumns",value:function(o,s){Sr(this,o),Sr(this,s);for(var a=0;a<this.rows;a++){var u=this.get(a,o);this.set(a,o,this.get(a,s)),this.set(a,s,u)}return this}},{key:"addRowVector",value:function(o){o=ds(this,o);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+o[a]);return this}},{key:"subRowVector",value:function(o){o=ds(this,o);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-o[a]);return this}},{key:"mulRowVector",value:function(o){o=ds(this,o);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*o[a]);return this}},{key:"divRowVector",value:function(o){o=ds(this,o);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/o[a]);return this}},{key:"addColumnVector",value:function(o){o=fs(this,o);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)+o[s]);return this}},{key:"subColumnVector",value:function(o){o=fs(this,o);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)-o[s]);return this}},{key:"mulColumnVector",value:function(o){o=fs(this,o);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)*o[s]);return this}},{key:"divColumnVector",value:function(o){o=fs(this,o);for(var s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.set(s,a,this.get(s,a)/o[s]);return this}},{key:"mulRow",value:function(o,s){Gr(this,o);for(var a=0;a<this.columns;a++)this.set(o,a,this.get(o,a)*s);return this}},{key:"mulColumn",value:function(o,s){Sr(this,o);for(var a=0;a<this.rows;a++)this.set(a,o,this.get(a,o)*s);return this}},{key:"max",value:function(){for(var o=this.get(0,0),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.get(s,a)>o&&(o=this.get(s,a));return o}},{key:"maxIndex",value:function(){for(var o=this.get(0,0),s=[0,0],a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)>o&&(o=this.get(a,u),s[0]=a,s[1]=u);return s}},{key:"min",value:function(){for(var o=this.get(0,0),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)this.get(s,a)<o&&(o=this.get(s,a));return o}},{key:"minIndex",value:function(){for(var o=this.get(0,0),s=[0,0],a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)this.get(a,u)<o&&(o=this.get(a,u),s[0]=a,s[1]=u);return s}},{key:"maxRow",value:function(o){Gr(this,o);for(var s=this.get(o,0),a=1;a<this.columns;a++)this.get(o,a)>s&&(s=this.get(o,a));return s}},{key:"maxRowIndex",value:function(o){Gr(this,o);for(var s=this.get(o,0),a=[o,0],u=1;u<this.columns;u++)this.get(o,u)>s&&(s=this.get(o,u),a[1]=u);return a}},{key:"minRow",value:function(o){Gr(this,o);for(var s=this.get(o,0),a=1;a<this.columns;a++)this.get(o,a)<s&&(s=this.get(o,a));return s}},{key:"minRowIndex",value:function(o){Gr(this,o);for(var s=this.get(o,0),a=[o,0],u=1;u<this.columns;u++)this.get(o,u)<s&&(s=this.get(o,u),a[1]=u);return a}},{key:"maxColumn",value:function(o){Sr(this,o);for(var s=this.get(0,o),a=1;a<this.rows;a++)this.get(a,o)>s&&(s=this.get(a,o));return s}},{key:"maxColumnIndex",value:function(o){Sr(this,o);for(var s=this.get(0,o),a=[0,o],u=1;u<this.rows;u++)this.get(u,o)>s&&(s=this.get(u,o),a[0]=u);return a}},{key:"minColumn",value:function(o){Sr(this,o);for(var s=this.get(0,o),a=1;a<this.rows;a++)this.get(a,o)<s&&(s=this.get(a,o));return s}},{key:"minColumnIndex",value:function(o){Sr(this,o);for(var s=this.get(0,o),a=[0,o],u=1;u<this.rows;u++)this.get(u,o)<s&&(s=this.get(u,o),a[0]=u);return a}},{key:"diag",value:function(){for(var o=Math.min(this.rows,this.columns),s=[],a=0;a<o;a++)s.push(this.get(a,a));return s}},{key:"norm",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",s=0;if(o==="max")return this.max();if(o==="frobenius"){for(var a=0;a<this.rows;a++)for(var u=0;u<this.columns;u++)s=s+this.get(a,u)*this.get(a,u);return Math.sqrt(s)}else throw new RangeError("unknown norm type: ".concat(o))}},{key:"cumulativeSum",value:function(){for(var o=0,s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)o+=this.get(s,a),this.set(s,a,o);return this}},{key:"dot",value:function(o){n.isMatrix(o)&&(o=o.to1DArray());var s=this.to1DArray();if(s.length!==o.length)throw new RangeError("vectors do not have the same size");for(var a=0,u=0;u<s.length;u++)a+=s[u]*o[u];return a}},{key:"mmul",value:function(o){o=be.checkMatrix(o);for(var s=this.rows,a=this.columns,u=o.columns,d=new be(s,u),g=new Float64Array(a),p=0;p<u;p++){for(var m=0;m<a;m++)g[m]=o.get(m,p);for(var b=0;b<s;b++){for(var w=0,C=0;C<a;C++)w+=this.get(b,C)*g[C];d.set(b,p,w)}}return d}},{key:"strassen2x2",value:function(o){o=be.checkMatrix(o);var s=new be(2,2),a=this.get(0,0),u=o.get(0,0),d=this.get(0,1),g=o.get(0,1),p=this.get(1,0),m=o.get(1,0),b=this.get(1,1),w=o.get(1,1),C=(a+b)*(u+w),O=(p+b)*u,A=a*(g-w),M=b*(m-u),P=(a+d)*w,I=(p-a)*(u+g),N=(d-b)*(m+w),R=C+M-P+N,z=A+P,F=O+M,Z=C-O+A+I;return s.set(0,0,R),s.set(0,1,z),s.set(1,0,F),s.set(1,1,Z),s}},{key:"strassen3x3",value:function(o){o=be.checkMatrix(o);var s=new be(3,3),a=this.get(0,0),u=this.get(0,1),d=this.get(0,2),g=this.get(1,0),p=this.get(1,1),m=this.get(1,2),b=this.get(2,0),w=this.get(2,1),C=this.get(2,2),O=o.get(0,0),A=o.get(0,1),M=o.get(0,2),P=o.get(1,0),I=o.get(1,1),N=o.get(1,2),R=o.get(2,0),z=o.get(2,1),F=o.get(2,2),Z=(a+u+d-g-p-w-C)*I,ot=(a-g)*(-A+I),nt=p*(-O+A+P-I-N-R+F),q=(-a+g+p)*(O-A+I),et=(g+p)*(-O+A),st=a*O,U=(-a+b+w)*(O-M+N),ct=(-a+b)*(M-N),_t=(b+w)*(-O+M),Tt=(a+u+d-p-m-b-w)*N,te=w*(-O+M+P-I-N-R+z),$t=(-d+w+C)*(I+R-z),Xt=(d-C)*(I-z),ne=d*R,Ce=(w+C)*(-R+z),Pe=(-d+p+m)*(N+R-F),Qe=(d-m)*(N-F),We=(p+m)*(-R+F),Dt=u*P,re=m*z,Me=g*M,ve=b*A,Oe=C*F,kt=st+ne+Dt,Qt=Z+q+et+st+$t+ne+Ce,Xe=st+U+_t+Tt+ne+Pe+We,ae=ot+nt+q+st+ne+Pe+Qe,Ae=ot+q+et+st+re,Se=ne+Pe+Qe+We+Me,Ge=st+U+ct+te+$t+Xt+ne,tn=$t+Xt+ne+Ce+ve,wn=st+U+ct+_t+Oe;return s.set(0,0,kt),s.set(0,1,Qt),s.set(0,2,Xe),s.set(1,0,ae),s.set(1,1,Ae),s.set(1,2,Se),s.set(2,0,Ge),s.set(2,1,tn),s.set(2,2,wn),s}},{key:"mmulStrassen",value:function(o){o=be.checkMatrix(o);var s=this.clone(),a=s.rows,u=s.columns,d=o.rows,g=o.columns;u!==d&&console.warn("Multiplying ".concat(a," x ").concat(u," and ").concat(d," x ").concat(g," matrix: dimensions do not match."));function p(C,O,A){var M=C.rows,P=C.columns;if(M===O&&P===A)return C;var I=n.zeros(O,A);return I=I.setSubMatrix(C,0,0),I}var m=Math.max(a,d),b=Math.max(u,g);s=p(s,m,b),o=p(o,m,b);function w(C,O,A,M){if(A<=512||M<=512)return C.mmul(O);A%2===1&&M%2===1?(C=p(C,A+1,M+1),O=p(O,A+1,M+1)):A%2===1?(C=p(C,A+1,M),O=p(O,A+1,M)):M%2===1&&(C=p(C,A,M+1),O=p(O,A,M+1));var P=parseInt(C.rows/2,10),I=parseInt(C.columns/2,10),N=C.subMatrix(0,P-1,0,I-1),R=O.subMatrix(0,P-1,0,I-1),z=C.subMatrix(0,P-1,I,C.columns-1),F=O.subMatrix(0,P-1,I,O.columns-1),Z=C.subMatrix(P,C.rows-1,0,I-1),ot=O.subMatrix(P,O.rows-1,0,I-1),nt=C.subMatrix(P,C.rows-1,I,C.columns-1),q=O.subMatrix(P,O.rows-1,I,O.columns-1),et=w(n.add(N,nt),n.add(R,q),P,I),st=w(n.add(Z,nt),R,P,I),U=w(N,n.sub(F,q),P,I),ct=w(nt,n.sub(ot,R),P,I),_t=w(n.add(N,z),q,P,I),Tt=w(n.sub(Z,N),n.add(R,F),P,I),te=w(n.sub(z,nt),n.add(ot,q),P,I),$t=n.add(et,ct);$t.sub(_t),$t.add(te);var Xt=n.add(U,_t),ne=n.add(st,ct),Ce=n.sub(et,st);Ce.add(U),Ce.add(Tt);var Pe=n.zeros(2*$t.rows,2*$t.columns);return Pe=Pe.setSubMatrix($t,0,0),Pe=Pe.setSubMatrix(Xt,$t.rows,0),Pe=Pe.setSubMatrix(ne,0,$t.columns),Pe=Pe.setSubMatrix(Ce,$t.rows,$t.columns),Pe.subMatrix(0,A-1,0,M-1)}return w(s,o,m,b)}},{key:"scaleRows",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(nr()(o)!=="object")throw new TypeError("options must be an object");var s=o.min,a=s===void 0?0:s,u=o.max,d=u===void 0?1:u;if(!Number.isFinite(a))throw new TypeError("min must be a number");if(!Number.isFinite(d))throw new TypeError("max must be a number");if(a>=d)throw new RangeError("min must be smaller than max");for(var g=new be(this.rows,this.columns),p=0;p<this.rows;p++){var m=this.getRow(p);mE(m,{min:a,max:d,output:m}),g.setRow(p,m)}return g}},{key:"scaleColumns",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(nr()(o)!=="object")throw new TypeError("options must be an object");var s=o.min,a=s===void 0?0:s,u=o.max,d=u===void 0?1:u;if(!Number.isFinite(a))throw new TypeError("min must be a number");if(!Number.isFinite(d))throw new TypeError("max must be a number");if(a>=d)throw new RangeError("min must be smaller than max");for(var g=new be(this.rows,this.columns),p=0;p<this.columns;p++){var m=this.getColumn(p);mE(m,{min:a,max:d,output:m}),g.setColumn(p,m)}return g}},{key:"flipRows",value:function(){for(var o=Math.ceil(this.columns/2),s=0;s<this.rows;s++)for(var a=0;a<o;a++){var u=this.get(s,a),d=this.get(s,this.columns-1-a);this.set(s,a,d),this.set(s,this.columns-1-a,u)}return this}},{key:"flipColumns",value:function(){for(var o=Math.ceil(this.rows/2),s=0;s<this.columns;s++)for(var a=0;a<o;a++){var u=this.get(a,s),d=this.get(this.rows-1-a,s);this.set(a,s,d),this.set(this.rows-1-a,s,u)}return this}},{key:"kroneckerProduct",value:function(o){o=be.checkMatrix(o);for(var s=this.rows,a=this.columns,u=o.rows,d=o.columns,g=new be(s*u,a*d),p=0;p<s;p++)for(var m=0;m<a;m++)for(var b=0;b<u;b++)for(var w=0;w<d;w++)g.set(u*p+b,d*m+w,this.get(p,m)*o.get(b,w));return g}},{key:"transpose",value:function(){for(var o=new be(this.columns,this.rows),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)o.set(a,s,this.get(s,a));return o}},{key:"sortRows",value:function(){for(var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dl,s=0;s<this.rows;s++)this.setRow(s,this.getRow(s).sort(o));return this}},{key:"sortColumns",value:function(){for(var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:dl,s=0;s<this.columns;s++)this.setColumn(s,this.getColumn(s).sort(o));return this}},{key:"subMatrix",value:function(o,s,a,u){_E(this,o,s,a,u);for(var d=new be(s-o+1,u-a+1),g=o;g<=s;g++)for(var p=a;p<=u;p++)d.set(g-o,p-a,this.get(g,p));return d}},{key:"subMatrixRow",value:function(o,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.columns-1),s>a||s<0||s>=this.columns||a<0||a>=this.columns)throw new RangeError("Argument out of range");for(var u=new be(o.length,a-s+1),d=0;d<o.length;d++)for(var g=s;g<=a;g++){if(o[d]<0||o[d]>=this.rows)throw new RangeError("Row index out of range: ".concat(o[d]));u.set(d,g-s,this.get(o[d],g))}return u}},{key:"subMatrixColumn",value:function(o,s,a){if(s===void 0&&(s=0),a===void 0&&(a=this.rows-1),s>a||s<0||s>=this.rows||a<0||a>=this.rows)throw new RangeError("Argument out of range");for(var u=new be(a-s+1,o.length),d=0;d<o.length;d++)for(var g=s;g<=a;g++){if(o[d]<0||o[d]>=this.columns)throw new RangeError("Column index out of range: ".concat(o[d]));u.set(g-s,d,this.get(g,o[d]))}return u}},{key:"setSubMatrix",value:function(o,s,a){o=be.checkMatrix(o);var u=s+o.rows-1,d=a+o.columns-1;_E(this,s,u,a,d);for(var g=0;g<o.rows;g++)for(var p=0;p<o.columns;p++)this.set(s+g,a+p,o.get(g,p));return this}},{key:"selection",value:function(o,s){for(var a=EE(this,o,s),u=new be(o.length,s.length),d=0;d<a.row.length;d++)for(var g=a.row[d],p=0;p<a.column.length;p++){var m=a.column[p];u.set(d,p,this.get(g,m))}return u}},{key:"trace",value:function(){for(var o=Math.min(this.rows,this.columns),s=0,a=0;a<o;a++)s+=this.get(a,a);return s}},{key:"clone",value:function(){for(var o=new be(this.rows,this.columns),s=0;s<this.rows;s++)for(var a=0;a<this.columns;a++)o.set(s,a,this.get(s,a));return o}},{key:"sum",value:function(o){switch(o){case"row":return UC(this);case"column":return Co(this);case void 0:return Fh(this);default:throw new Error("invalid option: ".concat(o))}}},{key:"product",value:function(o){switch(o){case"row":return vv(this);case"column":return mv(this);case void 0:return yv(this);default:throw new Error("invalid option: ".concat(o))}}},{key:"mean",value:function(o){var s=this.sum(o);switch(o){case"row":{for(var a=0;a<this.rows;a++)s[a]/=this.columns;return s}case"column":{for(var u=0;u<this.columns;u++)s[u]/=this.rows;return s}case void 0:return s/this.size;default:throw new Error("invalid option: ".concat(o))}}},{key:"variance",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nr()(o)==="object"&&(s=o,o=void 0),nr()(s)!=="object")throw new TypeError("options must be an object");var a=s,u=a.unbiased,d=u===void 0?!0:u,g=a.mean,p=g===void 0?this.mean(o):g;if(typeof d!="boolean")throw new TypeError("unbiased must be a boolean");switch(o){case"row":{if(!Array.isArray(p))throw new TypeError("mean must be an array");return bv(this,d,p)}case"column":{if(!Array.isArray(p))throw new TypeError("mean must be an array");return xv(this,d,p)}case void 0:{if(typeof p!="number")throw new TypeError("mean must be a number");return wv(this,d,p)}default:throw new Error("invalid option: ".concat(o))}}},{key:"standardDeviation",value:function(o,s){nr()(o)==="object"&&(s=o,o=void 0);var a=this.variance(o,s);if(o===void 0)return Math.sqrt(a);for(var u=0;u<a.length;u++)a[u]=Math.sqrt(a[u]);return a}},{key:"center",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nr()(o)==="object"&&(s=o,o=void 0),nr()(s)!=="object")throw new TypeError("options must be an object");var a=s,u=a.center,d=u===void 0?this.mean(o):u;switch(o){case"row":{if(!Array.isArray(d))throw new TypeError("center must be an array");return Ev(this,d),this}case"column":{if(!Array.isArray(d))throw new TypeError("center must be an array");return _v(this,d),this}case void 0:{if(typeof d!="number")throw new TypeError("center must be a number");return Cv(this,d),this}default:throw new Error("invalid option: ".concat(o))}}},{key:"scale",value:function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(nr()(o)==="object"&&(s=o,o=void 0),nr()(s)!=="object")throw new TypeError("options must be an object");var a=s.scale;switch(o){case"row":{if(a===void 0)a=Sv(this);else if(!Array.isArray(a))throw new TypeError("scale must be an array");return Ov(this,a),this}case"column":{if(a===void 0)a=Av(this);else if(!Array.isArray(a))throw new TypeError("scale must be an array");return Tv(this,a),this}case void 0:{if(a===void 0)a=Mv(this);else if(typeof a!="number")throw new TypeError("scale must be a number");return Iv(this,a),this}default:throw new Error("invalid option: ".concat(o))}}},{key:"toString",value:function(o){return Oa(this,o)}}],[{key:"from1DArray",value:function(o,s,a){var u=o*s;if(u!==a.length)throw new RangeError("data length does not match given dimensions");for(var d=new be(o,s),g=0;g<o;g++)for(var p=0;p<s;p++)d.set(g,p,a[g*s+p]);return d}},{key:"rowVector",value:function(o){for(var s=new be(1,o.length),a=0;a<o.length;a++)s.set(0,a,o[a]);return s}},{key:"columnVector",value:function(o){for(var s=new be(o.length,1),a=0;a<o.length;a++)s.set(a,0,o[a]);return s}},{key:"zeros",value:function(o,s){return new be(o,s)}},{key:"ones",value:function(o,s){return new be(o,s).fill(1)}},{key:"rand",value:function(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(nr()(a)!=="object")throw new TypeError("options must be an object");for(var u=a.random,d=u===void 0?Math.random:u,g=new be(o,s),p=0;p<o;p++)for(var m=0;m<s;m++)g.set(p,m,d());return g}},{key:"randInt",value:function(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(nr()(a)!=="object")throw new TypeError("options must be an object");var u=a.min,d=u===void 0?0:u,g=a.max,p=g===void 0?1e3:g,m=a.random,b=m===void 0?Math.random:m;if(!Number.isInteger(d))throw new TypeError("min must be an integer");if(!Number.isInteger(p))throw new TypeError("max must be an integer");if(d>=p)throw new RangeError("min must be smaller than max");for(var w=p-d,C=new be(o,s),O=0;O<o;O++)for(var A=0;A<s;A++){var M=d+Math.round(b()*w);C.set(O,A,M)}return C}},{key:"eye",value:function(o,s,a){s===void 0&&(s=o),a===void 0&&(a=1);for(var u=Math.min(o,s),d=this.zeros(o,s),g=0;g<u;g++)d.set(g,g,a);return d}},{key:"diag",value:function(o,s,a){var u=o.length;s===void 0&&(s=u),a===void 0&&(a=s);for(var d=Math.min(u,s,a),g=this.zeros(s,a),p=0;p<d;p++)g.set(p,p,o[p]);return g}},{key:"min",value:function(o,s){o=this.checkMatrix(o),s=this.checkMatrix(s);for(var a=o.rows,u=o.columns,d=new be(a,u),g=0;g<a;g++)for(var p=0;p<u;p++)d.set(g,p,Math.min(o.get(g,p),s.get(g,p)));return d}},{key:"max",value:function(o,s){o=this.checkMatrix(o),s=this.checkMatrix(s);for(var a=o.rows,u=o.columns,d=new this(a,u),g=0;g<a;g++)for(var p=0;p<u;p++)d.set(g,p,Math.max(o.get(g,p),s.get(g,p)));return d}},{key:"checkMatrix",value:function(o){return n.isMatrix(o)?o:new be(o)}},{key:"isMatrix",value:function(o){return o!=null&&o.klass==="Matrix"}}]),n}();hn.prototype.klass="Matrix",typeof Symbol!="undefined"&&(hn.prototype[Symbol.for("nodejs.util.inspect.custom")]=zh);function dl(n,r){return n-r}hn.random=hn.rand,hn.randomInt=hn.randInt,hn.diagonal=hn.diag,hn.prototype.diagonal=hn.prototype.diag,hn.identity=hn.eye,hn.prototype.negate=hn.prototype.neg,hn.prototype.tensorProduct=hn.prototype.kroneckerProduct;var be=function(n){fv()(o,n);var r=gv()(o);function o(s,a){var u;if(hl()(this,o),u=r.call(this),o.isMatrix(s))return dv()(u,s.clone());if(Number.isInteger(s)&&s>0)if(u.data=[],Number.isInteger(a)&&a>0)for(var d=0;d<s;d++)u.data.push(new Float64Array(a));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(s)){var g=s;if(s=g.length,a=g[0].length,typeof a!="number"||a===0)throw new TypeError("Data must be a 2D array with at least one element");u.data=[];for(var p=0;p<s;p++){if(g[p].length!==a)throw new RangeError("Inconsistent array dimensions");u.data.push(Float64Array.from(g[p]))}}else throw new TypeError("First argument must be a positive number or an array");return u.rows=s,u.columns=a,dv()(u,gE()(u))}return Zr()(o,[{key:"set",value:function(a,u,d){return this.data[a][u]=d,this}},{key:"get",value:function(a,u){return this.data[a][u]}},{key:"removeRow",value:function(a){if(Gr(this,a),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(a,1),this.rows-=1,this}},{key:"addRow",value:function(a,u){return u===void 0&&(u=a,a=this.rows),Gr(this,a,!0),u=Float64Array.from(ds(this,u,!0)),this.data.splice(a,0,u),this.rows+=1,this}},{key:"removeColumn",value:function(a){if(Sr(this,a),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(var u=0;u<this.rows;u++){for(var d=new Float64Array(this.columns-1),g=0;g<a;g++)d[g]=this.data[u][g];for(var p=a+1;p<this.columns;p++)d[p-1]=this.data[u][p];this.data[u]=d}return this.columns-=1,this}},{key:"addColumn",value:function(a,u){typeof u=="undefined"&&(u=a,a=this.columns),Sr(this,a,!0),u=fs(this,u);for(var d=0;d<this.rows;d++){for(var g=new Float64Array(this.columns+1),p=0;p<a;p++)g[p]=this.data[d][p];for(g[p++]=u[d];p<this.columns+1;p++)g[p]=this.data[d][p-1];this.data[d]=g}return this.columns+=1,this}}]),o}(hn);wE(hn,be);var gs=function(n){fv()(o,n);var r=gv()(o);function o(s){var a;return hl()(this,o),a=r.call(this),a.data=s,a.rows=s.length,a.columns=s[0].length,a}return Zr()(o,[{key:"set",value:function(a,u,d){return this.data[a][u]=d,this}},{key:"get",value:function(a,u){return this.data[a][u]}}]),o}(hn);function Tr(n,r){var o=0;return Math.abs(n)>Math.abs(r)?(o=r/n,Math.abs(n)*Math.sqrt(1+o*o)):r!==0?(o=n/r,Math.abs(r)*Math.sqrt(1+o*o)):0}var Fi=function(){function n(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};hl()(this,n),r=gs.checkMatrix(r);var s=r.rows,a=r.columns,u=o.computeLeftSingularVectors,d=u===void 0?!0:u,g=o.computeRightSingularVectors,p=g===void 0?!0:g,m=o.autoTranspose,b=m===void 0?!1:m,w=!!d,C=!!p,O=!1,A;if(s<a)if(!b)A=r.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{A=r.transpose(),s=A.rows,a=A.columns,O=!0;var M=w;w=C,C=M}else A=r.clone();for(var P=Math.min(s,a),I=Math.min(s+1,a),N=new Float64Array(I),R=new be(s,P),z=new be(a,a),F=new Float64Array(a),Z=new Float64Array(s),ot=new Float64Array(I),nt=0;nt<I;nt++)ot[nt]=nt;for(var q=Math.min(s-1,a),et=Math.max(0,Math.min(a-2,s)),st=Math.max(q,et),U=0;U<st;U++){if(U<q){N[U]=0;for(var ct=U;ct<s;ct++)N[U]=Tr(N[U],A.get(ct,U));if(N[U]!==0){A.get(U,U)<0&&(N[U]=-N[U]);for(var _t=U;_t<s;_t++)A.set(_t,U,A.get(_t,U)/N[U]);A.set(U,U,A.get(U,U)+1)}N[U]=-N[U]}for(var Tt=U+1;Tt<a;Tt++){if(U<q&&N[U]!==0){for(var te=0,$t=U;$t<s;$t++)te+=A.get($t,U)*A.get($t,Tt);te=-te/A.get(U,U);for(var Xt=U;Xt<s;Xt++)A.set(Xt,Tt,A.get(Xt,Tt)+te*A.get(Xt,U))}F[Tt]=A.get(U,Tt)}if(w&&U<q)for(var ne=U;ne<s;ne++)R.set(ne,U,A.get(ne,U));if(U<et){F[U]=0;for(var Ce=U+1;Ce<a;Ce++)F[U]=Tr(F[U],F[Ce]);if(F[U]!==0){F[U+1]<0&&(F[U]=0-F[U]);for(var Pe=U+1;Pe<a;Pe++)F[Pe]/=F[U];F[U+1]+=1}if(F[U]=-F[U],U+1<s&&F[U]!==0){for(var Qe=U+1;Qe<s;Qe++)Z[Qe]=0;for(var We=U+1;We<s;We++)for(var Dt=U+1;Dt<a;Dt++)Z[We]+=F[Dt]*A.get(We,Dt);for(var re=U+1;re<a;re++)for(var Me=-F[re]/F[U+1],ve=U+1;ve<s;ve++)A.set(ve,re,A.get(ve,re)+Me*Z[ve])}if(C)for(var Oe=U+1;Oe<a;Oe++)z.set(Oe,U,F[Oe])}}var kt=Math.min(a,s+1);if(q<a&&(N[q]=A.get(q,q)),s<kt&&(N[kt-1]=0),et+1<kt&&(F[et]=A.get(et,kt-1)),F[kt-1]=0,w){for(var Qt=q;Qt<P;Qt++){for(var Xe=0;Xe<s;Xe++)R.set(Xe,Qt,0);R.set(Qt,Qt,1)}for(var ae=q-1;ae>=0;ae--)if(N[ae]!==0){for(var Ae=ae+1;Ae<P;Ae++){for(var Se=0,Ge=ae;Ge<s;Ge++)Se+=R.get(Ge,ae)*R.get(Ge,Ae);Se=-Se/R.get(ae,ae);for(var tn=ae;tn<s;tn++)R.set(tn,Ae,R.get(tn,Ae)+Se*R.get(tn,ae))}for(var wn=ae;wn<s;wn++)R.set(wn,ae,-R.get(wn,ae));R.set(ae,ae,1+R.get(ae,ae));for(var qn=0;qn<ae-1;qn++)R.set(qn,ae,0)}else{for(var jo=0;jo<s;jo++)R.set(jo,ae,0);R.set(ae,ae,1)}}if(C)for(var $n=a-1;$n>=0;$n--){if($n<et&&F[$n]!==0)for(var Vo=$n+1;Vo<a;Vo++){for(var Ci=0,ks=$n+1;ks<a;ks++)Ci+=z.get(ks,$n)*z.get(ks,Vo);Ci=-Ci/z.get($n+1,$n);for(var ei=$n+1;ei<a;ei++)z.set(ei,Vo,z.get(ei,Vo)+Ci*z.get(ei,$n))}for(var Fd=0;Fd<a;Fd++)z.set(Fd,$n,0);z.set($n,$n,1)}for(var iu=kt-1,Gd=0,jd=Number.EPSILON;kt>0;){var pe=void 0,xr=void 0;for(pe=kt-2;pe>=-1&&pe!==-1;pe--){var bC=Number.MIN_VALUE+jd*Math.abs(N[pe]+Math.abs(N[pe+1]));if(Math.abs(F[pe])<=bC||Number.isNaN(F[pe])){F[pe]=0;break}}if(pe===kt-2)xr=4;else{var Ze=void 0;for(Ze=kt-1;Ze>=pe&&Ze!==pe;Ze--){var xC=(Ze!==kt?Math.abs(F[Ze]):0)+(Ze!==pe+1?Math.abs(F[Ze-1]):0);if(Math.abs(N[Ze])<=jd*xC){N[Ze]=0;break}}Ze===pe?xr=3:Ze===kt-1?xr=1:(xr=2,pe=Ze)}switch(pe++,xr){case 1:{var ic=F[kt-2];F[kt-2]=0;for(var wr=kt-2;wr>=pe;wr--){var Bs=Tr(N[wr],ic),ou=N[wr]/Bs,Vd=ic/Bs;if(N[wr]=Bs,wr!==pe&&(ic=-Vd*F[wr-1],F[wr-1]=ou*F[wr-1]),C)for(var Ur=0;Ur<a;Ur++)Bs=ou*z.get(Ur,wr)+Vd*z.get(Ur,kt-1),z.set(Ur,kt-1,-Vd*z.get(Ur,wr)+ou*z.get(Ur,kt-1)),z.set(Ur,wr,Bs)}break}case 2:{var Ud=F[pe-1];F[pe-1]=0;for(var Rr=pe;Rr<kt;Rr++){var oc=Tr(N[Rr],Ud),Qn=N[Rr]/oc,Hd=Ud/oc;if(N[Rr]=oc,Ud=-Hd*F[Rr],F[Rr]=Qn*F[Rr],w)for(var eo=0;eo<s;eo++)oc=Qn*R.get(eo,Rr)+Hd*R.get(eo,pe-1),R.set(eo,pe-1,-Hd*R.get(eo,Rr)+Qn*R.get(eo,pe-1)),R.set(eo,Rr,oc)}break}case 3:{var ni=Math.max(Math.abs(N[kt-1]),Math.abs(N[kt-2]),Math.abs(F[kt-2]),Math.abs(N[pe]),Math.abs(F[pe])),c=N[kt-1]/ni,t=N[kt-2]/ni,e=F[kt-2]/ni,i=N[pe]/ni,l=F[pe]/ni,h=((t+c)*(t-c)+e*e)/2,f=c*e*(c*e),v=0;(h!==0||f!==0)&&(h<0?v=0-Math.sqrt(h*h+f):v=Math.sqrt(h*h+f),v=f/(h+v));for(var y=(i+c)*(i-c)+v,x=i*l,E=pe;E<kt-1;E++){var S=Tr(y,x);S===0&&(S=Number.MIN_VALUE);var _=y/S,T=x/S;if(E!==pe&&(F[E-1]=S),y=_*N[E]+T*F[E],F[E]=_*F[E]-T*N[E],x=T*N[E+1],N[E+1]=_*N[E+1],C)for(var D=0;D<a;D++)S=_*z.get(D,E)+T*z.get(D,E+1),z.set(D,E+1,-T*z.get(D,E)+_*z.get(D,E+1)),z.set(D,E,S);if(S=Tr(y,x),S===0&&(S=Number.MIN_VALUE),_=y/S,T=x/S,N[E]=S,y=_*F[E]+T*N[E+1],N[E+1]=-T*F[E]+_*N[E+1],x=T*F[E+1],F[E+1]=_*F[E+1],w&&E<s-1)for(var L=0;L<s;L++)S=_*R.get(L,E)+T*R.get(L,E+1),R.set(L,E+1,-T*R.get(L,E)+_*R.get(L,E+1)),R.set(L,E,S)}F[kt-2]=y,Gd=Gd+1;break}case 4:{if(N[pe]<=0&&(N[pe]=N[pe]<0?-N[pe]:0,C))for(var B=0;B<=iu;B++)z.set(B,pe,-z.get(B,pe));for(;pe<iu&&!(N[pe]>=N[pe+1]);){var j=N[pe];if(N[pe]=N[pe+1],N[pe+1]=j,C&&pe<a-1)for(var V=0;V<a;V++)j=z.get(V,pe+1),z.set(V,pe+1,z.get(V,pe)),z.set(V,pe,j);if(w&&pe<s-1)for(var G=0;G<s;G++)j=R.get(G,pe+1),R.set(G,pe+1,R.get(G,pe)),R.set(G,pe,j);pe++}Gd=0,kt--;break}}}if(O){var X=z;z=R,R=X}this.m=s,this.n=a,this.s=N,this.U=R,this.V=z}return Zr()(n,[{key:"solve",value:function(o){for(var s=o,a=this.threshold,u=this.s.length,d=be.zeros(u,u),g=0;g<u;g++)Math.abs(this.s[g])<=a?d.set(g,g,0):d.set(g,g,1/this.s[g]);for(var p=this.U,m=this.rightSingularVectors,b=m.mmul(d),w=m.rows,C=p.rows,O=be.zeros(w,C),A=0;A<w;A++)for(var M=0;M<C;M++){for(var P=0,I=0;I<u;I++)P+=b.get(A,I)*p.get(M,I);O.set(A,M,P)}return O.mmul(s)}},{key:"solveForDiagonal",value:function(o){return this.solve(be.diag(o))}},{key:"inverse",value:function(){for(var o=this.V,s=this.threshold,a=o.rows,u=o.columns,d=new be(a,this.s.length),g=0;g<a;g++)for(var p=0;p<u;p++)Math.abs(this.s[p])>s&&d.set(g,p,o.get(g,p)/this.s[p]);for(var m=this.U,b=m.rows,w=m.columns,C=new be(a,b),O=0;O<a;O++)for(var A=0;A<b;A++){for(var M=0,P=0;P<w;P++)M+=d.get(O,P)*m.get(A,P);C.set(O,A,M)}return C}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var o=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,s=0,a=this.s,u=0,d=a.length;u<d;u++)a[u]>o&&s++;return s}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return be.diag(this.s)}}]),n}();class He{constructor(r){this.distances=r.distances,this.dimension=r.dimension||2,this.linkDistance=r.linkDistance}layout(){const r=this,{dimension:o,distances:s,linkDistance:a}=r;try{const u=be.mul(be.pow(s,2),-.5),d=u.mean("row"),g=u.mean("column"),p=u.mean();u.add(p).subRowVector(d).subColumnVector(g);const m=new Fi(u),b=be.sqrt(m.diagonalMatrix).diagonal();return m.leftSingularVectors.toJSON().map(w=>be.mul([w],[b]).toJSON()[0].splice(0,o))}catch(u){const d=[];for(let g=0;g<s.length;g++){const p=Math.random()*a,m=Math.random()*a;d.push([p,m])}return d}}}const vr=800;class Gh{constructor(r){this.disp=[],this.positions=r.positions,this.adjMatrix=r.adjMatrix,this.focusID=r.focusID,this.radii=r.radii,this.iterations=r.iterations||10,this.height=r.height||10,this.width=r.width||10,this.speed=r.speed||100,this.gravity=r.gravity||10,this.nodeSizeFunc=r.nodeSizeFunc,this.k=r.k||5,this.strictRadial=r.strictRadial,this.nodes=r.nodes}layout(){const r=this,o=r.positions,s=[],a=r.iterations,u=r.width/10;r.maxDisplace=u,r.disp=s;for(let d=0;d<a;d++)o.forEach((g,p)=>{s[p]={x:0,y:0}}),r.getRepulsion(),r.updatePositions();return o}getRepulsion(){const r=this,o=r.positions,s=r.nodes,a=r.disp,u=r.k,d=r.radii||[];o.forEach((g,p)=>{a[p]={x:0,y:0},o.forEach((m,b)=>{if(p===b||d[p]!==d[b])return;let w=g[0]-m[0],C=g[1]-m[1],O=Math.sqrt(w*w+C*C);if(O===0){O=1;const A=p>b?1:-1;w=.01*A,C=.01*A}if(O<r.nodeSizeFunc(s[p])/2+r.nodeSizeFunc(s[b])/2){const A=u*u/O;a[p].x+=w/O*A,a[p].y+=C/O*A}})})}updatePositions(){const r=this,o=r.positions,s=r.disp,a=r.speed,u=r.strictRadial,d=r.focusID,g=r.maxDisplace||r.width/10;u&&s.forEach((m,b)=>{const w=o[b][0]-o[d][0],C=o[b][1]-o[d][1],O=Math.sqrt(w*w+C*C);let A=C/O,M=-w/O;const P=Math.sqrt(m.x*m.x+m.y*m.y);let I=Math.acos((A*m.x+M*m.y)/P);I>Math.PI/2&&(I-=Math.PI/2,A*=-1,M*=-1);const N=Math.cos(I)*P;m.x=A*N,m.y=M*N});const p=r.radii;o.forEach((m,b)=>{if(b===d)return;const w=Math.sqrt(s[b].x*s[b].x+s[b].y*s[b].y);if(w>0&&b!==d){const C=Math.min(g*(a/vr),w);if(m[0]+=s[b].x/w*C,m[1]+=s[b].y/w*C,u){let O=m[0]-o[d][0],A=m[1]-o[d][1];const M=Math.sqrt(O*O+A*A);O=O/M*p[b],A=A/M*p[b],m[0]=o[d][0]+O,m[1]=o[d][1]+A}}})}}function Pv(n){const r=n.length,o=n[0].length,s=[];for(let a=0;a<r;a++){const u=[];for(let d=0;d<o;d++)n[a][d]!==0?u.push(1/(n[a][d]*n[a][d])):u.push(0);s.push(u)}return s}function Nv(n,r){let o=-1;return n.forEach((s,a)=>{s.id===r&&(o=a)}),o}function Aa(n,r){return Math.sqrt((n[0]-r[0])*(n[0]-r[0])+(n[1]-r[1])*(n[1]-r[1]))}class hi extends tt{constructor(r){super(),this.maxIteration=1e3,this.focusNode=null,this.unitRadius=null,this.linkDistance=50,this.preventOverlap=!1,this.strictRadial=!0,this.maxPreventOverlapIteration=200,this.sortStrength=10,this.nodes=[],this.edges=[],this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}}execute(){const r=this,o=r.nodes,s=r.edges||[];if(!o||o.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const a=r.center;if(o.length===1){o[0].x=a[0],o[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}const u=r.linkDistance;let d=null;if(St(r.focusNode)){let st=!1;for(let U=0;U<o.length;U++)o[U].id===r.focusNode&&(d=o[U],r.focusNode=d,st=!0,U=o.length);st||(d=null)}else d=r.focusNode;d||(d=o[0],r.focusNode=d);let g=Nv(o,d.id);g<0&&(g=0),r.focusIndex=g;const p=Ne({nodes:o,edges:s},!1),m=de(p),b=r.maxToFocus(m,g);r.handleInfinity(m,g,b+1),r.distances=m;const w=m[g],C=r.width||500,O=r.height||500;let A=C-a[0]>a[0]?a[0]:C-a[0],M=O-a[1]>a[1]?a[1]:O-a[1];A===0&&(A=C/2),M===0&&(M=O/2);const P=M>A?A:M,I=Math.max(...w),N=[];w.forEach((st,U)=>{r.unitRadius||(r.unitRadius=P/I),N[U]=st*r.unitRadius}),r.radii=N;const R=r.eIdealDisMatrix();r.eIdealDistances=R;const z=Pv(R);r.weights=z;let Z=new He({linkDistance:u,distances:R}).layout();Z.forEach(st=>{Ot(st[0])&&(st[0]=Math.random()*u),Ot(st[1])&&(st[1]=Math.random()*u)}),r.positions=Z,Z.forEach((st,U)=>{o[U].x=st[0]+a[0],o[U].y=st[1]+a[1]}),Z.forEach(st=>{st[0]-=Z[g][0],st[1]-=Z[g][1]}),r.run();const ot=r.preventOverlap,nt=r.nodeSize;let q;const et=r.strictRadial;if(ot){const st=r.nodeSpacing;let U;J(st)?U=()=>st:ye(st)?U=st:U=()=>0,nt?Ft(nt)?q=Tt=>(nt[0]>nt[1]?nt[0]:nt[1])+U(Tt):q=Tt=>nt+U(Tt):q=Tt=>Tt.size?Ft(Tt.size)?(Tt.size[0]>Tt.size[1]?Tt.size[0]:Tt.size[1])+U(Tt):Mt(Tt.size)?(Tt.size.width>Tt.size.height?Tt.size.width:Tt.size.height)+U(Tt):Tt.size+U(Tt):10+U(Tt);const ct={nodes:o,nodeSizeFunc:q,adjMatrix:p,positions:Z,radii:N,height:O,width:C,strictRadial:et,focusID:g,iterations:r.maxPreventOverlapIteration||200,k:Z.length/4.5};Z=new Gh(ct).layout()}return Z.forEach((st,U)=>{o[U].x=st[0]+a[0],o[U].y=st[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:s}}run(){const r=this,o=r.maxIteration,s=r.positions||[],a=r.weights||[],u=r.eIdealDistances||[],d=r.radii||[];for(let g=0;g<=o;g++){const p=g/o;r.oneIteration(p,s,d,u,a)}}oneIteration(r,o,s,a,u){const d=this,g=1-r,p=d.focusIndex;o.forEach((m,b)=>{const w=Aa(m,[0,0]),C=w===0?0:1/w;if(b===p)return;let O=0,A=0,M=0;o.forEach((I,N)=>{if(b===N)return;const R=Aa(m,I),z=R===0?0:1/R,F=a[N][b];M+=u[b][N],O+=u[b][N]*(I[0]+F*(m[0]-I[0])*z),A+=u[b][N]*(I[1]+F*(m[1]-I[1])*z)});const P=s[b]===0?0:1/s[b];M*=g,M+=r*P*P,O*=g,O+=r*P*m[0]*C,m[0]=O/M,A*=g,A+=r*P*m[1]*C,m[1]=A/M})}eIdealDisMatrix(){const r=this,o=r.nodes;if(!o)return[];const s=r.distances,a=r.linkDistance,u=r.radii||[],d=r.unitRadius||50,g=[];return s&&s.forEach((p,m)=>{const b=[];p.forEach((w,C)=>{if(m===C)b.push(0);else if(u[m]===u[C])if(r.sortBy==="data")b.push(w*(Math.abs(m-C)*r.sortStrength)/(u[m]/d));else if(r.sortBy){let O=o[m][r.sortBy]||0,A=o[C][r.sortBy]||0;St(O)&&(O=O.charCodeAt(0)),St(A)&&(A=A.charCodeAt(0)),b.push(w*(Math.abs(O-A)*r.sortStrength)/(u[m]/d))}else b.push(w*a/(u[m]/d));else{const O=(a+d)/2;b.push(w*O)}}),g.push(b)}),g}handleInfinity(r,o,s){const a=r.length;for(let u=0;u<a;u++)if(r[o][u]===1/0){r[o][u]=s,r[u][o]=s;for(let d=0;d<a;d++)r[u][d]!==1/0&&r[o][d]===1/0&&(r[o][d]=s+r[u][d],r[d][o]=s+r[u][d])}for(let u=0;u<a;u++)if(u!==o){for(let d=0;d<a;d++)if(r[u][d]===1/0){let g=Math.abs(r[o][u]-r[o][d]);g=g===0?1:g,r[u][d]=g}}}maxToFocus(r,o){let s=0;for(let a=0;a<r[o].length;a++)r[o][a]!==1/0&&(s=r[o][a]>s?r[o][a]:s);return s}getType(){return"radial"}}class Dn extends tt{constructor(r){super(),this.nodeSize=30,this.minNodeSpacing=10,this.nodeSpacing=10,this.preventOverlap=!1,this.equidistant=!1,this.startAngle=3/2*Math.PI,this.clockwise=!0,this.sortBy="degree",this.nodes=[],this.edges=[],this.width=300,this.height=300,this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}}execute(){var r,o;const s=this,{nodes:a,edges:u}=s,d=a.length;if(d===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const g=s.center;if(d===1){a[0].x=g[0],a[0].y=g[1],(o=s.onLayoutEnd)===null||o===void 0||o.call(s);return}const{nodeSize:p,nodeSpacing:m}=s,b=[];let w,C=0;Ft(p)?w=Math.max(p[0],p[1]):w=p,Ft(m)?C=Math.max(m[0],m[1]):J(m)&&(C=m),a.forEach(R=>{b.push(R);let z=w;Ft(R.size)?z=Math.max(R.size[0],R.size[1]):J(R.size)?z=R.size:Mt(R.size)&&(z=Math.max(R.size.width,R.size.height)),w=Math.max(w,z),ye(m)&&(C=Math.max(m(R),C))}),s.clockwise=s.counterclockwise!==void 0?!s.counterclockwise:s.clockwise;const O={},A={};if(b.forEach((R,z)=>{O[R.id]=R,A[R.id]=z}),(s.sortBy==="degree"||!St(s.sortBy)||b[0][s.sortBy]===void 0)&&(s.sortBy="degree",!J(a[0].degree))){const R=De(a.length,A,u);b.forEach((z,F)=>{z.degree=R[F].all})}b.sort((R,z)=>z[s.sortBy]-R[s.sortBy]),s.maxValueNode=b[0],s.maxLevelDiff=s.maxLevelDiff||s.maxValueNode[s.sortBy]/4;const M=[[]];let P=M[0];b.forEach(R=>{if(P.length>0){const z=Math.abs(P[0][s.sortBy]-R[s.sortBy]);s.maxLevelDiff&&z>=s.maxLevelDiff&&(P=[],M.push(P))}P.push(R)});let I=w+(C||s.minNodeSpacing);if(!s.preventOverlap){const R=M.length>0&&M[0].length>1,F=(Math.min(s.width,s.height)/2-I)/(M.length+(R?1:0));I=Math.min(I,F)}let N=0;if(M.forEach(R=>{let z=s.sweep;z===void 0&&(z=2*Math.PI-2*Math.PI/R.length);const F=R.dTheta=z/Math.max(1,R.length-1);if(R.length>1&&s.preventOverlap){const Z=Math.cos(F)-Math.cos(0),ot=Math.sin(F)-Math.sin(0),nt=Math.sqrt(I*I/(Z*Z+ot*ot));N=Math.max(nt,N)}R.r=N,N+=I}),s.equidistant){let R=0,z=0;for(let F=0;F<M.length;F++){const ot=M[F].r-z;R=Math.max(R,ot)}z=0,M.forEach((F,Z)=>{Z===0&&(z=F.r),F.r=z,z+=R})}return M.forEach(R=>{const z=R.dTheta,F=R.r;R.forEach((Z,ot)=>{const nt=s.startAngle+(s.clockwise?1:-1)*z*ot;Z.x=g[0]+F*Math.cos(nt),Z.y=g[1]+F*Math.sin(nt)})}),s.onLayoutEnd&&s.onLayoutEnd(),{nodes:a,edges:u}}getType(){return"concentric"}}class fl extends tt{constructor(r){super(),this.center=[0,0],this.linkDistance=50,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],linkDistance:50}}execute(){const r=this,{nodes:o,edges:s=[]}=r,a=r.center;if(!o||o.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(o.length===1){o[0].x=a[0],o[0].y=a[1],r.onLayoutEnd&&r.onLayoutEnd();return}const u=r.linkDistance,d=Ne({nodes:o,edges:s},!1),g=de(d);r.handleInfinity(g);const p=xe(g,u);r.scaledDistances=p;const m=r.runMDS();return r.positions=m,m.forEach((b,w)=>{o[w].x=b[0]+a[0],o[w].y=b[1]+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:s}}runMDS(){const r=this,o=2,s=r.scaledDistances,a=be.mul(be.pow(s,2),-.5),u=a.mean("row"),d=a.mean("column"),g=a.mean();a.add(g).subRowVector(u).subColumnVector(d);const p=new Fi(a),m=be.sqrt(p.diagonalMatrix).diagonal();return p.leftSingularVectors.toJSON().map(b=>be.mul([b],[m]).toJSON()[0].splice(0,o))}handleInfinity(r){let o=-999999;r.forEach(s=>{s.forEach(a=>{a!==1/0&&o<a&&(o=a)})}),r.forEach((s,a)=>{s.forEach((u,d)=>{u===1/0&&(r[a][d]=o)})})}getType(){return"mds"}}const jh=800;class gl extends tt{constructor(r){super(),this.maxIteration=1e3,this.workerEnabled=!1,this.gravity=10,this.speed=5,this.clustering=!1,this.clusterGravity=10,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.onLayoutEnd=()=>{},this.tick=()=>{},this.animate=!0,this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}}execute(){var r,o;const s=this,a=s.nodes;if(s.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(s.timeInterval),!a||a.length===0){(r=s.onLayoutEnd)===null||r===void 0||r.call(s);return}!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight),s.center||(s.center=[s.width/2,s.height/2]);const u=s.center;if(a.length===1){a[0].x=u[0],a[0].y=u[1],(o=s.onLayoutEnd)===null||o===void 0||o.call(s);return}const d={},g={};return a.forEach((p,m)=>{J(p.x)||(p.x=Math.random()*this.width),J(p.y)||(p.y=Math.random()*this.height),d[p.id]=p,g[p.id]=m}),s.nodeMap=d,s.nodeIdxMap=g,s.run()}run(){var r;const o=this,s=o.nodes;if(!s)return;const{edges:a,maxIteration:u,workerEnabled:d,clustering:g,animate:p}=o,m={};if(g&&s.forEach(b=>{m[b.cluster]===void 0&&(m[b.cluster]={name:b.cluster,cx:0,cy:0,count:0})}),d||!p){for(let b=0;b<u;b++)o.runOneStep(m);(r=o.onLayoutEnd)===null||r===void 0||r.call(o)}else{if(typeof window=="undefined")return;let b=0;this.timeInterval=window.setInterval(()=>{var w;o.runOneStep(m),b++,b>=u&&((w=o.onLayoutEnd)===null||w===void 0||w.call(o),window.clearInterval(o.timeInterval))},0)}return{nodes:s,edges:a}}runOneStep(r){var o;const s=this,a=s.nodes;if(!a)return;const{edges:u,center:d,gravity:g,speed:p,clustering:m}=s,b=s.height*s.width,w=Math.sqrt(b)/10,C=b/(a.length+1),O=Math.sqrt(C),A=[];if(a.forEach((M,P)=>{A[P]={x:0,y:0}}),s.applyCalculate(a,u,A,O,C),m){for(const P in r)r[P].cx=0,r[P].cy=0,r[P].count=0;a.forEach(P=>{const I=r[P.cluster];J(P.x)&&(I.cx+=P.x),J(P.y)&&(I.cy+=P.y),I.count++});for(const P in r)r[P].cx/=r[P].count,r[P].cy/=r[P].count;const M=s.clusterGravity||g;a.forEach((P,I)=>{if(!J(P.x)||!J(P.y))return;const N=r[P.cluster],R=Math.sqrt((P.x-N.cx)*(P.x-N.cx)+(P.y-N.cy)*(P.y-N.cy)),z=O*M;A[I].x-=z*(P.x-N.cx)/R,A[I].y-=z*(P.y-N.cy)/R})}a.forEach((M,P)=>{if(!J(M.x)||!J(M.y))return;const I=.01*O*g;A[P].x-=I*(M.x-d[0]),A[P].y-=I*(M.y-d[1])}),a.forEach((M,P)=>{if(J(M.fx)&&J(M.fy)){M.x=M.fx,M.y=M.fy;return}if(!J(M.x)||!J(M.y))return;const I=Math.sqrt(A[P].x*A[P].x+A[P].y*A[P].y);if(I>0){const N=Math.min(w*(p/jh),I);M.x+=A[P].x/I*N,M.y+=A[P].y/I*N}}),(o=s.tick)===null||o===void 0||o.call(s)}applyCalculate(r,o,s,a,u){const d=this;d.calRepulsive(r,s,u),o&&d.calAttractive(o,s,a)}calRepulsive(r,o,s){r.forEach((a,u)=>{o[u]={x:0,y:0},r.forEach((d,g)=>{if(u===g||!J(a.x)||!J(d.x)||!J(a.y)||!J(d.y))return;let p=a.x-d.x,m=a.y-d.y,b=p*p+m*m;if(b===0){b=1;const C=u>g?1:-1;p=.01*C,m=.01*C}const w=s/b;o[u].x+=p*w,o[u].y+=m*w})})}calAttractive(r,o,s){r.forEach(a=>{const u=zt(a,"source"),d=zt(a,"target");if(!u||!d)return;const g=this.nodeIdxMap[u],p=this.nodeIdxMap[d];if(g===p)return;const m=this.nodeMap[u],b=this.nodeMap[d];if(!J(b.x)||!J(m.x)||!J(b.y)||!J(m.y))return;const w=b.x-m.x,C=b.y-m.y,O=Math.sqrt(w*w+C*C),A=O*O/s;o[p].x-=w/O*A,o[p].y-=C/O*A,o[g].x+=w/O*A,o[g].y+=C/O*A})}stop(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)}destroy(){const r=this;r.stop(),r.tick=null,r.nodes=null,r.edges=null,r.destroyed=!0}getType(){return"fruchterman"}}var Rn=k(60024),at=k(43818),mr=k(36441),yr=k(91117),pl=k(50922),Ta=k.n(pl),Dv=k(3224),Vh=k.n(Dv),Uh=k(55589),So=k.n(Uh),ps=k(66544),Tn=k.n(ps),CE=null,vl=1;function Rv(){return vl++}var SE=null,OE=null,pt;(function(n){n[n.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",n[n.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",n[n.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",n[n.POINTS=0]="POINTS",n[n.LINES=1]="LINES",n[n.LINE_LOOP=2]="LINE_LOOP",n[n.LINE_STRIP=3]="LINE_STRIP",n[n.TRIANGLES=4]="TRIANGLES",n[n.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",n[n.TRIANGLE_FAN=6]="TRIANGLE_FAN",n[n.ZERO=0]="ZERO",n[n.ONE=1]="ONE",n[n.SRC_COLOR=768]="SRC_COLOR",n[n.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",n[n.SRC_ALPHA=770]="SRC_ALPHA",n[n.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",n[n.DST_ALPHA=772]="DST_ALPHA",n[n.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",n[n.DST_COLOR=774]="DST_COLOR",n[n.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",n[n.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",n[n.FUNC_ADD=32774]="FUNC_ADD",n[n.BLEND_EQUATION=32777]="BLEND_EQUATION",n[n.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",n[n.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",n[n.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",n[n.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",n[n.MAX_EXT=32776]="MAX_EXT",n[n.MIN_EXT=32775]="MIN_EXT",n[n.BLEND_DST_RGB=32968]="BLEND_DST_RGB",n[n.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",n[n.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",n[n.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",n[n.CONSTANT_COLOR=32769]="CONSTANT_COLOR",n[n.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",n[n.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",n[n.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",n[n.BLEND_COLOR=32773]="BLEND_COLOR",n[n.ARRAY_BUFFER=34962]="ARRAY_BUFFER",n[n.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",n[n.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",n[n.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",n[n.STREAM_DRAW=35040]="STREAM_DRAW",n[n.STATIC_DRAW=35044]="STATIC_DRAW",n[n.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",n[n.BUFFER_SIZE=34660]="BUFFER_SIZE",n[n.BUFFER_USAGE=34661]="BUFFER_USAGE",n[n.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",n[n.FRONT=1028]="FRONT",n[n.BACK=1029]="BACK",n[n.FRONT_AND_BACK=1032]="FRONT_AND_BACK",n[n.CULL_FACE=2884]="CULL_FACE",n[n.BLEND=3042]="BLEND",n[n.DITHER=3024]="DITHER",n[n.STENCIL_TEST=2960]="STENCIL_TEST",n[n.DEPTH_TEST=2929]="DEPTH_TEST",n[n.SCISSOR_TEST=3089]="SCISSOR_TEST",n[n.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",n[n.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",n[n.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",n[n.NO_ERROR=0]="NO_ERROR",n[n.INVALID_ENUM=1280]="INVALID_ENUM",n[n.INVALID_VALUE=1281]="INVALID_VALUE",n[n.INVALID_OPERATION=1282]="INVALID_OPERATION",n[n.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",n[n.CW=2304]="CW",n[n.CCW=2305]="CCW",n[n.LINE_WIDTH=2849]="LINE_WIDTH",n[n.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",n[n.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",n[n.CULL_FACE_MODE=2885]="CULL_FACE_MODE",n[n.FRONT_FACE=2886]="FRONT_FACE",n[n.DEPTH_RANGE=2928]="DEPTH_RANGE",n[n.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",n[n.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",n[n.DEPTH_FUNC=2932]="DEPTH_FUNC",n[n.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",n[n.STENCIL_FUNC=2962]="STENCIL_FUNC",n[n.STENCIL_FAIL=2964]="STENCIL_FAIL",n[n.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",n[n.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",n[n.STENCIL_REF=2967]="STENCIL_REF",n[n.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",n[n.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",n[n.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",n[n.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",n[n.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",n[n.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",n[n.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",n[n.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",n[n.VIEWPORT=2978]="VIEWPORT",n[n.SCISSOR_BOX=3088]="SCISSOR_BOX",n[n.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",n[n.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",n[n.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",n[n.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",n[n.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",n[n.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",n[n.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",n[n.RED_BITS=3410]="RED_BITS",n[n.GREEN_BITS=3411]="GREEN_BITS",n[n.BLUE_BITS=3412]="BLUE_BITS",n[n.ALPHA_BITS=3413]="ALPHA_BITS",n[n.DEPTH_BITS=3414]="DEPTH_BITS",n[n.STENCIL_BITS=3415]="STENCIL_BITS",n[n.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",n[n.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",n[n.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",n[n.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",n[n.SAMPLES=32937]="SAMPLES",n[n.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",n[n.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",n[n.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",n[n.DONT_CARE=4352]="DONT_CARE",n[n.FASTEST=4353]="FASTEST",n[n.NICEST=4354]="NICEST",n[n.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",n[n.BYTE=5120]="BYTE",n[n.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",n[n.SHORT=5122]="SHORT",n[n.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",n[n.INT=5124]="INT",n[n.UNSIGNED_INT=5125]="UNSIGNED_INT",n[n.FLOAT=5126]="FLOAT",n[n.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",n[n.ALPHA=6406]="ALPHA",n[n.RGB=6407]="RGB",n[n.RGBA=6408]="RGBA",n[n.LUMINANCE=6409]="LUMINANCE",n[n.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",n[n.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",n[n.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",n[n.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",n[n.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",n[n.VERTEX_SHADER=35633]="VERTEX_SHADER",n[n.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",n[n.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",n[n.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",n[n.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",n[n.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",n[n.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",n[n.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",n[n.SHADER_TYPE=35663]="SHADER_TYPE",n[n.DELETE_STATUS=35712]="DELETE_STATUS",n[n.LINK_STATUS=35714]="LINK_STATUS",n[n.VALIDATE_STATUS=35715]="VALIDATE_STATUS",n[n.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",n[n.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",n[n.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",n[n.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",n[n.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",n[n.NEVER=512]="NEVER",n[n.LESS=513]="LESS",n[n.EQUAL=514]="EQUAL",n[n.LEQUAL=515]="LEQUAL",n[n.GREATER=516]="GREATER",n[n.NOTEQUAL=517]="NOTEQUAL",n[n.GEQUAL=518]="GEQUAL",n[n.ALWAYS=519]="ALWAYS",n[n.KEEP=7680]="KEEP",n[n.REPLACE=7681]="REPLACE",n[n.INCR=7682]="INCR",n[n.DECR=7683]="DECR",n[n.INVERT=5386]="INVERT",n[n.INCR_WRAP=34055]="INCR_WRAP",n[n.DECR_WRAP=34056]="DECR_WRAP",n[n.VENDOR=7936]="VENDOR",n[n.RENDERER=7937]="RENDERER",n[n.VERSION=7938]="VERSION",n[n.NEAREST=9728]="NEAREST",n[n.LINEAR=9729]="LINEAR",n[n.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",n[n.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",n[n.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",n[n.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",n[n.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",n[n.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",n[n.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",n[n.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",n[n.TEXTURE_2D=3553]="TEXTURE_2D",n[n.TEXTURE=5890]="TEXTURE",n[n.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",n[n.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",n[n.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",n[n.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",n[n.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",n[n.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",n[n.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",n[n.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",n[n.TEXTURE0=33984]="TEXTURE0",n[n.TEXTURE1=33985]="TEXTURE1",n[n.TEXTURE2=33986]="TEXTURE2",n[n.TEXTURE3=33987]="TEXTURE3",n[n.TEXTURE4=33988]="TEXTURE4",n[n.TEXTURE5=33989]="TEXTURE5",n[n.TEXTURE6=33990]="TEXTURE6",n[n.TEXTURE7=33991]="TEXTURE7",n[n.TEXTURE8=33992]="TEXTURE8",n[n.TEXTURE9=33993]="TEXTURE9",n[n.TEXTURE10=33994]="TEXTURE10",n[n.TEXTURE11=33995]="TEXTURE11",n[n.TEXTURE12=33996]="TEXTURE12",n[n.TEXTURE13=33997]="TEXTURE13",n[n.TEXTURE14=33998]="TEXTURE14",n[n.TEXTURE15=33999]="TEXTURE15",n[n.TEXTURE16=34e3]="TEXTURE16",n[n.TEXTURE17=34001]="TEXTURE17",n[n.TEXTURE18=34002]="TEXTURE18",n[n.TEXTURE19=34003]="TEXTURE19",n[n.TEXTURE20=34004]="TEXTURE20",n[n.TEXTURE21=34005]="TEXTURE21",n[n.TEXTURE22=34006]="TEXTURE22",n[n.TEXTURE23=34007]="TEXTURE23",n[n.TEXTURE24=34008]="TEXTURE24",n[n.TEXTURE25=34009]="TEXTURE25",n[n.TEXTURE26=34010]="TEXTURE26",n[n.TEXTURE27=34011]="TEXTURE27",n[n.TEXTURE28=34012]="TEXTURE28",n[n.TEXTURE29=34013]="TEXTURE29",n[n.TEXTURE30=34014]="TEXTURE30",n[n.TEXTURE31=34015]="TEXTURE31",n[n.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",n[n.REPEAT=10497]="REPEAT",n[n.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",n[n.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",n[n.FLOAT_VEC2=35664]="FLOAT_VEC2",n[n.FLOAT_VEC3=35665]="FLOAT_VEC3",n[n.FLOAT_VEC4=35666]="FLOAT_VEC4",n[n.INT_VEC2=35667]="INT_VEC2",n[n.INT_VEC3=35668]="INT_VEC3",n[n.INT_VEC4=35669]="INT_VEC4",n[n.BOOL=35670]="BOOL",n[n.BOOL_VEC2=35671]="BOOL_VEC2",n[n.BOOL_VEC3=35672]="BOOL_VEC3",n[n.BOOL_VEC4=35673]="BOOL_VEC4",n[n.FLOAT_MAT2=35674]="FLOAT_MAT2",n[n.FLOAT_MAT3=35675]="FLOAT_MAT3",n[n.FLOAT_MAT4=35676]="FLOAT_MAT4",n[n.SAMPLER_2D=35678]="SAMPLER_2D",n[n.SAMPLER_CUBE=35680]="SAMPLER_CUBE",n[n.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",n[n.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",n[n.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",n[n.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",n[n.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",n[n.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",n[n.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",n[n.COMPILE_STATUS=35713]="COMPILE_STATUS",n[n.LOW_FLOAT=36336]="LOW_FLOAT",n[n.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",n[n.HIGH_FLOAT=36338]="HIGH_FLOAT",n[n.LOW_INT=36339]="LOW_INT",n[n.MEDIUM_INT=36340]="MEDIUM_INT",n[n.HIGH_INT=36341]="HIGH_INT",n[n.FRAMEBUFFER=36160]="FRAMEBUFFER",n[n.RENDERBUFFER=36161]="RENDERBUFFER",n[n.RGBA4=32854]="RGBA4",n[n.RGB5_A1=32855]="RGB5_A1",n[n.RGB565=36194]="RGB565",n[n.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",n[n.STENCIL_INDEX=6401]="STENCIL_INDEX",n[n.STENCIL_INDEX8=36168]="STENCIL_INDEX8",n[n.DEPTH_STENCIL=34041]="DEPTH_STENCIL",n[n.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",n[n.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",n[n.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",n[n.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",n[n.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",n[n.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",n[n.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",n[n.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",n[n.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",n[n.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",n[n.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",n[n.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",n[n.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",n[n.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",n[n.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",n[n.NONE=0]="NONE",n[n.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",n[n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",n[n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",n[n.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",n[n.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",n[n.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",n[n.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",n[n.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",n[n.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",n[n.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",n[n.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",n[n.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",n[n.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",n[n.COPY_SRC=1]="COPY_SRC",n[n.COPY_DST=2]="COPY_DST",n[n.SAMPLED=4]="SAMPLED",n[n.STORAGE=8]="STORAGE",n[n.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(pt||(pt={}));var AE=function(){function n(){(0,mr.Z)(this,n),this.config=void 0}return(0,yr.Z)(n,[{key:"get",value:function(){return this.config}},{key:"set",value:function(o){this.config=o}}]),n}(),Lv=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),vs;(function(n){n.Void="Void",n.Boolean="Boolean",n.Float="Float",n.Uint32="Uint32",n.Int32="Int32",n.Vector="Vector",n.Vector2Float="vec2<f32>",n.Vector3Float="vec3<f32>",n.Vector4Float="vec4<f32>",n.Vector2Boolean="vec2<bool>",n.Vector3Boolean="vec3<bool>",n.Vector4Boolean="vec4<bool>",n.Vector2Uint="vec2<u32>",n.Vector3Uint="vec3<u32>",n.Vector4Uint="vec4<u32>",n.Vector2Int="vec2<i32>",n.Vector3Int="vec3<i32>",n.Vector4Int="vec4<i32>",n.Matrix="Matrix",n.Matrix3x3Float="mat3x3<f32>",n.Matrix4x4Float="mat4x4<i32>",n.Struct="Struct",n.FloatArray="Float[]",n.Vector4FloatArray="vec4<f32>[]"})(vs||(vs={}));var ml;(function(n){n.Program="Program",n.Identifier="Identifier",n.VariableDeclaration="VariableDeclaration",n.BlockStatement="BlockStatement",n.ReturnStatement="ReturnStatement",n.FunctionDeclaration="FunctionDeclaration",n.VariableDeclarator="VariableDeclarator",n.AssignmentExpression="AssignmentExpression",n.LogicalExpression="LogicalExpression",n.BinaryExpression="BinaryExpression",n.ArrayExpression="ArrayExpression",n.UnaryExpression="UnaryExpression",n.UpdateExpression="UpdateExpression",n.FunctionExpression="FunctionExpression",n.MemberExpression="MemberExpression",n.ConditionalExpression="ConditionalExpression",n.ExpressionStatement="ExpressionStatement",n.CallExpression="CallExpression",n.NumThreadStatement="NumThreadStatement",n.StorageStatement="StorageStatement",n.DoWhileStatement="DoWhileStatement",n.WhileStatement="WhileStatement",n.ForStatement="ForStatement",n.BreakStatement="BreakStatement",n.ContinueStatement="ContinueStatement",n.IfStatement="IfStatement",n.ImportedFunctionStatement="ImportedFunctionStatement"})(ml||(ml={}));var di;(function(n){n.Input="Input",n.Output="Output",n.Uniform="Uniform",n.Workgroup="Workgroup",n.UniformConstant="UniformConstant",n.Image="Image",n.StorageBuffer="StorageBuffer",n.Private="Private",n.Function="Function"})(di||(di={}));var Oo;(function(n){n.GLSL100="GLSL100",n.GLSL450="GLSL450",n.WGSL="WGSL"})(Oo||(Oo={}));var nn="__DefineValuePlaceholder__";function Hh(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function Ao(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),o.push.apply(o,s)}return o}function ms(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Ao(Object(o),!0).forEach(function(s){(0,at.Z)(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Ao(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var yl=function(){function n(r,o){(0,mr.Z)(this,n),this.engine=r,this.configService=o,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,yr.Z)(n,[{key:"init",value:function(){var o=this.configService.get(),s=o.canvas,a=o.engineOptions;this.initPromise=this.engine.init(ms({canvas:s||Hh(),antialiasing:!1},a))}},{key:"setBundle",value:function(o){this.compiledBundle=JSON.parse(JSON.stringify(o))}},{key:"setDispatch",value:function(o){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=o),this}},{key:"setMaxIteration",value:function(o){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=o),this}},{key:"setBinding",value:function(o,s){var a=this;if(typeof o=="string"){var u=Vh()(s)||Ta()(s)||So()(s);if(this.compiledBundle&&this.compiledBundle.context){var d=this.compiledBundle.context.defines.find(function(p){return p.name===o});if(d)return d.value=s,this;var g=this.compiledBundle.context.uniforms.find(function(p){return p.name===o});g&&(u?(g.data=s,g.isReferer=!1,g.storageClass===di.Uniform?this.model&&this.model.updateUniform(o,s):this.model&&this.model.updateBuffer(o,s)):(g.isReferer=!0,g.data=s))}}else Object.keys(o).forEach(function(p){a.setBinding(p,o[p])});return this}},{key:"execute",value:function(){var r=(0,Rn.Z)(Tn().mark(function s(){var a=this,u,d,g=arguments;return Tn().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(u=g.length>0&&g[0]!==void 0?g[0]:1,!this.dirty){m.next=6;break}return this.compiledBundle.context&&(u>1?this.compiledBundle.context.maxIteration=u:this.compiledBundle.context.maxIteration++),m.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(b){var w=b.isReferer;return w}).forEach(function(b){var w=b.data,C=b.name;a.model.confirmInput(w.model,C)}),d=0;d<u;d++)this.model.run();return this.engine.endFrame(),m.abrupt("return",this);case 12:case"end":return m.stop()}},s,this)}));function o(){return r.apply(this,arguments)}return o}()},{key:"getOutput",value:function(){var r=(0,Rn.Z)(Tn().mark(function s(){return Tn().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.abrupt("return",this.model.readData());case 1:case"end":return u.stop()}},s,this)}));function o(){return r.apply(this,arguments)}return o}()},{key:"compile",value:function(){var r=(0,Rn.Z)(Tn().mark(function s(){var a,u,d;return Tn().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,this.initPromise;case 2:return a=ms({},this.compiledBundle.context),u=this.engine.supportWebGPU?this.engine.useWGSL?Oo.WGSL:Oo.GLSL450:Oo.GLSL100,d=this.compiledBundle.shaders[u],a.defines.filter(function(m){return m.runtime}).forEach(function(m){var b="".concat(nn).concat(m.name);d=d.replace(b,"".concat(m.value))}),a.shader=d,a.uniforms.forEach(function(m){if(!m.data&&m.storageClass===di.StorageBuffer){var b=1;m.type===vs.FloatArray?b=1:m.type===vs.Vector4FloatArray&&(b=4),m.data=new Float32Array(a.output.length*b).fill(0)}}),this.compiledBundle.context=a,p.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=p.sent;case 12:case"end":return p.stop()}},s,this)}));function o(){return r.apply(this,arguments)}return o}()}]),n}(),TE=k(51919),HC=k.n(TE),$C=function(){function n(r,o){(0,mr.Z)(this,n),this.attribute=void 0,this.buffer=void 0;var s=o.buffer,a=o.offset,u=o.stride,d=o.normalized,g=o.size,p=o.divisor;this.buffer=s,this.attribute={buffer:s.get(),offset:a||0,stride:u||0,normalized:d||!1,divisor:p||0},g&&(this.attribute.size=g)}return(0,yr.Z)(n,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(o){this.buffer.subData(o)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),n}(),Gi,Ma,Yr,jn,Ia,fi,Pa,bl,Mr,ji,Vn,Kr,Ir,xl,wl=(Gi={},(0,at.Z)(Gi,pt.POINTS,"points"),(0,at.Z)(Gi,pt.LINES,"lines"),(0,at.Z)(Gi,pt.LINE_LOOP,"line loop"),(0,at.Z)(Gi,pt.LINE_STRIP,"line strip"),(0,at.Z)(Gi,pt.TRIANGLES,"triangles"),(0,at.Z)(Gi,pt.TRIANGLE_FAN,"triangle fan"),(0,at.Z)(Gi,pt.TRIANGLE_STRIP,"triangle strip"),Gi),kv=(Ma={},(0,at.Z)(Ma,pt.STATIC_DRAW,"static"),(0,at.Z)(Ma,pt.DYNAMIC_DRAW,"dynamic"),(0,at.Z)(Ma,pt.STREAM_DRAW,"stream"),Ma),$h=(Yr={},(0,at.Z)(Yr,pt.BYTE,"int8"),(0,at.Z)(Yr,pt.UNSIGNED_INT,"int16"),(0,at.Z)(Yr,pt.INT,"int32"),(0,at.Z)(Yr,pt.UNSIGNED_BYTE,"uint8"),(0,at.Z)(Yr,pt.UNSIGNED_SHORT,"uint16"),(0,at.Z)(Yr,pt.UNSIGNED_INT,"uint32"),(0,at.Z)(Yr,pt.FLOAT,"float"),Yr),ME=(jn={},(0,at.Z)(jn,pt.ALPHA,"alpha"),(0,at.Z)(jn,pt.LUMINANCE,"luminance"),(0,at.Z)(jn,pt.LUMINANCE_ALPHA,"luminance alpha"),(0,at.Z)(jn,pt.RGB,"rgb"),(0,at.Z)(jn,pt.RGBA,"rgba"),(0,at.Z)(jn,pt.RGBA4,"rgba4"),(0,at.Z)(jn,pt.RGB5_A1,"rgb5 a1"),(0,at.Z)(jn,pt.RGB565,"rgb565"),(0,at.Z)(jn,pt.DEPTH_COMPONENT,"depth"),(0,at.Z)(jn,pt.DEPTH_STENCIL,"depth stencil"),jn),Bv=(Ia={},(0,at.Z)(Ia,pt.DONT_CARE,"dont care"),(0,at.Z)(Ia,pt.NICEST,"nice"),(0,at.Z)(Ia,pt.FASTEST,"fast"),Ia),ys=(fi={},(0,at.Z)(fi,pt.NEAREST,"nearest"),(0,at.Z)(fi,pt.LINEAR,"linear"),(0,at.Z)(fi,pt.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,at.Z)(fi,pt.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,at.Z)(fi,pt.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,at.Z)(fi,pt.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),fi),bs=(Pa={},(0,at.Z)(Pa,pt.REPEAT,"repeat"),(0,at.Z)(Pa,pt.CLAMP_TO_EDGE,"clamp"),(0,at.Z)(Pa,pt.MIRRORED_REPEAT,"mirror"),Pa),IE=(bl={},(0,at.Z)(bl,pt.NONE,"none"),(0,at.Z)(bl,pt.BROWSER_DEFAULT_WEBGL,"browser"),bl),xs=(Mr={},(0,at.Z)(Mr,pt.NEVER,"never"),(0,at.Z)(Mr,pt.ALWAYS,"always"),(0,at.Z)(Mr,pt.LESS,"less"),(0,at.Z)(Mr,pt.LEQUAL,"lequal"),(0,at.Z)(Mr,pt.GREATER,"greater"),(0,at.Z)(Mr,pt.GEQUAL,"gequal"),(0,at.Z)(Mr,pt.EQUAL,"equal"),(0,at.Z)(Mr,pt.NOTEQUAL,"notequal"),Mr),Na=(ji={},(0,at.Z)(ji,pt.FUNC_ADD,"add"),(0,at.Z)(ji,pt.MIN_EXT,"min"),(0,at.Z)(ji,pt.MAX_EXT,"max"),(0,at.Z)(ji,pt.FUNC_SUBTRACT,"subtract"),(0,at.Z)(ji,pt.FUNC_REVERSE_SUBTRACT,"reverse subtract"),ji),ws=(Vn={},(0,at.Z)(Vn,pt.ZERO,"zero"),(0,at.Z)(Vn,pt.ONE,"one"),(0,at.Z)(Vn,pt.SRC_COLOR,"src color"),(0,at.Z)(Vn,pt.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,at.Z)(Vn,pt.SRC_ALPHA,"src alpha"),(0,at.Z)(Vn,pt.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,at.Z)(Vn,pt.DST_COLOR,"dst color"),(0,at.Z)(Vn,pt.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,at.Z)(Vn,pt.DST_ALPHA,"dst alpha"),(0,at.Z)(Vn,pt.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,at.Z)(Vn,pt.CONSTANT_COLOR,"constant color"),(0,at.Z)(Vn,pt.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,at.Z)(Vn,pt.CONSTANT_ALPHA,"constant alpha"),(0,at.Z)(Vn,pt.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,at.Z)(Vn,pt.SRC_ALPHA_SATURATE,"src alpha saturate"),Vn),zv=(Kr={},(0,at.Z)(Kr,pt.NEVER,"never"),(0,at.Z)(Kr,pt.ALWAYS,"always"),(0,at.Z)(Kr,pt.LESS,"less"),(0,at.Z)(Kr,pt.LEQUAL,"lequal"),(0,at.Z)(Kr,pt.GREATER,"greater"),(0,at.Z)(Kr,pt.GEQUAL,"gequal"),(0,at.Z)(Kr,pt.EQUAL,"equal"),(0,at.Z)(Kr,pt.NOTEQUAL,"notequal"),Kr),br=(Ir={},(0,at.Z)(Ir,pt.ZERO,"zero"),(0,at.Z)(Ir,pt.KEEP,"keep"),(0,at.Z)(Ir,pt.REPLACE,"replace"),(0,at.Z)(Ir,pt.INVERT,"invert"),(0,at.Z)(Ir,pt.INCR,"increment"),(0,at.Z)(Ir,pt.DECR,"decrement"),(0,at.Z)(Ir,pt.INCR_WRAP,"increment wrap"),(0,at.Z)(Ir,pt.DECR_WRAP,"decrement wrap"),Ir),PE=(xl={},(0,at.Z)(xl,pt.FRONT,"front"),(0,at.Z)(xl,pt.BACK,"back"),xl),Fv=function(){function n(r,o){(0,mr.Z)(this,n),this.buffer=void 0;var s=o.data,a=o.usage,u=o.type;this.buffer=r.buffer({data:s,usage:kv[a||pt.STATIC_DRAW],type:$h[u||pt.UNSIGNED_BYTE]})}return(0,yr.Z)(n,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(o){var s=o.data,a=o.offset;this.buffer.subdata(s,a)}}]),n}(),Ee=k(89597);function Gv(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),o.push.apply(o,s)}return o}function jv(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Gv(Object(o),!0).forEach(function(s){(0,at.Z)(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Gv(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var Vv=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Da=0,El=!1,Wh=function(){function n(r,o){var s=this;(0,mr.Z)(this,n),this.reGl=r,this.context=o,this.entity=Rv(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var a={};this.context.uniforms.forEach(function(m){var b=m.name,w=m.type,C=m.data,O=m.isReferer,A=m.storageClass;if(A===di.StorageBuffer){if(O)s.textureCache[b]={data:void 0},a["".concat(b,"Size")]=function(){return C.compiledBundle.context.output.textureSize};else{s.textureCache[b]=s.calcDataTexture(b,w,C);var M=s.textureCache[b],P=M.textureWidth,I=M.isOutput;a["".concat(b,"Size")]=[P,P],I&&(s.outputTextureName=b,s.context.needPingpong&&(s.outputTextureName="".concat(b,"Output"),s.textureCache[s.outputTextureName]=s.calcDataTexture(b,w,C)))}a[b]=function(){return El&&console.log("[".concat(s.entity,"]: ").concat(b," ").concat(s.textureCache[b].id)),s.textureCache[b].texture}}else if(A===di.Uniform){if(C&&(Array.isArray(C)||Ta()(C))&&C.length>16)throw new Error("invalid data type ".concat(w));a[b]=function(){return m.data}}});var u=this.getOuputDataTexture(),d=u.textureWidth,g=u.texelCount;a.u_OutputTextureSize=[d,d],a.u_OutputTexelCount=g,this.context.output.textureSize=[d,d];var p={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:a,vert:Vv,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(p)}return(0,yr.Z)(n,[{key:"run",value:function(){var o=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){o.computeCommand()}),El&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var r=(0,Rn.Z)(Tn().mark(function s(){var a=this,u,d,g,p,m,b,w,C;return Tn().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){u=a.reGl.read()}),!u){A.next=6;break}if(d=this.getOuputDataTexture(),g=d.originalDataLength,p=d.elementsPerTexel,m=d.typedArrayConstructor,b=m===void 0?Float32Array:m,w=[],p!==4)for(C=0;C<u.length;C+=4)p===1?w.push(u[C]):p===2?w.push(u[C],u[C+1]):w.push(u[C],u[C+1],u[C+2]);else w=u;return A.abrupt("return",new b(w.slice(0,g)));case 6:return A.abrupt("return",new Float32Array);case 7:case"end":return A.stop()}},s,this)}));function o(){return r.apply(this,arguments)}return o}()},{key:"confirmInput",value:function(o,s){var a;this.entity===o.entity?(this.dynamicPingpong=!0,a=this):a=o,this.textureCache[s].id=a.getOuputDataTexture().id,this.textureCache[s].texture=a.getOuputDataTexture().texture,El&&console.log("[".concat(this.entity,"]: confirm input ").concat(s," from model ").concat(a.entity,", ").concat(a.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(o,s){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=this.context.uniforms.find(function(m){var b=m.name;return b===o});if(u){var d=this.calcDataTexture(o,u.type,s),g=d.texture,p=d.data;this.textureCache[o].data=p,this.textureCache[o].texture=g}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var o=this.context.output.name;this.textureCache[o].id=this.getOuputDataTexture().id,this.textureCache[o].texture=this.getOuputDataTexture().texture}var s=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=s,El&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var o=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=o}},{key:"cloneDataTexture",value:function(o){var s=o.data,a=o.textureWidth;return jv(jv({},o),{},{id:Da++,texture:this.reGl.texture({width:a,height:a,data:s,type:"float"})})}},{key:"calcDataTexture",value:function(o,s,a){var u=1;s===vs.Vector4FloatArray&&(u=4);for(var d=[],g=0;g<a.length;g+=u)u===1?d.push(a[g],0,0,0):u===2?d.push(a[g],a[g+1],0,0):u===3?d.push(a[g],a[g+1],a[g+2],0):u===4&&d.push(a[g],a[g+1],a[g+2],a[g+3]);var p=a.length,m=Math.ceil(p/u),b=Math.ceil(Math.sqrt(m)),w=b*b;m<w&&d.push.apply(d,(0,Ee.Z)(new Array((w-m)*4).fill(0)));var C=this.reGl.texture({width:b,height:b,data:d,type:"float"});return{id:Da++,data:d,originalDataLength:p,typedArrayConstructor:Ta()(a)?a.constructor:void 0,textureWidth:b,texture:C,texelCount:m,elementsPerTexel:u,isOutput:o===this.context.output.name}}}]),n}(),Es=function(){function n(r,o){(0,mr.Z)(this,n),this.elements=void 0;var s=o.data,a=o.usage,u=o.type,d=o.count;this.elements=r.elements({data:s,usage:kv[a||pt.STATIC_DRAW],type:$h[u||pt.UNSIGNED_BYTE],count:d})}return(0,yr.Z)(n,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(o){var s=o.data;this.elements.subdata(s)}},{key:"destroy",value:function(){this.elements.destroy()}}]),n}(),Xh=function(){function n(r,o){(0,mr.Z)(this,n),this.framebuffer=void 0;var s=o.width,a=o.height,u=o.color,d=o.colors,g=o.depth,p=o.stencil,m={width:s,height:a};Array.isArray(d)&&(m.colors=d.map(function(b){return b.get()})),u&&typeof u!="boolean"&&(m.color=u.get()),this.framebuffer=r.framebuffer(m)}return(0,yr.Z)(n,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(o){var s=o.width,a=o.height;this.framebuffer.resize(s,a)}}]),n}(),_l=k(81879),Cl=k(54256),Kn=k.n(Cl);function Sl(n){var r={};return Object.keys(n).forEach(function(o){Ol(o,n[o],r,"")}),r}function Ol(n,r,o,s){if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||Ta()(r)||r===""||r.resize!==void 0){o["".concat(s&&s+".").concat(n)]=r;return}Kn()(r)&&Object.keys(r).forEach(function(a){Ol(a,r[a],o,"".concat(s&&s+".").concat(n))}),Array.isArray(r)&&r.forEach(function(a,u){Object.keys(a).forEach(function(d){Ol(d,a[d],o,"".concat(s&&s+".").concat(n,"[").concat(u,"]"))})})}function Zh(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),o.push.apply(o,s)}return o}function To(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?Zh(Object(o),!0).forEach(function(s){(0,at.Z)(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):Zh(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}var Uv=function(){function n(r,o){(0,mr.Z)(this,n),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=r;var s=o.vs,a=o.fs,u=o.defines,d=o.attributes,g=o.uniforms,p=o.primitive,m=o.count,b=o.elements,w=o.depth,C=o.blend,O=o.stencil,A=o.cull,M=o.instances,P=o.scissor,I=o.viewport,N={};g&&(this.uniforms=Sl(g),Object.keys(g).forEach(function(Z){N[Z]=r.prop(Z)}));var R={};Object.keys(d).forEach(function(Z){R[Z]=d[Z].get()});var z=u&&this.generateDefines(u)||"",F={attributes:R,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(z,`
`).concat(a),uniforms:N,vert:`
`.concat(z,`
`).concat(s),primitive:wl[p===void 0?pt.TRIANGLES:p]};M&&(F.instances=M),m&&(F.count=m),b&&(F.elements=b.get()),P&&(F.scissor=P),I&&(F.viewport=I),this.initDepthDrawParams({depth:w},F),this.initBlendDrawParams({blend:C},F),this.initStencilDrawParams({stencil:O},F),this.initCullDrawParams({cull:A},F),this.drawCommand=r(F)}return(0,yr.Z)(n,[{key:"addUniforms",value:function(o){this.uniforms=To(To({},this.uniforms),Sl(o))}},{key:"draw",value:function(o){var s=To(To({},this.uniforms),Sl(o.uniforms||{})),a={};Object.keys(s).forEach(function(u){var d=(0,_l.Z)(s[u]);d==="boolean"||d==="number"||Array.isArray(s[u])||s[u].BYTES_PER_ELEMENT?a[u]=s[u]:d==="string"||(a[u]=s[u].get())}),this.drawCommand(a)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(o,s){var a=o.depth;a&&(s.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:xs[a.func||pt.LESS],range:a.range||[0,1]})}},{key:"initBlendDrawParams",value:function(o,s){var a=o.blend;if(a){var u=a.enable,d=a.func,g=a.equation,p=a.color,m=p===void 0?[0,0,0,0]:p;s.blend={enable:!!u,func:{srcRGB:ws[d&&d.srcRGB||pt.SRC_ALPHA],srcAlpha:ws[d&&d.srcAlpha||pt.SRC_ALPHA],dstRGB:ws[d&&d.dstRGB||pt.ONE_MINUS_SRC_ALPHA],dstAlpha:ws[d&&d.dstAlpha||pt.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Na[g&&g.rgb||pt.FUNC_ADD],alpha:Na[g&&g.alpha||pt.FUNC_ADD]},color:m}}}},{key:"initStencilDrawParams",value:function(o,s){var a=o.stencil;if(a){var u=a.enable,d=a.mask,g=d===void 0?-1:d,p=a.func,m=p===void 0?{cmp:pt.ALWAYS,ref:0,mask:-1}:p,b=a.opFront,w=b===void 0?{fail:pt.KEEP,zfail:pt.KEEP,zpass:pt.KEEP}:b,C=a.opBack,O=C===void 0?{fail:pt.KEEP,zfail:pt.KEEP,zpass:pt.KEEP}:C;s.stencil={enable:!!u,mask:g,func:To(To({},m),{},{cmp:zv[m.cmp]}),opFront:{fail:br[w.fail],zfail:br[w.zfail],zpass:br[w.zpass]},opBack:{fail:br[O.fail],zfail:br[O.zfail],zpass:br[O.zpass]}}}}},{key:"initCullDrawParams",value:function(o,s){var a=o.cull;if(a){var u=a.enable,d=a.face,g=d===void 0?pt.BACK:d;s.cull={enable:!!u,face:PE[g]}}}},{key:"generateDefines",value:function(o){return Object.keys(o).map(function(s){return"#define ".concat(s," ").concat(Number(o[s]))}).join(`
`)}}]),n}(),Ra=function(){function n(r,o){(0,mr.Z)(this,n),this.texture=void 0,this.width=void 0,this.height=void 0;var s=o.data,a=o.type,u=a===void 0?pt.UNSIGNED_BYTE:a,d=o.width,g=o.height,p=o.flipY,m=p===void 0?!1:p,b=o.format,w=b===void 0?pt.RGBA:b,C=o.mipmap,O=C===void 0?!1:C,A=o.wrapS,M=A===void 0?pt.CLAMP_TO_EDGE:A,P=o.wrapT,I=P===void 0?pt.CLAMP_TO_EDGE:P,N=o.aniso,R=N===void 0?0:N,z=o.alignment,F=z===void 0?1:z,Z=o.premultiplyAlpha,ot=Z===void 0?!1:Z,nt=o.mag,q=nt===void 0?pt.NEAREST:nt,et=o.min,st=et===void 0?pt.NEAREST:et,U=o.colorSpace,ct=U===void 0?pt.BROWSER_DEFAULT_WEBGL:U;this.width=d,this.height=g;var _t={width:d,height:g,type:$h[u],format:ME[w],wrapS:bs[M],wrapT:bs[I],mag:ys[q],min:ys[st],alignment:F,flipY:m,colorSpace:IE[ct],premultiplyAlpha:ot,aniso:R};s&&(_t.data=s),typeof O=="number"?_t.mipmap=Bv[O]:typeof O=="boolean"&&(_t.mipmap=O),this.texture=r.texture(_t)}return(0,yr.Z)(n,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(o){var s=o.width,a=o.height;this.texture.resize(s,a),this.width=s,this.height=a}},{key:"destroy",value:function(){this.texture.destroy()}}]),n}(),Hv=function(){function n(){var r=this;(0,mr.Z)(this,n),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var o=(0,Rn.Z)(Tn().mark(function s(a){return Tn().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!a.uniforms){d.next=3;break}return d.next=3,Promise.all(Object.keys(a.uniforms).map(function(){var g=(0,Rn.Z)(Tn().mark(function p(m){var b;return Tn().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!(a.uniforms[m]&&a.uniforms[m].load!==void 0)){C.next=5;break}return C.next=3,a.uniforms[m].load();case 3:b=C.sent,a.uniforms[m]=b;case 5:case"end":return C.stop()}},p)}));return function(p){return g.apply(this,arguments)}}()));case 3:return d.abrupt("return",new Uv(r.gl,a));case 4:case"end":return d.stop()}},s)}));return function(s){return o.apply(this,arguments)}}(),this.createAttribute=function(o){return new $C(r.gl,o)},this.createBuffer=function(o){return new Fv(r.gl,o)},this.createElements=function(o){return new Es(r.gl,o)},this.createTexture2D=function(o){return new Ra(r.gl,o)},this.createFramebuffer=function(o){return new Xh(r.gl,o)},this.useFramebuffer=function(o,s){r.gl({framebuffer:o?o.get():null})(s)},this.createComputeModel=function(){var o=(0,Rn.Z)(Tn().mark(function s(a){return Tn().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",new Wh(r.gl,a));case 1:case"end":return d.stop()}},s)}));return function(s){return o.apply(this,arguments)}}(),this.clear=function(o){var s=o.color,a=o.depth,u=o.stencil,d=o.framebuffer,g=d===void 0?null:d,p={color:s,depth:a,stencil:u};p.framebuffer=g===null?g:g.get(),r.gl.clear(p)},this.setScissor=function(o){r.gl&&r.gl._gl&&(o.enable&&o.box?(r.gl._gl.enable(pt.SCISSOR_TEST),r.gl._gl.scissor(o.box.x,o.box.y,o.box.width,o.box.height)):r.gl._gl.disable(pt.SCISSOR_TEST),r.gl._refresh())},this.viewport=function(o){var s=o.x,a=o.y,u=o.width,d=o.height;r.gl&&r.gl._gl&&(r.gl._gl.viewport(s,a,u,d),r.gl._refresh())},this.readPixels=function(o){var s=o.framebuffer,a=o.x,u=o.y,d=o.width,g=o.height,p={x:a,y:u,width:d,height:g};return s&&(p.framebuffer=s.get()),r.gl.read(p)},this.getCanvas=function(){return r.$canvas},this.getGLContext=function(){return r.gl._gl},this.destroy=function(){r.gl&&(r.gl.destroy(),r.inited=!1)}}return(0,yr.Z)(n,[{key:"init",value:function(){var r=(0,Rn.Z)(Tn().mark(function s(a){return Tn().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(!this.inited){d.next=2;break}return d.abrupt("return");case 2:return this.$canvas=a.canvas,d.next=5,new Promise(function(g,p){HC()({canvas:a.canvas,attributes:{alpha:!0,antialias:a.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(b,w){(b||!w)&&p(b),g(w)}})});case 5:this.gl=d.sent,this.inited=!0;case 7:case"end":return d.stop()}},s,this)}));function o(s){return r.apply(this,arguments)}return o}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),n}(),La=function(){function n(){(0,mr.Z)(this,n),this.engine=void 0,this.configService=new AE}return(0,yr.Z)(n,[{key:"setConfig",value:function(o){this.configService.set(o)}},{key:"setEngine",value:function(o){this.engine=o}},{key:"createEntity",value:function(){return Rv()}},{key:"createKernel",value:function(o){var s=new yl(this.engine,this.configService);return typeof o=="string"?s.setBundle(JSON.parse(o)):s.setBundle(o),s.init(),s}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=new n;return s.setConfig(o),s.setEngine(new Hv),s}}]),n}();const Mo=(n,r)=>{let o;return n?J(n)?o=()=>n:o=n:o=()=>r||1,o},Yh=(n,r)=>{const o=[],s=[],a={};let u=0;for(u=0;u<n.length;u++){const g=n[u];a[g.id]=u,o.push(g.x),o.push(g.y),o.push(0),o.push(0),s.push([])}for(u=0;u<r.length;u++){const g=r[u],p=zt(g,"source"),m=zt(g,"target");!isNaN(a[p])&&!isNaN(a[m])&&(s[a[p]].push(a[m]),s[a[m]].push(a[p]))}let d=0;for(u=0;u<n.length;u++){const g=o.length,p=s[u],m=p.length;o[u*4+2]=g,o[u*4+3]=m,d=Math.max(d,m);for(let b=0;b<m;++b){const w=p[b];o.push(+w)}}for(;o.length%4!==0;)o.push(0);return{maxEdgePerVetex:d,array:new Float32Array(o)}},$v=(n,r,o,s)=>{const a=[],u=[],d={};let g=0;for(g=0;g<n.length;g++){const m=n[g];d[m.id]=g,a.push(m.x),a.push(m.y),a.push(0),a.push(0),u.push([])}for(g=0;g<r.length;g++){const m=r[g],b=zt(m,"source"),w=zt(m,"target");u[d[b]].push(d[w]),u[d[b]].push(o(m)),u[d[b]].push(s(m)),u[d[b]].push(0),u[d[w]].push(d[b]),u[d[w]].push(o(m)),u[d[w]].push(s(m)),u[d[w]].push(0)}let p=0;for(g=0;g<n.length;g++){const m=a.length,b=u[g],w=b.length;a[g*4+2]=m+1048576*w/4,a[g*4+3]=0,p=Math.max(p,w/4);for(let C=0;C<w;++C){const O=b[C];a.push(+O)}}for(;a.length%4!==0;)a.push(0);return{maxEdgePerVetex:p,array:new Float32Array(a)}},Kh=(n,r)=>{const o=[],s=n.length,a={};return r.forEach(u=>{n.forEach((d,g)=>{if(a[u[d]]===void 0&&(a[u[d]]=Object.keys(a).length),o.push(a[u[d]]),g===s-1)for(;o.length%4!==0;)o.push(0)})}),{array:new Float32Array(o),count:Object.keys(a).length}},Wv=n=>{const r=[],o=n.length,s=n[0].length;for(let a=0;a<s;a++)n.forEach((u,d)=>{if(r.push(u[a]),d===o-1)for(;r.length%4!==0;)r.push(0)});return new Float32Array(r)},WC=null,Xv='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',XC=null,Zv='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}';var _n=function(n,r,o,s){function a(u){return u instanceof o?u:new o(function(d){d(u)})}return new(o||(o=Promise))(function(u,d){function g(b){try{m(s.next(b))}catch(w){d(w)}}function p(b){try{m(s.throw(b))}catch(w){d(w)}}function m(b){b.done?u(b.value):a(b.value).then(g,p)}m((s=s.apply(n,r||[])).next())})};class _s extends tt{constructor(r){super(),this.maxIteration=1e3,this.gravity=10,this.speed=1,this.clustering=!1,this.clusterField="cluster",this.clusterGravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}}execute(){return _n(this,void 0,void 0,function*(){const r=this,o=r.nodes;if(!o||o.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(o.length===1){o[0].x=s[0],o[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}const a={},u={};o.forEach((d,g)=>{J(d.x)||(d.x=Math.random()*this.width),J(d.y)||(d.y=Math.random()*this.height),a[d.id]=d,u[d.id]=g}),r.nodeMap=a,r.nodeIdxMap=u,yield r.run()})}executeWithWorker(r,o){return _n(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.center;if(!a||a.length===0)return;if(a.length===1){a[0].x=u[0],a[0].y=u[1];return}const d={},g={};a.forEach((p,m)=>{J(p.x)||(p.x=Math.random()*this.width),J(p.y)||(p.y=Math.random()*this.height),d[p.id]=p,g[p.id]=m}),s.nodeMap=d,s.nodeIdxMap=g,yield s.run(r,o)})}run(r,o){return _n(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.edges,d=s.maxIteration,g=s.center,p=s.height*s.width;let m=Math.sqrt(p)/10;const b=p/(a.length+1),w=Math.sqrt(b),C=s.speed,O=s.clustering,{array:A,count:M}=Kh([s.clusterField],a);a.forEach((et,st)=>{let U=0,ct=0;J(et.fx)&&J(et.fy)&&(U=et.fx||.001,ct=et.fy||.001),A[4*st+1]=U,A[4*st+2]=ct});const P=a.length,{maxEdgePerVetex:I,array:N}=Yh(a,u),R=s.workerEnabled;let z;R?z=La.create({canvas:r,engineOptions:{supportCompute:!0}}):z=La.create({engineOptions:{supportCompute:!0}});const F=s.onLayoutEnd,Z=[];for(let et=0;et<M;et++)Z.push(0,0,0,0);const ot=z.createKernel(Xv).setDispatch([P,1,1]).setBinding({u_Data:N,u_K:w,u_K2:b,u_Gravity:s.gravity,u_ClusterGravity:s.clusterGravity||s.gravity||1,u_Speed:C,u_MaxDisplace:m,u_Clustering:O?1:0,u_Center:g,u_AttributeArray:A,u_ClusterCenters:Z,MAX_EDGE_PER_VERTEX:I,VERTEX_COUNT:P});let nt;O&&(nt=z.createKernel(Zv).setDispatch([M,1,1]).setBinding({u_Data:N,u_NodeAttributes:A,u_ClusterCenters:Z,VERTEX_COUNT:P,CLUSTER_COUNT:M})),yield(()=>_n(this,void 0,void 0,function*(){for(let st=0;st<d;st++)yield ot.execute(),O&&(nt.setBinding({u_Data:ot}),yield nt.execute(),ot.setBinding({u_ClusterCenters:nt})),ot.setBinding({u_MaxDisplace:m*=.99});const et=yield ot.getOutput();r?o.postMessage({type:fu.GPUEND,vertexEdgeData:et}):a.forEach((st,U)=>{const ct=et[4*U],_t=et[4*U+1];st.x=ct,st.y=_t}),F&&F()}))()})}getType(){return"fruchterman-gpu"}}const ka=null,Io='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',Al=null,Jh='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}';var Tl=function(n,r,o,s){function a(u){return u instanceof o?u:new o(function(d){d(u)})}return new(o||(o=Promise))(function(u,d){function g(b){try{m(s.next(b))}catch(w){d(w)}}function p(b){try{m(s.throw(b))}catch(w){d(w)}}function m(b){b.done?u(b.value):a(b.value).then(g,p)}m((s=s.apply(n,r||[])).next())})};class Yv extends tt{constructor(r){super(),this.maxIteration=1e3,this.edgeStrength=200,this.nodeStrength=1e3,this.coulombDisScale=.005,this.damping=.9,this.maxSpeed=1e3,this.minMovement=.5,this.interval=.02,this.factor=1,this.linkDistance=1,this.gravity=10,this.workerEnabled=!1,this.nodes=[],this.edges=[],this.width=300,this.height=300,this.nodeMap={},this.nodeIdxMap={},this.updateCfg(r)}getDefaultCfg(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}}execute(){return Tl(this,void 0,void 0,function*(){const r=this,o=r.nodes;if(!o||o.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),r.center||(r.center=[r.width/2,r.height/2]);const s=r.center;if(o.length===1){o[0].x=s[0],o[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}const a={},u={};o.forEach((d,g)=>{J(d.x)||(d.x=Math.random()*r.width),J(d.y)||(d.y=Math.random()*r.height),a[d.id]=d,u[d.id]=g}),r.nodeMap=a,r.nodeIdxMap=u,r.nodeStrength=Mo(r.nodeStrength,1),r.edgeStrength=Mo(r.edgeStrength,1),yield r.run()})}executeWithWorker(r,o){const s=this,a=s.nodes,u=s.center;if(!a||a.length===0)return;if(a.length===1){a[0].x=u[0],a[0].y=u[1];return}const d={},g={};a.forEach((p,m)=>{J(p.x)||(p.x=Math.random()*s.width),J(p.y)||(p.y=Math.random()*s.height),d[p.id]=p,g[p.id]=m}),s.nodeMap=d,s.nodeIdxMap=g,s.nodeStrength=Mo(s.nodeStrength,1),s.edgeStrength=Mo(s.edgeStrength,1),s.run(r,o)}run(r,o){return Tl(this,void 0,void 0,function*(){const s=this,a=s.nodes,u=s.edges,d=s.maxIteration;!s.width&&typeof window!="undefined"&&(s.width=window.innerWidth),!s.height&&typeof window!="undefined"&&(s.height=window.innerHeight);const g=a.length;s.linkDistance=Mo(s.linkDistance),s.edgeStrength=Mo(s.edgeStrength);const{maxEdgePerVetex:p,array:m}=$v(a,u,s.linkDistance,s.edgeStrength);s.degrees=De(a.length,s.nodeIdxMap,u).map(U=>U.all);const b=[],w=[],C=[],O=[],A=[],M=[],P=[];s.getMass||(s.getMass=U=>s.degrees[s.nodeIdxMap[U.id]]||1);const I=s.gravity,N=s.center;a.forEach((U,ct)=>{b.push(s.getMass(U)),w.push(s.nodeStrength(U)),s.degrees[ct]||(s.degrees[ct]=0);let _t=[N[0],N[1],I];if(s.getCenter){const Tt=s.getCenter(U,s.degrees[ct]);Tt&&J(Tt[0])&&J(Tt[1])&&J(Tt[2])&&(_t=Tt)}C.push(_t[0]),O.push(_t[1]),A.push(_t[2]),J(U.fx)&&J(U.fy)?(M.push(U.fx||.001),P.push(U.fy||.001)):(M.push(0),P.push(0))});const R=Wv([b,s.degrees,w,M]),z=Wv([C,O,A,P]),F=s.workerEnabled;let Z;F?Z=La.create({canvas:r,engineOptions:{supportCompute:!0}}):Z=La.create({engineOptions:{supportCompute:!0}});const ot=s.onLayoutEnd,nt=[];m.forEach(U=>{nt.push(U)});for(let U=0;U<4;U++)nt.push(0);const q=Z.createKernel(Io).setDispatch([g,1,1]).setBinding({u_Data:m,u_damping:s.damping,u_maxSpeed:s.maxSpeed,u_minMovement:s.minMovement,u_coulombDisScale:s.coulombDisScale,u_factor:s.factor,u_NodeAttributeArray1:R,u_NodeAttributeArray2:z,MAX_EDGE_PER_VERTEX:p,VERTEX_COUNT:g,u_AveMovement:nt,u_interval:s.interval}),et=Z.createKernel(Jh).setDispatch([1,1,1]).setBinding({u_Data:m,VERTEX_COUNT:g,u_AveMovement:[0,0,0,0]});yield(()=>Tl(this,void 0,void 0,function*(){for(let ct=0;ct<d;ct++){yield q.execute(),et.setBinding({u_Data:q}),yield et.execute();const _t=Math.max(.02,s.interval-ct*.002);q.setBinding({u_interval:_t,u_AveMovement:et})}const U=yield q.getOutput();r?o.postMessage({type:fu.GPUEND,vertexEdgeData:U}):a.forEach((ct,_t)=>{const Tt=U[4*_t],te=U[4*_t+1];ct.x=Tt,ct.y=te}),ot&&ot()}))()})}getType(){return"gForce-gpu"}}class Kv extends tt{constructor(r){super(),this.center=[0,0],this.maxIteration=100,this.gravity=10,this.comboGravity=10,this.linkDistance=10,this.alpha=1,this.alphaMin=.001,this.alphaDecay=1-Math.pow(this.alphaMin,1/300),this.alphaTarget=0,this.velocityDecay=.6,this.edgeStrength=.6,this.nodeStrength=30,this.preventOverlap=!1,this.preventNodeOverlap=!1,this.preventComboOverlap=!1,this.collideStrength=void 0,this.nodeCollideStrength=.5,this.comboCollideStrength=.5,this.comboSpacing=20,this.comboPadding=10,this.optimizeRangeFactor=1,this.onTick=()=>{},this.onLayoutEnd=()=>{},this.depthAttractiveForceScale=1,this.depthRepulsiveForceScale=2,this.nodes=[],this.edges=[],this.combos=[],this.comboTrees=[],this.width=300,this.height=300,this.bias=[],this.nodeMap={},this.oriComboMap={},this.indexMap={},this.comboMap={},this.previousLayouted=!1,this.updateCfg(r)}getDefaultCfg(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}}execute(){const r=this,o=r.nodes,s=r.center;if(r.comboTree={id:"comboTreeRoot",depth:-1,children:r.comboTrees},!o||o.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(o.length===1){o[0].x=s[0],o[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}r.initVals(),r.run(),r.onLayoutEnd&&r.onLayoutEnd()}run(){const r=this,o=r.nodes,s=r.previousLayouted?r.maxIteration/5:r.maxIteration;!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const a=r.center,u=r.velocityDecay,d=r.comboMap;r.previousLayouted||r.initPos(d);for(let m=0;m<s;m++){const b=[];o.forEach((w,C)=>{b[C]={x:0,y:0}}),r.applyCalculate(b),r.applyComboCenterForce(b),o.forEach((w,C)=>{!J(w.x)||!J(w.y)||(w.x+=b[C].x*u,w.y+=b[C].y*u)}),r.alpha+=(r.alphaTarget-r.alpha)*r.alphaDecay,r.onTick()}const g=[0,0];o.forEach(m=>{!J(m.x)||!J(m.y)||(g[0]+=m.x,g[1]+=m.y)}),g[0]/=o.length,g[1]/=o.length;const p=[a[0]-g[0],a[1]-g[1]];o.forEach((m,b)=>{!J(m.x)||!J(m.y)||(m.x+=p[0],m.y+=p[1])}),r.combos.forEach(m=>{const b=d[m.id];b&&b.empty&&(m.x=b.cx||m.x,m.y=b.cy||m.y)}),r.previousLayouted=!0}initVals(){const r=this,o=r.edges,s=r.nodes,a=r.combos,u={},d={},g={};s.forEach((et,st)=>{d[et.id]=et,g[et.id]=st}),r.nodeMap=d,r.indexMap=g;const p={};a.forEach(et=>{p[et.id]=et}),r.oriComboMap=p,r.comboMap=r.getComboMap();const m=r.preventOverlap;r.preventComboOverlap=r.preventComboOverlap||m,r.preventNodeOverlap=r.preventNodeOverlap||m;const b=r.collideStrength;b&&(r.comboCollideStrength=b,r.nodeCollideStrength=b),r.comboCollideStrength=r.comboCollideStrength?r.comboCollideStrength:0,r.nodeCollideStrength=r.nodeCollideStrength?r.nodeCollideStrength:0;for(let et=0;et<o.length;++et){const st=zt(o[et],"source"),U=zt(o[et],"target");u[st]?u[st]++:u[st]=1,u[U]?u[U]++:u[U]=1}const w=[];for(let et=0;et<o.length;++et){const st=zt(o[et],"source"),U=zt(o[et],"target");w[et]=u[st]/(u[st]+u[U])}this.bias=w;const C=r.nodeSize,O=r.nodeSpacing;let A,M;if(J(O)?M=()=>O:ye(O)?M=O:M=()=>0,this.nodeSpacing=M,!C)A=et=>et.size?Ft(et.size)?(et.size[0]>et.size[1]?et.size[0]:et.size[1])/2:Mt(et.size)?(et.size.width>et.size.height?et.size.width:et.size.height)/2:et.size/2:10;else if(ye(C))A=et=>C(et);else if(Ft(C)){const st=(C[0]>C[1]?C[0]:C[1])/2;A=U=>st}else{const et=C/2;A=st=>et}this.nodeSize=A;const P=r.comboSpacing;let I;J(P)?I=()=>P:ye(P)?I=P:I=()=>0,this.comboSpacing=I;const N=r.comboPadding;let R;J(N)?R=()=>N:Ft(N)?R=()=>Math.max.apply(null,N):ye(N)?R=N:R=()=>0,this.comboPadding=R;let z=this.linkDistance,F;z||(z=10),J(z)?F=et=>z:F=z,this.linkDistance=F;let Z=this.edgeStrength,ot;Z||(Z=1),J(Z)?ot=et=>Z:ot=Z,this.edgeStrength=ot;let nt=this.nodeStrength,q;nt||(nt=30),J(nt)?q=et=>nt:q=nt,this.nodeStrength=q}initPos(r){this.nodes.forEach((a,u)=>{const d=a.comboId,g=r[d];d&&g?(a.x=g.cx+100/(u+1),a.y=g.cy+100/(u+1)):(a.x=100/(u+1),a.y=100/(u+1))})}getComboMap(){const r=this,o=r.nodeMap,s=r.comboTrees,a=r.oriComboMap,u={};return(s||[]).forEach(d=>{const g=[];Q(d,p=>{if(p.itemType==="node"||!a[p.id])return!0;if(u[p.id]===void 0){const w={id:p.id,name:p.id,cx:0,cy:0,count:0,depth:r.oriComboMap[p.id].depth||0,children:[]};u[p.id]=w}const m=p.children;m&&m.forEach(w=>{if(!u[w.id]&&!o[w.id])return!0;g.push(w)});const b=u[p.id];if(b.cx=0,b.cy=0,g.length===0){b.empty=!0;const w=a[p.id];b.cx=w.x,b.cy=w.y}return g.forEach(w=>{if(b.count++,w.itemType!=="node"){const O=u[w.id];J(O.cx)&&(b.cx+=O.cx),J(O.cy)&&(b.cy+=O.cy);return}const C=o[w.id];C&&(J(C.x)&&(b.cx+=C.x),J(C.y)&&(b.cy+=C.y))}),b.cx/=b.count||1,b.cy/=b.count||1,b.children=g,!0})}),u}applyComboCenterForce(r){const o=this,s=o.gravity,a=o.comboGravity||s,u=this.alpha,d=o.comboTrees,g=o.indexMap,p=o.nodeMap,m=o.comboMap;(d||[]).forEach(b=>{Q(b,w=>{if(w.itemType==="node"||!m[w.id])return!0;const O=m[w.id],A=(O.depth+1)/10*.5,M=O.cx,P=O.cy;return O.cx=0,O.cy=0,O.children.forEach(I=>{if(I.itemType!=="node"){const nt=m[I.id];nt&&J(nt.cx)&&(O.cx+=nt.cx),nt&&J(nt.cy)&&(O.cy+=nt.cy);return}const N=p[I.id],R=N.x-M||.005,z=N.y-P||.005,F=Math.sqrt(R*R+z*z),Z=g[N.id],ot=a*u/F*A;r[Z].x-=R*ot,r[Z].y-=z*ot,J(N.x)&&(O.cx+=N.x),J(N.y)&&(O.cy+=N.y)}),O.cx/=O.count||1,O.cy/=O.count||1,!0})})}applyCalculate(r){const o=this,s=o.comboMap,a=o.nodes,u={};a.forEach((g,p)=>{a.forEach((m,b)=>{if(p<b)return;const w=g.x-m.x||.005,C=g.y-m.y||.005;let O=w*w+C*C;const A=Math.sqrt(O);O<1&&(O=A),u[`${g.id}-${m.id}`]={vx:w,vy:C,vl2:O,vl:A},u[`${m.id}-${g.id}`]={vl2:O,vl:A,vx:-w,vy:-C}})}),o.updateComboSizes(s),o.calRepulsive(r,u),o.calAttractive(r,u),o.preventComboOverlap&&o.comboNonOverlapping(r,s)}updateComboSizes(r){const o=this,s=o.comboTrees,a=o.nodeMap,u=o.nodeSize,d=o.comboSpacing,g=o.comboPadding;(s||[]).forEach(p=>{const m=[];Q(p,b=>{if(b.itemType==="node")return!0;const w=r[b.id];if(!w)return!1;const C=b.children;C&&C.forEach(M=>{!r[M.id]&&!a[M.id]||m.push(M)}),w.minX=1/0,w.minY=1/0,w.maxX=-1/0,w.maxY=-1/0,m.forEach(M=>{if(M.itemType!=="node")return!0;const P=a[M.id];if(!P)return!0;const I=u(P),N=P.x-I,R=P.y-I,z=P.x+I,F=P.y+I;w.minX>N&&(w.minX=N),w.minY>R&&(w.minY=R),w.maxX<z&&(w.maxX=z),w.maxY<F&&(w.maxY=F)});let O=o.oriComboMap[b.id].size||10;Ft(O)&&(O=O[0]);const A=Math.max(w.maxX-w.minX,w.maxY-w.minY,O);return w.r=A/2+d(w)/2+g(w),!0})})}comboNonOverlapping(r,o){const s=this,a=s.comboTree,u=s.comboCollideStrength,d=s.indexMap,g=s.nodeMap;Q(a,p=>{if(!o[p.id]&&!g[p.id]&&p.id!=="comboTreeRoot")return!1;const m=p.children;return m&&m.length>1&&m.forEach((b,w)=>{if(b.itemType==="node")return!1;const C=o[b.id];C&&m.forEach((O,A)=>{if(w<=A||O.itemType==="node")return!1;const M=o[O.id];if(!M)return!1;const P=C.cx-M.cx||.005,I=C.cy-M.cy||.005,N=P*P+I*I,R=C.r||1,z=M.r||1,F=R+z,Z=z*z,ot=R*R;if(N<F*F){const nt=b.children;if(!nt||nt.length===0)return!1;const q=O.children;if(!q||q.length===0)return!1;const et=Math.sqrt(N),st=(F-et)/et*u,U=P*st,ct=I*st,_t=Z/(ot+Z),Tt=1-_t;nt.forEach(te=>{if(te.itemType!=="node")return!1;if(!g[te.id])return;const $t=d[te.id];q.forEach(Xt=>{if(Xt.itemType!=="node"||!g[Xt.id])return!1;const ne=d[Xt.id];r[$t].x+=U*_t,r[$t].y+=ct*_t,r[ne].x-=U*Tt,r[ne].y-=ct*Tt})})}})}),!0})}calRepulsive(r,o){const s=this,a=s.nodes,u=s.width*s.optimizeRangeFactor,d=s.nodeStrength,g=s.alpha,p=s.nodeCollideStrength,m=s.preventNodeOverlap,b=s.nodeSize,w=s.nodeSpacing,C=s.depthRepulsiveForceScale,O=s.center;a.forEach((A,M)=>{if(!(!A.x||!A.y)){if(O){const P=s.gravity,I=A.x-O[0]||.005,N=A.y-O[1]||.005,R=Math.sqrt(I*I+N*N);r[M].x-=I*P*g/R,r[M].y-=N*P*g/R}a.forEach((P,I)=>{if(M===I||!P.x||!P.y)return;const{vl2:N,vl:R}=o[`${A.id}-${P.id}`];if(R>u)return;const{vx:z,vy:F}=o[`${A.id}-${P.id}`];let Z=Math.log(Math.abs(P.depth-A.depth)/10)+1||1;Z=Z<1?1:Z,P.comboId!==A.comboId&&(Z+=1);const ot=Z?Math.pow(C,Z):1,nt=d(P)*g/N*ot;if(r[M].x+=z*nt,r[M].y+=F*nt,M<I&&m){const q=b(A)+w(A)||1,et=b(P)+w(P)||1,st=q+et;if(N<st*st){const U=(st-R)/R*p,ct=et*et;let _t=ct/(q*q+ct);const Tt=z*U,te=F*U;r[M].x+=Tt*_t,r[M].y+=te*_t,_t=1-_t,r[I].x-=Tt*_t,r[I].y-=te*_t}}})}})}calAttractive(r,o){const s=this,a=s.edges,u=s.linkDistance,d=s.alpha,g=s.edgeStrength,p=s.bias,m=s.depthAttractiveForceScale;a.forEach((b,w)=>{const C=zt(b,"source"),O=zt(b,"target");if(!C||!O||C===O)return;const A=s.indexMap[C],M=s.indexMap[O],P=s.nodeMap[C],I=s.nodeMap[O];if(!P||!I)return;let N=P.depth===I.depth?0:Math.log(Math.abs(P.depth-I.depth)/10);P.comboId===I.comboId&&(N=N/2);let R=N?Math.pow(m,N):1;if(P.comboId!==I.comboId&&R===1?R=m/2:P.comboId===I.comboId&&(R=2),!J(I.x)||!J(P.x)||!J(I.y)||!J(P.y))return;const{vl:z,vx:F,vy:Z}=o[`${O}-${C}`],ot=(z-u(b))/z*d*g(b)*R,nt=F*ot,q=Z*ot,et=p[w];r[M].x-=nt*et,r[M].y-=q*et,r[A].x+=nt*(1-et),r[A].y+=q*(1-et)})}getType(){return"comboForce"}}class Jv extends tt{constructor(r){super(),this.center=[0,0],this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.comboPadding=10,this.comboTrees=[],this.updateCfg(r)}getDefaultCfg(){return{}}execute(){const r=this,o=r.nodes,s=r.center;if(!o||o.length===0){r.onLayoutEnd&&r.onLayoutEnd();return}if(o.length===1){o[0].x=s[0],o[0].y=s[1],r.onLayoutEnd&&r.onLayoutEnd();return}r.initVals(),r.run(),r.onLayoutEnd&&r.onLayoutEnd()}run(){var r;const o=this,{nodes:s,edges:a,combos:u,comboEdges:d,center:g}=o,p={};s.forEach(I=>{p[I.id]=I});const m={};u.forEach(I=>{m[I.id]=I});const b=o.getInnerGraphs(p),w=[],C=[],O={};let A=!0;this.comboTrees.forEach(I=>{const N=b[I.id];if(!N)return;const R=Object.assign(Object.assign({},I),{x:N.x||m[I.id].x,y:N.y||m[I.id].y,fx:N.fx||m[I.id].fx,fy:N.fy||m[I.id].fy,mass:N.mass||m[I.id].mass,size:N.size});C.push(R),!isNaN(R.x)&&R.x!==0&&!isNaN(R.y)&&R.y!==0?A=!1:(R.x=Math.random()*100,R.y=Math.random()*100),w.push(I.id),Q(I,z=>(z.id!==I.id&&(O[z.id]=I.id),!0))}),s.forEach(I=>{if(I.comboId&&m[I.comboId])return;const N=Object.assign({},I);C.push(N),!isNaN(N.x)&&N.x!==0&&!isNaN(N.y)&&N.y!==0?A=!1:(N.x=Math.random()*100,N.y=Math.random()*100),w.push(I.id)});const M=[];if(a.concat(d).forEach(I=>{const N=O[I.source]||I.source,R=O[I.target]||I.target;N!==R&&w.includes(N)&&w.includes(R)&&M.push({source:N,target:R})}),C!=null&&C.length){if(C.length===1)C[0].x=g[0],C[0].y=g[1];else{const I={nodes:C,edges:M},N=this.outerLayout||new gt({gravity:1,factor:4,linkDistance:(z,F,Z)=>{var ot,nt;const q=((((ot=F.size)===null||ot===void 0?void 0:ot[0])||30)+(((nt=Z.size)===null||nt===void 0?void 0:nt[0])||30))/2;return Math.min(q*1.5,700)}}),R=(r=N.getType)===null||r===void 0?void 0:r.call(N);N.updateCfg({center:g,kg:5,preventOverlap:!0,animate:!1}),A&&O0[R]&&(C.length<100?new fl:new ft).layout(I),N.layout(I)}C.forEach(I=>{const N=b[I.id];if(!N){const R=p[I.id];R&&(R.x=I.x,R.y=I.y);return}N.visited=!0,N.x=I.x,N.y=I.y,N.nodes.forEach(R=>{R.x+=I.x,R.y+=I.y})})}const P=Object.keys(b);for(let I=P.length-1;I>=0;I--){const N=P[I],R=b[N];R&&(R.nodes.forEach(z=>{R.visited||(z.x+=R.x||0,z.y+=R.y||0),p[z.id]&&(p[z.id].x=z.x,p[z.id].y=z.y)}),m[N]&&(m[N].x=R.x,m[N].y=R.y))}return{nodes:s,edges:a,combos:u,comboEdges:d}}getInnerGraphs(r){const o=this,{comboTrees:s,nodeSize:a,edges:u,comboPadding:d,spacing:g}=o,p={},m=this.innerLayout||new Dn({type:"concentric",sortBy:"id"});return m.center=[0,0],m.preventOverlap=!0,m.nodeSpacing=g,(s||[]).forEach(b=>{Q(b,w=>{var C;let O=(d==null?void 0:d(w))||10;if(Ft(O)&&(O=Math.max(...O)),!((C=w.children)===null||C===void 0)&&C.length){const A=w.children.map(q=>{if(q.itemType==="combo")return p[q.id];const et=r[q.id]||{};return Object.assign(Object.assign({},et),q)}),M=A.map(q=>q.id),P={nodes:A,edges:u.filter(q=>M.includes(q.source)&&M.includes(q.target))};let I=1/0;A.forEach(q=>{var et;q.size||(q.size=((et=p[q.id])===null||et===void 0?void 0:et.size)||(a==null?void 0:a(q))||[30,30]),J(q.size)&&(q.size=[q.size,q.size]),I>q.size[0]&&(I=q.size[0]),I>q.size[1]&&(I=q.size[1])}),m.layout(P);const{minX:N,minY:R,maxX:z,maxY:F}=bt(A),Z={x:(z+N)/2,y:(F+R)/2};P.nodes.forEach(q=>{q.x-=Z.x,q.y-=Z.y});const ot=Math.max(z-N,I)+O*2,nt=Math.max(F-R,I)+O*2;p[w.id]={id:w.id,nodes:A,size:[ot,nt]}}else if(w.itemType==="combo"){const A=O?[O*2,O*2]:[30,30];p[w.id]={id:w.id,nodes:[],size:A}}return!0})}),p}initVals(){const r=this,o=r.nodeSize,s=r.spacing;let a,u;if(J(s)?u=()=>s:ye(s)?u=s:u=()=>0,this.spacing=u,!o)a=p=>{const m=u(p);return p.size?Ft(p.size)?((p.size[0]>p.size[1]?p.size[0]:p.size[1])+m)/2:Mt(p.size)?((p.size.width>p.size.height?p.size.width:p.size.height)+m)/2:(p.size+m)/2:10+m/2};else if(ye(o))a=p=>{const m=o(p),b=u(p);return Ft(p.size)?((p.size[0]>p.size[1]?p.size[0]:p.size[1])+b)/2:((m||10)+b)/2};else if(Ft(o)){const m=(o[0]>o[1]?o[0]:o[1])/2;a=b=>m+u(b)/2}else{const p=o/2;a=m=>p+u(m)/2}this.nodeSize=a;const d=r.comboPadding;let g;J(d)?g=()=>d:Ft(d)?g=()=>Math.max.apply(null,d):ye(d)?g=d:g=()=>0,this.comboPadding=g}getType(){return"comboCombined"}}class gi{constructor(r){this.id=r.id||0,this.rx=r.rx,this.ry=r.ry,this.fx=0,this.fy=0,this.mass=r.mass,this.degree=r.degree,this.g=r.g||0}distanceTo(r){const o=this.rx-r.rx,s=this.ry-r.ry;return Math.hypot(o,s)}setPos(r,o){this.rx=r,this.ry=o}resetForce(){this.fx=0,this.fy=0}addForce(r){const o=r.rx-this.rx,s=r.ry-this.ry;let a=Math.hypot(o,s);a=a<1e-4?1e-4:a;const u=this.g*(this.degree+1)*(r.degree+1)/a;this.fx+=u*o/a,this.fy+=u*s/a}in(r){return r.contains(this.rx,this.ry)}add(r){const o=this.mass+r.mass,s=(this.rx*this.mass+r.rx*r.mass)/o,a=(this.ry*this.mass+r.ry*r.mass)/o,u=this.degree+r.degree,d={rx:s,ry:a,mass:o,degree:u};return new gi(d)}}class Vi{constructor(r){this.xmid=r.xmid,this.ymid=r.ymid,this.length=r.length,this.massCenter=r.massCenter||[0,0],this.mass=r.mass||1}getLength(){return this.length}contains(r,o){const s=this.length/2;return r<=this.xmid+s&&r>=this.xmid-s&&o<=this.ymid+s&&o>=this.ymid-s}NW(){const r=this.xmid-this.length/4,o=this.ymid+this.length/4,s=this.length/2,a={xmid:r,ymid:o,length:s};return new Vi(a)}NE(){const r=this.xmid+this.length/4,o=this.ymid+this.length/4,s=this.length/2,a={xmid:r,ymid:o,length:s};return new Vi(a)}SW(){const r=this.xmid-this.length/4,o=this.ymid-this.length/4,s=this.length/2,a={xmid:r,ymid:o,length:s};return new Vi(a)}SE(){const r=this.xmid+this.length/4,o=this.ymid-this.length/4,s=this.length/2,a={xmid:r,ymid:o,length:s};return new Vi(a)}}class pi{constructor(r){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,r!=null&&(this.quad=r)}insert(r){if(this.body==null){this.body=r;return}this._isExternal()?(this.quad&&(this.NW=new pi(this.quad.NW()),this.NE=new pi(this.quad.NE()),this.SW=new pi(this.quad.SW()),this.SE=new pi(this.quad.SE())),this._putBody(this.body),this._putBody(r),this.body=this.body.add(r)):(this.body=this.body.add(r),this._putBody(r))}_putBody(r){this.quad&&(r.in(this.quad.NW())&&this.NW?this.NW.insert(r):r.in(this.quad.NE())&&this.NE?this.NE.insert(r):r.in(this.quad.SW())&&this.SW?this.SW.insert(r):r.in(this.quad.SE())&&this.SE&&this.SE.insert(r))}_isExternal(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null}updateForce(r){if(!(this.body==null||r===this.body))if(this._isExternal())r.addForce(this.body);else{const o=this.quad?this.quad.getLength():0,s=this.body.distanceTo(r);o/s<this.theta?r.addForce(this.body):(this.NW&&this.NW.updateForce(r),this.NE&&this.NE.updateForce(r),this.SW&&this.SW.updateForce(r),this.SE&&this.SE.updateForce(r))}}}class Ml extends tt{constructor(r){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.kr=5,this.kg=1,this.mode="normal",this.preventOverlap=!1,this.dissuadeHubs=!1,this.barnesHut=void 0,this.maxIteration=0,this.ks=.1,this.ksmax=10,this.tao=.1,this.onLayoutEnd=()=>{},this.prune=void 0,this.updateCfg(r)}getDefaultCfg(){return{}}execute(){const r=this,{nodes:o,onLayoutEnd:s,prune:a}=r;let u=r.maxIteration;!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight);const d=[],g=o.length;for(let p=0;p<g;p+=1){const m=o[p];let b=10,w=10;J(m.size)&&(b=m.size,w=m.size),Ft(m.size)?(isNaN(m.size[0])||(b=m.size[0]),isNaN(m.size[1])||(w=m.size[1])):Mt(m.size)&&(b=m.size.width,w=m.size.height),r.getWidth&&!isNaN(r.getWidth(m))&&(w=r.getWidth(m)),r.getHeight&&!isNaN(r.getHeight(m))&&(b=r.getHeight(m));const C=Math.max(b,w);d.push(C)}r.barnesHut===void 0&&g>250&&(r.barnesHut=!0),r.prune===void 0&&g>100&&(r.prune=!0),this.maxIteration===0&&!r.prune?(u=250,g<=200&&g>100?u=1e3:g>200&&(u=1200),this.maxIteration=u):this.maxIteration===0&&a&&(u=100,g<=200&&g>100?u=500:g>200&&(u=950),this.maxIteration=u),r.kr||(r.kr=50,g>100&&g<=500?r.kr=20:g>500&&(r.kr=1)),r.kg||(r.kg=20,g>100&&g<=500?r.kg=10:g>500&&(r.kg=1)),this.nodes=r.updateNodesByForces(d),s()}updateNodesByForces(r){const o=this,{edges:s,maxIteration:a}=o;let u=o.nodes;const d=s.filter(A=>{const M=zt(A,"source"),P=zt(A,"target");return M!==P}),g=u.length,p=d.length,m=[],b={},w={},C=[];for(let A=0;A<g;A+=1)b[u[A].id]=A,m[A]=0,(u[A].x===void 0||isNaN(u[A].x))&&(u[A].x=Math.random()*1e3),(u[A].y===void 0||isNaN(u[A].y))&&(u[A].y=Math.random()*1e3),C.push({x:u[A].x,y:u[A].y});for(let A=0;A<p;A+=1){let M,P,I=0,N=0;for(let R=0;R<g;R+=1){const z=zt(d[A],"source"),F=zt(d[A],"target");u[R].id===z?(M=u[R],I=R):u[R].id===F&&(P=u[R],N=R),w[A]={sourceIdx:I,targetIdx:N}}M&&(m[b[M.id]]+=1),P&&(m[b[P.id]]+=1)}let O=a;if(u=this.iterate(O,b,w,p,m,r),o.prune){for(let A=0;A<p;A+=1)m[w[A].sourceIdx]<=1?(u[w[A].sourceIdx].x=u[w[A].targetIdx].x,u[w[A].sourceIdx].y=u[w[A].targetIdx].y):m[w[A].targetIdx]<=1&&(u[w[A].targetIdx].x=u[w[A].sourceIdx].x,u[w[A].targetIdx].y=u[w[A].sourceIdx].y);o.prune=!1,o.barnesHut=!1,O=100,u=this.iterate(O,b,w,p,m,r)}return u}iterate(r,o,s,a,u,d){const g=this;let{nodes:p}=g;const{kr:m,preventOverlap:b}=g,{barnesHut:w}=g,C=p.length;let O=0;const A=100;let M=r;const P=50;let I=[];const N=[],R=[];for(let z=0;z<C;z+=1)if(I[2*z]=0,I[2*z+1]=0,w){const F={id:z,rx:p[z].x,ry:p[z].y,mass:1,g:m,degree:u[z]};R[z]=new gi(F)}for(;M>0;){for(let F=0;F<C;F+=1)N[2*F]=I[2*F],N[2*F+1]=I[2*F+1],I[2*F]=0,I[2*F+1]=0;I=this.getAttrForces(M,P,a,o,s,u,d,I),w&&(b&&M>P||!b)?I=this.getOptRepGraForces(I,R,u):I=this.getRepGraForces(M,P,I,A,d,u);const z=this.updatePos(I,N,O,u);p=z.nodes,O=z.sg,M--,g.tick&&g.tick()}return p}getAttrForces(r,o,s,a,u,d,g,p){const m=this,{nodes:b,preventOverlap:w,dissuadeHubs:C,mode:O,prune:A}=m;for(let M=0;M<s;M+=1){const P=b[u[M].sourceIdx],I=u[M].sourceIdx,N=b[u[M].targetIdx],R=u[M].targetIdx;if(A&&(d[I]<=1||d[R]<=1))continue;const z=[N.x-P.x,N.y-P.y];let F=Math.hypot(z[0],z[1]);F=F<1e-4?1e-4:F,z[0]=z[0]/F,z[1]=z[1]/F,w&&r<o&&(F=F-g[I]-g[R]);let Z=F,ot=Z;O==="linlog"&&(Z=Math.log(1+F),ot=Z),C&&(Z=F/d[I],ot=F/d[R]),w&&r<o&&F<=0?(Z=0,ot=0):w&&r<o&&F>0&&(Z=F,ot=F),p[2*a[P.id]]+=Z*z[0],p[2*a[N.id]]-=ot*z[0],p[2*a[P.id]+1]+=Z*z[1],p[2*a[N.id]+1]-=ot*z[1]}return p}getRepGraForces(r,o,s,a,u,d){const g=this,{nodes:p,preventOverlap:m,kr:b,kg:w,center:C,prune:O}=g,A=p.length;for(let M=0;M<A;M+=1){for(let R=M+1;R<A;R+=1){if(O&&(d[M]<=1||d[R]<=1))continue;const z=[p[R].x-p[M].x,p[R].y-p[M].y];let F=Math.hypot(z[0],z[1]);F=F<1e-4?1e-4:F,z[0]=z[0]/F,z[1]=z[1]/F,m&&r<o&&(F=F-u[M]-u[R]);let Z=b*(d[M]+1)*(d[R]+1)/F;m&&r<o&&F<0?Z=a*(d[M]+1)*(d[R]+1):m&&r<o&&F===0?Z=0:m&&r<o&&F>0&&(Z=b*(d[M]+1)*(d[R]+1)/F),s[2*M]-=Z*z[0],s[2*R]+=Z*z[0],s[2*M+1]-=Z*z[1],s[2*R+1]+=Z*z[1]}const P=[p[M].x-C[0],p[M].y-C[1]],I=Math.hypot(P[0],P[1]);P[0]=P[0]/I,P[1]=P[1]/I;const N=w*(d[M]+1);s[2*M]-=N*P[0],s[2*M+1]-=N*P[1]}return s}getOptRepGraForces(r,o,s){const a=this,{nodes:u,kg:d,center:g,prune:p}=a,m=u.length;let b=9e10,w=-9e10,C=9e10,O=-9e10;for(let N=0;N<m;N+=1)p&&s[N]<=1||(o[N].setPos(u[N].x,u[N].y),u[N].x>=w&&(w=u[N].x),u[N].x<=b&&(b=u[N].x),u[N].y>=O&&(O=u[N].y),u[N].y<=C&&(C=u[N].y));const A=Math.max(w-b,O-C),M={xmid:(w+b)/2,ymid:(O+C)/2,length:A,massCenter:g,mass:m},P=new Vi(M),I=new pi(P);for(let N=0;N<m;N+=1)p&&s[N]<=1||o[N].in(P)&&I.insert(o[N]);for(let N=0;N<m;N+=1){if(p&&s[N]<=1)continue;o[N].resetForce(),I.updateForce(o[N]),r[2*N]-=o[N].fx,r[2*N+1]-=o[N].fy;const R=[u[N].x-g[0],u[N].y-g[1]];let z=Math.hypot(R[0],R[1]);z=z<1e-4?1e-4:z,R[0]=R[0]/z,R[1]=R[1]/z;const F=d*(s[N]+1);r[2*N]-=F*R[0],r[2*N+1]-=F*R[1]}return r}updatePos(r,o,s,a){const u=this,{nodes:d,ks:g,tao:p,prune:m,ksmax:b}=u,w=d.length,C=[],O=[];let A=0,M=0;for(let I=0;I<w;I+=1){if(m&&a[I]<=1)continue;const N=[r[2*I]-o[2*I],r[2*I+1]-o[2*I+1]],R=Math.hypot(N[0],N[1]),z=[r[2*I]+o[2*I],r[2*I+1]+o[2*I+1]],F=Math.hypot(z[0],z[1]);C[I]=R,O[I]=F/2,A+=(a[I]+1)*C[I],M+=(a[I]+1)*O[I]}const P=s;s=p*M/A,P!==0&&(s=s>1.5*P?1.5*P:s);for(let I=0;I<w;I+=1){if(m&&a[I]<=1||J(d[I].fx)&&J(d[I].fy))continue;let N=g*s/(1+s*Math.sqrt(C[I])),R=Math.hypot(r[2*I],r[2*I+1]);R=R<1e-4?1e-4:R;const z=b/R;N=N>z?z:N;const F=N*r[2*I],Z=N*r[2*I+1];d[I].x+=F,d[I].y+=Z}return{nodes:d,sg:s}}}class hr{constructor(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}init(r,o,s){this.cells=[],this.CELL_W=s.CELL_W||hr.DEFAULT_CELL_W,this.CELL_H=s.CELL_H||hr.DEFAULT_CELL_H,this.columnNum=Math.ceil(r/this.CELL_W),this.rowNum=Math.ceil(o/this.CELL_H),hr.MIN_DIST=Math.pow(r,2)+Math.pow(o,2);for(let a=0;a<this.columnNum;a++){const u=[];for(let d=0;d<this.rowNum;d++){const g={dx:a,dy:d,x:a*this.CELL_W,y:d*this.CELL_H,occupied:!1};u.push(g)}this.cells.push(u)}}findGridByNodeId(r){var o,s;for(let a=0;a<this.columnNum;a++)for(let u=0;u<this.rowNum;u++)if(this.cells[a][u].node&&((s=(o=this.cells[a][u])===null||o===void 0?void 0:o.node)===null||s===void 0?void 0:s.id)===r)return{column:a,row:u};return null}sqdist(r,o){return Math.pow(r.x-o.x,2)+Math.pow(r.y-o.y,2)}occupyNearest(r){let o=hr.MIN_DIST,s,a=null;for(let u=0;u<this.columnNum;u++)for(let d=0;d<this.rowNum;d++)!this.cells[u][d].occupied&&(s=this.sqdist(r,this.cells[u][d]))<o&&(o=s,a=this.cells[u][d]);return a&&(a.occupied=!0),a}insertColumn(r,o){if(!(o<=0)){for(let s=0;s<o;s++){this.cells[s+this.columnNum]=[];for(let a=0;a<this.rowNum;a++)this.cells[s+this.columnNum][a]={dx:s,dy:a,x:s*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null}}for(let s=this.columnNum-1;s>r;s--)for(let a=0;a<this.rowNum;a++)this.cells[s+o][a]=Object.assign(Object.assign({},this.cells[s][a]),{x:(s+o)*this.CELL_W,y:a*this.CELL_H}),this.cells[s][a]={x:s*this.CELL_W,y:a*this.CELL_H,occupied:!0,node:null};for(let s=0;s<this.additionColumn.length;s++)this.additionColumn[s]>=r&&(this.additionColumn[s]+=o);for(let s=0;s<o;s++)this.additionColumn.push(r+s+1);this.columnNum+=o}}insertRow(r,o){if(!(o<=0)){for(let s=0;s<o;s++)for(let a=0;a<this.columnNum;a++)this.cells[a][s+this.rowNum]={dx:a,dy:s,x:a*this.CELL_W,y:s*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.columnNum;s++)for(let a=this.rowNum-1;a>r;a--)this.cells[s][a+o]=Object.assign(Object.assign({},this.cells[s][a]),{dx:s,dy:a+o,x:s*this.CELL_W,y:(a+o)*this.CELL_H}),this.cells[s][a]={dx:s,dy:a,x:s*this.CELL_W,y:a*this.CELL_H,occupied:!1,node:null};for(let s=0;s<this.additionRow.length;s++)this.additionRow[s]>=r&&(this.additionRow[s]+=o);for(let s=0;s<o;s++)this.additionRow.push(r+s+1);this.rowNum+=o}}getNodes(){const r=[];for(let o=0;o<this.columnNum;o++)for(let s=0;s<this.rowNum;s++)this.cells[o][s].node&&r.push(this.cells[o][s]);return r}}hr.MIN_DIST=50,hr.DEFAULT_CELL_W=80,hr.DEFAULT_CELL_H=80;function qv(n,r){if(!n.nodes||n.nodes.length===0)return n;const o=r.width,s=r.height,a=r.nodeMinGap;let u=1e4,d=1e4;n.nodes.forEach(p=>{const m=p.size[0]||50,b=p.size[1]||50;u=Math.min(m,u),d=Math.min(b,d)});const g=new hr;g.init(o,s,{CELL_H:d,CELL_W:u}),n.nodes.forEach(p=>{const m=g.occupyNearest(p);m&&(m.node={id:p.id,size:p.size},p.x=m.x,p.y=m.y,p.dx=m.dx,p.dy=m.dy)});for(let p=0;p<n.nodes.length;p++){const m=n.nodes[p],b=g.findGridByNodeId(m.id);if(!b)throw new Error("can not find node cell");const{column:w,row:C}=b;if(m.size[0]+a>u){const O=Math.ceil((m.size[0]+a)/u)-1;let A=O;for(let M=0;M<O&&(g.additionColumn.indexOf(w+M+1)>-1&&!g.cells[w+M+1][C].node);M++)A--;g.insertColumn(w,A)}if(m.size[1]+a>d){const O=Math.ceil((m.size[1]+a)/d)-1;let A=O;for(let M=0;M<O&&(g.additionRow.indexOf(C+M+1)>-1&&!g.cells[w][C+M+1].node);M++)A--;g.insertRow(C,A)}}for(let p=0;p<g.columnNum;p++)for(let m=0;m<g.rowNum;m++){const b=g.cells[p][m];if(b.node){const w=n.nodes.find(C=>{var O;return C.id===((O=b==null?void 0:b.node)===null||O===void 0?void 0:O.id)});w&&(w.x=b.x+w.size[0]/2,w.y=b.y+w.size[1]/2)}}}const qh=1200,dr=800,Jr=1e7,_e=10,Pr=3.141592653589793,Ui=1.5707963267948966,NE=Pr*.375,Ba=Pr*.625,kn=new Map,za=10,Qh=10;let Fa=.8;const Qv=.1,DE=.5;function RE(n,r,o){const s=n.x-n.size[0]/2,a=n.y-n.size[1]/2,u=n.x+n.size[0]/2,d=n.y+n.size[1]/2,g=r.x-r.size[0]/2,p=r.y-r.size[1]/2,m=r.x+r.size[0]/2,b=r.y+r.size[1]/2,w=n.x,C=n.y,O=r.x,A=r.y,M=O-w,P=Math.atan2(M,A-C);let I=0,N=0,R=0,z=0;P>Ui?(N=a-b,I=g-u,R=parseFloat(N?(N/Math.cos(P)).toFixed(2):I.toFixed(2)),z=parseFloat(I?(I/Math.sin(P)).toFixed(2):N.toFixed(2))):0<P&&P<=Ui?(N=p-d,I=g-u,N>I?R=z=parseFloat(N?(N/Math.cos(P)).toFixed(2):I.toFixed(2)):R=z=parseFloat(I?(I/Math.sin(P)).toFixed(2):N.toFixed(2))):P<-Ui?(N=a-b,I=-(m-s),N>I?R=z=parseFloat(N?(N/Math.cos(P)).toFixed(2):I.toFixed(2)):R=z=parseFloat(I?(I/Math.sin(P)).toFixed(2):N.toFixed(2))):(N=p-d,Math.abs(M)>(u-s)/2?I=s-m:I=M,N>I?R=z=parseFloat(N?(N/Math.cos(P)).toFixed(2):I.toFixed(2)):R=z=parseFloat(I&&P!==0?(I/Math.sin(P)).toFixed(2):N.toFixed(2)));const F=parseFloat(P.toFixed(2));let Z=o;return o&&(Z=NE<F&&F<Ba),{distance:Math.abs(R<z?R:z),isHoriz:Z}}function td(n,r){const s=(kn.get(n.id)||[]).find(ot=>ot.source===r.id||ot.target===r.id),a=n.size[0]*n.size[1],u=r.size[0]*r.size[1],d=a>u?r:n,g=a>u?n:r,p=d.x-d.size[0]/2,m=d.y-d.size[1]/2,b=d.x+d.size[0]/2,w=d.y+d.size[1]/2,C=g.x-g.size[0]/2,O=g.y-g.size[1]/2,A=g.x+g.size[0]/2,M=g.y+g.size[1]/2,P=d.x,I=d.y,N=g.x,R=g.y,z=b>=C&&A>=p&&w>=O&&M>=m;let F=0,Z=0;if(z){Z=Math.sqrt(Math.pow(N-P,2)+Math.pow(R-I,2));const ot=p>C?p:C,nt=m>O?m:O,q=b<A?b:A,et=w<M?w:M,st=q-ot,U=et-nt,ct=st*U;Z===0&&(Z=1e-7),F=_e*1/Z*100+ct,F*=Jr}else{let ot=!1;const nt=RE(d,g,ot);Z=nt.distance,ot=nt.isHoriz,Z<=_e?Z!==0?s?F+=_e+Jr*1/Z:F+=_e+Jr*_e/Z:F+=Jr:(F+=Z,s&&(F+=Z*Z))}return F}function tm(n){let r=0;for(let o=0;o<n.length;o++){const s=n[o];(s.x<0||s.y<0||s.x>qh||s.y>dr)&&(r+=1e12);for(let a=o+1;a<n.length;a++)r+=td(s,n[a])}return r}function LE(n,r,o,s){const a=new Map;o.forEach((p,m)=>{a.set(p.id,p)});const u=s.filter(p=>p.source===n.id||p.target===n.id)||[],d=[];u.forEach(p=>{const m=p.source===n.id?p.target:p.source,b=a.get(m);b&&d.push(b)});let g=!0;for(let p=0;p<d.length;p++){const m=d[p],b=Math.atan((n.y-m.y)/(m.x-n.y))*180,w=Math.atan((r.y-m.y)/(m.x-r.y))*180,C=b<30||b>150,O=w<30||w>150,A=b>70&&b<110,M=w>70&&w<110;if(C&&!O||b*w<0){g=!1;break}else if(A&&!M||b*w<0){g=!1;break}else if((m.x-n.x)*(m.x-r.x)<0){g=!1;break}else if((m.y-n.y)*(m.y-r.y)<0){g=!1;break}}return g}function kE(n,r){let o=!1;const s=1,a=za*s,u=Qh*s,d=[a,-a,0,0],g=[0,0,u,-u];for(let p=0;p<n.length;++p){const m=n[p];let b=Ga(m,n);for(let w=0;w<d.length;w++)if(LE(m,{x:m.x+d[w],y:m.y+g[w]},n,r)){m.x+=d[w],m.y+=g[w];const O=Ga(m,n),A=Math.random();O<b||A<Fa&&A>Qv?(b=O,o=!0):(m.x-=d[w],m.y-=g[w])}}return Fa>Qv&&(Fa*=DE),o?tm(n):0}function Ga(n,r){let o=0;(n.x<0||n.y<0||n.x+n.size[0]+20>qh||n.y+n.size[1]+20>dr)&&(o+=1e12);for(let s=0;s<r.length;++s)n.id!==r[s].id&&(o+=td(n,r[s]));return o}function ja(n,r){if(n.length===0)return{nodes:n,edges:r};n.forEach(p=>{const m=r.filter(b=>b.source===p.id||b.target===p.id);kn.set(p,m)}),n.sort((p,m)=>{var b,w;return((b=kn.get(p.id))===null||b===void 0?void 0:b.length)-((w=kn.get(m.id))===null||w===void 0?void 0:w.length)});let o=tm(n),s=20,a=1,u=0;const d=50;let g=0;for(;s>0&&(g++,!(g>=d));){const p=kE(n,r);p!==0&&(u=p),a=u-o,o=u,a===0?--s:s=20}return n.forEach(p=>{p.x=p.x-p.size[0]/2,p.y=p.y-p.size[1]/2}),{nodes:n,edges:r}}var ed=ja;function vi(n,r){const{nodes:o,edges:s}=n,a=r.width,u=r.height;if(!(o!=null&&o.length))return Promise.resolve();const d=[];o.forEach(A=>{if(s.filter(P=>P.source===A.id||P.target===A.id).length>1){const P=Object.assign({},A);delete P.size,d.push(P)}});const g=[];s.forEach(A=>{const M=d.find(I=>I.id===A.source),P=d.find(I=>I.id===A.target);M&&P&&g.push(A)});const p=new an({type:"dagre",ranksep:r.nodeMinGap,nodesep:r.nodeMinGap}),{nodes:m}=p.layout({nodes:d,edges:g});o.forEach(A=>{const M=(m||[]).find(P=>P.id===A.id);A.x=(M==null?void 0:M.x)||a/2,A.y=(M==null?void 0:M.y)||u/2});const b=JSON.parse(JSON.stringify(o)),w=JSON.parse(JSON.stringify(s)),C=hu().nodes(b).force("link",hc(w).id(A=>A.id).distance(A=>g.find(P=>P.source===A.source&&P.target===A.target)?30:20)).force("charge",du()).force("center",Zd(a/2,u/2)).force("x",Ti(a/2)).force("y",Jd(u/2)).alpha(.3).alphaDecay(.08).alphaMin(.001);return new Promise(A=>{C.on("end",()=>{o.forEach(F=>{const Z=b.find(ot=>ot.id===F.id);Z&&(F.x=Z.x,F.y=Z.y)});const M=Math.min(...o.map(F=>F.x)),P=Math.max(...o.map(F=>F.x)),I=Math.min(...o.map(F=>F.y)),N=Math.max(...o.map(F=>F.y)),R=a/(P-M),z=u/(N-I);o.forEach(F=>{F.x!==void 0&&R<1&&(F.x=(F.x-M)*R),F.y!==void 0&&z<1&&(F.y=(F.y-I)*z)}),o.forEach(F=>{F.sizeTemp=F.size,F.size=[10,10]}),ed(o,s),o.forEach(F=>{F.size=F.sizeTemp||[],delete F.sizeTemp}),qv({nodes:o,edges:s},r),A()})})}class nd extends tt{constructor(r){super(),this.width=300,this.height=300,this.nodeMinGap=50,this.onLayoutEnd=()=>{},r&&this.updateCfg(r)}getDefaultCfg(){return{width:300,height:300,nodeMinGap:50}}execute(){const r=this,o=r.nodes,s=r.edges;return o==null||o.forEach(a=>{a.size||(a.size=[50,50])}),vi({nodes:o,edges:s},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(()=>{r.onLayoutEnd&&r.onLayoutEnd()})}getType(){return"er"}}class Po extends tt{constructor(r){super(),this.center=[0,0],this.width=300,this.height=300,this.nodes=[],this.edges=[],this.onLayoutEnd=()=>{},this.updateCfg(r)}getDefaultCfg(){return{center:[0,0],width:300,height:300}}execute(){const r=this,o=r.nodes,s=.9,a=r.center;return!r.width&&typeof window!="undefined"&&(r.width=window.innerWidth),!r.height&&typeof window!="undefined"&&(r.height=window.innerHeight),o&&o.forEach(u=>{u.x=(Math.random()-.5)*s*r.width+a[0],u.y=(Math.random()-.5)*s*r.height+a[1]}),r.onLayoutEnd&&r.onLayoutEnd(),{nodes:o,edges:this.edges}}getType(){return"random"}}class Cs{constructor(r){const o=getLayoutByName(r.type);this.layoutInstance=new o(r)}layout(r){return this.layoutInstance.layout(r)}updateCfg(r){this.layoutInstance.updateCfg(r)}init(r){this.correctLayers(r.nodes),this.layoutInstance.init(r)}correctLayers(r){if(!(r!=null&&r.length))return;let o=1/0;const s=[];if(r.forEach(a=>{isString(a.layer)&&(a.layer=parseInt(a.layer,10)),!(a.layer===void 0||isNaN(a.layer))&&(s.push(a),a.layer<o&&(o=a.layer))}),o<=0){const a=Math.abs(o)+1;s.forEach(u=>u.layer+=a)}}execute(){this.layoutInstance.execute()}getDefaultCfg(){return this.layoutInstance.getDefaultCfg()}destroy(){return this.layoutInstance.destroy()}}const Ss={force:A0,fruchterman:gl,forceAtlas2:Ml,gForce:gt,force2:io,dagre:an,dagreCompound:dE,circular:D0,radial:hi,concentric:Dn,grid:ft,mds:fl,comboForce:Kv,comboCombined:Jv,random:Po,"gForce-gpu":Yv,"fruchterman-gpu":_s,er:nd};var Va=k(87057),em=k.n(Va),nm=function(n,r,o,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,o):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,o,s);else for(var g=n.length-1;g>=0;g--)(d=n[g])&&(u=(a<3?d(u):a>3?d(r,o,u):d(r,o))||u);return a>3&&u&&Object.defineProperty(r,o,u),u};class $e extends H.JT{get graph(){return this.options.graph}constructor(r){super(),this.options=r;const o=this.graph.getPlugin("scroller");this.container=o?o.container:this.graph.container,r.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=$e.createMousetrap(this)}get disabled(){return this.options.enabled!==!0}enable(){this.disabled&&(this.options.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(r,o,s){this.mousetrap.bind(this.getKeys(r),o,s)}off(r,o){this.mousetrap.unbind(this.getKeys(r),o)}clear(){this.mousetrap.reset()}trigger(r,o){this.mousetrap.trigger(r,o)}focus(r){if(this.isInputEvent(r.e))return;this.target.focus({preventScroll:!0})}getKeys(r){return(Array.isArray(r)?r:[r]).map(o=>this.formatkey(o))}formatkey(r){const o=r.toLocaleLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),s=this.options.format;return s?H.Iw.call(s,this.graph,o):o}isGraphEvent(r){const o=r.target,s=r.currentTarget;return o?o===this.target||s===this.target||o===document.body?!0:H.is.contains(this.container,o):!1}isInputEvent(r){var o;const s=r.target,a=(o=s==null?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase();let u=["input","textarea"].includes(a);return H.is.attr(s,"contenteditable")==="true"&&(u=!0),u}isEnabledForEvent(r){const o=!this.disabled&&this.isGraphEvent(r),s=this.isInputEvent(r);if(o){if(s&&(r.key==="Backspace"||r.key==="Delete"))return!1;if(this.options.guard)return H.Iw.call(this.options.guard,this.graph,r)}return o}dispose(){this.mousetrap.reset()}}nm([H.JT.dispose()],$e.prototype,"dispose",null),function(n){function r(o){const s=new(em())(o.target),a=s.stopCallback;return s.stopCallback=(u,d,g)=>o.isEnabledForEvent(u)?a?a.call(s,u,d,g):!1:!0,s}n.createMousetrap=r}($e||($e={})),H.kJ.prototype.isKeyboardEnabled=function(){const n=this.getPlugin("keyboard");return n?n.isEnabled():!1},H.kJ.prototype.enableKeyboard=function(){const n=this.getPlugin("keyboard");return n&&n.enable(),this},H.kJ.prototype.disableKeyboard=function(){const n=this.getPlugin("keyboard");return n&&n.disable(),this},H.kJ.prototype.toggleKeyboard=function(n){const r=this.getPlugin("keyboard");return r&&r.toggleEnabled(n),this},H.kJ.prototype.bindKey=function(n,r,o){const s=this.getPlugin("keyboard");return s&&s.bindKey(n,r,o),this},H.kJ.prototype.unbindKey=function(n,r){const o=this.getPlugin("keyboard");return o&&o.unbindKey(n,r),this},H.kJ.prototype.clearKeys=function(){const n=this.getPlugin("keyboard");return n&&n.clear(),this},H.kJ.prototype.triggerKey=function(n,r){const o=this.getPlugin("keyboard");return o&&o.trigger(n,r),this};var rn=function(n,r,o,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,o):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,o,s);else for(var g=n.length-1;g>=0;g--)(d=n[g])&&(u=(a<3?d(u):a>3?d(r,o,u):d(r,o))||u);return a>3&&u&&Object.defineProperty(r,o,u),u};class mi extends H.JT{constructor(r={}){super(),this.name="keyboard",this.options=Object.assign({enabled:!0},r)}init(r){this.keyboardImpl=new $e(Object.assign(Object.assign({},this.options),{graph:r}))}isEnabled(){return!this.keyboardImpl.disabled}enable(){this.keyboardImpl.enable()}disable(){this.keyboardImpl.disable()}toggleEnabled(r){return r!=null?r!==this.isEnabled()&&(r?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}bindKey(r,o,s){return this.keyboardImpl.on(r,o,s),this}trigger(r,o){return this.keyboardImpl.trigger(r,o),this}clear(){return this.keyboardImpl.clear(),this}unbindKey(r,o){return this.keyboardImpl.off(r,o),this}dispose(){this.keyboardImpl.dispose()}}rn([H.JT.dispose()],mi.prototype,"dispose",null);var W=function(n,r,o,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,o):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,o,s);else for(var g=n.length-1;g>=0;g--)(d=n[g])&&(u=(a<3?d(u):a>3?d(r,o,u):d(r,o))||u);return a>3&&u&&Object.defineProperty(r,o,u),u};class Gt extends H.G7{get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(Wt.classNames.box)}get $boxes(){return H.is.children(this.container,this.boxClassName)}get handleOptions(){return this.options}constructor(r){super(),this.options=r,this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new H.FE([],{comparator:Wt.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.startListening()}startListening(){const r=this.graph,o=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),r.on("scale",this.onGraphTransformed,this),r.on("translate",this.onGraphTransformed,this),r.model.on("updated",this.onModelUpdated,this),o.on("added",this.onCellAdded,this),o.on("removed",this.onCellRemoved,this),o.on("reseted",this.onReseted,this),o.on("updated",this.onCollectionUpdated,this),o.on("node:change:position",this.onNodePositionChanged,this),o.on("cell:changed",this.onCellChanged,this)}stopListening(){const r=this.graph,o=this.collection;this.undelegateEvents(),r.off("scale",this.onGraphTransformed,this),r.off("translate",this.onGraphTransformed,this),r.model.off("updated",this.onModelUpdated,this),o.off("added",this.onCellAdded,this),o.off("removed",this.onCellRemoved,this),o.off("reseted",this.onReseted,this),o.off("updated",this.onCollectionUpdated,this),o.off("node:change:position",this.onNodePositionChanged,this),o.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes()}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:r,options:o}){const{showNodeSelectionBox:s,pointerEvents:a}=this.options,{ui:u,selection:d,translateBy:g,snapped:p}=o,m=(s!==!0||a==="none")&&!this.translating&&!d,b=u&&g&&r.id===g;if(m&&(b||p)){this.translating=!0;const w=r.position(),C=r.previous("position"),O=w.x-C.x,A=w.y-C.y;(O!==0||A!==0)&&this.translateSelectedNodes(O,A,r,o),this.translating=!1}}onModelUpdated({removed:r}){r&&r.length&&this.unselect(r)}isEmpty(){return this.length<=0}isSelected(r){return this.collection.has(r)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(r,o={}){o.dryrun=!0;const s=this.filter(Array.isArray(r)?r:[r]);return this.collection.add(s,o),this}unselect(r,o={}){return o.dryrun=!0,this.collection.remove(Array.isArray(r)?r:[r],o),this}reset(r,o={}){if(r){if(o.batch){const m=this.filter(Array.isArray(r)?r:[r]);return this.collection.reset(m,Object.assign(Object.assign({},o),{ui:!0})),this}const s=this.cells,a=this.filter(Array.isArray(r)?r:[r]),u={},d={};s.forEach(m=>u[m.id]=m),a.forEach(m=>d[m.id]=m);const g=[],p=[];return a.forEach(m=>{u[m.id]||g.push(m)}),s.forEach(m=>{d[m.id]||p.push(m)}),p.length&&this.unselect(p,Object.assign(Object.assign({},o),{ui:!0})),g.length&&this.select(g,Object.assign(Object.assign({},o),{ui:!0})),p.length===0&&g.length===0&&this.updateContainer(),this}return this.clean(o)}clean(r={}){return this.length&&(r.batch===!1?this.unselect(this.cells,r):this.collection.reset([],Object.assign(Object.assign({},r),{ui:!0}))),this}setFilter(r){this.options.filter=r}setContent(r){this.options.content=r}startSelecting(r){r=this.normalizeEvent(r),this.clean();let o,s;const a=this.graph.container;if(r.offsetX!=null&&r.offsetY!=null&&a.contains(r.target))o=r.offsetX,s=r.offsetY;else{const u=H.is.offset(a),d=a.scrollLeft,g=a.scrollTop;o=r.clientX-u.left+window.pageXOffset+d,s=r.clientY-u.top+window.pageYOffset+g}H.is.css(this.container,{top:s,left:o,width:1,height:1}),this.setEventData(r,{action:"selecting",clientX:r.clientX,clientY:r.clientY,offsetX:o,offsetY:s,scrollerX:0,scrollerY:0,moving:!1}),this.delegateDocumentEvents(Wt.documentEvents,r.data)}filter(r){const o=this.options.filter;return r.filter(s=>Array.isArray(o)?o.some(a=>typeof a=="string"?s.shape===a:s.id===a.id):typeof o=="function"?H.Iw.call(o,this.graph,s):!0)}stopSelecting(r){const o=this.graph,s=this.getEventData(r);switch(s.action){case"selecting":{let u=H.is.width(this.container),d=H.is.height(this.container);const g=H.is.offset(this.container),p=o.pageToLocal(g.left,g.top),m=o.transform.getScale();u/=m.sx,d/=m.sy;const b=new H.Ae(p.x,p.y,u,d),w=this.getCellViewsInArea(b).map(C=>C.cell);this.reset(w,{batch:!0}),this.hideRubberband();break}case"translating":{const u=o.snapToGrid(r.clientX,r.clientY);if(!this.options.following){const d=s;this.updateSelectedNodesPosition({dx:d.clientX-d.originX,dy:d.clientY-d.originY})}this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",r,u.x,u.y);break}default:{this.clean();break}}}onMouseUp(r){this.getEventData(r).action&&(this.stopSelecting(r),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(r){this.options.following||r.stopPropagation();const o=this.normalizeEvent(r);this.options.movable&&this.startTranslating(o);const s=this.getCellViewFromElem(o.target);this.setEventData(o,{activeView:s});const a=this.graph.snapToGrid(o.clientX,o.clientY);this.notifyBoxEvent("box:mousedown",o,a.x,a.y),this.delegateDocumentEvents(Wt.documentEvents,o.data)}startTranslating(r){this.graph.model.startBatch("move-selection");const o=this.graph.snapToGrid(r.clientX,r.clientY);this.setEventData(r,{action:"translating",clientX:o.x,clientY:o.y,originX:o.x,originY:o.y})}getRestrictArea(){const r=this.graph.options.translating.restrict,o=typeof r=="function"?H.Iw.call(r,this.graph,null):r;return typeof o=="number"?this.graph.transform.getGraphArea().inflate(o):o===!0?this.graph.transform.getGraphArea():o||null}getSelectionOffset(r,o){let s=r.x-o.clientX,a=r.y-o.clientY;const u=this.getRestrictArea();if(u){const d=this.collection.toArray(),g=H.bL.getCellsBBox(d,{deep:!0})||H.Ae.create(),p=u.x-g.x,m=u.y-g.y,b=u.x+u.width-(g.x+g.width),w=u.y+u.height-(g.y+g.height);if(s<p&&(s=p),a<m&&(a=m),b<s&&(s=b),w<a&&(a=w),!this.options.following){const C=r.x-o.originX,O=r.y-o.originY;s=C<=p||C>=b?0:s,a=O<=m||O>=w?0:a}}return{dx:s,dy:a}}updateElementPosition(r,o,s){const a=H.is.css(r,"left"),u=H.is.css(r,"top"),d=a?parseFloat(a):0,g=u?parseFloat(u):0;H.is.css(r,"left",d+o),H.is.css(r,"top",g+s)}updateSelectedNodesPosition(r){const{dx:o,dy:s}=r;if(o||s)if(this.translateSelectedNodes(o,s),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const a=this.graph.transform.getScale();for(let u=0,d=this.$boxes,g=d.length;u<g;u+=1)this.updateElementPosition(d[u],o*a.sx,s*a.sy);this.updateElementPosition(this.selectionContainer,o*a.sx,s*a.sy)}}autoScrollGraph(r,o){const s=this.graph.getPlugin("scroller");return s?s.autoScroll(r,o):{scrollerX:0,scrollerY:0}}adjustSelection(r){const o=this.normalizeEvent(r),s=this.getEventData(o);switch(s.action){case"selecting":{const u=s;u.moving!==!0&&(H.is.appendTo(this.container,this.graph.container),this.showRubberband(),u.moving=!0);const{scrollerX:d,scrollerY:g}=this.autoScrollGraph(o.clientX,o.clientY);u.scrollerX+=d,u.scrollerY+=g;const p=o.clientX-u.clientX+u.scrollerX,m=o.clientY-u.clientY+u.scrollerY,b=parseInt(H.is.css(this.container,"left")||"0",10),w=parseInt(H.is.css(this.container,"top")||"0",10);H.is.css(this.container,{left:p<0?u.offsetX+p:b,top:m<0?u.offsetY+m:w,width:Math.abs(p),height:Math.abs(m)});break}case"translating":{const u=this.graph.snapToGrid(o.clientX,o.clientY),d=s,g=this.getSelectionOffset(u,d);this.options.following?this.updateSelectedNodesPosition(g):this.updateContainerPosition(g),g.dx&&(d.clientX=u.x),g.dy&&(d.clientY=u.y),this.notifyBoxEvent("box:mousemove",r,u.x,u.y);break}default:break}this.boxesUpdated=!1}translateSelectedNodes(r,o,s,a){const u={},d=[];if(s&&(u[s.id]=!0),this.collection.toArray().forEach(g=>{g.getDescendants({deep:!0}).forEach(p=>{u[p.id]=!0})}),a&&a.translateBy){const g=this.graph.getCellById(a.translateBy);g&&(u[g.id]=!0,g.getDescendants({deep:!0}).forEach(p=>{u[p.id]=!0}),d.push(g))}this.collection.toArray().forEach(g=>{if(!u[g.id]){const p=Object.assign(Object.assign({},a),{selection:this.cid,exclude:d});g.translate(r,o,p),this.graph.model.getConnectedEdges(g).forEach(m=>{u[m.id]||(m.translate(r,o,p),u[m.id]=!0)})}})}getCellViewsInArea(r){const o=this.graph,s={strict:this.options.strict};let a=[];return this.options.rubberNode&&(a=a.concat(o.model.getNodesInArea(r,s).map(u=>o.renderer.findViewByCell(u)).filter(u=>u!=null))),this.options.rubberEdge&&(a=a.concat(o.model.getEdgesInArea(r,s).map(u=>o.renderer.findViewByCell(u)).filter(u=>u!=null))),a}notifyBoxEvent(r,o,s,a){const d=this.getEventData(o).activeView;this.trigger(r,{e:o,view:d,x:s,y:a,cell:d.cell})}getSelectedClassName(r){return this.prefixClassName(`${r.isNode()?"node":"edge"}-selected`)}addCellSelectedClassName(r){const o=this.graph.renderer.findViewByCell(r);o&&o.addClass(this.getSelectedClassName(r))}removeCellUnSelectedClassName(r){const o=this.graph.renderer.findViewByCell(r);o&&o.removeClass(this.getSelectedClassName(r))}destroySelectionBox(r){this.removeCellUnSelectedClassName(r),this.canShowSelectionBox(r)&&(H.is.remove(this.container.querySelector(`[data-cell-id="${r.id}"]`)),this.$boxes.length===0&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(r){r.forEach(o=>this.removeCellUnSelectedClassName(o)),this.hide(),H.is.remove(this.$boxes),this.boxCount=0}hide(){H.is.removeClass(this.container,this.prefixClassName(Wt.classNames.rubberband)),H.is.removeClass(this.container,this.prefixClassName(Wt.classNames.selected))}showRubberband(){H.is.addClass(this.container,this.prefixClassName(Wt.classNames.rubberband))}hideRubberband(){H.is.removeClass(this.container,this.prefixClassName(Wt.classNames.rubberband))}showSelected(){H.is.removeAttribute(this.container,"style"),H.is.addClass(this.container,this.prefixClassName(Wt.classNames.selected))}createContainer(){this.container=document.createElement("div"),H.is.addClass(this.container,this.prefixClassName(Wt.classNames.root)),this.options.className&&H.is.addClass(this.container,this.options.className),this.selectionContainer=document.createElement("div"),H.is.addClass(this.selectionContainer,this.prefixClassName(Wt.classNames.inner)),this.selectionContent=document.createElement("div"),H.is.addClass(this.selectionContent,this.prefixClassName(Wt.classNames.content)),H.is.append(this.selectionContainer,this.selectionContent),H.is.attr(this.selectionContainer,"data-selection-length",this.collection.length),H.is.prepend(this.container,this.selectionContainer)}updateContainerPosition(r){(r.dx||r.dy)&&this.updateElementPosition(this.selectionContainer,r.dx,r.dy)}updateContainer(){const r={x:1/0,y:1/0},o={x:0,y:0};this.collection.toArray().filter(u=>this.canShowSelectionBox(u)).forEach(u=>{const d=this.graph.renderer.findViewByCell(u);if(d){const g=d.getBBox({useCellGeometry:!0});r.x=Math.min(r.x,g.x),r.y=Math.min(r.y,g.y),o.x=Math.max(o.x,g.x+g.width),o.y=Math.max(o.y,g.y+g.height)}}),H.is.css(this.selectionContainer,{position:"absolute",pointerEvents:"none",left:r.x,top:r.y,width:o.x-r.x,height:o.y-r.y}),H.is.attr(this.selectionContainer,"data-selection-length",this.collection.length);const a=this.options.content;if(a)if(typeof a=="function"){const u=H.Iw.call(a,this.graph,this,this.selectionContent);u&&(this.selectionContent.innerHTML=u)}else this.selectionContent.innerHTML=a;this.collection.length>0&&!this.container.parentNode?H.is.appendTo(this.container,this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(r){return r.isNode()&&this.options.showNodeSelectionBox===!0||r.isEdge()&&this.options.showEdgeSelectionBox===!0}createSelectionBox(r){if(this.addCellSelectedClassName(r),this.canShowSelectionBox(r)){const o=this.graph.renderer.findViewByCell(r);if(o){const s=o.getBBox({useCellGeometry:!0}),a=this.boxClassName,u=document.createElement("div");H.is.addClass(u,a),H.is.addClass(u,`${a}-${r.isNode()?"node":"edge"}`),H.is.attr(u,"data-cell-id",r.id),H.is.css(u,{position:"absolute",left:s.x,top:s.y,width:s.width,height:s.height,pointerEvents:this.options.pointerEvents||"auto"}),H.is.appendTo(u,this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(){this.collection.length>0&&(this.boxesUpdated=!0,this.confirmUpdate())}confirmUpdate(){if(this.boxCount){this.hide();for(let r=0,o=this.$boxes,s=o.length;r<s;r+=1){const a=o[r],u=H.is.attr(a,"data-cell-id");H.is.remove(a),this.boxCount-=1;const d=this.collection.get(u);d&&this.createSelectionBox(d)}this.updateContainer()}return 0}getCellViewFromElem(r){const o=r.getAttribute("data-cell-id");if(o){const s=this.collection.get(o);if(s)return this.graph.renderer.findViewByCell(s)}return null}onCellRemoved({cell:r}){this.destroySelectionBox(r),this.updateContainer()}onReseted({previous:r,current:o}){this.destroyAllSelectionBoxes(r),o.forEach(s=>{this.listenCellRemoveEvent(s),this.createSelectionBox(s)}),this.updateContainer()}onCellAdded({cell:r}){this.listenCellRemoveEvent(r),this.createSelectionBox(r),this.updateContainer()}listenCellRemoveEvent(r){r.off("removed",this.onCellRemoved,this),r.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:r,removed:o,options:s}){r.forEach(u=>{this.trigger("cell:selected",{cell:u,options:s}),u.isNode()?this.trigger("node:selected",{cell:u,options:s,node:u}):u.isEdge()&&this.trigger("edge:selected",{cell:u,options:s,edge:u})}),o.forEach(u=>{this.trigger("cell:unselected",{cell:u,options:s}),u.isNode()?this.trigger("node:unselected",{cell:u,options:s,node:u}):u.isEdge()&&this.trigger("edge:unselected",{cell:u,options:s,edge:u})});const a={added:r,removed:o,options:s,selected:this.cells.filter(u=>!!this.graph.getCellById(u.id))};this.trigger("selection:changed",a)}dispose(){this.clean(),this.remove(),this.off()}}W([H.G7.dispose()],Gt.prototype,"dispose",null);var Wt;(function(n){const r="widget-selection";n.classNames={root:r,inner:`${r}-inner`,box:`${r}-box`,content:`${r}-content`,rubberband:`${r}-rubberband`,selected:`${r}-selected`},n.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"};function o(s){return s.getAncestors().length}n.depthComparator=o})(Wt||(Wt={}));const jr=`.x6-widget-selection {
  position: absolute;
  top: 0;
  left: 0;
  display: none;
  width: 0;
  height: 0;
  touch-action: none;
}
.x6-widget-selection-rubberband {
  display: block;
  overflow: visible;
  opacity: 0.3;
}
.x6-widget-selection-selected {
  display: block;
}
.x6-widget-selection-box {
  cursor: move;
}
.x6-widget-selection-inner[data-selection-length='0'],
.x6-widget-selection-inner[data-selection-length='1'] {
  display: none;
}
.x6-widget-selection-content {
  position: absolute;
  top: 100%;
  right: -20px;
  left: -20px;
  margin-top: 30px;
  padding: 6px;
  line-height: 14px;
  text-align: center;
  border-radius: 6px;
}
.x6-widget-selection-content:empty {
  display: none;
}
.x6-widget-selection-rubberband {
  background-color: #3498db;
  border: 2px solid #2980b9;
}
.x6-widget-selection-box {
  box-sizing: content-box !important;
  margin-top: -4px;
  margin-left: -4px;
  padding-right: 4px;
  padding-bottom: 4px;
  border: 2px dashed #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-inner {
  box-sizing: content-box !important;
  margin-top: -8px;
  margin-left: -8px;
  padding-right: 12px;
  padding-bottom: 12px;
  border: 2px solid #feb663;
  box-shadow: 2px 2px 5px #d3d3d3;
}
.x6-widget-selection-content {
  color: #fff;
  font-size: 10px;
  background-color: #6a6b8a;
}
`;H.kJ.prototype.isSelectionEnabled=function(){const n=this.getPlugin("selection");return n?n.isEnabled():!1},H.kJ.prototype.enableSelection=function(){const n=this.getPlugin("selection");return n&&n.enable(),this},H.kJ.prototype.disableSelection=function(){const n=this.getPlugin("selection");return n&&n.disable(),this},H.kJ.prototype.toggleSelection=function(n){const r=this.getPlugin("selection");return r&&r.toggleEnabled(n),this},H.kJ.prototype.isMultipleSelection=function(){const n=this.getPlugin("selection");return n?n.isMultipleSelection():!1},H.kJ.prototype.enableMultipleSelection=function(){const n=this.getPlugin("selection");return n&&n.enableMultipleSelection(),this},H.kJ.prototype.disableMultipleSelection=function(){const n=this.getPlugin("selection");return n&&n.disableMultipleSelection(),this},H.kJ.prototype.toggleMultipleSelection=function(n){const r=this.getPlugin("selection");return r&&r.toggleMultipleSelection(n),this},H.kJ.prototype.isSelectionMovable=function(){const n=this.getPlugin("selection");return n?n.isSelectionMovable():!1},H.kJ.prototype.enableSelectionMovable=function(){const n=this.getPlugin("selection");return n&&n.enableSelectionMovable(),this},H.kJ.prototype.disableSelectionMovable=function(){const n=this.getPlugin("selection");return n&&n.disableSelectionMovable(),this},H.kJ.prototype.toggleSelectionMovable=function(n){const r=this.getPlugin("selection");return r&&r.toggleSelectionMovable(n),this},H.kJ.prototype.isRubberbandEnabled=function(){const n=this.getPlugin("selection");return n?n.isRubberbandEnabled():!1},H.kJ.prototype.enableRubberband=function(){const n=this.getPlugin("selection");return n&&n.enableRubberband(),this},H.kJ.prototype.disableRubberband=function(){const n=this.getPlugin("selection");return n&&n.disableRubberband(),this},H.kJ.prototype.toggleRubberband=function(n){const r=this.getPlugin("selection");return r&&r.toggleRubberband(n),this},H.kJ.prototype.isStrictRubberband=function(){const n=this.getPlugin("selection");return n?n.isStrictRubberband():!1},H.kJ.prototype.enableStrictRubberband=function(){const n=this.getPlugin("selection");return n&&n.enableStrictRubberband(),this},H.kJ.prototype.disableStrictRubberband=function(){const n=this.getPlugin("selection");return n&&n.disableStrictRubberband(),this},H.kJ.prototype.toggleStrictRubberband=function(n){const r=this.getPlugin("selection");return r&&r.toggleStrictRubberband(n),this},H.kJ.prototype.setRubberbandModifiers=function(n){const r=this.getPlugin("selection");return r&&r.setRubberbandModifiers(n),this},H.kJ.prototype.setSelectionFilter=function(n){const r=this.getPlugin("selection");return r&&r.setSelectionFilter(n),this},H.kJ.prototype.setSelectionDisplayContent=function(n){const r=this.getPlugin("selection");return r&&r.setSelectionDisplayContent(n),this},H.kJ.prototype.isSelectionEmpty=function(){const n=this.getPlugin("selection");return n?n.isEmpty():!0},H.kJ.prototype.cleanSelection=function(n){const r=this.getPlugin("selection");return r&&r.clean(n),this},H.kJ.prototype.resetSelection=function(n,r){const o=this.getPlugin("selection");return o&&o.reset(n,r),this},H.kJ.prototype.getSelectedCells=function(){const n=this.getPlugin("selection");return n?n.getSelectedCells():[]},H.kJ.prototype.getSelectedCellCount=function(){const n=this.getPlugin("selection");return n?n.getSelectedCellCount():0},H.kJ.prototype.isSelected=function(n){const r=this.getPlugin("selection");return r?r.isSelected(n):!1},H.kJ.prototype.select=function(n,r){const o=this.getPlugin("selection");return o&&o.select(n,r),this},H.kJ.prototype.unselect=function(n,r){const o=this.getPlugin("selection");return o?o.unselect(n,r):this};var BE=function(n,r,o,s){var a=arguments.length,u=a<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,o):s,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,r,o,s);else for(var g=n.length-1;g>=0;g--)(d=n[g])&&(u=(a<3?d(u):a>3?d(r,o,u):d(r,o))||u);return a>3&&u&&Object.defineProperty(r,o,u),u};class Os extends H.ew{get rubberbandDisabled(){return this.options.enabled!==!0||this.options.rubberband!==!0}get disabled(){return this.options.enabled!==!0}get length(){return this.selectionImpl.length}get cells(){return this.selectionImpl.cells}constructor(r={}){super(),this.name="selection",this.movedMap=new WeakMap,this.unselectMap=new WeakMap,this.options=H.QK.merge({enabled:!0},Os.defaultOptions,r),H.mf.ensure(this.name,jr)}init(r){this.graph=r,this.selectionImpl=new Gt(Object.assign(Object.assign({},this.options),{graph:r})),this.setup(),this.startListening()}isEnabled(){return!this.disabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}toggleEnabled(r){return r!=null?r!==this.isEnabled()&&(r?this.enable():this.disable()):this.isEnabled()?this.disable():this.enable(),this}isMultipleSelection(){return this.isMultiple()}enableMultipleSelection(){return this.enableMultiple(),this}disableMultipleSelection(){return this.disableMultiple(),this}toggleMultipleSelection(r){return r!=null?r!==this.isMultipleSelection()&&(r?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return this.options.movable!==!1}enableSelectionMovable(){return this.selectionImpl.options.movable=!0,this}disableSelectionMovable(){return this.selectionImpl.options.movable=!1,this}toggleSelectionMovable(r){return r!=null?r!==this.isSelectionMovable()&&(r?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.rubberbandDisabled}enableRubberband(){return this.rubberbandDisabled&&(this.options.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.options.rubberband=!1),this}toggleRubberband(r){return r!=null?r!==this.isRubberbandEnabled()&&(r?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return this.selectionImpl.options.strict===!0}enableStrictRubberband(){return this.selectionImpl.options.strict=!0,this}disableStrictRubberband(){return this.selectionImpl.options.strict=!1,this}toggleStrictRubberband(r){return r!=null?r!==this.isStrictRubberband()&&(r?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(r){this.setModifiers(r)}setSelectionFilter(r){return this.setFilter(r),this}setSelectionDisplayContent(r){return this.setContent(r),this}isEmpty(){return this.length<=0}clean(r={}){return this.selectionImpl.clean(r),this}reset(r,o={}){return this.selectionImpl.reset(r?this.getCells(r):[],o),this}getSelectedCells(){return this.cells}getSelectedCellCount(){return this.length}isSelected(r){return this.selectionImpl.isSelected(r)}select(r,o={}){const s=this.getCells(r);return s.length&&(this.isMultiple()?this.selectionImpl.select(s,o):this.reset(s.slice(0,1),o)),this}unselect(r,o={}){return this.selectionImpl.unselect(this.getCells(r),o),this}setup(){this.selectionImpl.on("*",(r,o)=>{this.trigger(r,o),this.graph.trigger(r,o)})}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.selectionImpl.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e:r}){const o=this.graph.panning.allowPanning(r,!0),s=this.graph.getPlugin("scroller"),a=s&&s.allowPanning(r,!0);(this.allowRubberband(r,!0)||this.allowRubberband(r)&&!a&&!o)&&this.startRubberband(r)}onBlankClick(){this.clean()}allowRubberband(r,o){return!this.rubberbandDisabled&&H.tx.isMatch(r,this.options.modifiers,o)}allowMultipleSelection(r){return this.isMultiple()&&H.tx.isMatch(r,this.options.multipleSelectionModifiers)}onCellMouseMove({cell:r}){this.movedMap.set(r,!0)}onCellMouseUp({e:r,cell:o}){const s=this.options;let a=this.disabled;!a&&this.movedMap.has(o)&&(a=s.selectCellOnMoved===!1,a||(a=s.selectNodeOnMoved===!1&&o.isNode()),a||(a=s.selectEdgeOnMoved===!1&&o.isEdge())),a||(this.allowMultipleSelection(r)?this.unselectMap.has(o)?this.unselectMap.delete(o):this.isSelected(o)?this.unselect(o):this.select(o):this.reset(o)),this.movedMap.delete(o)}onBoxMouseDown({e:r,cell:o}){this.disabled||this.allowMultipleSelection(r)&&(this.unselect(o),this.unselectMap.set(o,!0))}getCells(r){return(Array.isArray(r)?r:[r]).map(o=>typeof o=="string"?this.graph.getCellById(o):o).filter(o=>o!=null)}startRubberband(r){return this.rubberbandDisabled||this.selectionImpl.startSelecting(r),this}isMultiple(){return this.options.multiple!==!1}enableMultiple(){return this.options.multiple=!0,this}disableMultiple(){return this.options.multiple=!1,this}setModifiers(r){return this.options.modifiers=r,this}setContent(r){return this.selectionImpl.setContent(r),this}setFilter(r){return this.selectionImpl.setFilter(r),this}dispose(){this.stopListening(),this.off(),this.selectionImpl.dispose(),H.mf.clean(this.name)}}BE([H.ew.dispose()],Os.prototype,"dispose",null),function(n){n.defaultOptions={rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,multipleSelectionModifiers:["ctrl","meta"],movable:!0,strict:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,following:!0,content:null}}(Os||(Os={}));var rd=k(82071),yi=k(73268),vt=k(58757),Il={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm0 76c-205.4 0-372 166.6-372 372s166.6 372 372 372 372-166.6 372-372-166.6-372-372-372zm128.01 198.83c.03 0 .05.01.09.06l45.02 45.01a.2.2 0 01.05.09.12.12 0 010 .07c0 .02-.01.04-.05.08L557.25 512l127.87 127.86a.27.27 0 01.05.06v.02a.12.12 0 010 .07c0 .03-.01.05-.05.09l-45.02 45.02a.2.2 0 01-.09.05.12.12 0 01-.07 0c-.02 0-.04-.01-.08-.05L512 557.25 384.14 685.12c-.04.04-.06.05-.08.05a.12.12 0 01-.07 0c-.03 0-.05-.01-.09-.05l-45.02-45.02a.2.2 0 01-.05-.09.12.12 0 010-.07c0-.02.01-.04.06-.08L466.75 512 338.88 384.14a.27.27 0 01-.05-.06l-.01-.02a.12.12 0 010-.07c0-.03.01-.05.05-.09l45.02-45.02a.2.2 0 01.09-.05.12.12 0 01.07 0c.02 0 .04.01.08.06L512 466.75l127.86-127.86c.04-.05.06-.06.08-.06a.12.12 0 01.07 0z"}}]},name:"close-circle",theme:"outlined"},zE=Il,bn=k(92957),Cn=function(r,o){return vt.createElement(bn.Z,(0,yi.Z)({},r,{ref:o,icon:zE}))},Pl=vt.forwardRef(Cn),rr=k(36567),No=k(82362),As=k(18476),Nr=k(20243),Nl=k(16910),rm=k(68208),im={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M719.4 499.1l-296.1-215A15.9 15.9 0 00398 297v430c0 13.1 14.8 20.5 25.3 12.9l296.1-215a15.9 15.9 0 000-25.8zm-257.6 134V390.9L628.5 512 461.8 633.1z"}}]},name:"play-circle",theme:"outlined"},FE=im,GE=function(r,o){return vt.createElement(bn.Z,(0,yi.Z)({},r,{ref:o,icon:FE}))},jE=vt.forwardRef(GE),VE={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372 0-89 31.3-170.8 83.5-234.8l523.3 523.3C682.8 852.7 601 884 512 884zm288.5-137.2L277.2 223.5C341.2 171.3 423 140 512 140c205.4 0 372 166.6 372 372 0 89-31.3 170.8-83.5 234.8z"}}]},name:"stop",theme:"outlined"},he=VE,Mn=function(r,o){return vt.createElement(bn.Z,(0,yi.Z)({},r,{ref:o,icon:he}))},UE=vt.forwardRef(Mn),HE=k(51865),Vr=k.n(HE);const Dl=vt.createContext({});class sr extends vt.PureComponent{constructor(){super(...arguments),this.onHotkey=()=>{this.triggerHandler()},this.onClick=r=>{this.triggerHandler(r)}}componentDidMount(){const{hotkey:r}=this.props;r&&this.props.context.registerHotkey(r,this.onHotkey)}componentWillUnmount(){const{hotkey:r}=this.props;r&&this.props.context.unregisterHotkey(r,this.onHotkey)}triggerHandler(r){!this.props.disabled&&!this.props.hidden&&(this.props.name&&this.props.context.onClick(this.props.name,r),this.props.onClick&&this.props.onClick())}render(){return vt.createElement("div",Object.assign({},sr.getProps(this.props)),sr.getContent(this.props,this.onClick))}}(function(n){function r(s,a){const{className:u,disabled:d,active:g,hidden:p}=s,{prefixCls:m}=s.context,b=`${m}-item`;return{className:Vr()(b,a,{[`${b}-active`]:g,[`${b}-hidden`]:p,[`${b}-disabled`]:d},u)}}n.getProps=r;function o(s,a,u,d){const{icon:g,text:p,hotkey:m,children:b}=s,{prefixCls:w}=s.context,C=`${w}-item`;return vt.createElement(vt.Fragment,null,vt.createElement("button",{type:"button",className:`${C}-button`,onClick:a},g&&vt.isValidElement(g)&&vt.createElement("span",{className:`${C}-icon`},g),vt.createElement("span",{className:`${C}-text`},p||b),m&&vt.createElement("span",{className:`${C}-hotkey`},m),u),d)}n.getContent=o})(sr||(sr={}));const om=n=>vt.createElement(Dl.Consumer,null,r=>vt.createElement(sr,Object.assign({context:r},n))),sm=()=>vt.createElement(Dl.Consumer,null,({prefixCls:n})=>vt.createElement("div",{className:`${n}-item ${n}-item-divider`}));var am=function(n,r){var o={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&r.indexOf(s)<0&&(o[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,s=Object.getOwnPropertySymbols(n);a<s.length;a++)r.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(n,s[a])&&(o[s[a]]=n[s[a]]);return o};const $E=n=>{const{hotkey:r,children:o}=n,s=am(n,["hotkey","children"]);return vt.createElement(Dl.Consumer,null,a=>{const{prefixCls:u}=a,d=sr.getProps(Object.assign({context:a},n),`${u}-submenu`);return vt.createElement("div",Object.assign({},d),sr.getContent(Object.assign({context:a},s),null,vt.createElement("span",{className:`${u}-submenu-arrow`}),vt.createElement("div",{className:`${u}-submenu-menu`},o)))})};class Hi extends vt.PureComponent{constructor(){super(...arguments),this.onClick=(r,o)=>{this.props.stopPropagation&&o!=null&&o.stopPropagation(),this.props.onClick&&this.props.onClick(r)},this.registerHotkey=(r,o)=>{this.props.registerHotkey&&this.props.registerHotkey(r,o)},this.unregisterHotkey=(r,o)=>{this.props.unregisterHotkey&&this.props.unregisterHotkey(r,o)}}render(){const{prefixCls:r,className:o,children:s,hasIcon:a}=this.props,u=`${r}-menu`,d=Dl.Provider,g={prefixCls:u,onClick:this.onClick,registerHotkey:this.registerHotkey,unregisterHotkey:this.unregisterHotkey};return vt.createElement("div",{className:Vr()(u,{[`${u}-has-icon`]:a},o)},vt.createElement(d,{value:g},s))}}(function(n){n.Item=om,n.Divider=sm,n.SubMenu=$E,n.defaultProps={prefixCls:"x6",stopPropagation:!1}})(Hi||(Hi={}));var Un=k(20361),Ke=k(49486),cm=k(27867),Be=k(13527),WE=k(39140),XE=k(26690),lm=k(26736),Do=k(49214),Rl=k(32044),ZE=k(79719),Ua=k(55819),Ha=k(36137),YE=k(82640),Ts=(0,vt.forwardRef)(function(n,r){var o=n.didUpdate,s=n.getContainer,a=n.children,u=(0,vt.useRef)(),d=(0,vt.useRef)();(0,vt.useImperativeHandle)(r,function(){return{}});var g=(0,vt.useRef)(!1);return!g.current&&(0,YE.Z)()&&(d.current=s(),u.current=d.current.parentNode,g.current=!0),(0,vt.useEffect)(function(){o==null||o(n)}),(0,vt.useEffect)(function(){return d.current.parentNode===null&&u.current!==null&&u.current.appendChild(d.current),function(){var p;(p=d.current)===null||p===void 0||(p=p.parentNode)===null||p===void 0||p.removeChild(d.current)}},[]),d.current?lm.createPortal(a,d.current):null}),KE=Ts;function JE(n,r,o){return o?n[0]===r[0]:n[0]===r[0]&&n[1]===r[1]}function um(n,r,o){var s=n[r]||{};return(0,Un.Z)((0,Un.Z)({},s),o)}function hm(n,r,o,s){for(var a=o.points,u=Object.keys(n),d=0;d<u.length;d+=1){var g=u[d];if(JE(n[g].points,a,s))return"".concat(r,"-placement-").concat(g)}return""}var qE=k(88799),id=k(59078);function od(n){var r=n.prefixCls,o=n.motion,s=n.animation,a=n.transitionName;return o||(s?{motionName:"".concat(r,"-").concat(s)}:a?{motionName:a}:null)}function dm(n){var r=n.prefixCls,o=n.visible,s=n.zIndex,a=n.mask,u=n.maskMotion,d=n.maskAnimation,g=n.maskTransitionName;if(!a)return null;var p={};return(u||g||d)&&(p=(0,Un.Z)({motionAppear:!0},od({motion:u,prefixCls:r,transitionName:g,animation:d}))),vt.createElement(id.default,(0,yi.Z)({},p,{visible:o,removeOnLeave:!0}),function(m){var b=m.className;return vt.createElement("div",{style:{zIndex:s},className:Vr()("".concat(r,"-mask"),b)})})}function fm(n,r){var o=Object.keys(n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);r&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),o.push.apply(o,s)}return o}function gm(n){for(var r=1;r<arguments.length;r++){var o=arguments[r]!=null?arguments[r]:{};r%2?fm(Object(o),!0).forEach(function(s){QE(n,s,o[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):fm(Object(o)).forEach(function(s){Object.defineProperty(n,s,Object.getOwnPropertyDescriptor(o,s))})}return n}function Ll(n){"@babel/helpers - typeof";return Ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ll(n)}function QE(n,r,o){return r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n}var $a,t_={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Wa(){if($a!==void 0)return $a;$a="";var n=document.createElement("p").style,r="Transform";for(var o in t_)o+r in n&&($a=o);return $a}function pm(){return Wa()?"".concat(Wa(),"TransitionProperty"):"transitionProperty"}function Xa(){return Wa()?"".concat(Wa(),"Transform"):"transform"}function vm(n,r){var o=pm();o&&(n.style[o]=r,o!=="transitionProperty"&&(n.style.transitionProperty=r))}function sd(n,r){var o=Xa();o&&(n.style[o]=r,o!=="transform"&&(n.style.transform=r))}function e_(n){return n.style.transitionProperty||n.style[pm()]}function n_(n){var r=window.getComputedStyle(n,null),o=r.getPropertyValue("transform")||r.getPropertyValue(Xa());if(o&&o!=="none"){var s=o.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(s[12]||s[4],0),y:parseFloat(s[13]||s[5],0)}}return{x:0,y:0}}var r_=/matrix\((.*)\)/,i_=/matrix3d\((.*)\)/;function o_(n,r){var o=window.getComputedStyle(n,null),s=o.getPropertyValue("transform")||o.getPropertyValue(Xa());if(s&&s!=="none"){var a,u=s.match(r_);if(u)u=u[1],a=u.split(",").map(function(g){return parseFloat(g,10)}),a[4]=r.x,a[5]=r.y,sd(n,"matrix(".concat(a.join(","),")"));else{var d=s.match(i_)[1];a=d.split(",").map(function(g){return parseFloat(g,10)}),a[12]=r.x,a[13]=r.y,sd(n,"matrix3d(".concat(a.join(","),")"))}}else sd(n,"translateX(".concat(r.x,"px) translateY(").concat(r.y,"px) translateZ(0)"))}var s_=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,$i;function bi(n){var r=n.style.display;n.style.display="none",n.offsetHeight,n.style.display=r}function Ro(n,r,o){var s=o;if(Ll(r)==="object"){for(var a in r)r.hasOwnProperty(a)&&Ro(n,a,r[a]);return}if(typeof s!="undefined"){typeof s=="number"&&(s="".concat(s,"px")),n.style[r]=s;return}return $i(n,r)}function mm(n){var r,o,s,a=n.ownerDocument,u=a.body,d=a&&a.documentElement;return r=n.getBoundingClientRect(),o=Math.floor(r.left),s=Math.floor(r.top),o-=d.clientLeft||u.clientLeft||0,s-=d.clientTop||u.clientTop||0,{left:o,top:s}}function ad(n,r){var o=n["page".concat(r?"Y":"X","Offset")],s="scroll".concat(r?"Top":"Left");if(typeof o!="number"){var a=n.document;o=a.documentElement[s],typeof o!="number"&&(o=a.body[s])}return o}function ym(n){return ad(n)}function bm(n){return ad(n,!0)}function Ms(n){var r=mm(n),o=n.ownerDocument,s=o.defaultView||o.parentWindow;return r.left+=ym(s),r.top+=bm(s),r}function cd(n){return n!=null&&n==n.window}function Lo(n){return cd(n)?n.document:n.nodeType===9?n:n.ownerDocument}function a_(n,r,o){var s=o,a="",u=Lo(n);return s=s||u.defaultView.getComputedStyle(n,null),s&&(a=s.getPropertyValue(r)||s[r]),a}var c_=new RegExp("^(".concat(s_,")(?!px)[a-z%]+$"),"i"),l_=/^(top|right|bottom|left)$/,ld="currentStyle",ud="runtimeStyle",ko="left",u_="px";function h_(n,r){var o=n[ld]&&n[ld][r];if(c_.test(o)&&!l_.test(r)){var s=n.style,a=s[ko],u=n[ud][ko];n[ud][ko]=n[ld][ko],s[ko]=r==="fontSize"?"1em":o||0,o=s.pixelLeft+u_,s[ko]=a,n[ud][ko]=u}return o===""?"auto":o}typeof window!="undefined"&&($i=window.getComputedStyle?a_:h_);function kl(n,r){return n==="left"?r.useCssRight?"right":n:r.useCssBottom?"bottom":n}function xm(n){if(n==="left")return"right";if(n==="right")return"left";if(n==="top")return"bottom";if(n==="bottom")return"top"}function hd(n,r,o){Ro(n,"position")==="static"&&(n.style.position="relative");var s=-999,a=-999,u=kl("left",o),d=kl("top",o),g=xm(u),p=xm(d);u!=="left"&&(s=999),d!=="top"&&(a=999);var m="",b=Ms(n);("left"in r||"top"in r)&&(m=e_(n)||"",vm(n,"none")),"left"in r&&(n.style[g]="",n.style[u]="".concat(s,"px")),"top"in r&&(n.style[p]="",n.style[d]="".concat(a,"px")),bi(n);var w=Ms(n),C={};for(var O in r)if(r.hasOwnProperty(O)){var A=kl(O,o),M=O==="left"?s:a,P=b[O]-w[O];A===O?C[A]=M+P:C[A]=M-P}Ro(n,C),bi(n),("left"in r||"top"in r)&&vm(n,m);var I={};for(var N in r)if(r.hasOwnProperty(N)){var R=kl(N,o),z=r[N]-b[N];N===R?I[R]=C[R]+z:I[R]=C[R]-z}Ro(n,I)}function d_(n,r){var o=Ms(n),s=n_(n),a={x:s.x,y:s.y};"left"in r&&(a.x=s.x+r.left-o.left),"top"in r&&(a.y=s.y+r.top-o.top),o_(n,a)}function f_(n,r,o){if(o.ignoreShake){var s=Ms(n),a=s.left.toFixed(0),u=s.top.toFixed(0),d=r.left.toFixed(0),g=r.top.toFixed(0);if(a===d&&u===g)return}o.useCssRight||o.useCssBottom?hd(n,r,o):o.useCssTransform&&Xa()in document.body.style?d_(n,r):hd(n,r,o)}function dd(n,r){for(var o=0;o<n.length;o++)r(n[o])}function wm(n){return $i(n,"boxSizing")==="border-box"}var Wi=["margin","border","padding"],Bl=-1,g_=2,fd=1,Em=0;function p_(n,r,o){var s={},a=n.style,u;for(u in r)r.hasOwnProperty(u)&&(s[u]=a[u],a[u]=r[u]);o.call(n);for(u in r)r.hasOwnProperty(u)&&(a[u]=s[u])}function Za(n,r,o){var s=0,a,u,d;for(u=0;u<r.length;u++)if(a=r[u],a)for(d=0;d<o.length;d++){var g=void 0;a==="border"?g="".concat(a).concat(o[d],"Width"):g=a+o[d],s+=parseFloat($i(n,g))||0}return s}var qr={getParent:function(r){var o=r;do o.nodeType===11&&o.host?o=o.host:o=o.parentNode;while(o&&o.nodeType!==1&&o.nodeType!==9);return o}};dd(["Width","Height"],function(n){qr["doc".concat(n)]=function(r){var o=r.document;return Math.max(o.documentElement["scroll".concat(n)],o.body["scroll".concat(n)],qr["viewport".concat(n)](o))},qr["viewport".concat(n)]=function(r){var o="client".concat(n),s=r.document,a=s.body,u=s.documentElement,d=u[o];return s.compatMode==="CSS1Compat"&&d||a&&a[o]||d}});function _m(n,r,o){var s=o;if(cd(n))return r==="width"?qr.viewportWidth(n):qr.viewportHeight(n);if(n.nodeType===9)return r==="width"?qr.docWidth(n):qr.docHeight(n);var a=r==="width"?["Left","Right"]:["Top","Bottom"],u=Math.floor(r==="width"?n.getBoundingClientRect().width:n.getBoundingClientRect().height),d=wm(n),g=0;(u==null||u<=0)&&(u=void 0,g=$i(n,r),(g==null||Number(g)<0)&&(g=n.style[r]||0),g=Math.floor(parseFloat(g))||0),s===void 0&&(s=d?fd:Bl);var p=u!==void 0||d,m=u||g;return s===Bl?p?m-Za(n,["border","padding"],a):g:p?s===fd?m:m+(s===g_?-Za(n,["border"],a):Za(n,["margin"],a)):g+Za(n,Wi.slice(s),a)}var v_={position:"absolute",visibility:"hidden",display:"block"};function Cm(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var s,a=r[0];return a.offsetWidth!==0?s=_m.apply(void 0,r):p_(a,v_,function(){s=_m.apply(void 0,r)}),s}dd(["width","height"],function(n){var r=n.charAt(0).toUpperCase()+n.slice(1);qr["outer".concat(r)]=function(s,a){return s&&Cm(s,n,a?Em:fd)};var o=n==="width"?["Left","Right"]:["Top","Bottom"];qr[n]=function(s,a){var u=a;if(u!==void 0){if(s){var d=wm(s);return d&&(u+=Za(s,["padding","border"],o)),Ro(s,n,u)}return}return s&&Cm(s,n,Bl)}});function Sm(n,r){for(var o in r)r.hasOwnProperty(o)&&(n[o]=r[o]);return n}var Te={getWindow:function(r){if(r&&r.document&&r.setTimeout)return r;var o=r.ownerDocument||r;return o.defaultView||o.parentWindow},getDocument:Lo,offset:function(r,o,s){if(typeof o!="undefined")f_(r,o,s||{});else return Ms(r)},isWindow:cd,each:dd,css:Ro,clone:function(r){var o,s={};for(o in r)r.hasOwnProperty(o)&&(s[o]=r[o]);var a=r.overflow;if(a)for(o in r)r.hasOwnProperty(o)&&(s.overflow[o]=r.overflow[o]);return s},mix:Sm,getWindowScrollLeft:function(r){return ym(r)},getWindowScrollTop:function(r){return bm(r)},merge:function(){for(var r={},o=0;o<arguments.length;o++)Te.mix(r,o<0||arguments.length<=o?void 0:arguments[o]);return r},viewportWidth:0,viewportHeight:0};Sm(Te,qr);var zl=Te.getParent;function Fl(n){if(Te.isWindow(n)||n.nodeType===9)return null;var r=Te.getDocument(n),o=r.body,s,a=Te.css(n,"position"),u=a==="fixed"||a==="absolute";if(!u)return n.nodeName.toLowerCase()==="html"?null:zl(n);for(s=zl(n);s&&s!==o&&s.nodeType!==9;s=zl(s))if(a=Te.css(s,"position"),a!=="static")return s;return null}var Om=Te.getParent;function m_(n){if(Te.isWindow(n)||n.nodeType===9)return!1;var r=Te.getDocument(n),o=r.body,s=null;for(s=Om(n);s&&s!==o&&s!==r;s=Om(s)){var a=Te.css(s,"position");if(a==="fixed")return!0}return!1}function gd(n,r){for(var o={left:0,right:1/0,top:0,bottom:1/0},s=Fl(n),a=Te.getDocument(n),u=a.defaultView||a.parentWindow,d=a.body,g=a.documentElement;s;){if((navigator.userAgent.indexOf("MSIE")===-1||s.clientWidth!==0)&&s!==d&&s!==g&&Te.css(s,"overflow")!=="visible"){var p=Te.offset(s);p.left+=s.clientLeft,p.top+=s.clientTop,o.top=Math.max(o.top,p.top),o.right=Math.min(o.right,p.left+s.clientWidth),o.bottom=Math.min(o.bottom,p.top+s.clientHeight),o.left=Math.max(o.left,p.left)}else if(s===d||s===g)break;s=Fl(s)}var m=null;if(!Te.isWindow(n)&&n.nodeType!==9){m=n.style.position;var b=Te.css(n,"position");b==="absolute"&&(n.style.position="fixed")}var w=Te.getWindowScrollLeft(u),C=Te.getWindowScrollTop(u),O=Te.viewportWidth(u),A=Te.viewportHeight(u),M=g.scrollWidth,P=g.scrollHeight,I=window.getComputedStyle(d);if(I.overflowX==="hidden"&&(M=u.innerWidth),I.overflowY==="hidden"&&(P=u.innerHeight),n.style&&(n.style.position=m),r||m_(n))o.left=Math.max(o.left,w),o.top=Math.max(o.top,C),o.right=Math.min(o.right,w+O),o.bottom=Math.min(o.bottom,C+A);else{var N=Math.max(M,w+O);o.right=Math.min(o.right,N);var R=Math.max(P,C+A);o.bottom=Math.min(o.bottom,R)}return o.top>=0&&o.left>=0&&o.bottom>o.top&&o.right>o.left?o:null}function Xi(n,r,o,s){var a=Te.clone(n),u={width:r.width,height:r.height};return s.adjustX&&a.left<o.left&&(a.left=o.left),s.resizeWidth&&a.left>=o.left&&a.left+u.width>o.right&&(u.width-=a.left+u.width-o.right),s.adjustX&&a.left+u.width>o.right&&(a.left=Math.max(o.right-u.width,o.left)),s.adjustY&&a.top<o.top&&(a.top=o.top),s.resizeHeight&&a.top>=o.top&&a.top+u.height>o.bottom&&(u.height-=a.top+u.height-o.bottom),s.adjustY&&a.top+u.height>o.bottom&&(a.top=Math.max(o.bottom-u.height,o.top)),Te.mix(a,u)}function pd(n){var r,o,s;if(!Te.isWindow(n)&&n.nodeType!==9)r=Te.offset(n),o=Te.outerWidth(n),s=Te.outerHeight(n);else{var a=Te.getWindow(n);r={left:Te.getWindowScrollLeft(a),top:Te.getWindowScrollTop(a)},o=Te.viewportWidth(a),s=Te.viewportHeight(a)}return r.width=o,r.height=s,r}function Gl(n,r){var o=r.charAt(0),s=r.charAt(1),a=n.width,u=n.height,d=n.left,g=n.top;return o==="c"?g+=u/2:o==="b"&&(g+=u),s==="c"?d+=a/2:s==="r"&&(d+=a),{left:d,top:g}}function jl(n,r,o,s,a){var u=Gl(r,o[1]),d=Gl(n,o[0]),g=[d.left-u.left,d.top-u.top];return{left:Math.round(n.left-g[0]+s[0]-a[0]),top:Math.round(n.top-g[1]+s[1]-a[1])}}function Am(n,r,o){return n.left<o.left||n.left+r.width>o.right}function Tm(n,r,o){return n.top<o.top||n.top+r.height>o.bottom}function vd(n,r,o){return n.left>o.right||n.left+r.width<o.left}function y_(n,r,o){return n.top>o.bottom||n.top+r.height<o.top}function Zi(n,r,o){var s=[];return Te.each(n,function(a){s.push(a.replace(r,function(u){return o[u]}))}),s}function Vl(n,r){return n[r]=-n[r],n}function md(n,r){var o;return/%$/.test(n)?o=parseInt(n.substring(0,n.length-1),10)/100*r:o=parseInt(n,10),o||0}function Mm(n,r){n[0]=md(n[0],r.width),n[1]=md(n[1],r.height)}function yd(n,r,o,s){var a=o.points,u=o.offset||[0,0],d=o.targetOffset||[0,0],g=o.overflow,p=o.source||n;u=[].concat(u),d=[].concat(d),g=g||{};var m={},b=0,w=!!(g&&g.alwaysByViewport),C=gd(p,w),O=pd(p);Mm(u,O),Mm(d,r);var A=jl(O,r,a,u,d),M=Te.merge(O,A);if(C&&(g.adjustX||g.adjustY)&&s){if(g.adjustX&&Am(A,O,C)){var P=Zi(a,/[lr]/gi,{l:"r",r:"l"}),I=Vl(u,0),N=Vl(d,0),R=jl(O,r,P,I,N);vd(R,O,C)||(b=1,a=P,u=I,d=N)}if(g.adjustY&&Tm(A,O,C)){var z=Zi(a,/[tb]/gi,{t:"b",b:"t"}),F=Vl(u,1),Z=Vl(d,1),ot=jl(O,r,z,F,Z);y_(ot,O,C)||(b=1,a=z,u=F,d=Z)}b&&(A=jl(O,r,a,u,d),Te.mix(M,A));var nt=Am(A,O,C),q=Tm(A,O,C);if(nt||q){var et=a;nt&&(et=Zi(a,/[lr]/gi,{l:"r",r:"l"})),q&&(et=Zi(a,/[tb]/gi,{t:"b",b:"t"})),a=et,u=o.offset||[0,0],d=o.targetOffset||[0,0]}m.adjustX=g.adjustX&&nt,m.adjustY=g.adjustY&&q,(m.adjustX||m.adjustY)&&(M=Xi(A,O,C,m))}return M.width!==O.width&&Te.css(p,"width",Te.width(p)+M.width-O.width),M.height!==O.height&&Te.css(p,"height",Te.height(p)+M.height-O.height),Te.offset(p,{left:M.left,top:M.top},{useCssRight:o.useCssRight,useCssBottom:o.useCssBottom,useCssTransform:o.useCssTransform,ignoreShake:o.ignoreShake}),{points:a,offset:u,targetOffset:d,overflow:m}}function b_(n,r){var o=gd(n,r),s=pd(n);return!o||s.left+s.width<=o.left||s.top+s.height<=o.top||s.left>=o.right||s.top>=o.bottom}function bd(n,r,o){var s=o.target||r,a=pd(s),u=!b_(s,o.overflow&&o.overflow.alwaysByViewport);return yd(n,a,o,u)}bd.__getOffsetParent=Fl,bd.__getVisibleRectForElement=gd;function x_(n,r,o){var s,a,u=Te.getDocument(n),d=u.defaultView||u.parentWindow,g=Te.getWindowScrollLeft(d),p=Te.getWindowScrollTop(d),m=Te.viewportWidth(d),b=Te.viewportHeight(d);"pageX"in r?s=r.pageX:s=g+r.clientX,"pageY"in r?a=r.pageY:a=p+r.clientY;var w={left:s,top:a,width:0,height:0},C=s>=0&&s<=g+m&&a>=0&&a<=p+b,O=[o.points[0],"cc"];return yd(n,w,gm(gm({},o),{},{points:O}),C)}var xd=null,Qr=k(98396),Jn=k(8996),Ul=k(71825),w_=function(n,r){var o=vt.useRef(!1),s=vt.useRef(null);function a(){window.clearTimeout(s.current)}function u(d){if(a(),!o.current||d===!0){if(n(d)===!1)return;o.current=!0,s.current=window.setTimeout(function(){o.current=!1},r)}else s.current=window.setTimeout(function(){o.current=!1,u()},r)}return[u,function(){o.current=!1,a()}]},Im=k(20759);function E_(n,r){return n===r?!0:!n||!r?!1:"pageX"in r&&"pageY"in r?n.pageX===r.pageX&&n.pageY===r.pageY:"clientX"in r&&"clientY"in r?n.clientX===r.clientX&&n.clientY===r.clientY:!1}function qe(n,r){n!==document.activeElement&&(0,Rl.Z)(r,n)&&typeof n.focus=="function"&&n.focus()}function Pm(n,r){var o=null,s=null;function a(d){var g=(0,Ke.Z)(d,1),p=g[0].target;if(document.documentElement.contains(p)){var m=p.getBoundingClientRect(),b=m.width,w=m.height,C=Math.floor(b),O=Math.floor(w);(o!==C||s!==O)&&Promise.resolve().then(function(){r({width:C,height:O})}),o=C,s=O}}var u=new Im.Z(a);return n&&u.observe(n),function(){u.disconnect()}}function Nm(n){return typeof n!="function"?null:n()}function xi(n){return(0,_l.Z)(n)!=="object"||!n?null:n}var wi=function(r,o){var s=r.children,a=r.disabled,u=r.target,d=r.align,g=r.onAlign,p=r.monitorWindowResize,m=r.monitorBufferTime,b=m===void 0?0:m,w=vt.useRef({}),C=vt.useRef(),O=vt.Children.only(s),A=vt.useRef({});A.current.disabled=a,A.current.target=u,A.current.align=d,A.current.onAlign=g;var M=w_(function(){var st=A.current,U=st.disabled,ct=st.target,_t=st.align,Tt=st.onAlign,te=C.current;if(!U&&ct&&te){var $t,Xt=Nm(ct),ne=xi(ct);w.current.element=Xt,w.current.point=ne,w.current.align=_t;var Ce=document,Pe=Ce.activeElement;return Xt&&(0,Jn.Z)(Xt)?$t=bd(te,Xt,_t):ne&&($t=x_(te,ne,_t)),qe(Pe,te),Tt&&$t&&Tt(te,$t),!0}return!1},b),P=(0,Ke.Z)(M,2),I=P[0],N=P[1],R=vt.useState(),z=(0,Ke.Z)(R,2),F=z[0],Z=z[1],ot=vt.useState(),nt=(0,Ke.Z)(ot,2),q=nt[0],et=nt[1];return(0,Ul.Z)(function(){Z(Nm(u)),et(xi(u))}),vt.useEffect(function(){(w.current.element!==F||!E_(w.current.point,q)||!(0,Qr.Z)(w.current.align,d))&&I()}),vt.useEffect(function(){var st=Pm(C.current,I);return st},[C.current]),vt.useEffect(function(){var st=Pm(F,I);return st},[F]),vt.useEffect(function(){a?N():I()},[a]),vt.useEffect(function(){if(p){var st=(0,Ha.Z)(window,"resize",I);return st.remove}},[p]),vt.useEffect(function(){return function(){N()}},[]),vt.useImperativeHandle(o,function(){return{forceAlign:function(){return I(!0)}}}),vt.isValidElement(O)&&(O=vt.cloneElement(O,{ref:(0,Ua.sQ)(O.ref,C)})),O},Hl=vt.forwardRef(wi);Hl.displayName="Align";var wd=Hl,__=wd,Dm=k(19982),C_=k(86404),Ed=["measure","alignPre","align",null,"motion"],S_=function(n,r){var o=(0,C_.Z)(null),s=(0,Ke.Z)(o,2),a=s[0],u=s[1],d=(0,vt.useRef)();function g(b){u(b,!0)}function p(){Do.Z.cancel(d.current)}function m(b){p(),d.current=(0,Do.Z)(function(){g(function(w){switch(a){case"align":return"motion";case"motion":return"stable";default:}return w}),b==null||b()})}return(0,vt.useEffect)(function(){g("measure")},[n]),(0,vt.useEffect)(function(){switch(a){case"measure":r();break;default:}a&&(d.current=(0,Do.Z)((0,Rn.Z)((0,Dm.Z)().mark(function b(){var w,C;return(0,Dm.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:w=Ed.indexOf(a),C=Ed[w+1],C&&w!==-1&&g(C);case 3:case"end":return A.stop()}},b)}))))},[a]),(0,vt.useEffect)(function(){return function(){p()}},[]),[a,m]},O_=function(n){var r=vt.useState({width:0,height:0}),o=(0,Ke.Z)(r,2),s=o[0],a=o[1];function u(g){var p=g.offsetWidth,m=g.offsetHeight,b=g.getBoundingClientRect(),w=b.width,C=b.height;Math.abs(p-w)<1&&Math.abs(m-C)<1&&(p=w,m=C),a({width:p,height:m})}var d=vt.useMemo(function(){var g={};if(n){var p=s.width,m=s.height;n.indexOf("height")!==-1&&m?g.height=m:n.indexOf("minHeight")!==-1&&m&&(g.minHeight=m),n.indexOf("width")!==-1&&p?g.width=p:n.indexOf("minWidth")!==-1&&p&&(g.minWidth=p)}return g},[n,s]);return[d,u]},Rm=vt.forwardRef(function(n,r){var o=n.visible,s=n.prefixCls,a=n.className,u=n.style,d=n.children,g=n.zIndex,p=n.stretch,m=n.destroyPopupOnHide,b=n.forceRender,w=n.align,C=n.point,O=n.getRootDomNode,A=n.getClassNameFromAlign,M=n.onAlign,P=n.onMouseEnter,I=n.onMouseLeave,N=n.onMouseDown,R=n.onTouchStart,z=n.onClick,F=(0,vt.useRef)(),Z=(0,vt.useRef)(),ot=(0,vt.useState)(),nt=(0,Ke.Z)(ot,2),q=nt[0],et=nt[1],st=O_(p),U=(0,Ke.Z)(st,2),ct=U[0],_t=U[1];function Tt(){p&&_t(O())}var te=S_(o,Tt),$t=(0,Ke.Z)(te,2),Xt=$t[0],ne=$t[1],Ce=(0,vt.useState)(0),Pe=(0,Ke.Z)(Ce,2),Qe=Pe[0],We=Pe[1],Dt=(0,vt.useRef)();(0,Ul.Z)(function(){Xt==="alignPre"&&We(0)},[Xt]);function re(){return C||O}function Me(){var Ae;(Ae=F.current)===null||Ae===void 0||Ae.forceAlign()}function ve(Ae,Se){var Ge=A(Se);q!==Ge&&et(Ge),We(function(tn){return tn+1}),Xt==="align"&&(M==null||M(Ae,Se))}(0,Ul.Z)(function(){Xt==="align"&&(Qe<3?Me():ne(function(){var Ae;(Ae=Dt.current)===null||Ae===void 0||Ae.call(Dt)}))},[Qe]);var Oe=(0,Un.Z)({},od(n));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Ae){var Se=Oe[Ae];Oe[Ae]=function(Ge,tn){return ne(),Se==null?void 0:Se(Ge,tn)}});function kt(){return new Promise(function(Ae){Dt.current=Ae})}vt.useEffect(function(){!Oe.motionName&&Xt==="motion"&&ne()},[Oe.motionName,Xt]),vt.useImperativeHandle(r,function(){return{forceAlign:Me,getElement:function(){return Z.current}}});var Qt=(0,Un.Z)((0,Un.Z)({},ct),{},{zIndex:g,opacity:Xt==="motion"||Xt==="stable"||!o?void 0:0,pointerEvents:!o&&Xt!=="stable"?"none":void 0},u),Xe=!0;w!=null&&w.points&&(Xt==="align"||Xt==="stable")&&(Xe=!1);var ae=d;return vt.Children.count(d)>1&&(ae=vt.createElement("div",{className:"".concat(s,"-content")},d)),vt.createElement(id.default,(0,yi.Z)({visible:o,ref:Z,leavedClassName:"".concat(s,"-hidden")},Oe,{onAppearPrepare:kt,onEnterPrepare:kt,removeOnLeave:m,forceRender:b}),function(Ae,Se){var Ge=Ae.className,tn=Ae.style,wn=Vr()(s,a,q,Ge);return vt.createElement(__,{target:re(),key:"popup",ref:F,monitorWindowResize:!0,disabled:Xe,align:w,onAlign:ve},vt.createElement("div",{ref:Se,className:wn,onMouseEnter:P,onMouseLeave:I,onMouseDownCapture:N,onTouchStartCapture:R,onClick:z,style:(0,Un.Z)((0,Un.Z)({},tn),Qt)},ae))})});Rm.displayName="PopupInner";var A_=Rm,Lm=vt.forwardRef(function(n,r){var o=n.prefixCls,s=n.visible,a=n.zIndex,u=n.children,d=n.mobile;d=d===void 0?{}:d;var g=d.popupClassName,p=d.popupStyle,m=d.popupMotion,b=m===void 0?{}:m,w=d.popupRender,C=n.onClick,O=vt.useRef();vt.useImperativeHandle(r,function(){return{forceAlign:function(){},getElement:function(){return O.current}}});var A=(0,Un.Z)({zIndex:a},p),M=u;return vt.Children.count(u)>1&&(M=vt.createElement("div",{className:"".concat(o,"-content")},u)),w&&(M=w(M)),vt.createElement(id.default,(0,yi.Z)({visible:s,ref:O,removeOnLeave:!0},b),function(P,I){var N=P.className,R=P.style,z=Vr()(o,g,N);return vt.createElement("div",{ref:I,className:z,onClick:C,style:(0,Un.Z)((0,Un.Z)({},R),A)},M)})});Lm.displayName="MobilePopupInner";var T_=Lm,Ya=["visible","mobile"],Yi=vt.forwardRef(function(n,r){var o=n.visible,s=n.mobile,a=(0,cm.Z)(n,Ya),u=(0,vt.useState)(o),d=(0,Ke.Z)(u,2),g=d[0],p=d[1],m=(0,vt.useState)(!1),b=(0,Ke.Z)(m,2),w=b[0],C=b[1],O=(0,Un.Z)((0,Un.Z)({},a),{},{visible:g});(0,vt.useEffect)(function(){p(o),o&&s&&C((0,qE.Z)())},[o,s]);var A=w?vt.createElement(T_,(0,yi.Z)({},O,{mobile:s,ref:r})):vt.createElement(A_,(0,yi.Z)({},O,{ref:r}));return vt.createElement("div",null,vt.createElement(dm,O),A)});Yi.displayName="Popup";var M_=Yi,Ki=vt.createContext(null),km=Ki;function _d(){}function I_(){return""}function P_(n){return n?n.ownerDocument:window.document}var N_=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function D_(n){var r=function(o){(0,WE.Z)(a,o);var s=(0,XE.Z)(a);function a(u){var d;(0,mr.Z)(this,a),d=s.call(this,u),(0,at.Z)((0,Be.Z)(d),"popupRef",vt.createRef()),(0,at.Z)((0,Be.Z)(d),"triggerRef",vt.createRef()),(0,at.Z)((0,Be.Z)(d),"portalContainer",void 0),(0,at.Z)((0,Be.Z)(d),"attachId",void 0),(0,at.Z)((0,Be.Z)(d),"clickOutsideHandler",void 0),(0,at.Z)((0,Be.Z)(d),"touchOutsideHandler",void 0),(0,at.Z)((0,Be.Z)(d),"contextMenuOutsideHandler1",void 0),(0,at.Z)((0,Be.Z)(d),"contextMenuOutsideHandler2",void 0),(0,at.Z)((0,Be.Z)(d),"mouseDownTimeout",void 0),(0,at.Z)((0,Be.Z)(d),"focusTime",void 0),(0,at.Z)((0,Be.Z)(d),"preClickTime",void 0),(0,at.Z)((0,Be.Z)(d),"preTouchTime",void 0),(0,at.Z)((0,Be.Z)(d),"delayTimer",void 0),(0,at.Z)((0,Be.Z)(d),"hasPopupMouseDown",void 0),(0,at.Z)((0,Be.Z)(d),"onMouseEnter",function(p){var m=d.props.mouseEnterDelay;d.fireEvents("onMouseEnter",p),d.delaySetPopupVisible(!0,m,m?null:p)}),(0,at.Z)((0,Be.Z)(d),"onMouseMove",function(p){d.fireEvents("onMouseMove",p),d.setPoint(p)}),(0,at.Z)((0,Be.Z)(d),"onMouseLeave",function(p){d.fireEvents("onMouseLeave",p),d.delaySetPopupVisible(!1,d.props.mouseLeaveDelay)}),(0,at.Z)((0,Be.Z)(d),"onPopupMouseEnter",function(){d.clearDelayTimer()}),(0,at.Z)((0,Be.Z)(d),"onPopupMouseLeave",function(p){var m;p.relatedTarget&&!p.relatedTarget.setTimeout&&(0,Rl.Z)((m=d.popupRef.current)===null||m===void 0?void 0:m.getElement(),p.relatedTarget)||d.delaySetPopupVisible(!1,d.props.mouseLeaveDelay)}),(0,at.Z)((0,Be.Z)(d),"onFocus",function(p){d.fireEvents("onFocus",p),d.clearDelayTimer(),d.isFocusToShow()&&(d.focusTime=Date.now(),d.delaySetPopupVisible(!0,d.props.focusDelay))}),(0,at.Z)((0,Be.Z)(d),"onMouseDown",function(p){d.fireEvents("onMouseDown",p),d.preClickTime=Date.now()}),(0,at.Z)((0,Be.Z)(d),"onTouchStart",function(p){d.fireEvents("onTouchStart",p),d.preTouchTime=Date.now()}),(0,at.Z)((0,Be.Z)(d),"onBlur",function(p){d.fireEvents("onBlur",p),d.clearDelayTimer(),d.isBlurToHide()&&d.delaySetPopupVisible(!1,d.props.blurDelay)}),(0,at.Z)((0,Be.Z)(d),"onContextMenu",function(p){p.preventDefault(),d.fireEvents("onContextMenu",p),d.setPopupVisible(!0,p)}),(0,at.Z)((0,Be.Z)(d),"onContextMenuClose",function(){d.isContextMenuToShow()&&d.close()}),(0,at.Z)((0,Be.Z)(d),"onClick",function(p){if(d.fireEvents("onClick",p),d.focusTime){var m;if(d.preClickTime&&d.preTouchTime?m=Math.min(d.preClickTime,d.preTouchTime):d.preClickTime?m=d.preClickTime:d.preTouchTime&&(m=d.preTouchTime),Math.abs(m-d.focusTime)<20)return;d.focusTime=0}d.preClickTime=0,d.preTouchTime=0,d.isClickToShow()&&(d.isClickToHide()||d.isBlurToHide())&&p&&p.preventDefault&&p.preventDefault();var b=!d.state.popupVisible;(d.isClickToHide()&&!b||b&&d.isClickToShow())&&d.setPopupVisible(!d.state.popupVisible,p)}),(0,at.Z)((0,Be.Z)(d),"onPopupMouseDown",function(){if(d.hasPopupMouseDown=!0,clearTimeout(d.mouseDownTimeout),d.mouseDownTimeout=window.setTimeout(function(){d.hasPopupMouseDown=!1},0),d.context){var p;(p=d.context).onPopupMouseDown.apply(p,arguments)}}),(0,at.Z)((0,Be.Z)(d),"onDocumentClick",function(p){if(!(d.props.mask&&!d.props.maskClosable)){var m=p.target,b=d.getRootDomNode(),w=d.getPopupDomNode();(!(0,Rl.Z)(b,m)||d.isContextMenuOnly())&&!(0,Rl.Z)(w,m)&&!d.hasPopupMouseDown&&d.close()}}),(0,at.Z)((0,Be.Z)(d),"getRootDomNode",function(){var p=d.props.getTriggerDOMNode;if(p)return p(d.triggerRef.current);try{var m=(0,ZE.Z)(d.triggerRef.current);if(m)return m}catch(b){}return lm.findDOMNode((0,Be.Z)(d))}),(0,at.Z)((0,Be.Z)(d),"getPopupClassNameFromAlign",function(p){var m=[],b=d.props,w=b.popupPlacement,C=b.builtinPlacements,O=b.prefixCls,A=b.alignPoint,M=b.getPopupClassNameFromAlign;return w&&C&&m.push(hm(C,O,p,A)),M&&m.push(M(p)),m.join(" ")}),(0,at.Z)((0,Be.Z)(d),"getComponent",function(){var p=d.props,m=p.prefixCls,b=p.destroyPopupOnHide,w=p.popupClassName,C=p.onPopupAlign,O=p.popupMotion,A=p.popupAnimation,M=p.popupTransitionName,P=p.popupStyle,I=p.mask,N=p.maskAnimation,R=p.maskTransitionName,z=p.maskMotion,F=p.zIndex,Z=p.popup,ot=p.stretch,nt=p.alignPoint,q=p.mobile,et=p.forceRender,st=p.onPopupClick,U=d.state,ct=U.popupVisible,_t=U.point,Tt=d.getPopupAlign(),te={};return d.isMouseEnterToShow()&&(te.onMouseEnter=d.onPopupMouseEnter),d.isMouseLeaveToHide()&&(te.onMouseLeave=d.onPopupMouseLeave),te.onMouseDown=d.onPopupMouseDown,te.onTouchStart=d.onPopupMouseDown,vt.createElement(M_,(0,yi.Z)({prefixCls:m,destroyPopupOnHide:b,visible:ct,point:nt&&_t,className:w,align:Tt,onAlign:C,animation:A,getClassNameFromAlign:d.getPopupClassNameFromAlign},te,{stretch:ot,getRootDomNode:d.getRootDomNode,style:P,mask:I,zIndex:F,transitionName:M,maskAnimation:N,maskTransitionName:R,maskMotion:z,ref:d.popupRef,motion:O,mobile:q,forceRender:et,onClick:st}),typeof Z=="function"?Z():Z)}),(0,at.Z)((0,Be.Z)(d),"attachParent",function(p){Do.Z.cancel(d.attachId);var m=d.props,b=m.getPopupContainer,w=m.getDocument,C=d.getRootDomNode(),O;b?(C||b.length===0)&&(O=b(C)):O=w(d.getRootDomNode()).body,O?O.appendChild(p):d.attachId=(0,Do.Z)(function(){d.attachParent(p)})}),(0,at.Z)((0,Be.Z)(d),"getContainer",function(){if(!d.portalContainer){var p=d.props.getDocument,m=p(d.getRootDomNode()).createElement("div");m.style.position="absolute",m.style.top="0",m.style.left="0",m.style.width="100%",d.portalContainer=m}return d.attachParent(d.portalContainer),d.portalContainer}),(0,at.Z)((0,Be.Z)(d),"setPoint",function(p){var m=d.props.alignPoint;!m||!p||d.setState({point:{pageX:p.pageX,pageY:p.pageY}})}),(0,at.Z)((0,Be.Z)(d),"handlePortalUpdate",function(){d.state.prevPopupVisible!==d.state.popupVisible&&d.props.afterPopupVisibleChange(d.state.popupVisible)}),(0,at.Z)((0,Be.Z)(d),"triggerContextValue",{onPopupMouseDown:d.onPopupMouseDown});var g;return"popupVisible"in u?g=!!u.popupVisible:g=!!u.defaultPopupVisible,d.state={prevPopupVisible:g,popupVisible:g},N_.forEach(function(p){d["fire".concat(p)]=function(m){d.fireEvents(p,m)}}),d}return(0,yr.Z)(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var d=this.props,g=this.state;if(g.popupVisible){var p;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(p=d.getDocument(this.getRootDomNode()),this.clickOutsideHandler=(0,Ha.Z)(p,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(p=p||d.getDocument(this.getRootDomNode()),this.touchOutsideHandler=(0,Ha.Z)(p,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(p=p||d.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=(0,Ha.Z)(p,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=(0,Ha.Z)(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Do.Z.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var d;return((d=this.popupRef.current)===null||d===void 0?void 0:d.getElement())||null}},{key:"getPopupAlign",value:function(){var d=this.props,g=d.popupPlacement,p=d.popupAlign,m=d.builtinPlacements;return g&&m?um(m,g,p):p}},{key:"setPopupVisible",value:function(d,g){var p=this.props.alignPoint,m=this.state.popupVisible;this.clearDelayTimer(),m!==d&&("popupVisible"in this.props||this.setState({popupVisible:d,prevPopupVisible:m}),this.props.onPopupVisibleChange(d)),p&&g&&d&&this.setPoint(g)}},{key:"delaySetPopupVisible",value:function(d,g,p){var m=this,b=g*1e3;if(this.clearDelayTimer(),b){var w=p?{pageX:p.pageX,pageY:p.pageY}:null;this.delayTimer=window.setTimeout(function(){m.setPopupVisible(d,w),m.clearDelayTimer()},b)}else this.setPopupVisible(d,p)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(d){var g=this.props.children.props,p=this.props;return g[d]&&p[d]?this["fire".concat(d)]:g[d]||p[d]}},{key:"isClickToShow",value:function(){var d=this.props,g=d.action,p=d.showAction;return g.indexOf("click")!==-1||p.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var d=this.props.action;return d==="contextMenu"||d.length===1&&d[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var d=this.props,g=d.action,p=d.showAction;return g.indexOf("contextMenu")!==-1||p.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var d=this.props,g=d.action,p=d.hideAction;return g.indexOf("click")!==-1||p.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var d=this.props,g=d.action,p=d.showAction;return g.indexOf("hover")!==-1||p.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var d=this.props,g=d.action,p=d.hideAction;return g.indexOf("hover")!==-1||p.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var d=this.props,g=d.action,p=d.showAction;return g.indexOf("focus")!==-1||p.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var d=this.props,g=d.action,p=d.hideAction;return g.indexOf("focus")!==-1||p.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var d;(d=this.popupRef.current)===null||d===void 0||d.forceAlign()}}},{key:"fireEvents",value:function(d,g){var p=this.props.children.props[d];p&&p(g);var m=this.props[d];m&&m(g)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var d=this.state.popupVisible,g=this.props,p=g.children,m=g.forceRender,b=g.alignPoint,w=g.className,C=g.autoDestroy,O=vt.Children.only(p),A={key:"trigger"};this.isContextMenuToShow()?A.onContextMenu=this.onContextMenu:A.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(A.onClick=this.onClick,A.onMouseDown=this.onMouseDown,A.onTouchStart=this.onTouchStart):(A.onClick=this.createTwoChains("onClick"),A.onMouseDown=this.createTwoChains("onMouseDown"),A.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(A.onMouseEnter=this.onMouseEnter,b&&(A.onMouseMove=this.onMouseMove)):A.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?A.onMouseLeave=this.onMouseLeave:A.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(A.onFocus=this.onFocus,A.onBlur=this.onBlur):(A.onFocus=this.createTwoChains("onFocus"),A.onBlur=this.createTwoChains("onBlur"));var M=Vr()(O&&O.props&&O.props.className,w);M&&(A.className=M);var P=(0,Un.Z)({},A);(0,Ua.Yr)(O)&&(P.ref=(0,Ua.sQ)(this.triggerRef,O.ref));var I=vt.cloneElement(O,P),N;return(d||this.popupRef.current||m)&&(N=vt.createElement(n,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!d&&C&&(N=null),vt.createElement(km.Provider,{value:this.triggerContextValue},I,N)}}],[{key:"getDerivedStateFromProps",value:function(d,g){var p=d.popupVisible,m={};return p!==void 0&&g.popupVisible!==p&&(m.popupVisible=p,m.prevPopupVisible=g.popupVisible),m}}]),a}(vt.Component);return(0,at.Z)(r,"contextType",km),(0,at.Z)(r,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:I_,getDocument:P_,onPopupVisibleChange:_d,afterPopupVisibleChange:_d,onPopupAlign:_d,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),r}var R_=D_(KE),Is={adjustX:1,adjustY:1},Ps=[0,0],Bm={topLeft:{points:["bl","tl"],overflow:Is,offset:[0,-4],targetOffset:Ps},topCenter:{points:["bc","tc"],overflow:Is,offset:[0,-4],targetOffset:Ps},topRight:{points:["br","tr"],overflow:Is,offset:[0,-4],targetOffset:Ps},bottomLeft:{points:["tl","bl"],overflow:Is,offset:[0,4],targetOffset:Ps},bottomCenter:{points:["tc","bc"],overflow:Is,offset:[0,4],targetOffset:Ps},bottomRight:{points:["tr","br"],overflow:Is,offset:[0,4],targetOffset:Ps}},zm=Bm,Cd=k(14143),L_=Cd.Z.ESC,k_=Cd.Z.TAB;function Fm(n){var r=n.visible,o=n.setTriggerVisible,s=n.triggerRef,a=n.menuRef,u=n.onVisibleChange,d=n.autoFocus,g=vt.useRef(!1),p=function(){if(r&&s.current){var C,O,A,M;(C=s.current)===null||C===void 0||(O=C.triggerRef)===null||O===void 0||(A=O.current)===null||A===void 0||(M=A.focus)===null||M===void 0||M.call(A),o(!1),typeof u=="function"&&u(!1)}},m=function(){var C,O;(C=a.current)===null||C===void 0||(O=C.focus)===null||O===void 0||O.call(C),g.current=!0},b=function(C){var O;switch(C.keyCode){case L_:p();break;case k_:!g.current&&(!((O=a.current)===null||O===void 0)&&O.focus)?(C.preventDefault(),m()):p();break}};vt.useEffect(function(){return r?(window.addEventListener("keydown",b),d&&(0,Do.Z)(m,3),function(){window.removeEventListener("keydown",b),g.current=!1}):function(){g.current=!1}},[r])}var Ns=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function B_(n,r){var o=n.arrow,s=o===void 0?!1:o,a=n.prefixCls,u=a===void 0?"rc-dropdown":a,d=n.transitionName,g=n.animation,p=n.align,m=n.placement,b=m===void 0?"bottomLeft":m,w=n.placements,C=w===void 0?zm:w,O=n.getPopupContainer,A=n.showAction,M=n.hideAction,P=n.overlayClassName,I=n.overlayStyle,N=n.visible,R=n.trigger,z=R===void 0?["hover"]:R,F=n.autoFocus,Z=(0,cm.Z)(n,Ns),ot=vt.useState(),nt=(0,Ke.Z)(ot,2),q=nt[0],et=nt[1],st="visible"in n?N:q,U=vt.useRef(null);vt.useImperativeHandle(r,function(){return U.current});var ct=vt.useRef(null),_t="".concat(u,"-menu");Fm({visible:st,setTriggerVisible:et,triggerRef:U,menuRef:ct,onVisibleChange:n.onVisibleChange,autoFocus:F});var Tt=function(){var re=n.overlay,Me;return typeof re=="function"?Me=re():Me=re,Me},te=function(re){var Me=n.onOverlayClick,ve=Tt().props;et(!1),Me&&Me(re),ve.onClick&&ve.onClick(re)},$t=function(re){var Me=n.onVisibleChange;et(re),typeof Me=="function"&&Me(re)},Xt=function(){var re,Me=Tt(),ve=(0,Ua.sQ)(ct,Me.ref),Oe=(re={prefixCls:_t},(0,at.Z)(re,"data-dropdown-inject",!0),(0,at.Z)(re,"onClick",te),(0,at.Z)(re,"ref",(0,Ua.Yr)(Me)?ve:void 0),re);return typeof Me.type=="string"&&(delete Oe.prefixCls,delete Oe["data-dropdown-inject"]),vt.createElement(vt.Fragment,null,s&&vt.createElement("div",{className:"".concat(u,"-arrow")}),vt.cloneElement(Me,Oe))},ne=function(){var re=n.overlay;return typeof re=="function"?Xt:Xt()},Ce=function(){var re=n.minOverlayWidthMatchTrigger,Me=n.alignPoint;return"minOverlayWidthMatchTrigger"in n?re:!Me},Pe=function(){var re=n.openClassName;return re!==void 0?re:"".concat(u,"-open")},Qe=function(){var re=n.children,Me=re.props?re.props:{},ve=Vr()(Me.className,Pe());return st&&re?vt.cloneElement(re,{className:ve}):re},We=M;return!We&&z.indexOf("contextMenu")!==-1&&(We=["click"]),vt.createElement(R_,(0,Un.Z)((0,Un.Z)({builtinPlacements:C},Z),{},{prefixCls:u,ref:U,popupClassName:Vr()(P,(0,at.Z)({},"".concat(u,"-show-arrow"),s)),popupStyle:I,action:z,showAction:A,hideAction:We||[],popupPlacement:b,popupAlign:p,popupTransitionName:d,popupAnimation:g,popupVisible:st,stretch:Ce()?"minWidth":"",popup:ne(),onPopupVisibleChange:$t,getPopupContainer:O}),Qe())}var dn=vt.forwardRef(B_),Sd=dn;class Od extends vt.Component{render(){const{children:r,trigger:o,disabled:s}=this.props,a=`${this.props.prefixCls}-dropdown`,u=vt.Children.only(r),d=vt.cloneElement(u,{className:Vr()(r.props.className,`${a}-trigger`),disabled:s}),g=s?[]:Array.isArray(o)?o:[o];let p=!1;g&&g.indexOf("contextMenu")!==-1&&(p=!0);const m=vt.Children.only(this.props.overlay),b=vt.createElement("div",{className:`${a}-overlay`},m);return vt.createElement(Sd,Object.assign({},this.props,{prefixCls:a,overlay:b,alignPoint:p,trigger:g}),d)}}(function(n){n.defaultProps={trigger:"hover",prefixCls:"x6",mouseEnterDelay:.15,mouseLeaveDelay:.1,placement:"bottomLeft"}})(Od||(Od={}));var on=k(78643),Ad=k(62808),Gm=k(25082),z_=k(12515),F_=k(35352),In=k(21434),Pn=k(9580),G_=k(29116),jm=k(94310),ee=k(35667),j_=k(86767),V_=k(97400),Vm=k(41626),U_=k(45377),Td=k(18234),Um=k(91614),Md=k(14258),Ei=k(73656),xn=class{constructor(n){mt(this,"context");this.context=n}},Ka=(n=>(n.render="render",n.addNode="addNode",n.addEdge="addEdge",n.moveNode="moveNode",n.removeCell="removeCell",n.dragNode="dragNode",n.updateEdge="updateEdge",n.clearStatus="clearStatus",n.queryStatus="queryStatus",n.runAll="runAll",n.runSingle="runSingle",n.runDown="runDown",n.runUp="runUp",n.stopRun="stopRun",n.stopAll="stopAll",n.continueRun="continueRun",n.copy="copy",n.paste="paste",n.zoomIn="zoomIn",n.zoomOut="zoomOut",n.zoomToFit="zoomToFit",n.zoomToOrigin="zoomToOrigin",n.zoomTo="zoomTo",n.selectNode="selectNode",n.toggleSelection="toggleSelection",n.centerNode="centerNode",n.showResult="showResult",n.changeStyles="changeStyles",n.changeNodeData="changeNodeData",n.tidyLayout="tidyLayout",n.changeStatus="changeStatus",n))(Ka||{}),Ja=class extends xn{constructor(){super(...arguments);mt(this,"type","addEdge");mt(this,"label","\u6DFB\u52A0\u8FB9")}handle(r,o,s){const a=s.getSourceCellId(),u=s.getTargetCellId(),d=s.getSourcePortId(),g=s.getTargetPortId();if(d&&g){const p=`${d}__${g}`,m={id:p,source:a,target:u,sourceAnchor:d,targetAnchor:g},b=r.createEdge({shape:"dag-edge",id:p,source:{cell:a,port:d},target:{cell:u,port:g},data:{id:s.id,source:a,sourceAnchor:d,target:u,targetAnchor:g},zIndex:-1});s.remove(),r.addEdge(b),this.context.dataService.addEdges([m])}}},qa=class extends xn{constructor(){super(...arguments);mt(this,"type","addNode");mt(this,"label","\u6DFB\u52A0\u8282\u70B9")}handle(r,o,s){const a=s.getData(),u=s.position(),d={id:a.id,codeName:a.codeName,label:a.label,x:u.x,y:u.y,status:a.status};this.context.dataService.addNodes([d])}},$l=class{constructor(){mt(this,"type","centerNode");mt(this,"label","\u5C45\u4E2D")}handle(n,r,o){o?n.centerCell(n.getCellById(o)):n.centerContent()}},H_=class{constructor(){mt(this,"type","changeStatus");mt(this,"label","\u6539\u53D8\u8282\u70B9\u72B6\u6001")}handle(n,r,o){this.changeNodeStatus(o,n)}changeNodeStatus(n,r){const{nodeId:o,status:s}=n,a=r.getCellById(o);n&&a.setData(Fs(ri({},a.getData()),{status:s}))}},$_=class{constructor(){mt(this,"type","changeStyles");mt(this,"label","\u6539\u53D8\u6837\u5F0F");mt(this,"timer",0)}handle(n,r,o){this.changeNodesStyle(o,n)}changeNodesStyle(n,r){n==null||n.forEach(({nodeId:o,styles:s})=>{const a=r.getCellById(o);a&&a.setData(Fs(ri({},a.getData()),{styles:s}))})}},Id=(n=>(n[n.success=0]="success",n[n.running=1]="running",n[n.failed=2]="failed",n[n.pending=3]="pending",n[n.default=4]="default",n[n.stopped=5]="stopped",n[n.unfinished=6]="unfinished",n))(Id||{}),Wl=class{constructor(){mt(this,"type","clearStatus");mt(this,"label","\u6E05\u9664\u8FD0\u884C\u72B6\u6001")}handle(n){n.getNodes().forEach(s=>{s.setData(Fs(ri({},s.getData()),{status:4}))}),n.getEdges().forEach(s=>{s.attr("line/strokeDasharray",""),s.attr("line/style/animation","")})}},Xl="en",Zl=!1,Ji=!1,Qa=!1,Ds=!1,Rs=!1,W_=!1,X_=!1,Yl,Kl=Xl,Z_,ir,Y_=!1,K_=!1,J_=!1,_i=!1,Jl=!1,Hm=!0,ZC=!1,q_=!1,$m=typeof self=="object"?self:typeof k.g=="object"?k.g:{},Hn;typeof Ei!="undefined"?Hn=Ei:typeof $m.vscode!="undefined"&&(Hn=$m.vscode.process);var Wm=typeof((f0=Hn==null?void 0:Hn.versions)==null?void 0:f0.electron)=="string"&&Hn.type==="renderer",Ls=Wm&&(Hn==null?void 0:Hn.sandboxed),YC=(()=>{if(Ls)return"bypassHeatCheck";const n=Hn==null?void 0:Hn.env.ENABLE_VSCODE_BROWSER_CODE_LOADING;if(typeof n=="string")return n==="none"||n==="code"||n==="bypassHeatCheck"||n==="bypassHeatCheckAndEagerCompile"?n:"bypassHeatCheck"})();if(typeof navigator=="object"&&!Wm)ir=navigator.userAgent,Zl=ir.indexOf("Windows")>=0,Ji=ir.indexOf("Macintosh")>=0,X_=(ir.indexOf("Macintosh")>=0||ir.indexOf("iPad")>=0||ir.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Qa=ir.indexOf("Linux")>=0,W_=!0,Yl=navigator.language,Kl=Yl,Y_=ir.indexOf("Trident")>=0,K_=ir.indexOf("Edge/")>=0,J_=ir.indexOf("Opera")>=0,_i=ir.indexOf("Firefox")>=0,Jl=ir.indexOf("AppleWebKit")>=0,Hm=ir.indexOf("Chrome")>=0,ZC=ir.indexOf("Chrome")===-1&&ir.indexOf("Safari")>=0,q_=ir.indexOf("iPad")>=0;else if(typeof Hn=="object"){Zl=Hn.platform==="win32",Ji=Hn.platform==="darwin",Qa=Hn.platform==="linux",Ds=Qa&&!!Hn.env.SNAP&&!!Hn.env.SNAP_REVISION,Yl=Xl,Kl=Xl;const n=Hn.env.VSCODE_NLS_CONFIG;if(n)try{const r=JSON.parse(n),o=r.availableLanguages["*"];Yl=r.locale,Kl=o||Xl,Z_=r._translationsConfigFile}catch(r){}Rs=!0}else console.error("Unable to resolve platform.");var Pd=0;Ji?Pd=1:Zl?Pd=3:Qa&&(Pd=2);var Bn=Zl,qi=Kl,Q_;(n=>{function r(){return qi}n.value=r;function o(){return qi.length===2?qi==="en":qi.length>=3?qi[0]==="e"&&qi[1]==="n"&&qi[2]==="-":!1}n.isDefaultVariant=o;function s(){return qi==="en"}n.isDefault=s})(Q_||(Q_={}));var KC=typeof window.WebAssembly!="undefined",Bo={key:Bn?"ctrl+c":"cmd+c",text:Bn?"Ctrl C":"\u2318 C"},ql="DAG_COPY_CONTENT",Ql=class extends xn{constructor(){super(...arguments);mt(this,"type","copy");mt(this,"label","\u590D\u5236");mt(this,"hotKey",Bo)}handle(r,o,s=[],a=[]){const u=s.map(w=>r.getCellById(w)),d=a.map(w=>r.getCellById(w)),g=u.map(w=>w.getData()),p=d.filter(w=>{const C=w.getData();return g.find(O=>O.id===C.source)&&g.find(O=>O.id===C.target)}),m={nodes:u.map(w=>w.toJSON()),edges:p.map(w=>w.toJSON())};localStorage.setItem(ql,JSON.stringify(m));const b=this.context.EventHub.getData();for(const w of b)w.onCopyActionChange&&w.onCopyActionChange(!0);dt.ZP.success("\u590D\u5236\u6210\u529F")}},tC=class extends xn{constructor(){super(...arguments);mt(this,"type","dragNode");mt(this,"label","\u62D6\u62FD\u8282\u70B9");mt(this,"dnd",null)}handle(r,o,s,a){return Je(this,null,function*(){this.dnd||(this.dnd=new Ct({target:r,getDragNode:O=>O.clone({keepId:!0}),getDropNode:O=>O.clone({keepId:!0})}));const u=yield this.context.requestService.getMaxNodeIndex(o),d=`${o}-node-${u+1}`,{label:g,codeName:p,status:m}=s,b=yield this.context.hookService.createResult(d,p),w=yield this.context.hookService.createPort(d,p),C=r.createNode({id:d,shape:"dag-node",ports:w,data:{id:d,codeName:p,label:g,status:m||4,outputs:b}});this.dnd.start(C,a)})}cancel(){this.dnd&&(this.dnd.dispose(),this.dnd=null)}},Xm=class extends xn{constructor(){super(...arguments);mt(this,"type","moveNode");mt(this,"label","\u79FB\u52A8\u8282\u70B9")}handle(r,o,s){const{x:a,y:u}=s.position();this.context.dataService.changeNode([{nodeId:s.id,meta:{x:a,y:u}}])}},Zm={key:Bn?"ctrl+v":"cmd+v",text:Bn?"Ctrl V":"\u2318 V"},eC="DAG_COPY_CONTENT",nC=class extends xn{constructor(){super(...arguments);mt(this,"type","paste");mt(this,"label","\u7C98\u8D34");mt(this,"hotKey",Zm)}handle(r,o){return Je(this,null,function*(){const s=localStorage.getItem(eC);if(!s)return;const a=JSON.parse(s),u=yield this.context.requestService.getMaxNodeIndex(o),d={};a.nodes.forEach((w,C)=>{const O=`${o}-node-${u+C+1}`;d[w.id]=O,w.data.status=w.data.status===6?6:4;const{x:A,y:M}=w.position;w.position={x:A+32,y:M+32}});let g=JSON.stringify(a);Object.keys(d).forEach(w=>{g=g.replace(new RegExp(`"${w}"`,"g"),`"${d[w]}"`),g=g.replace(new RegExp(`${w}-`,"g"),`${d[w]}-`)});const p=JSON.parse(g);r.addNodes(p.nodes,{dry:!0}),r.addEdges(p.edges,{dry:!0}),r.resetSelection(p.nodes.map(w=>w.id));const m=p.nodes.map(w=>({id:w.data.id,codeName:w.data.codeName,label:w.data.label,x:w.position.x,y:w.position.y,status:w.data.status===6?4:w.data.status,nodeDef:w.data.nodeDef}));yield this.context.dataService.addNodes(m),yield this.context.dataService.addEdges(p.edges.map(w=>({id:w.data.id,source:w.data.source,target:w.data.target,sourceAnchor:w.data.sourceAnchor,targetAnchor:w.data.targetAnchor})));const b=this.context.EventHub.getData();for(const w of b)w.onNodesPasted&&w.onNodesPasted(m)})}},rC=class extends xn{constructor(){super(...arguments);mt(this,"type","queryStatus");mt(this,"label","\u67E5\u8BE2\u8FD0\u884C\u72B6\u6001");mt(this,"timer",0)}handle(r,o){return Je(this,null,function*(){yield this.queryStatus(r,o)})}cancel(){this.timer&&(clearTimeout(this.timer),this.timer=0)}queryStatus(r,o){return Je(this,null,function*(){const s=this.context.EventHub.getData(),{nodeStatus:a,finished:u}=yield this.context.requestService.queryStatus(o);if(this.changeNodesStatus(a,r),!u){this.timer=window.setTimeout(()=>{this.queryStatus(r,o)},2e3);for(const g of s)g.onNodeRunning&&g.onNodeRunning(!0),g.onNodeStatusChanged&&g.onNodeStatusChanged(a)}else for(const g of s)g.onNodeRunning&&g.onNodeRunning(!1),g.onNodeStatusChanged&&g.onNodeStatusChanged(a)})}changeNodesStatus(r,o){r.forEach(({nodeId:s,status:a})=>{const u=o.getCellById(s);if(u){u.setData(Fs(ri({},u.getData()),{status:a}));const d=o.getIncomingEdges(s);d==null||d.forEach(g=>{const p=g.getSourceCellId();if(p){const m=r.find(b=>b.nodeId===p);m&&m.status===0&&this.changeEdgeStatus(o,g.id,a)}})}})}changeEdgeStatus(r,o,s){const a=r.getCellById(o);a&&(s===1?(a.attr("line/strokeDasharray",5),a.attr("line/stroke","#1890ff"),a.attr("line/strokeWidth","2"),a.attr("line/style/animation","ant-line 30s infinite linear")):s===0||s===2?(a.attr("line/strokeDasharray",""),a.attr("line/style/animation",""),a.attr("line/strokeWidth","1.5"),a.attr("line/stroke","#c2c8d5")):(a.attr("line/strokeDasharray",""),a.attr("line/style/animation",""),a.attr("line/strokeWidth","1"),a.attr("line/stroke","#c2c8d5")))}},zo={key:["delete","backspace"],text:"Delete"},iC=class extends xn{constructor(){super(...arguments);mt(this,"type","removeCell");mt(this,"label","\u5220\u9664");mt(this,"hotKey",zo)}handle(r,o,s=[],a=[]){s.forEach(u=>{const d=r.getCellById(u);d&&r.getConnectedEdges(d).forEach(p=>{a.push(p.id)})}),(s.length>0||a.length>0)&&(r.removeCells([...s,...a]),this.context.dataService.removeNodesOrEdges(s,a))}},oC=class extends xn{constructor(){super(...arguments);mt(this,"type","render");mt(this,"label","render")}handle(r){return Je(this,null,function*(){const{nodes:o,edges:s}=yield this.context.dataService.fetch();o.length>0&&r.drawBackground(),r.clearCells();const a=yield Promise.all(o.map(d=>Je(this,null,function*(){return yield this.createX6Node(d)}))),u=s.map(d=>this.createX6Edge(d));r.addNodes(a,{dry:!0}),r.addEdges(u,{dry:!0}),r.zoomToFit({maxScale:1,minScale:.6}),r.centerContent()})}createX6Node(r){return Je(this,null,function*(){const o=yield this.context.hookService.createResult(r.id,r.codeName),s=yield this.context.hookService.createPort(r.id,r.codeName);return{id:r.id,x:r.x,y:r.y,shape:"dag-node",data:{id:r.id,codeName:r.codeName,label:r.label,status:r.status,outputs:o,styles:r.styles,nodeDef:r.nodeDef},ports:s}})}createX6Edge(r){var o;return{shape:"dag-edge",id:r.id,source:{cell:r.source,port:r.sourceAnchor},target:{cell:r.target,port:r.targetAnchor},data:{id:r.id,source:r.source,sourceAnchor:r.sourceAnchor,target:r.target,targetAnchor:r.targetAnchor},attrs:{line:{stroke:"#C2C8D5",strokeWidth:1,targetMarker:null,opacity:(o=r==null?void 0:r.styles)!=null&&o.isOpaque?.25:1}},zIndex:-1}}},tu=class extends xn{constructor(){super(...arguments);mt(this,"type","runAll");mt(this,"label","\u5168\u90E8\u8FD0\u884C");mt(this,"handle",(r,o)=>Je(this,null,function*(){const s=r.getNodes().map(a=>a.id);return yield this.context.requestService.startRun(o,s)}))}},tc={key:Bn?"ctrl+down":"cmd+down",text:Bn?"Ctrl \u2193":"\u2318 \u2193"},Ym=class extends xn{constructor(){super(...arguments);mt(this,"type","runDown");mt(this,"label","\u5F00\u59CB\u6267\u884C");mt(this,"hotKey",tc);mt(this,"handle",(r,o,s)=>Je(this,null,function*(){if(!s||s.length===0)return;const a=this.context.EventHub.getData();for(const d of a)d.onBlankClick&&d.onBlankClick();const u=this.getSubGraph(r,s[0]);this.context.requestService.startRun(o,Array.from(u))}))}getSubGraph(r,o,s=new Set){s.add(o);const a=r.getOutgoingEdges(o);return a==null||a.forEach(u=>{const d=u.getData(),{target:g}=d;this.getSubGraph(r,g,s)}),s}},Nd={key:"enter",text:"Enter"},sC=class extends xn{constructor(){super(...arguments);mt(this,"type","runSingle");mt(this,"label","\u6267\u884C\u5355\u8282\u70B9");mt(this,"hotKey",Nd);mt(this,"handle",(r,o,s)=>Je(this,null,function*(){if(!s||s.length===0)return;const a=this.context.EventHub.getData();for(const u of a)u.onBlankClick&&u.onBlankClick();yield this.context.requestService.startRun(o,s)}))}},Km={key:Bn?"ctrl+up":"cmd+up",text:Bn?"Ctrl \u2191":"\u2318 \u2191"},Jm=class extends xn{constructor(){super(...arguments);mt(this,"type","runUp");mt(this,"label","\u6267\u884C\u5230\u6B64");mt(this,"hotKey",Km);mt(this,"handle",(r,o,s)=>Je(this,null,function*(){if(!s||s.length===0)return;const a=this.context.EventHub.getData();for(const d of a)d.onBlankClick&&d.onBlankClick();const u=this.getSuperGraph(r,s[0]);yield this.context.requestService.startRun(o,Array.from(u))}))}getSuperGraph(r,o,s=new Set){s.add(o);const a=r.getIncomingEdges(o);return a==null||a.forEach(u=>{const d=u.getData(),{source:g}=d;this.getSuperGraph(r,g,s)}),s}},Dr=class{constructor(){mt(this,"type","selectNode");mt(this,"label","\u9009\u62E9")}handle(n,r,o){n.resetSelection(o)}},aC=class extends xn{constructor(){super(...arguments);mt(this,"type","showResult");mt(this,"label","\u5C55\u793A\u7ED3\u679C")}handle(r,o,s,a){return Je(this,null,function*(){const u=this.context.EventHub.getData();for(const d of u)d.onResultClick&&d.onResultClick(o,s,a)})}},Qi=class extends xn{constructor(){super(...arguments);mt(this,"type","stopAll");mt(this,"label","\u505C\u6B62\u5168\u90E8");mt(this,"handle",(r,o,s)=>Je(this,null,function*(){return yield this.context.requestService.stopRun(o)}))}},cC=class extends xn{constructor(){super(...arguments);mt(this,"type","stopRun");mt(this,"label","\u505C\u6B62\u6267\u884C");mt(this,"handle",(r,o,s)=>Je(this,null,function*(){yield this.context.requestService.stopRun(o,s)}))}},qm=class extends xn{constructor(){super(...arguments);mt(this,"type","continueRun");mt(this,"label","\u7EE7\u7EED\u6267\u884C");mt(this,"handle",(r,o,s)=>Je(this,null,function*(){yield this.context.requestService.continueRun(o,s)}))}},Dd={key:Bn?"ctrl+l":"cmd+l",text:Bn?"Ctrl L":"\u2318 L"},lC=class extends xn{constructor(){super(...arguments);mt(this,"type","tidyLayout");mt(this,"label","\u4E00\u952E\u6574\u7406");mt(this,"hotKey",Dd);mt(this,"handle",(r,o)=>{const s=new an({type:"dagre",ranksep:35,nodesep:15,nodeSize:[180,36]}),a={nodes:[],edges:[]},u=r.getNodes(),d=r.getEdges();u.forEach(g=>{a.nodes.push(g.getData())}),d.forEach(g=>{a.edges.push(g.getData())}),s.layout(a),a.nodes.forEach(g=>{const{id:p}=g,m=r.getCellById(p);m&&m.isNode()&&m.position(g.x,g.y)}),r.zoomToFit({maxScale:1,minScale:.2}),r.centerContent(),this.context.requestService.saveDag(o,a)})}},Qm={key:"",text:"Shift + \u9F20\u6807\u5DE6\u952E"},t0=class{constructor(){mt(this,"type","toggleSelection");mt(this,"label","\u5207\u6362\u6846\u9009\u72B6\u6001");mt(this,"hotKey",Qm);mt(this,"rubberband",!1);mt(this,"handle",n=>this.toggeleSelection(n));mt(this,"enableSelection",n=>{n.disablePanning(),n.setRubberbandModifiers(null),this.rubberband=!0});mt(this,"disableSelection",n=>{n.enablePanning(),n.setRubberbandModifiers("shift"),this.rubberband=!1})}toggeleSelection(n){return this.rubberband?this.disableSelection(n):this.enableSelection(n),this.rubberband}},e0=class extends xn{constructor(){super(...arguments);mt(this,"type","changeNodeData");mt(this,"label","\u6539\u53D8\u8282\u70B9\u53C2\u6570")}handle(r,o,s,a){if(r){const u=r.getCellById(s);if(!u)return;this.context.dataService.changeNode([{nodeId:u.id,meta:a}]),u.setData(ri(ri({},u.getData()),a),{overwrite:!0,silent:!0})}}},Rd={key:Bn?"ctrl+=":"cmd+=",text:Bn?"Ctrl +":"\u2318 +"},uC=class{constructor(){mt(this,"type","zoomIn");mt(this,"label","\u653E\u5927");mt(this,"hotKey",Rd)}handle(n){return n.zoom()<1.5&&n.zoom(.25),n.zoom()}},eu={key:Bn?"ctrl+-":"cmd+-",text:Bn?"Ctrl -":"\u2318 -"},hC=class{constructor(){mt(this,"type","zoomOut");mt(this,"label","\u7F29\u5C0F");mt(this,"hotKey",eu)}handle(n){return n.zoom()>.5&&n.zoom(-.25),n.zoom()}},n0=class{constructor(){mt(this,"type","zoomTo");mt(this,"label","\u7F29\u653E\u81F3")}handle(n,r,o){return n.zoomTo(o),n.zoom()}},r0={key:Bn?"ctrl+p":"cmd+p",text:Bn?"Ctrl P":"\u2318 P"},dC=class{constructor(){mt(this,"type","zoomToFit");mt(this,"label","\u81EA\u9002\u5E94\u7A97\u53E3\u5927\u5C0F");mt(this,"hotKey",r0);mt(this,"handle",n=>(n.zoomToFit({maxScale:1}),n.zoom()))}},Ld={key:Bn?"ctrl+o":"cmd+o",text:Bn?"Ctrl O":"\u2318 O"},fC=class{constructor(){mt(this,"type","zoomToOrigin");mt(this,"label","\u5B9E\u9645\u50CF\u7D20\u5C55\u793A");mt(this,"hotKey",Ld)}handle(n){return n.zoomTo(1),n.zoom()}},ec=[Ja,qa,Wl,Ql,tC,Xm,nC,rC,iC,oC,tu,Ym,sC,Jm,cC,qm,uC,hC,Dr,dC,fC,$l,t0,n0,aC,$_,Qi,lC,e0,H_],to={copyActionHotKey:Bo,pasteActionHotKey:Zm,removeCellActionHotKey:zo,runDownActionHotKey:tc,runSingleActionHotKey:Nd,runUpActionHotKey:Km,toggleSelectionActionHotKey:Qm,zoomInActionHotKey:Rd,zoomOutActionHotKey:eu,zoomToFitActionHotKey:r0,zoomToOriginActionHotKey:Ld,tidyLayoutActionHotKey:Dd};function nc(n,r){return new n(r)}var kd=(n,r,o,s,a)=>{var w,C;if(!o||o.getAttribute("port-group")==="top"||!s||s.getAttribute("port-group")!=="top")return!1;const u=s.getAttribute("port");if(a.find(O=>O.getTargetPortId()===u))return!1;let d=!0;const g=o.getAttribute("port"),p=(w=n.getPort(g))==null?void 0:w.type,m=s.getAttribute("port"),b=(C=r.getPort(m))==null?void 0:C.type;for(const O of p)if(b.indexOf(O)<0){d=!1;break}return d},i0=n=>{const r=n.split("-");if(r.length!==3)throw new Error("invalid node id");return{dagId:r[0],index:parseInt(r[2],10)}},o0=n=>{const r=n.split("-");if(r.length!==5)throw new Error("invalid port id");return{nodeId:r.slice(0,3).join("-"),type:r[3],index:parseInt(r[4],10)}},s0=class extends xn{constructor(){super(...arguments);mt(this,"dagId",null);mt(this,"graph",null);mt(this,"initPlugins",()=>{this.graph&&(this.graph.use(new mi({global:!1})),this.graph.use(new Os({enabled:!0,multiple:!0,rubberEdge:!0,rubberNode:!0,modifiers:"shift",rubberband:!0})))});mt(this,"initHotKeys",()=>{const r=["runDown","runUp","runSingle"],o=["tidyLayout"];if(this.graph&&this.dagId){const s=this.context.ActionHub.getData();for(const a of s)if(a.hotKey){const{key:u}=a.hotKey;u&&this.graph.bindKey(u,d=>{var m,b;const g=(m=this.graph)==null?void 0:m.getSelectedCells().filter(w=>w.isNode()).map(w=>w.id),p=(b=this.graph)==null?void 0:b.getSelectedCells().filter(w=>w.isEdge()).map(w=>w.id);if(d.preventDefault(),this.graph){const w=this.context.EventHub.getData();for(const C of w)C.onBlankClick&&C.onBlankClick();if(o.includes(a.type)){a.handle(this.graph,this.dagId);return}a.handle(this.graph,this.dagId,g,p),r.includes(a.type)&&setTimeout(()=>{this.executeAction("queryStatus")},1500)}})}}})}init(r,o,s="FULL",...a){this.dagId=r,this.graph&&(this.graph.dispose(),this.graph=null),this.graph||(this.initGraph(o),s==="FULL"&&(this.initPlugins(),this.initHotKeys()),this.initEvents(s),this.executeAction(["render","queryStatus"]))}initGraph(r){this.graph=new H.kJ(ri({width:1e3,height:800,panning:{enabled:!0,eventTypes:["leftMouseDown","mouseWheel"]},mousewheel:{enabled:!0,modifiers:"ctrl",factor:1.1,maxScale:1.5,minScale:.5},highlighting:{magnetAvailable:{name:"stroke",args:{attrs:{fill:"#fff",stroke:"#A4DEB1","stroke-width":4}}},magnetAdsorbed:{name:"stroke",args:{attrs:{fill:"#fff",stroke:"#31d0c6","stroke-width":4}}}},connecting:{snap:{radius:50},allowBlank:!1,allowLoop:!1,highlight:!0,connector:"dag-connector",connectionPoint:"anchor",anchor:"center",validateMagnet({magnet:o}){return o.getAttribute("port-group")!=="top"},validateConnection({sourceCell:o,targetCell:s,sourceMagnet:a,targetMagnet:u}){return kd(o,s,a,u,this.getEdges())},createEdge(){return this.createEdge({shape:"dag-edge",attrs:{line:{strokeDasharray:"5 5"}},zIndex:-1})}}},r))}initEvents(r="FULL"){this.graph&&(this.graph.on("node:click",({node:o})=>{const s=this.context.EventHub.getData();for(const a of s)a.onNodeClick&&a.onNodeClick(o)}),this.graph.on("blank:click",()=>{const o=this.context.EventHub.getData();for(const s of o)s.onBlankClick&&s.onBlankClick()}),this.graph.on("scale",()=>{if(this.graph){const o=this.context.EventHub.getData();for(const s of o)s.onGraphScale&&s.onGraphScale(this.graph.zoom())}}),this.graph.on("node:added",({node:o,options:s})=>{s.dry||this.executeAction("addNode",o)}),r!=="LITE"&&(this.graph.on("edge:removed",({edge:o})=>{const s=this.context.EventHub.getData();for(const a of s)a.onEdgeRemoved&&a.onEdgeRemoved(o)}),this.graph.on("edge:connected",({edge:o})=>{this.executeAction("addEdge",o);const s=this.context.EventHub.getData();for(const a of s)a.onEdgeConnected&&a.onEdgeConnected(o)}),this.graph.on("node:added",()=>{var o;(o=this.graph)==null||o.drawBackground()}),this.graph.on("node:moved",({node:o})=>{this.executeAction("moveNode",o)}),this.graph.on("selection:changed",({selected:o})=>{const s=this.context.EventHub.getData();for(const a of s)a.onSelectionChanged&&a.onSelectionChanged(o)}),this.graph.on("edge:mouseenter",({cell:o,e:s})=>{if(!this.graph)return;const u=o.findView(this.graph),{sourceAnchor:d,targetAnchor:g}=u,{clientX:p,clientY:m}=s,b=this.graph.clientToLocal(p,m);b.distance(d)<10||b.distance(g)<10||o.addTools([{name:"button-remove",args:{distance:.5,onClick:({view:w})=>{this.executeAction("removeCell",[],[w.cell.id])}}},{name:"source-arrowhead",args:{tagName:"circle",attrs:{r:4,fill:"#52c41a",stroke:"#52c41a"}}},{name:"target-arrowhead",args:{tagName:"circle",attrs:{r:4,fill:"#52c41a",stroke:"#52c41a"}}}])}),this.graph.on("edge:mouseleave",({cell:o})=>{o.removeTools()}),this.graph.on("edge:change:source",({edge:o,current:s})=>{const a=s;a&&a.cell&&a.port&&this.executeAction("updateEdge",o)}),this.graph.on("edge:change:target",({edge:o,current:s})=>{const a=s;a&&a.cell&&a.port&&this.executeAction("updateEdge",o)})))}executeAction(r,...o){return Je(this,null,function*(){const s=this.context.ActionHub.getData();for(const a of s)if(this.dagId){if(Array.isArray(r))r.includes(a.type)&&(yield a.handle(this.graph,this.dagId,...o));else if(r===a.type)return yield a.handle(this.graph,this.dagId,...o)}})}getActionInfo(r){const o=this.context.ActionHub.getData();for(const s of o)if(s.type===r)return{label:s.label,hotKey:s.hotKey};return null}cancelAction(r){const o=this.context.ActionHub.getData();for(const s of o)if(s.type===r&&s.cancel)return s.cancel()}cancelAllAction(){const r=this.context.ActionHub.getData();for(const o of r)o.cancel&&o.cancel()}getGraphInstance(){return this.graph}getSelectedCells(){return this.graph?this.graph.getSelectedCells():[]}dispose(){this.graph&&(this.graph.dispose(),this.context.dataService.close(),this.cancelAllAction(),this.graph=null,this.dagId=null)}},a0=class extends xn{queryStatus(n){return Je(this,null,function*(){return{nodeStatus:[{nodeId:"test-node-1",status:0},{nodeId:"test-node-2",status:1}],finished:!1}})}queryDag(n){return Je(this,null,function*(){return{nodes:[],edges:[]}})}saveDag(n,r){return Je(this,null,function*(){})}startRun(n,r){return Je(this,null,function*(){})}stopRun(n,r){return Je(this,null,function*(){})}continueRun(n,r){return Je(this,null,function*(){})}getMaxNodeIndex(n){return Je(this,null,function*(){return 2})}},c0=class extends xn{createPort(n,r){return Je(this,null,function*(){return[]})}createResult(n,r){return Je(this,null,function*(){return[]})}},l0=class extends xn{constructor(){super(...arguments);mt(this,"nodes",[]);mt(this,"edges",[])}fetch(){return Je(this,null,function*(){const{nodes:r,edges:o}=yield this.context.requestService.queryDag(this.context.dagId);return this.nodes=r,this.edges=o,{nodes:r,edges:o}})}get(){return{nodes:this.nodes,edges:this.edges}}getNodes(){return this.nodes}getEdges(){return this.edges}addNodes(r){return Je(this,null,function*(){this.nodes.push(...r),yield this.context.requestService.saveDag(this.context.dagId,{nodes:this.nodes,edges:this.edges})})}addEdges(r){return Je(this,null,function*(){this.edges.push(...r),yield this.context.requestService.saveDag(this.context.dagId,{nodes:this.nodes,edges:this.edges})})}removeNodesOrEdges(r,o){return Je(this,null,function*(){this.nodes=this.nodes.filter(s=>!r.includes(s.id)),this.edges=this.edges.filter(s=>!o.includes(s.id)),this.context.requestService.saveDag(this.context.dagId,{nodes:this.nodes,edges:this.edges})})}changeNode(r){return Je(this,null,function*(){r.forEach(({nodeId:o,meta:s})=>{const a=this.nodes.find(u=>u.id===o);a&&Object.keys(s).forEach(u=>{const d=u;a[d]=s[d]})}),this.context.requestService.saveDag(this.context.dagId,{nodes:this.nodes,edges:this.edges})})}changeEdge(r){return Je(this,null,function*(){r.forEach(({edgeId:o,meta:s})=>{const a=this.edges.find(u=>u.id===o);a&&Object.keys(s).forEach(u=>{const d=u;a[d]=s[d]})}),this.context.requestService.saveDag(this.context.dagId,{nodes:this.nodes,edges:this.edges})})}close(){this.nodes=[],this.edges=[]}},{Text:u0}=Pn.default,gC=n=>{var b,w;const{suffixCount:r,children:o,maxWidth:s,className:a,onClick:u,style:d,showTip:g=!0}=n;let p,m;return o&&(o==null?void 0:o.length)>r?(p=(b=o==null?void 0:o.slice(0,(o==null?void 0:o.length)-r))==null?void 0:b.trim(),m=(w=o==null?void 0:o.slice(-r))==null?void 0:w.trim()):(p=o,m=""),(0,ee.jsx)(u0,{onClick:u,className:a,style:Fs(ri({},d),{maxWidth:s,width:"100%",minWidth:`${r+2}em`}),ellipsis:{suffix:m,tooltip:g?(0,ee.jsx)("span",{children:o}):null},children:p})},pC=n=>{const r=n.split("-");if(r.length!==3)throw new Error("invalid node id");return{dagId:r[0],nodeNum:parseInt(r[2],10)}},{Paragraph:vC}=Pn.default,Fo=(n=>(n.success="success",n.error="error",n.default="default",n))(Fo||{}),h0=n=>{const{dagContext:r}=n,{id:o,status:s,outputs:a,codeName:u,showContinueRun:d}=n.data,{nodeNum:g}=pC(o);let p="",m="";return s===0?(p="\u6210\u529F",m="success"):s===2?(p="\u5931\u8D25",m="error"):s===1?p="\u6267\u884C\u4E2D":s===3?p="\u5DF2\u63D0\u4EA4":s===4?p="\u5DF2\u914D\u7F6E":s===5?p="\u5DF2\u505C\u6B62":s===6&&(p="\u5F85\u914D\u7F6E",m="default"),(0,ee.jsx)("div",{className:"description",children:(0,ee.jsxs)("div",{className:"bottom",children:[(0,ee.jsxs)("div",{className:"copy",children:[(0,ee.jsx)("span",{children:"\u7EC4\u4EF6ID\uFF1A"}),(0,ee.jsx)("span",{children:(0,ee.jsx)(vC,{copyable:{text:o,tooltips:["\u590D\u5236","\u590D\u5236\u6210\u529F"]},style:{marginBottom:0,color:"#000000a6",fontSize:12},children:g})})]}),(0,ee.jsxs)("div",{style:{marginBottom:"4px"},children:[(0,ee.jsx)("span",{children:"\u6267\u884C\u72B6\u6001\uFF1A"}),(0,ee.jsxs)("span",{children:[m&&(0,ee.jsx)(G_.Z,{status:Fo[m]}),(0,ee.jsx)("span",{style:{marginLeft:"4px"},children:p})]}),d&&(0,ee.jsx)("span",{children:(0,ee.jsx)(yC,ri({},n))})]}),s===0&&a&&(0,ee.jsxs)("div",{children:[(0,ee.jsx)("div",{style:{marginBottom:"4px"},children:"\u6267\u884C\u7ED3\u679C\uFF1A"}),a.map(b=>(0,ee.jsx)(mC,{output:b,codeName:u,dagContext:r},b.id))]})]})})},ti={table:{text:"\u8F93\u51FA\u8868",icon:(0,ee.jsx)(Gm.Z,{})},model:{text:"\u6A21\u578B",icon:(0,ee.jsx)(z_.Z,{})},rule:{text:"\u89C4\u5219",icon:(0,ee.jsx)(F_.Z,{})},report:{text:"\u62A5\u544A",icon:(0,ee.jsx)(In.Z,{})}},mC=n=>{var g,p;const{output:r,codeName:o,dagContext:s}=n,{name:a,type:u}=r,d=m=>{m.stopPropagation(),s.graphManager.executeAction("showResult",r.id,o)};return(0,ee.jsxs)("div",{className:"resultItem",onClick:d,children:[(g=ti[u])==null?void 0:g.icon,((p=ti[u])==null?void 0:p.text)&&(0,ee.jsxs)("span",{className:"title",children:[ti[u].text,"\uFF1A"]}),(0,ee.jsx)(jm.Z,{title:a,children:(0,ee.jsx)(gC,{className:"elllips",maxWidth:130,suffixCount:3,children:a})})]})},yC=n=>{const{dagContext:r}=n,{id:o}=n.data,s=a=>{a.stopPropagation(),r.graphManager.executeAction("continueRun",o),setTimeout(()=>{r.graphManager.executeAction("queryStatus",[])},1500)};return(0,ee.jsx)("span",{onClick:s,className:"continueRunBtn",children:"\u7EE7\u7EED\u6267\u884C"})},nu={default:(0,ee.jsx)(j_.Z,{style:{color:"#A1AABC"}}),stats:(0,ee.jsx)(V_.Z,{style:{color:"#A1AABC"}}),preprocessing:(0,ee.jsx)(Vm.Z,{style:{color:"#A1AABC"}}),feature:(0,ee.jsx)(Vm.Z,{style:{color:"#A1AABC"}}),control:(0,ee.jsx)(U_.Z,{style:{color:"#A1AABC"}}),"ml.train":(0,ee.jsx)(Td.Z,{style:{color:"#A1AABC"}}),"ml.eval":(0,ee.jsx)(Um.Z,{style:{color:"#A1AABC"}})},{Item:Go,Divider:d0}=Hi,rc=vt.createContext(!0),ru=n=>{const{node:r,graph:o}=n,s=Bd.get(o),a=s==null?void 0:s.graphManager,u=r.getData(),{id:d,status:g,label:p,codeName:m,styles:b}=u,w=Id[g],[C]=m.split("/"),{isOpaque:O=!1,isHighlighted:A=!1,isContinueRun:M=!1}=b||{},P=vt.useContext(rc),I=()=>{switch(g){case 0:return(0,ee.jsx)(rd.Z,{style:{color:"rgba(35,182,95,1)"}});case 2:return(0,ee.jsx)(Pl,{style:{color:"rgba(252,117,116,1)"}});case 5:return(0,ee.jsx)(rr.Z,{style:{color:"rgba(252,117,116,1)"}});case 1:return(0,ee.jsx)(No.Z,{style:{color:"#1890FF"},spin:!0});case 3:return null;default:return null}},N=F=>{const Z=["removeCell","copy"],ot=["runDown","runUp","runSingle"],nt=["continueRun"];Z.includes(F)?a.executeAction(F,[d]):ot.includes(F)?(a.executeAction(F,[d]),setTimeout(()=>{a.executeAction("queryStatus",[])},1500)):nt.includes(F)?(a.executeAction(F,d),setTimeout(()=>{a.executeAction("queryStatus",[])},1500)):a.executeAction(F,d)},R=P&&(u.status===5||u.status===2)&&M,z=()=>(0,ee.jsxs)(Hi,{hasIcon:!0,onClick:Z=>N(Z),children:[(0,ee.jsx)(Go,{name:"copy",icon:(0,ee.jsx)(As.Z,{}),hotkey:to.copyActionHotKey.text,text:"\u590D\u5236"}),(0,ee.jsx)(Go,{name:"removeCell",icon:(0,ee.jsx)(Nr.Z,{}),hotkey:to.removeCellActionHotKey.text,text:"\u5220\u9664"}),(0,ee.jsx)(d0,{}),(0,ee.jsx)(Go,{name:"runDown",icon:(0,ee.jsx)(Nl.Z,{}),hotkey:to.runDownActionHotKey.text,text:"\u4ECE\u6B64\u5904\u5F00\u59CB\u6267\u884C"}),(0,ee.jsx)(Go,{name:"runUp",icon:(0,ee.jsx)(rm.Z,{}),hotkey:to.runUpActionHotKey.text,text:"\u6267\u884C\u5230\u6B64\u5904"}),(0,ee.jsx)(Go,{name:"runSingle",icon:(0,ee.jsx)(jE,{}),hotkey:to.runSingleActionHotKey.text,text:"\u6267\u884C\u8282\u70B9"}),u.status===1&&(0,ee.jsx)(Go,{name:"stopRun",icon:(0,ee.jsx)(UE,{}),text:"\u505C\u6B62\u6267\u884C"}),R&&(0,ee.jsx)(Go,{name:"continueRun",icon:(0,ee.jsx)(No.Z,{}),text:"\u7EE7\u7EED\u6267\u884C"})]});return P?(0,ee.jsx)(Od,{overlay:z(),trigger:["contextMenu"],overlayStyle:{overflowY:"auto"},children:(0,ee.jsx)(Ad.Z,{trigger:"hover",content:(0,ee.jsx)(h0,{data:Fs(ri({},u),{showContinueRun:R}),dagContext:s}),placement:"bottom",arrow:!1,overlayClassName:"popover",overlayStyle:{width:258},destroyTooltipOnHide:!0,children:(0,ee.jsxs)("div",{className:Vr()(["dag-node",w]),children:[(0,ee.jsx)("span",{className:"icon",children:nu[C]||nu.default}),(0,ee.jsx)("span",{className:"label",children:p}),(0,ee.jsx)("span",{className:"status",children:I()})]})})}):(0,ee.jsx)(Ad.Z,{trigger:"hover",content:(0,ee.jsx)(h0,{data:Fs(ri({},u),{showContinueRun:R}),dagContext:s}),placement:"bottom",arrow:!1,overlayClassName:"popover",overlayStyle:{width:258},destroyTooltipOnHide:!0,children:(0,ee.jsxs)("div",{className:Vr()(["dag-node",w],{opaque:O},{hightlight:A}),children:[(0,ee.jsx)("span",{className:"icon",children:nu[C]||nu.default}),(0,ee.jsx)("span",{className:"label",children:p}),(0,ee.jsx)("span",{className:"status",children:I()})]})})};(0,on.z2)({shape:"dag-node",width:180,height:36,component:ru,effect:["data"],inherit:"react-shape",ports:{groups:{top:{position:"top",attrs:{circle:{r:4,magnet:!0,stroke:"#C2C8D5",strokeWidth:1,fill:"#fff"}}},bottom:{position:"bottom",markup:[{tagName:"circle",selector:"outer"},{tagName:"circle",selector:"inner"}],attrs:{outer:{r:10,magnet:!0,stroke:"transparent",fill:"transparent"},inner:{r:4,magnet:!0,stroke:"#C2C8D5",strokeWidth:1,fill:"#fff"}}}}}}),H.kJ.registerEdge("dag-edge",{inherit:"edge",attrs:{line:{stroke:"#C2C8D5",strokeWidth:1,targetMarker:null}},zIndex:-1},!0),H.kJ.registerConnector("dag-connector",(n,r)=>{const s=Math.abs(r.y-n.y),a=Math.floor(s/3*2),u={x:n.x,y:n.y+4+a},d={x:r.x,y:r.y-4-a};return H.y$.normalize(`M ${n.x} ${n.y}
     L ${n.x} ${n.y+4}
     C ${u.x} ${u.y} ${d.x} ${d.y} ${r.x} ${r.y-4}
     L ${r.x} ${r.y}
    `)},!0);var Bd=new WeakMap,zd=class{constructor(){mt(this,"dagId","");mt(this,"requestService",new a0(this));mt(this,"hookService",new c0(this));mt(this,"dataService",new l0(this));mt(this,"graphManager",new s0(this));mt(this,"ActionHub",(0,Md.pd)());mt(this,"EventHub",(0,Md.pd)());ec.forEach(n=>{this.ActionHub.register(new n(this))})}init(n,r,o="FULL",...s){this.dagId=n,this.graphManager.init(n,r,o,...s),this.graphManager.graph&&Bd.set(this.graphManager.graph,this)}addActions(n){n.forEach(r=>{this.ActionHub.register(nc(r,this))})}addGraphEvents(n){this.EventHub.register(n)}dispose(){this.graphManager.graph&&Bd.delete(this.graphManager.graph),this.graphManager.dispose()}}},14258:function(wt,yt,k){"use strict";k.d(yt,{Q5:function(){return dt},pd:function(){return Pt}});var rt=class{constructor(){mt(this,"awaitable");mt(this,"setResult");mt(this,"setException");mt(this,"_status","pending");mt(this,"done",()=>this._status!=="pending");mt(this,"fulfill",xt=>{this.setResult(xt),this.status="fulfilled"});mt(this,"reject",xt=>{this.setException(xt),this.status="rejected"});mt(this,"then");mt(this,"catch");mt(this,"finally");this.awaitable=new Promise((xt,Ct)=>{this.setResult=xt,this.setException=Ct}),this.then=this.awaitable.then.bind(this.awaitable),this.catch=this.awaitable.catch.bind(this.awaitable),this.finally=this.awaitable.finally.bind(this.awaitable)}get status(){return this._status}set status(xt){this.done()||(this._status=xt)}get[Symbol.toStringTag](){return`[Future ${this._status}]`}},dt=class{constructor(){mt(this,"eventHandlers",[]);mt(this,"on",xt=>{this.eventHandlers.push(xt)});mt(this,"fire",xt=>{this.eventHandlers.forEach(Ct=>{Ct(xt)})})}dispose(){this.eventHandlers=[]}},H=class{constructor(){mt(this,"data",new Set);mt(this,"getData",()=>[...this.data])}register(xt){this.data.has(xt)||this.data.add(xt)}unRegister(xt){this.data.has(xt)&&this.data.delete(xt)}};function Pt(){return new H}},49423:function(wt,yt,k){var rt=k(73251).default;function dt(){"use strict";wt.exports=dt=function(){return Pt},wt.exports.__esModule=!0,wt.exports.default=wt.exports;var H,Pt={},xt=Object.prototype,Ct=xt.hasOwnProperty,St=Object.defineProperty||function(Et,ht,Y){Et[ht]=Y.value},Bt=typeof Symbol=="function"?Symbol:{},Zt=Bt.iterator||"@@iterator",Ut=Bt.asyncIterator||"@@asyncIterator",Ft=Bt.toStringTag||"@@toStringTag";function J(Et,ht,Y){return Object.defineProperty(Et,ht,{value:Y,enumerable:!0,configurable:!0,writable:!0}),Et[ht]}try{J({},"")}catch(Et){J=function(Y,tt,ft){return Y[tt]=ft}}function Ot(Et,ht,Y,tt){var ft=ht&&ht.prototype instanceof de?ht:de,ut=Object.create(ft.prototype),gt=new Ue(tt||[]);return St(ut,"_invoke",{value:oe(Et,Y,gt)}),ut}function Rt(Et,ht,Y){try{return{type:"normal",arg:Et.call(ht,Y)}}catch(tt){return{type:"throw",arg:tt}}}Pt.wrap=Ot;var Mt="suspendedStart",Nt="suspendedYield",zt="executing",De="completed",Fe={};function de(){}function Ne(){}function xe(){}var Lt={};J(Lt,Zt,function(){return this});var Q=Object.getPrototypeOf,bt=Q&&Q(Q(ke([])));bt&&bt!==xt&&Ct.call(bt,Zt)&&(Lt=bt);var Ht=xe.prototype=de.prototype=Object.create(Lt);function le(Et){["next","throw","return"].forEach(function(ht){J(Et,ht,function(Y){return this._invoke(ht,Y)})})}function qt(Et,ht){function Y(ft,ut,gt,Jt){var se=Rt(Et[ft],Et,ut);if(se.type!=="throw"){var fe=se.arg,ge=fe.value;return ge&&rt(ge)=="object"&&Ct.call(ge,"__await")?ht.resolve(ge.__await).then(function(me){Y("next",me,gt,Jt)},function(me){Y("throw",me,gt,Jt)}):ht.resolve(ge).then(function(me){fe.value=me,gt(fe)},function(me){return Y("throw",me,gt,Jt)})}Jt(se.arg)}var tt;St(this,"_invoke",{value:function(ut,gt){function Jt(){return new ht(function(se,fe){Y(ut,gt,se,fe)})}return tt=tt?tt.then(Jt,Jt):Jt()}})}function oe(Et,ht,Y){var tt=Mt;return function(ft,ut){if(tt===zt)throw new Error("Generator is already running");if(tt===De){if(ft==="throw")throw ut;return{value:H,done:!0}}for(Y.method=ft,Y.arg=ut;;){var gt=Y.delegate;if(gt){var Jt=Re(gt,Y);if(Jt){if(Jt===Fe)continue;return Jt}}if(Y.method==="next")Y.sent=Y._sent=Y.arg;else if(Y.method==="throw"){if(tt===Mt)throw tt=De,Y.arg;Y.dispatchException(Y.arg)}else Y.method==="return"&&Y.abrupt("return",Y.arg);tt=zt;var se=Rt(Et,ht,Y);if(se.type==="normal"){if(tt=Y.done?De:Nt,se.arg===Fe)continue;return{value:se.arg,done:Y.done}}se.type==="throw"&&(tt=De,Y.method="throw",Y.arg=se.arg)}}}function Re(Et,ht){var Y=ht.method,tt=Et.iterator[Y];if(tt===H)return ht.delegate=null,Y==="throw"&&Et.iterator.return&&(ht.method="return",ht.arg=H,Re(Et,ht),ht.method==="throw")||Y!=="return"&&(ht.method="throw",ht.arg=new TypeError("The iterator does not provide a '"+Y+"' method")),Fe;var ft=Rt(tt,Et.iterator,ht.arg);if(ft.type==="throw")return ht.method="throw",ht.arg=ft.arg,ht.delegate=null,Fe;var ut=ft.arg;return ut?ut.done?(ht[Et.resultName]=ut.value,ht.next=Et.nextLoc,ht.method!=="return"&&(ht.method="next",ht.arg=H),ht.delegate=null,Fe):ut:(ht.method="throw",ht.arg=new TypeError("iterator result is not an object"),ht.delegate=null,Fe)}function ye(Et){var ht={tryLoc:Et[0]};1 in Et&&(ht.catchLoc=Et[1]),2 in Et&&(ht.finallyLoc=Et[2],ht.afterLoc=Et[3]),this.tryEntries.push(ht)}function Ve(Et){var ht=Et.completion||{};ht.type="normal",delete ht.arg,Et.completion=ht}function Ue(Et){this.tryEntries=[{tryLoc:"root"}],Et.forEach(ye,this),this.reset(!0)}function ke(Et){if(Et||Et===""){var ht=Et[Zt];if(ht)return ht.call(Et);if(typeof Et.next=="function")return Et;if(!isNaN(Et.length)){var Y=-1,tt=function ft(){for(;++Y<Et.length;)if(Ct.call(Et,Y))return ft.value=Et[Y],ft.done=!1,ft;return ft.value=H,ft.done=!0,ft};return tt.next=tt}}throw new TypeError(rt(Et)+" is not iterable")}return Ne.prototype=xe,St(Ht,"constructor",{value:xe,configurable:!0}),St(xe,"constructor",{value:Ne,configurable:!0}),Ne.displayName=J(xe,Ft,"GeneratorFunction"),Pt.isGeneratorFunction=function(Et){var ht=typeof Et=="function"&&Et.constructor;return!!ht&&(ht===Ne||(ht.displayName||ht.name)==="GeneratorFunction")},Pt.mark=function(Et){return Object.setPrototypeOf?Object.setPrototypeOf(Et,xe):(Et.__proto__=xe,J(Et,Ft,"GeneratorFunction")),Et.prototype=Object.create(Ht),Et},Pt.awrap=function(Et){return{__await:Et}},le(qt.prototype),J(qt.prototype,Ut,function(){return this}),Pt.AsyncIterator=qt,Pt.async=function(Et,ht,Y,tt,ft){ft===void 0&&(ft=Promise);var ut=new qt(Ot(Et,ht,Y,tt),ft);return Pt.isGeneratorFunction(ht)?ut:ut.next().then(function(gt){return gt.done?gt.value:ut.next()})},le(Ht),J(Ht,Ft,"Generator"),J(Ht,Zt,function(){return this}),J(Ht,"toString",function(){return"[object Generator]"}),Pt.keys=function(Et){var ht=Object(Et),Y=[];for(var tt in ht)Y.push(tt);return Y.reverse(),function ft(){for(;Y.length;){var ut=Y.pop();if(ut in ht)return ft.value=ut,ft.done=!1,ft}return ft.done=!0,ft}},Pt.values=ke,Ue.prototype={constructor:Ue,reset:function(ht){if(this.prev=0,this.next=0,this.sent=this._sent=H,this.done=!1,this.delegate=null,this.method="next",this.arg=H,this.tryEntries.forEach(Ve),!ht)for(var Y in this)Y.charAt(0)==="t"&&Ct.call(this,Y)&&!isNaN(+Y.slice(1))&&(this[Y]=H)},stop:function(){this.done=!0;var ht=this.tryEntries[0].completion;if(ht.type==="throw")throw ht.arg;return this.rval},dispatchException:function(ht){if(this.done)throw ht;var Y=this;function tt(fe,ge){return gt.type="throw",gt.arg=ht,Y.next=fe,ge&&(Y.method="next",Y.arg=H),!!ge}for(var ft=this.tryEntries.length-1;ft>=0;--ft){var ut=this.tryEntries[ft],gt=ut.completion;if(ut.tryLoc==="root")return tt("end");if(ut.tryLoc<=this.prev){var Jt=Ct.call(ut,"catchLoc"),se=Ct.call(ut,"finallyLoc");if(Jt&&se){if(this.prev<ut.catchLoc)return tt(ut.catchLoc,!0);if(this.prev<ut.finallyLoc)return tt(ut.finallyLoc)}else if(Jt){if(this.prev<ut.catchLoc)return tt(ut.catchLoc,!0)}else{if(!se)throw new Error("try statement without catch or finally");if(this.prev<ut.finallyLoc)return tt(ut.finallyLoc)}}}},abrupt:function(ht,Y){for(var tt=this.tryEntries.length-1;tt>=0;--tt){var ft=this.tryEntries[tt];if(ft.tryLoc<=this.prev&&Ct.call(ft,"finallyLoc")&&this.prev<ft.finallyLoc){var ut=ft;break}}ut&&(ht==="break"||ht==="continue")&&ut.tryLoc<=Y&&Y<=ut.finallyLoc&&(ut=null);var gt=ut?ut.completion:{};return gt.type=ht,gt.arg=Y,ut?(this.method="next",this.next=ut.finallyLoc,Fe):this.complete(gt)},complete:function(ht,Y){if(ht.type==="throw")throw ht.arg;return ht.type==="break"||ht.type==="continue"?this.next=ht.arg:ht.type==="return"?(this.rval=this.arg=ht.arg,this.method="return",this.next="end"):ht.type==="normal"&&Y&&(this.next=Y),Fe},finish:function(ht){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var tt=this.tryEntries[Y];if(tt.finallyLoc===ht)return this.complete(tt.completion,tt.afterLoc),Ve(tt),Fe}},catch:function(ht){for(var Y=this.tryEntries.length-1;Y>=0;--Y){var tt=this.tryEntries[Y];if(tt.tryLoc===ht){var ft=tt.completion;if(ft.type==="throw"){var ut=ft.arg;Ve(tt)}return ut}}throw new Error("illegal catch attempt")},delegateYield:function(ht,Y,tt){return this.delegate={iterator:ke(ht),resultName:Y,nextLoc:tt},this.method==="next"&&(this.arg=H),Fe}},Pt}wt.exports=dt,wt.exports.__esModule=!0,wt.exports.default=wt.exports},73251:function(wt){function yt(k){"@babel/helpers - typeof";return wt.exports=yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(rt){return typeof rt}:function(rt){return rt&&typeof Symbol=="function"&&rt.constructor===Symbol&&rt!==Symbol.prototype?"symbol":typeof rt},wt.exports.__esModule=!0,wt.exports.default=wt.exports,yt(k)}wt.exports=yt,wt.exports.__esModule=!0,wt.exports.default=wt.exports},66544:function(wt,yt,k){var rt=k(49423)();wt.exports=rt;try{regeneratorRuntime=rt}catch(dt){typeof globalThis=="object"?globalThis.regeneratorRuntime=rt:Function("r","regeneratorRuntime = r")(rt)}}}]);
}());